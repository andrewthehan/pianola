/*! For license information please see 2.2057edb6.chunk.js.LICENSE.txt */
(this.webpackJsonppianola=this.webpackJsonppianola||[]).push([[2],[function(t,e,n){var s=n(60).default,i=n(62).default;const r=["offset"],o=["curve","oversample"],a=["coneInnerAngle","coneOuterAngle","coneOuterGain","distanceModel","maxDistance","orientationX","orientationY","orientationZ","panningModel","positionX","positionY","positionZ","refDistance","rolloffFactor"],l=["channelCount","channelCountMode","pan"];var u;"undefined"!=typeof self&&self,u=()=>(()=>{var t={382:function(t,e,n){!function(t,e,n,s){"use strict";var i=function(t,e,n){return{endTime:e,insertTime:n,type:"exponentialRampToValue",value:t}},r=function(t,e,n){return{endTime:e,insertTime:n,type:"linearRampToValue",value:t}},o=function(t,e){return{startTime:e,type:"setValue",value:t}},a=function(t,e,n){return{duration:n,startTime:e,type:"setValueCurve",values:t}},l=function(t,e,n){var s=n.startTime,i=n.target,r=n.timeConstant;return i+(e-i)*Math.exp((s-t)/r)},u=function(t){return"exponentialRampToValue"===t.type},c=function(t){return"linearRampToValue"===t.type},h=function(t){return u(t)||c(t)},d=function(t){return"setValue"===t.type},f=function(t){return"setValueCurve"===t.type},p=function t(e,n,s,i){var r=e[n];return void 0===r?i:h(r)||d(r)?r.value:f(r)?r.values[r.values.length-1]:l(s,t(e,n-1,r.startTime,i),r)},m=function(t,e,n,s,i){return void 0===n?[s.insertTime,i]:h(n)?[n.endTime,n.value]:d(n)?[n.startTime,n.value]:f(n)?[n.startTime+n.duration,n.values[n.values.length-1]]:[n.startTime,p(t,e-1,n.startTime,i)]},g=function(t){return"cancelAndHold"===t.type},_=function(t){return"cancelScheduledValues"===t.type},v=function(t){return g(t)||_(t)?t.cancelTime:u(t)||c(t)?t.endTime:t.startTime},y=function(t,e,n,s){var i=s.endTime,r=s.value;return n===r?r:0<n&&0<r||n<0&&r<0?n*Math.pow(r/n,(t-e)/(i-e)):0},b=function(t,e,n,s){return n+(t-e)/(s.endTime-e)*(s.value-n)},w=function(t){return"setTarget"===t.type},x=s((function t(e){n(this,t),this._automationEvents=[],this._currenTime=0,this._defaultValue=e}),[{key:Symbol.iterator,value:function(){return this._automationEvents[Symbol.iterator]()}},{key:"add",value:function(t){var e=v(t);if(g(t)||_(t)){var n=this._automationEvents.findIndex((function(n){return _(t)&&f(n)?n.startTime+n.duration>=e:v(n)>=e})),s=this._automationEvents[n];if(-1!==n&&(this._automationEvents=this._automationEvents.slice(0,n)),g(t)){var l=this._automationEvents[this._automationEvents.length-1];if(void 0!==s&&h(s)){if(void 0!==l&&w(l))throw new Error("The internal list is malformed.");var d=void 0===l?s.insertTime:f(l)?l.startTime+l.duration:v(l),p=void 0===l?this._defaultValue:f(l)?l.values[l.values.length-1]:l.value,m=u(s)?y(e,d,p,s):b(e,d,p,s),x=u(s)?i(m,e,this._currenTime):r(m,e,this._currenTime);this._automationEvents.push(x)}if(void 0!==l&&w(l)&&this._automationEvents.push(o(this.getValue(e),e)),void 0!==l&&f(l)&&l.startTime+l.duration>e){var S=e-l.startTime,T=(l.values.length-1)/l.duration,E=Math.max(2,1+Math.ceil(S*T)),k=S/(E-1)*T,A=l.values.slice(0,E);if(k<1)for(var O=1;O<E;O+=1){var C=k*O%1;A[O]=l.values[O-1]*(1-C)+l.values[O]*C}this._automationEvents[this._automationEvents.length-1]=a(A,l.startTime,S)}}}else{var M=this._automationEvents.findIndex((function(t){return v(t)>e})),I=-1===M?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[M-1];if(void 0!==I&&f(I)&&v(I)+I.duration>e)return!1;var D=u(t)?i(t.value,t.endTime,this._currenTime):c(t)?r(t.value,e,this._currenTime):t;if(-1===M)this._automationEvents.push(D);else{if(f(t)&&e+t.duration>v(this._automationEvents[M]))return!1;this._automationEvents.splice(M,0,D)}}return!0}},{key:"flush",value:function(t){var e=this._automationEvents.findIndex((function(e){return v(e)>t}));if(e>1){var n=this._automationEvents.slice(e-1),s=n[0];w(s)&&n.unshift(o(p(this._automationEvents,e-2,s.startTime,this._defaultValue),s.startTime)),this._automationEvents=n}}},{key:"getValue",value:function(t){if(0===this._automationEvents.length)return this._defaultValue;var n=this._automationEvents.findIndex((function(e){return v(e)>t})),s=this._automationEvents[n],i=(-1===n?this._automationEvents.length:n)-1,r=this._automationEvents[i];if(void 0!==r&&w(r)&&(void 0===s||!h(s)||s.insertTime>t))return l(t,p(this._automationEvents,i-1,r.startTime,this._defaultValue),r);if(void 0!==r&&d(r)&&(void 0===s||!h(s)))return r.value;if(void 0!==r&&f(r)&&(void 0===s||!h(s)||r.startTime+r.duration>t))return t<r.startTime+r.duration?function(t,e){var n=e.duration,s=e.startTime,i=e.values;return function(t,e){var n=Math.floor(e),s=Math.ceil(e);return n===s?t[n]:(1-(e-n))*t[n]+(1-(s-e))*t[s]}(i,(t-s)/n*(i.length-1))}(t,r):r.values[r.values.length-1];if(void 0!==r&&h(r)&&(void 0===s||!h(s)))return r.value;if(void 0!==s&&u(s)){var o=m(this._automationEvents,i,r,s,this._defaultValue),a=e(o,2),g=a[0],_=a[1];return y(t,g,_,s)}if(void 0!==s&&c(s)){var x=m(this._automationEvents,i,r,s,this._defaultValue),S=e(x,2),T=S[0],E=S[1];return b(t,T,E,s)}return this._defaultValue}}]);t.AutomationEventList=x,t.createCancelAndHoldAutomationEvent=function(t){return{cancelTime:t,type:"cancelAndHold"}},t.createCancelScheduledValuesAutomationEvent=function(t){return{cancelTime:t,type:"cancelScheduledValues"}},t.createExponentialRampToValueAutomationEvent=function(t,e){return{endTime:e,type:"exponentialRampToValue",value:t}},t.createLinearRampToValueAutomationEvent=function(t,e){return{endTime:e,type:"linearRampToValue",value:t}},t.createSetTargetAutomationEvent=function(t,e,n){return{startTime:e,target:t,timeConstant:n,type:"setTarget"}},t.createSetValueAutomationEvent=o,t.createSetValueCurveAutomationEvent=a}(e,n(424),n(690),n(728))},897:t=>{t.exports=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,s=new Array(e);n<e;n++)s[n]=t[n];return s},t.exports.__esModule=!0,t.exports.default=t.exports},372:t=>{t.exports=function(t){if(Array.isArray(t))return t},t.exports.__esModule=!0,t.exports.default=t.exports},690:t=>{t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},t.exports.__esModule=!0,t.exports.default=t.exports},728:(t,e,n)=>{var s=n(62);function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,s(i.key),i)}}t.exports=function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t},t.exports.__esModule=!0,t.exports.default=t.exports},872:t=>{t.exports=function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var s,i,r,o,a=[],l=!0,u=!1;try{if(r=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(s=r.call(n)).done)&&(a.push(s.value),a.length!==e);l=!0);}catch(t){u=!0,i=t}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return a}},t.exports.__esModule=!0,t.exports.default=t.exports},218:t=>{t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.__esModule=!0,t.exports.default=t.exports},424:(t,e,n)=>{var s=n(372),i=n(872),r=n(116),o=n(218);t.exports=function(t,e){return s(t)||i(t,e)||r(t,e)||o()},t.exports.__esModule=!0,t.exports.default=t.exports},36:(t,e,n)=>{var s=n(698).default;t.exports=function(t,e){if("object"!=s(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=s(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)},t.exports.__esModule=!0,t.exports.default=t.exports},62:(t,e,n)=>{var s=n(698).default,i=n(36);t.exports=function(t){var e=i(t,"string");return"symbol"==s(e)?e:e+""},t.exports.__esModule=!0,t.exports.default=t.exports},698:t=>{function e(n){return t.exports=e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.__esModule=!0,t.exports.default=t.exports,e(n)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports},116:(t,e,n)=>{var s=n(897);t.exports=function(t,e){if(t){if("string"==typeof t)return s(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(t,e):void 0}},t.exports.__esModule=!0,t.exports.default=t.exports}},e={};function n(s){var i=e[s];if(void 0!==i)return i.exports;var r=e[s]={exports:{}};return t[s].call(r.exports,r,r.exports,n),r.exports}n.d=(t,e)=>{for(var s in e)n.o(e,s)&&!n.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var u={};return(()=>{"use strict";n.r(u),n.d(u,{AMOscillator:()=>Jr,AMSynth:()=>Io,Abs:()=>go,Add:()=>oo,AmplitudeEnvelope:()=>Oo,Analyser:()=>$a,AudioToGain:()=>Kr,AutoFilter:()=>ma,AutoPanner:()=>_a,AutoWah:()=>ya,BaseContext:()=>Ii,BiquadFilter:()=>Do,BitCrusher:()=>wa,Buffer:()=>Dl,BufferSource:()=>Nl,Buffers:()=>Rl,Channel:()=>ol,Chebyshev:()=>Sa,Chorus:()=>Oa,Clock:()=>wr,Compressor:()=>dl,Context:()=>Di,Convolver:()=>vl,CrossFade:()=>da,DCMeter:()=>nl,Delay:()=>xr,Destination:()=>Sl,Distortion:()=>Ca,Draw:()=>Ol,DuoSynth:()=>Lo,EQ3:()=>_l,Emitter:()=>Mi,Envelope:()=>To,FFT:()=>el,FMOscillator:()=>to,FMSynth:()=>Fo,FatOscillator:()=>no,FeedbackCombFilter:()=>Qo,FeedbackDelay:()=>Ia,Filter:()=>Ro,Follower:()=>va,Freeverb:()=>La,Frequency:()=>nr,FrequencyClass:()=>Ji,FrequencyEnvelope:()=>No,FrequencyShifter:()=>Ra,Gain:()=>fr,GainToAudio:()=>_o,Gate:()=>fl,GrainPlayer:()=>mo,GreaterThan:()=>wo,GreaterThanZero:()=>bo,IntervalTimeline:()=>Mr,JCReverb:()=>ja,LFO:()=>uo,Limiter:()=>pl,Listener:()=>kl,Loop:()=>ta,LowpassCombFilter:()=>Xo,Master:()=>Tl,MembraneSynth:()=>jo,Merge:()=>Ea,MetalSynth:()=>Vo,Meter:()=>tl,MidSideCompressor:()=>ml,MidSideMerge:()=>Qa,MidSideSplit:()=>Wa,Midi:()=>kr,MidiClass:()=>Er,Mono:()=>al,MonoSynth:()=>Po,MultibandCompressor:()=>gl,MultibandSplit:()=>ll,Multiply:()=>$r,Negate:()=>vo,Noise:()=>Br,NoiseSynth:()=>Uo,Offline:()=>Sr,OfflineContext:()=>Fi,OmniOscillator:()=>ro,OnePoleFilter:()=>Yo,Oscillator:()=>Zr,PWMOscillator:()=>so,PanVol:()=>rl,Panner:()=>ga,Panner3D:()=>cl,Param:()=>ar,Part:()=>ea,Pattern:()=>ca,Phaser:()=>Ha,PingPongDelay:()=>za,PitchShift:()=>Ba,Player:()=>fo,Players:()=>po,PluckSynth:()=>Zo,PolySynth:()=>Ko,Pow:()=>Fr,PulseOscillator:()=>eo,Recorder:()=>hl,Reverb:()=>Ga,Sampler:()=>$o,Scale:()=>ao,ScaleExp:()=>xo,Sequence:()=>ha,Signal:()=>gr,Solo:()=>il,Split:()=>Ta,StateTimeline:()=>or,StereoWidener:()=>Xa,Subtract:()=>yo,SyncedSignal:()=>So,Synth:()=>Co,Ticks:()=>Or,TicksClass:()=>Ar,Time:()=>$i,TimeClass:()=>Ki,Timeline:()=>Ei,ToneAudioBuffer:()=>Li,ToneAudioBuffers:()=>Tr,ToneAudioNode:()=>lr,ToneBufferSource:()=>zr,ToneEvent:()=>Jo,ToneOscillatorNode:()=>Xr,Transport:()=>wl,TransportTime:()=>ir,TransportTimeClass:()=>sr,Tremolo:()=>Za,Unit:()=>e,UserMedia:()=>Qr,Vibrato:()=>Ka,Volume:()=>Dr,WaveShaper:()=>Lr,Waveform:()=>sl,Zero:()=>lo,connect:()=>cr,connectSeries:()=>ur,connectSignal:()=>_r,context:()=>Ml,dbToGain:()=>Bi,debug:()=>t,defaultArg:()=>gi,disconnect:()=>hr,fanIn:()=>dr,ftom:()=>Qi,gainToDb:()=>Hi,getContext:()=>ji,getDestination:()=>El,getDraw:()=>Cl,getListener:()=>Al,getTransport:()=>xl,immediate:()=>bl,intervalToFrequencyRatio:()=>Gi,isArray:()=>Hs,isBoolean:()=>Bs,isDefined:()=>Vs,isFunction:()=>js,isNote:()=>Ws,isNumber:()=>Us,isObject:()=>zs,isString:()=>Gs,isUndef:()=>qs,loaded:()=>Il,mtof:()=>Xi,now:()=>yl,optionsFromArguments:()=>mi,setContext:()=>Ui,start:()=>zi,supported:()=>Fs,version:()=>c});var t={};n.r(t),n.d(t,{assert:()=>Qs,assertContextRunning:()=>Xs,assertRange:()=>Ys,assertUsedScheduleTime:()=>Js,enterScheduledCallback:()=>$s,log:()=>ni,setLogger:()=>ei,warn:()=>si});var e={};n.r(e);const c="14.9.17";var h=n(382);const d=new WeakSet,f=new WeakMap,p=new WeakMap,m=new WeakMap,g=new WeakMap,_=new WeakMap,v=new WeakMap,y=new WeakMap,b=new WeakMap,w=new WeakMap,x={construct:()=>x},S=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,T=(t,e)=>{const n=[];let s=t.replace(/^[\s]+/,""),i=s.match(S);for(;null!==i;){const t=i[1].slice(1,-1),r=i[0].replace(/([\s]+)?;?$/,"").replace(t,new URL(t,e).toString());n.push(r),s=s.slice(i[0].length).replace(/^[\s]+/,""),i=s.match(S)}return[n.join(";"),s]},E=t=>{if(void 0!==t&&!Array.isArray(t))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},k=t=>{if(!(t=>{try{new new Proxy(t,x)}catch(e){return!1}return!0})(t))throw new TypeError("The given value for processorCtor should be a constructor.");if(null===t.prototype||"object"!=typeof t.prototype)throw new TypeError("The given value for processorCtor should have a prototype.")},A=(t,e)=>{const n=t.get(e);if(void 0===n)throw new Error("A value with the given key could not be found.");return n},O=(t,e)=>{const n=Array.from(t).filter(e);if(n.length>1)throw Error("More than one element was found.");if(0===n.length)throw Error("No element was found.");const[s]=n;return t.delete(s),s},C=(t,e,n,s)=>{const i=A(t,e),r=O(i,(t=>t[0]===n&&t[1]===s));return 0===i.size&&t.delete(e),r},M=t=>A(v,t),I=t=>{if(d.has(t))throw new Error("The AudioNode is already stored.");d.add(t),M(t).forEach((t=>t(!0)))},D=t=>"port"in t,R=t=>{if(!d.has(t))throw new Error("The AudioNode is not stored.");d.delete(t),M(t).forEach((t=>t(!1)))},N=(t,e)=>{!D(t)&&e.every((t=>0===t.size))&&R(t)},P={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},L=(t,e)=>t.context===e,F=t=>{try{t.copyToChannel(new Float32Array(1),0,-1)}catch(e){return!1}return!0},q=()=>new DOMException("","IndexSizeError"),V=t=>{var e;t.getChannelData=(e=t.getChannelData,n=>{try{return e.call(t,n)}catch(t){if(12===t.code)throw q();throw t}})},j={numberOfChannels:1},U=-34028234663852886e22,z=-U,B=t=>d.has(t),H={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},G=t=>A(f,t),W=t=>A(m,t),Q=(t,e)=>{const{activeInputs:n}=G(t);n.forEach((n=>n.forEach((n=>{let[s]=n;e.includes(t)||Q(s,[...e,t])}))));const s=(t=>"playbackRate"in t)(t)?[t.playbackRate]:D(t)?Array.from(t.parameters.values()):(t=>"frequency"in t&&"gain"in t)(t)?[t.Q,t.detune,t.frequency,t.gain]:(t=>"offset"in t)(t)?[t.offset]:(t=>!("frequency"in t)&&"gain"in t)(t)?[t.gain]:(t=>"detune"in t&&"frequency"in t)(t)?[t.detune,t.frequency]:(t=>"pan"in t)(t)?[t.pan]:[];for(const i of s){const t=W(i);void 0!==t&&t.activeInputs.forEach((t=>{let[n]=t;return Q(n,e)}))}B(t)&&R(t)},Y=t=>{Q(t.destination,[])},X=t=>"context"in t,Z=t=>X(t[0]),K=(t,e,n,s)=>{for(const i of t)if(n(i)){if(s)return!1;throw Error("The set contains at least one similar element.")}return t.add(e),!0},$=(t,e,n,s)=>{let[i,r]=n;K(t,[e,i,r],(t=>t[0]===e&&t[1]===i),s)},J=(t,e,n)=>{let[s,i,r]=e;const o=t.get(s);void 0===o?t.set(s,new Set([[i,r]])):K(o,[i,r],(t=>t[0]===i),n)},tt=t=>"inputs"in t,et=(t,e,n,s)=>{if(tt(e)){const i=e.inputs[s];return t.connect(i,n,0),[i,n,0]}return t.connect(e,n,s),[e,n,s]},nt=(t,e,n)=>{for(const s of t)if(s[0]===e&&s[1]===n)return t.delete(s),s;return null},st=(t,e)=>{if(!M(t).delete(e))throw new Error("Missing the expected event listener.")},it=(t,e,n)=>{const s=A(t,e),i=O(s,(t=>t[0]===n));return 0===s.size&&t.delete(e),i},rt=(t,e,n,s)=>{tt(e)?t.disconnect(e.inputs[s],n,0):t.disconnect(e,n,s)},ot=t=>A(p,t),at=t=>A(g,t),lt=t=>y.has(t),ut=t=>!d.has(t),ct=(t,e)=>new Promise((n=>{if(null!==e)n(!0);else{const e=t.createScriptProcessor(256,1,1),s=t.createGain(),i=t.createBuffer(1,2,44100),r=i.getChannelData(0);r[0]=1,r[1]=1;const o=t.createBufferSource();o.buffer=i,o.loop=!0,o.connect(e).connect(t.destination),o.connect(s),o.disconnect(s),e.onaudioprocess=s=>{const i=s.inputBuffer.getChannelData(0);Array.prototype.some.call(i,(t=>1===t))?n(!0):n(!1),o.stop(),e.onaudioprocess=null,o.disconnect(e),e.disconnect(t.destination)},o.start()}})),ht=(t,e)=>{const n=new Map;for(const s of t)for(const t of s){const e=n.get(t);n.set(t,void 0===e?1:e+1)}n.forEach(((t,n)=>e(n,t)))},dt=t=>"context"in t,ft=(t,e,n,s,i)=>{const[r,o]=((t,e,n,s)=>{const{activeInputs:i,passiveInputs:r}=G(e),o=nt(i[s],t,n);return null===o?[C(r,t,n,s)[2],!1]:[o[2],!0]})(t,n,s,i);if(null!==r&&(st(t,r),!o||e||lt(t)||rt(ot(t),ot(n),s,i)),B(n)){const{activeInputs:t}=G(n);N(n,t)}},pt=(t,e,n,s)=>{const[i,r]=((t,e,n)=>{const{activeInputs:s,passiveInputs:i}=W(e),r=nt(s,t,n);return null===r?[it(i,t,n)[1],!1]:[r[2],!0]})(t,n,s);null!==i&&(st(t,i),!r||e||lt(t)||ot(t).disconnect(at(n),s))};class mt{constructor(t){this._map=new Map(t)}get size(){return this._map.size}entries(){return this._map.entries()}forEach(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._map.forEach(((n,s)=>t.call(e,n,s,this)))}get(t){return this._map.get(t)}has(t){return this._map.has(t)}keys(){return this._map.keys()}values(){return this._map.values()}}const gt={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,parameterData:{},processorOptions:{}};function _t(t,e,n,s,i){if("function"==typeof t.copyFromChannel)0===e[n].byteLength&&(e[n]=new Float32Array(128)),t.copyFromChannel(e[n],s,i);else{const r=t.getChannelData(s);if(0===e[n].byteLength)e[n]=r.slice(i,i+128);else{const t=new Float32Array(r.buffer,i*Float32Array.BYTES_PER_ELEMENT,128);e[n].set(t)}}}const vt=(t,e,n,s,i)=>{"function"==typeof t.copyToChannel?0!==e[n].byteLength&&t.copyToChannel(e[n],s,i):0!==e[n].byteLength&&t.getChannelData(s).set(e[n],i)},yt=(t,e)=>{const n=[];for(let s=0;s<t;s+=1){const t=[],i="number"==typeof e?e:e[s];for(let e=0;e<i;e+=1)t.push(new Float32Array(128));n.push(t)}return n},bt=async(t,e,n,s,r,o,a)=>{const l=null===e?128*Math.ceil(t.context.length/128):e.length,u=s.channelCount*s.numberOfInputs,c=r.reduce(((t,e)=>t+e),0),h=0===c?null:n.createBuffer(c,l,n.sampleRate);if(void 0===o)throw new Error("Missing the processor constructor.");const d=G(t),f=await((t,e)=>{const n=A(w,t),s=ot(e);return A(n,s)})(n,t),p=yt(s.numberOfInputs,s.channelCount),m=yt(s.numberOfOutputs,r),g=Array.from(t.parameters.keys()).reduce(((t,e)=>i(i({},t),{},{[e]:new Float32Array(128)})),{});for(let i=0;i<l;i+=128){if(s.numberOfInputs>0&&null!==e)for(let t=0;t<s.numberOfInputs;t+=1)for(let n=0;n<s.channelCount;n+=1)_t(e,p[t],n,n,i);void 0!==o.parameterDescriptors&&null!==e&&o.parameterDescriptors.forEach(((t,n)=>{let{name:s}=t;_t(e,g,s,u+n,i)}));for(let t=0;t<s.numberOfInputs;t+=1)for(let e=0;e<r[t];e+=1)0===m[t][e].byteLength&&(m[t][e]=new Float32Array(128));try{const t=p.map(((t,e)=>0===d.activeInputs[e].size?[]:t)),e=a(i/n.sampleRate,n.sampleRate,(()=>f.process(t,m,g)));if(null!==h)for(let n=0,o=0;n<s.numberOfOutputs;n+=1){for(let t=0;t<r[n];t+=1)vt(h,m[n],t,o+t,i);o+=r[n]}if(!e)break}catch(e){t.dispatchEvent(new ErrorEvent("processorerror",{colno:e.colno,filename:e.filename,lineno:e.lineno,message:e.message}));break}}return h},wt={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},xt={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},St={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},Tt={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},Et={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},kt=t=>{const{port1:e,port2:n}=new MessageChannel;return new Promise((s=>{const i=()=>{n.onmessage=null,e.close(),n.close(),s()};n.onmessage=()=>i();try{e.postMessage(t,[t])}catch(r){}finally{i()}}))},At={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},Ot=(t,e,n)=>{const s=e[n];if(void 0===s)throw t();return s},Ct={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},Mt={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},It=()=>new DOMException("","InvalidStateError"),Dt=()=>new DOMException("","InvalidAccessError"),Rt={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},Nt=(t,e,n,s,i,r,o,a,l,u,c)=>{const h=u.length;let d=a;for(let f=0;f<h;f+=1){let a=n[0]*u[f];for(let e=1;e<i;e+=1){const s=d-e&l-1;a+=n[e]*r[s],a-=t[e]*o[s]}for(let t=i;t<s;t+=1)a+=n[t]*r[d-t&l-1];for(let n=i;n<e;n+=1)a-=t[n]*o[d-n&l-1];r[d]=u[f],o[d]=a,d=d+1&l-1,c[f]=a}return d},Pt={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},Lt=t=>{const e=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{const n=t.decodeAudioData(e.buffer,(()=>{}));return void 0!==n&&(n.catch((()=>{})),!0)}catch(n){}return!1},Ft=(t,e,n)=>{const s=e[n];void 0!==s&&s!==t[n]&&(t[n]=s)},qt=(t,e)=>{Ft(t,e,"channelCount"),Ft(t,e,"channelCountMode"),Ft(t,e,"channelInterpretation")},Vt=t=>"function"==typeof t.getFloatTimeDomainData,jt=(t,e,n)=>{const s=e[n];void 0!==s&&s!==t[n].value&&(t[n].value=s)},Ut=t=>{t.start=(e=>function(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2?arguments[2]:void 0;if("number"==typeof i&&i<0||s<0||n<0)throw new RangeError("The parameters can't be negative.");e.call(t,n,s,i)})(t.start)},zt=t=>{var e;t.stop=(e=t.stop,function(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(n<0)throw new RangeError("The parameter can't be negative.");e.call(t,n)})},Bt=(t,e)=>null===t?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(t*e))))),Ht=(t,e)=>{const n=t.createBiquadFilter();return qt(n,e),jt(n,e,"Q"),jt(n,e,"detune"),jt(n,e,"frequency"),jt(n,e,"gain"),Ft(n,e,"type"),n},Gt=(t,e)=>{const n=t.createChannelSplitter(e.numberOfOutputs);return qt(n,e),(t=>{const e=t.numberOfOutputs;Object.defineProperty(t,"channelCount",{get:()=>e,set:t=>{if(t!==e)throw It()}}),Object.defineProperty(t,"channelCountMode",{get:()=>"explicit",set:t=>{if("explicit"!==t)throw It()}}),Object.defineProperty(t,"channelInterpretation",{get:()=>"discrete",set:t=>{if("discrete"!==t)throw It()}})})(n),n},Wt=(t,e)=>(t.connect=e.connect.bind(e),t.disconnect=e.disconnect.bind(e),t),Qt=(t,e)=>{const n=t.createDelay(e.maxDelayTime);return qt(n,e),jt(n,e,"delayTime"),n},Yt=(t,e)=>{const n=t.createGain();return qt(n,e),jt(n,e,"gain"),n};function Xt(t,e){const n=e[0]*e[0]+e[1]*e[1];return[(t[0]*e[0]+t[1]*e[1])/n,(t[1]*e[0]-t[0]*e[1])/n]}function Zt(t,e){let n=[0,0];for(let r=t.length-1;r>=0;r-=1)i=e,n=[(s=n)[0]*i[0]-s[1]*i[1],s[0]*i[1]+s[1]*i[0]],n[0]+=t[r];var s,i;return n}const Kt=(t,e,n,s)=>t.createScriptProcessor(e,n,s),$t=()=>new DOMException("","NotSupportedError"),Jt={numberOfChannels:1},te={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},ee={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},ne={disableNormalization:!1},se={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},ie={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},re=(t,e,n)=>void 0===t.copyFromChannel?t.getChannelData(n)[0]:(t.copyFromChannel(e,n),e[0]),oe=t=>{if(null===t)return!1;const e=t.length;return e%2!=0?0!==t[Math.floor(e/2)]:t[e/2-1]+t[e/2]!==0},ae=(t,e,n,s)=>{let i=t;for(;!i.hasOwnProperty(e);)i=Object.getPrototypeOf(i);const{get:r,set:o}=Object.getOwnPropertyDescriptor(i,e);Object.defineProperty(t,e,{get:n(r),set:s(o)})},le=(t,e,n)=>{try{t.setValueAtTime(e,n)}catch(u){if(9!==u.code)throw u;le(t,e,n+1e-7)}},ue=t=>{const e=t.createOscillator();try{e.start(-1)}catch(t){return t instanceof RangeError}return!1},ce=t=>{const e=t.createBuffer(1,1,44100),n=t.createBufferSource();n.buffer=e,n.start(),n.stop();try{return n.stop(),!0}catch(s){return!1}},he=t=>{const e=t.createOscillator();try{e.stop(-1)}catch(t){return t instanceof RangeError}return!1},de=()=>{try{new DOMException}catch(t){return!1}return!0},fe=()=>new Promise((t=>{const e=new ArrayBuffer(0),{port1:n,port2:s}=new MessageChannel;n.onmessage=e=>{let{data:n}=e;return t(null!==n)},s.postMessage(e,[e])})),pe=(t,e)=>{const n=e.createGain();t.connect(n);const s=(e=>()=>{e.call(t,n),t.removeEventListener("ended",s)})(t.disconnect);t.addEventListener("ended",s),Wt(t,n),t.stop=(e=>{let s=!1;return function(){let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(s)try{e.call(t,i)}catch(r){n.gain.setValueAtTime(0,i)}else e.call(t,i),s=!0}})(t.stop)},me=(t,e)=>n=>{const s={value:t};return Object.defineProperties(n,{currentTarget:s,target:s}),"function"==typeof e?e.call(t,n):e.handleEvent.call(t,n)},ge=(t=>(e,n,s,i)=>{let[r,o,a]=s;t(e[o],[n,r,a],(t=>t[0]===n&&t[1]===r),i)})(K),_e=(t=>(e,n,s,i)=>{let[r,o,a]=s;const l=e.get(r);void 0===l?e.set(r,new Set([[o,n,a]])):t(l,[o,n,a],(t=>t[0]===o&&t[1]===n),i)})(K),ve=(t=>(e,n,s,i)=>t(e[i],(t=>t[0]===n&&t[1]===s)))(O),ye=new WeakMap,be=(t=>e=>{var n;return null!==(n=t.get(e))&&void 0!==n?n:0})(ye),we=(xe=new Map,Se=new WeakMap,(t,e)=>{const n=Se.get(t);if(void 0!==n)return n;const s=xe.get(t);if(void 0!==s)return s;try{const n=e();return n instanceof Promise?(xe.set(t,n),n.catch((()=>!1)).then((e=>(xe.delete(t),Se.set(t,e),e)))):(Se.set(t,n),n)}catch(i){return Se.set(t,!1),!1}});var xe,Se;const Te="undefined"==typeof window?null:window,Ee=((t,e)=>(n,s)=>{const i=n.createAnalyser();if(qt(i,s),!(s.maxDecibels>s.minDecibels))throw e();return Ft(i,s,"fftSize"),Ft(i,s,"maxDecibels"),Ft(i,s,"minDecibels"),Ft(i,s,"smoothingTimeConstant"),t(Vt,(()=>Vt(i)))||(t=>{t.getFloatTimeDomainData=e=>{const n=new Uint8Array(e.length);t.getByteTimeDomainData(n);const s=Math.max(n.length,t.fftSize);for(let t=0;t<s;t+=1)e[t]=.0078125*(n[t]-128);return e}})(i),i})(we,q),ke=(t=>e=>{const n=t(e);if(null===n.renderer)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return n.renderer})(G),Ae=((t,e,n)=>async(s,i,r)=>{const o=t(s);await Promise.all(o.activeInputs.map(((t,o)=>Array.from(t).map((async t=>{let[a,l]=t;const u=e(a),c=await u.render(a,i),h=s.context.destination;n(a)||s===h&&n(s)||c.connect(r,l,o)})))).reduce(((t,e)=>[...t,...e]),[]))})(G,ke,lt),Oe=((t,e,n)=>()=>{const s=new WeakMap;return{render(i,r){const o=s.get(r);return void 0!==o?Promise.resolve(o):(async(i,r)=>{let o=e(i);if(!L(o,r)){const e={channelCount:o.channelCount,channelCountMode:o.channelCountMode,channelInterpretation:o.channelInterpretation,fftSize:o.fftSize,maxDecibels:o.maxDecibels,minDecibels:o.minDecibels,smoothingTimeConstant:o.smoothingTimeConstant};o=t(r,e)}return s.set(r,o),await n(i,r,o),o})(i,r)}}})(Ee,ot,Ae),Ce=(Me=_,t=>{const e=Me.get(t);if(void 0===e)throw It();return e});var Me;const Ie=(t=>null===t?null:t.hasOwnProperty("OfflineAudioContext")?t.OfflineAudioContext:t.hasOwnProperty("webkitOfflineAudioContext")?t.webkitOfflineAudioContext:null)(Te),De=(t=>e=>null!==t&&e instanceof t)(Ie),Re=new WeakMap,Ne=(t=>class{constructor(t){this._nativeEventTarget=t,this._listeners=new WeakMap}addEventListener(e,n,s){if(null!==n){let i=this._listeners.get(n);void 0===i&&(i=t(this,n),"function"==typeof n&&this._listeners.set(n,i)),this._nativeEventTarget.addEventListener(e,i,s)}}dispatchEvent(t){return this._nativeEventTarget.dispatchEvent(t)}removeEventListener(t,e,n){const s=null===e?void 0:this._listeners.get(e);this._nativeEventTarget.removeEventListener(t,void 0===s?null:s,n)}})(me),Pe=(t=>null===t?null:t.hasOwnProperty("AudioContext")?t.AudioContext:t.hasOwnProperty("webkitAudioContext")?t.webkitAudioContext:null)(Te),Le=(t=>e=>null!==t&&e instanceof t)(Pe),Fe=(t=>e=>null!==t&&"function"==typeof t.AudioNode&&e instanceof t.AudioNode)(Te),qe=(t=>e=>null!==t&&"function"==typeof t.AudioParam&&e instanceof t.AudioParam)(Te),Ve=(t=>null===t?null:t.hasOwnProperty("AudioWorkletNode")?t.AudioWorkletNode:null)(Te),je=((t,e,n,s,i,r,o,a,l,u,c,h,d,f,m,g)=>class extends u{constructor(e,s,i,r){super(i),this._context=e,this._nativeAudioNode=i;const o=c(e);h(o)&&!0!==n(ct,(()=>ct(o,g)))&&(t=>{const e=new Map;t.connect=(t=>function(n){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const r=dt(n)?t(n,s,i):t(n,s),o=e.get(n);return void 0===o?e.set(n,[{input:i,output:s}]):o.every((t=>t.input!==i||t.output!==s))&&o.push({input:i,output:s}),r})(t.connect.bind(t)),t.disconnect=(n=>(s,i,r)=>{if(n.apply(t),void 0===s)e.clear();else if("number"==typeof s)for(const[t,n]of e){const i=n.filter((t=>t.output!==s));0===i.length?e.delete(t):e.set(t,i)}else if(e.has(s))if(void 0===i)e.delete(s);else{const t=e.get(s);if(void 0!==t){const n=t.filter((t=>t.output!==i&&(t.input!==r||void 0===r)));0===n.length?e.delete(s):e.set(s,n)}}for(const[n,o]of e)o.forEach((e=>{dt(n)?t.connect(n,e.output,e.input):t.connect(n,e.output)}))})(t.disconnect)})(i),p.set(this,i),v.set(this,new Set),"closed"!==e.state&&s&&I(this),t(this,r,i)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(t){this._nativeAudioNode.channelCount=t}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(t){this._nativeAudioNode.channelCountMode=t}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(t){this._nativeAudioNode.channelInterpretation=t}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(n<0||n>=this._nativeAudioNode.numberOfOutputs)throw i();const u=c(this._context),h=m(u);if(d(t)||f(t))throw r();if(X(t)){const i=ot(t);try{const e=et(this._nativeAudioNode,i,n,a),s=ut(this);(h||s)&&this._nativeAudioNode.disconnect(...e),"closed"!==this.context.state&&!s&&ut(t)&&I(t)}catch(t){if(12===t.code)throw r();throw t}if(e(this,t,n,a,h)){const e=l([this],t);ht(e,s(h))}return t}const p=at(t);if("playbackRate"===p.name&&1024===p.maxValue)throw o();try{this._nativeAudioNode.connect(p,n),(h||ut(this))&&this._nativeAudioNode.disconnect(p,n)}catch(t){if(12===t.code)throw r();throw t}if(((t,e,n,s)=>{const{activeInputs:i,passiveInputs:r}=W(e),{outputs:o}=G(t),a=M(t),l=o=>{const a=ot(t),l=at(e);if(o){const e=it(r,t,n);$(i,t,e,!1),s||lt(t)||a.connect(l,n)}else{const e=((t,e,n)=>O(t,(t=>t[0]===e&&t[1]===n)))(i,t,n);J(r,e,!1),s||lt(t)||a.disconnect(l,n)}};return!!K(o,[e,n],(t=>t[0]===e&&t[1]===n),!0)&&(a.add(l),B(t)?$(i,t,[n,l],!0):J(r,[t,n,l],!0),!0)})(this,t,n,h)){const e=l([this],t);ht(e,s(h))}}disconnect(t,e,n){let s;const o=c(this._context),u=m(o);if(void 0===t)s=((t,e)=>{const n=G(t),s=[];for(const i of n.outputs)Z(i)?ft(t,e,...i):pt(t,e,...i),s.push(i[0]);return n.outputs.clear(),s})(this,u);else if("number"==typeof t){if(t<0||t>=this.numberOfOutputs)throw i();s=((t,e,n)=>{const s=G(t),i=[];for(const r of s.outputs)r[1]===n&&(Z(r)?ft(t,e,...r):pt(t,e,...r),i.push(r[0]),s.outputs.delete(r));return i})(this,u,t)}else{if(void 0!==e&&(e<0||e>=this.numberOfOutputs))throw i();if(X(t)&&void 0!==n&&(n<0||n>=t.numberOfInputs))throw i();if(s=((t,e,n,s,i)=>{const r=G(t);return Array.from(r.outputs).filter((t=>!(t[0]!==n||void 0!==s&&t[1]!==s||void 0!==i&&t[2]!==i))).map((n=>(Z(n)?ft(t,e,...n):pt(t,e,...n),r.outputs.delete(n),n[0])))})(this,u,t,e,n),0===s.length)throw r()}for(const i of s){const t=l([this],i);ht(t,a)}}})((Ue=f,(t,e,n)=>{const s=[];for(let i=0;i<n.numberOfInputs;i+=1)s.push(new Set);Ue.set(t,{activeInputs:s,outputs:new Set,passiveInputs:new WeakMap,renderer:e})}),((t,e,n,s,i,r,o,a,l,u,c,h,d)=>{const f=new WeakMap;return(p,m,g,_,v)=>{const{activeInputs:y,passiveInputs:b}=r(m),{outputs:w}=r(p),x=a(p),S=r=>{const a=l(m),u=l(p);if(r){const e=C(b,p,g,_);t(y,p,e,!1),v||h(p)||n(u,a,g,_),d(m)&&I(m)}else{const t=s(y,p,g,_);e(b,_,t,!1),v||h(p)||i(u,a,g,_);const n=o(m);if(0===n)c(m)&&N(m,y);else{const t=f.get(m);void 0!==t&&clearTimeout(t),f.set(m,setTimeout((()=>{c(m)&&N(m,y)}),1e3*n))}}};return!!u(w,[m,g,_],(t=>t[0]===m&&t[1]===g&&t[2]===_),!0)&&(x.add(S),c(p)?t(y,p,[g,_,S],!0):e(b,_,[p,g,S],!0),!0)}})(ge,_e,et,ve,rt,G,be,M,ot,K,B,lt,ut),we,((t,e,n,s,i,r)=>o=>(a,l)=>{const u=t.get(a);if(void 0===u){if(!o&&r(a)){const t=s(a),{outputs:r}=n(a);for(const n of r)if(Z(n)){const i=s(n[0]);e(t,i,n[1],n[2])}else{const e=i(n[0]);t.disconnect(e,n[1])}}t.set(a,l)}else t.set(a,u+l)})(y,rt,G,ot,at,B),q,Dt,$t,((t,e,n,s,i,r,o,a)=>(l,u)=>{const c=e.get(l);if(void 0===c)throw new Error("Missing the expected cycle count.");const h=r(l.context),d=a(h);if(c===u){if(e.delete(l),!d&&o(l)){const e=s(l),{outputs:r}=n(l);for(const n of r)if(Z(n)){const i=s(n[0]);t(e,i,n[1],n[2])}else{const t=i(n[0]);e.connect(t,n[1])}}}else e.set(l,c-u)})(et,y,G,ot,at,Ce,B,De),((t,e,n)=>function s(i,r){const o=X(r)?r:n(t,r);if((t=>"delayTime"in t)(o))return[];if(i[0]===o)return[i];if(i.includes(o))return[];const{outputs:a}=e(o);return Array.from(a).map((t=>s([...i,o],t[0]))).reduce(((t,e)=>t.concat(e)),[])})(Re,G,A),Ne,Ce,Le,Fe,qe,De,Ve);var Ue;const ze=((t,e,n,s,r,o)=>class extends t{constructor(t,n){const a=r(t),l=i(i({},P),n),u=s(a,l);super(t,!1,u,o(a)?e():null),this._nativeAnalyserNode=u}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(t){this._nativeAnalyserNode.fftSize=t}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(t){const e=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=t,!(t>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=e,n()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(t){const e=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=t,!(this._nativeAnalyserNode.maxDecibels>t))throw this._nativeAnalyserNode.minDecibels=e,n()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(t){this._nativeAnalyserNode.smoothingTimeConstant=t}getByteFrequencyData(t){this._nativeAnalyserNode.getByteFrequencyData(t)}getByteTimeDomainData(t){this._nativeAnalyserNode.getByteTimeDomainData(t)}getFloatFrequencyData(t){this._nativeAnalyserNode.getFloatFrequencyData(t)}getFloatTimeDomainData(t){this._nativeAnalyserNode.getFloatTimeDomainData(t)}})(je,Oe,q,Ee,Ce,De),Be=new WeakSet,He=(t=>null===t?null:t.hasOwnProperty("AudioBuffer")?t.AudioBuffer:null)(Te),Ge=(We=new Uint32Array(1),t=>(We[0]=t,We[0]));var We;const Qe=((t,e)=>n=>{n.copyFromChannel=function(s,i){const r=t(arguments.length>2&&void 0!==arguments[2]?arguments[2]:0),o=t(i);if(o>=n.numberOfChannels)throw e();const a=n.length,l=n.getChannelData(o),u=s.length;for(let t=r<0?-r:0;t+r<a&&t<u;t+=1)s[t]=l[t+r]},n.copyToChannel=function(s,i){const r=t(arguments.length>2&&void 0!==arguments[2]?arguments[2]:0),o=t(i);if(o>=n.numberOfChannels)throw e();const a=n.length,l=n.getChannelData(o),u=s.length;for(let t=r<0?-r:0;t+r<a&&t<u;t+=1)l[t+r]=s[t]}})(Ge,q),Ye=(t=>e=>{e.copyFromChannel=(n=>function(s,i){const r=t(arguments.length>2&&void 0!==arguments[2]?arguments[2]:0),o=t(i);if(r<e.length)return n.call(e,s,o,r)})(e.copyFromChannel),e.copyToChannel=(n=>function(s,i){const r=t(arguments.length>2&&void 0!==arguments[2]?arguments[2]:0),o=t(i);if(r<e.length)return n.call(e,s,o,r)})(e.copyToChannel)})(Ge),Xe=((t,e,n,s,r,o,a,l)=>{let u=null;return class c{constructor(c){if(null===r)throw new Error("Missing the native OfflineAudioContext constructor.");const{length:h,numberOfChannels:d,sampleRate:f}=i(i({},j),c);null===u&&(u=new r(1,1,44100));const p=null!==s&&e(o,o)?new s({length:h,numberOfChannels:d,sampleRate:f}):u.createBuffer(d,h,f);if(0===p.numberOfChannels)throw n();return"function"!=typeof p.copyFromChannel?(a(p),V(p)):e(F,(()=>F(p)))||l(p),t.add(p),p}static[Symbol.hasInstance](e){return null!==e&&"object"==typeof e&&Object.getPrototypeOf(e)===c.prototype||t.has(e)}}})(Be,we,$t,He,Ie,(t=>()=>{if(null===t)return!1;try{new t({length:1,sampleRate:44100})}catch(e){return!1}return!0})(He),Qe,Ye),Ze=(t=>(e,n)=>{const s=t(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});n.connect(s).connect(e.destination);const i=()=>{n.removeEventListener("ended",i),n.disconnect(s),s.disconnect()};n.addEventListener("ended",i)})(Yt),Ke=((t,e,n)=>async(s,i,r)=>{const o=e(s);await Promise.all(Array.from(o.activeInputs).map((async e=>{let[s,o]=e;const a=t(s),l=await a.render(s,i);n(s)||l.connect(r,o)})))})(ke,W,lt),$e=(t=>(e,n,s)=>t(n,e,s))(Ke),Je=((t,e,n,s,i,r,o,a,l,u,c)=>(l,h)=>{const d=l.createBufferSource();return qt(d,h),jt(d,h,"playbackRate"),Ft(d,h,"buffer"),Ft(d,h,"loop"),Ft(d,h,"loopEnd"),Ft(d,h,"loopStart"),e(n,(()=>n(l)))||(t=>{t.start=(e=>{let n=!1;return function(){let s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2?arguments[2]:void 0;if(n)throw It();e.call(t,s,i,r),n=!0}})(t.start)})(d),e(s,(()=>s(l)))||(t=>{t.start=(e=>function(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2?arguments[2]:void 0;const r=t.buffer,o=null===r?s:Math.min(r.duration,s);null!==r&&o>r.duration-.5/t.context.sampleRate?e.call(t,n,0,0):e.call(t,n,o,i)})(t.start)})(d),e(i,(()=>i(l)))||u(d,l),e(r,(()=>r(l)))||Ut(d),e(o,(()=>o(l)))||c(d,l),e(a,(()=>a(l)))||zt(d),t(l,d),d})(Ze,we,(t=>{const e=t.createBufferSource();e.start();try{e.start()}catch(n){return!0}return!1}),(t=>{const e=t.createBufferSource(),n=t.createBuffer(1,1,44100);e.buffer=n;try{e.start(0,1)}catch(s){return!1}return!0}),(t=>{const e=t.createBufferSource();e.start();try{e.stop()}catch(n){return!1}return!0}),ue,ce,he,0,(t=>(e,n)=>{const s=n.createBuffer(1,1,44100);null===e.buffer&&(e.buffer=s),t(e,"buffer",(t=>()=>{const n=t.call(e);return n===s?null:n}),(t=>n=>t.call(e,null===n?s:n)))})(ae),pe),tn=((t,e)=>(n,s,i)=>(t(s).replay(i),e(s,n,i)))((t=>e=>{const n=t(e);if(null===n.renderer)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return n.renderer})(W),Ke),en=((t,e,n,s,i)=>()=>{const r=new WeakMap;let o=null,a=null;return{set start(t){o=t},set stop(t){a=t},render(l,u){const c=r.get(u);return void 0!==c?Promise.resolve(c):(async(l,u)=>{let c=n(l);const h=L(c,u);if(!h){const t={buffer:c.buffer,channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,loop:c.loop,loopEnd:c.loopEnd,loopStart:c.loopStart,playbackRate:c.playbackRate.value};c=e(u,t),null!==o&&c.start(...o),null!==a&&c.stop(a)}return r.set(u,c),h?await t(u,l.playbackRate,c.playbackRate):await s(u,l.playbackRate,c.playbackRate),await i(l,u,c),c})(l,u)}}})($e,Je,ot,tn,Ae),nn=((t,e,n,s,i,r,o,a,l,u,c,d,f)=>function(s,p,m){let g=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,_=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;const v=m.value,y=new h.AutomationEventList(v),b=p?(t=>({replay(e){for(const n of t)if("exponentialRampToValue"===n.type){const{endTime:t,value:s}=n;e.exponentialRampToValueAtTime(s,t)}else if("linearRampToValue"===n.type){const{endTime:t,value:s}=n;e.linearRampToValueAtTime(s,t)}else if("setTarget"===n.type){const{startTime:t,target:s,timeConstant:i}=n;e.setTargetAtTime(s,t,i)}else if("setValue"===n.type){const{startTime:t,value:s}=n;e.setValueAtTime(s,t)}else{if("setValueCurve"!==n.type)throw new Error("Can't apply an unknown automation.");{const{duration:t,startTime:s,values:i}=n;e.setValueCurveAtTime(i,s,t)}}}}))(y):null,w={get defaultValue(){return v},get maxValue(){return null===g?m.maxValue:g},get minValue(){return null===_?m.minValue:_},get value(){return m.value},set value(t){m.value=t,w.setValueAtTime(t,s.context.currentTime)},cancelAndHoldAtTime(t){if("function"==typeof m.cancelAndHoldAtTime)null===b&&y.flush(s.context.currentTime),y.add(i(t)),m.cancelAndHoldAtTime(t);else{const e=Array.from(y).pop();null===b&&y.flush(s.context.currentTime),y.add(i(t));const n=Array.from(y).pop();m.cancelScheduledValues(t),e!==n&&void 0!==n&&("exponentialRampToValue"===n.type?m.exponentialRampToValueAtTime(n.value,n.endTime):"linearRampToValue"===n.type?m.linearRampToValueAtTime(n.value,n.endTime):"setValue"===n.type?m.setValueAtTime(n.value,n.startTime):"setValueCurve"===n.type&&m.setValueCurveAtTime(n.values,n.startTime,n.duration))}return w},cancelScheduledValues:t=>(null===b&&y.flush(s.context.currentTime),y.add(r(t)),m.cancelScheduledValues(t),w),exponentialRampToValueAtTime(t,e){if(0===t)throw new RangeError;if(!Number.isFinite(e)||e<0)throw new RangeError;const n=s.context.currentTime;return null===b&&y.flush(n),0===Array.from(y).length&&(y.add(u(v,n)),m.setValueAtTime(v,n)),y.add(o(t,e)),m.exponentialRampToValueAtTime(t,e),w},linearRampToValueAtTime(t,e){const n=s.context.currentTime;return null===b&&y.flush(n),0===Array.from(y).length&&(y.add(u(v,n)),m.setValueAtTime(v,n)),y.add(a(t,e)),m.linearRampToValueAtTime(t,e),w},setTargetAtTime:(t,e,n)=>(null===b&&y.flush(s.context.currentTime),y.add(l(t,e,n)),m.setTargetAtTime(t,e,n),w),setValueAtTime:(t,e)=>(null===b&&y.flush(s.context.currentTime),y.add(u(t,e)),m.setValueAtTime(t,e),w),setValueCurveAtTime(t,e,n){const i=t instanceof Float32Array?t:new Float32Array(t);if(null!==d&&"webkitAudioContext"===d.name){const t=e+n,r=s.context.sampleRate,o=Math.ceil(e*r),a=Math.floor(t*r),l=a-o,u=new Float32Array(l);for(let s=0;s<l;s+=1){const t=(i.length-1)/n*((o+s)/r-e),a=Math.floor(t),l=Math.ceil(t);u[s]=a===l?i[a]:(1-(t-a))*i[a]+(1-(l-t))*i[l]}null===b&&y.flush(s.context.currentTime),y.add(c(u,e,n)),m.setValueCurveAtTime(u,e,n);const h=a/r;h<t&&f(w,u[u.length-1],h),f(w,i[i.length-1],t)}else null===b&&y.flush(s.context.currentTime),y.add(c(i,e,n)),m.setValueCurveAtTime(i,e,n);return w}};return n.set(w,m),e.set(w,s),t(w,b),w})((sn=m,(t,e)=>{sn.set(t,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:e})}),Re,g,0,h.createCancelAndHoldAutomationEvent,h.createCancelScheduledValuesAutomationEvent,h.createExponentialRampToValueAutomationEvent,h.createLinearRampToValueAutomationEvent,h.createSetTargetAutomationEvent,h.createSetValueAutomationEvent,h.createSetValueCurveAutomationEvent,Pe,le);var sn;const rn=((t,e,n,s,r,o,a,l)=>class extends t{constructor(t,s){const l=o(t),u=i(i({},H),s),c=r(l,u),h=a(l),d=h?e():null;super(t,!1,c,d),this._audioBufferSourceNodeRenderer=d,this._isBufferNullified=!1,this._isBufferSet=null!==u.buffer,this._nativeAudioBufferSourceNode=c,this._onended=null,this._playbackRate=n(this,h,c.playbackRate,z,U)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(t){if(this._nativeAudioBufferSourceNode.buffer=t,null!==t){if(this._isBufferSet)throw s();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(t){this._nativeAudioBufferSourceNode.loop=t}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(t){this._nativeAudioBufferSourceNode.loopEnd=t}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(t){this._nativeAudioBufferSourceNode.loopStart=t}get onended(){return this._onended}set onended(t){const e="function"==typeof t?l(this,t):null;this._nativeAudioBufferSourceNode.onended=e;const n=this._nativeAudioBufferSourceNode.onended;this._onended=null!==n&&n===e?t:n}get playbackRate(){return this._playbackRate}start(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0;if(this._nativeAudioBufferSourceNode.start(t,e,n),null!==this._audioBufferSourceNodeRenderer&&(this._audioBufferSourceNodeRenderer.start=void 0===n?[t,e]:[t,e,n]),"closed"!==this.context.state){I(this);const t=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",t),B(this)&&R(this)};this._nativeAudioBufferSourceNode.addEventListener("ended",t)}}stop(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this._nativeAudioBufferSourceNode.stop(t),null!==this._audioBufferSourceNodeRenderer&&(this._audioBufferSourceNodeRenderer.stop=t)}})(je,en,nn,It,Je,Ce,De,me),on=((t,e,n,s,i,r,o,a)=>class extends t{constructor(t,e){const n=r(t),s=o(n),l=i(n,e,s);super(t,!1,l,s?(t=>{const e=new WeakMap;return{render(n,s){const i=e.get(s);return void 0!==i?Promise.resolve(i):(async(n,s)=>{const i=s.destination;return e.set(s,i),await t(n,s,i),i})(n,s)}}})(a):null),this._isNodeOfNativeOfflineAudioContext=s,this._nativeAudioDestinationNode=l}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(t){if(this._isNodeOfNativeOfflineAudioContext)throw s();if(t>this._nativeAudioDestinationNode.maxChannelCount)throw n();this._nativeAudioDestinationNode.channelCount=t}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(t){if(this._isNodeOfNativeOfflineAudioContext)throw s();this._nativeAudioDestinationNode.channelCountMode=t}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}})(je,0,q,It,((t,e)=>(n,s,i)=>{const r=n.destination;if(r.channelCount!==s)try{r.channelCount=s}catch(a){}i&&"explicit"!==r.channelCountMode&&(r.channelCountMode="explicit"),0===r.maxChannelCount&&Object.defineProperty(r,"maxChannelCount",{value:s});const o=t(n,{channelCount:s,channelCountMode:r.channelCountMode,channelInterpretation:r.channelInterpretation,gain:1});return e(o,"channelCount",(t=>()=>t.call(o)),(t=>e=>{t.call(o,e);try{r.channelCount=e}catch(t){if(e>r.maxChannelCount)throw t}})),e(o,"channelCountMode",(t=>()=>t.call(o)),(t=>e=>{t.call(o,e),r.channelCountMode=e})),e(o,"channelInterpretation",(t=>()=>t.call(o)),(t=>e=>{t.call(o,e),r.channelInterpretation=e})),Object.defineProperty(o,"maxChannelCount",{get:()=>r.maxChannelCount}),o.connect(r),o})(Yt,ae),Ce,De,Ae),an=((t,e,n,s,i)=>()=>{const r=new WeakMap;return{render(o,a){const l=r.get(a);return void 0!==l?Promise.resolve(l):(async(o,a)=>{let l=n(o);const u=L(l,a);if(!u){const t={Q:l.Q.value,channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,detune:l.detune.value,frequency:l.frequency.value,gain:l.gain.value,type:l.type};l=e(a,t)}return r.set(a,l),u?(await t(a,o.Q,l.Q),await t(a,o.detune,l.detune),await t(a,o.frequency,l.frequency),await t(a,o.gain,l.gain)):(await s(a,o.Q,l.Q),await s(a,o.detune,l.detune),await s(a,o.frequency,l.frequency),await s(a,o.gain,l.gain)),await i(o,a,l),l})(o,a)}}})($e,Ht,ot,tn,Ae),ln=(t=>(e,n)=>t.set(e,n))(ye),un=((t,e,n,s,r,o,a,l)=>class extends t{constructor(t,s){const u=o(t),c=i(i({},wt),s),h=r(u,c),d=a(u);super(t,!1,h,d?n():null),this._Q=e(this,d,h.Q,z,U),this._detune=e(this,d,h.detune,1200*Math.log2(z),-1200*Math.log2(z)),this._frequency=e(this,d,h.frequency,t.sampleRate/2,0),this._gain=e(this,d,h.gain,40*Math.log10(z),U),this._nativeBiquadFilterNode=h,l(this,1)}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(t){this._nativeBiquadFilterNode.type=t}getFrequencyResponse(t,e,n){try{this._nativeBiquadFilterNode.getFrequencyResponse(t,e,n)}catch(t){if(11===t.code)throw s();throw t}if(t.length!==e.length||e.length!==n.length)throw s()}})(je,nn,an,Dt,Ht,Ce,De,ln),cn=((t,e)=>(n,s,i)=>{const r=new Set;return n.connect=(i=>function(o){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const u=0===r.size;if(e(o))return i.call(n,o,a,l),t(r,[o,a,l],(t=>t[0]===o&&t[1]===a&&t[2]===l),!0),u&&s(),o;i.call(n,o,a),t(r,[o,a],(t=>t[0]===o&&t[1]===a),!0),u&&s()})(n.connect),n.disconnect=(t=>(s,o,a)=>{const l=r.size>0;if(void 0===s)t.apply(n),r.clear();else if("number"==typeof s){t.call(n,s);for(const t of r)t[1]===s&&r.delete(t)}else{e(s)?t.call(n,s,o,a):t.call(n,s,o);for(const t of r)t[0]!==s||void 0!==o&&t[1]!==o||void 0!==a&&t[2]!==a||r.delete(t)}const u=0===r.size;l&&u&&i()})(n.disconnect),n})(K,Fe),hn=((t,e)=>(n,s)=>{s.channelCount=1,s.channelCountMode="explicit",Object.defineProperty(s,"channelCount",{get:()=>1,set:()=>{throw t()}}),Object.defineProperty(s,"channelCountMode",{get:()=>"explicit",set:()=>{throw t()}});const i=n.createBufferSource();e(s,(()=>{const t=s.numberOfInputs;for(let e=0;e<t;e+=1)i.connect(s,0,e)}),(()=>i.disconnect(s)))})(It,cn),dn=((t,e)=>(n,s)=>{const i=n.createChannelMerger(s.numberOfInputs);return null!==t&&"webkitAudioContext"===t.name&&e(n,i),qt(i,s),i})(Pe,hn),fn=((t,e,n)=>()=>{const s=new WeakMap;return{render(i,r){const o=s.get(r);return void 0!==o?Promise.resolve(o):(async(i,r)=>{let o=e(i);if(!L(o,r)){const e={channelCount:o.channelCount,channelCountMode:o.channelCountMode,channelInterpretation:o.channelInterpretation,numberOfInputs:o.numberOfInputs};o=t(r,e)}return s.set(r,o),await n(i,r,o),o})(i,r)}}})(dn,ot,Ae),pn=((t,e,n,s,r)=>class extends t{constructor(t,o){const a=s(t),l=i(i({},xt),o);super(t,!1,n(a,l),r(a)?e():null)}})(je,fn,dn,Ce,De),mn=((t,e,n)=>()=>{const s=new WeakMap;return{render(i,r){const o=s.get(r);return void 0!==o?Promise.resolve(o):(async(i,r)=>{let o=e(i);if(!L(o,r)){const e={channelCount:o.channelCount,channelCountMode:o.channelCountMode,channelInterpretation:o.channelInterpretation,numberOfOutputs:o.numberOfOutputs};o=t(r,e)}return s.set(r,o),await n(i,r,o),o})(i,r)}}})(Gt,ot,Ae),gn=((t,e,n,s,r)=>class extends t{constructor(t,o){const a=s(t),l=(t=>i(i({},t),{},{channelCount:t.numberOfOutputs}))(i(i({},St),o));super(t,!1,n(a,l),r(a)?e():null)}})(je,mn,Gt,Ce,De),_n=((t,e,n,o)=>(a,l)=>{let{offset:u}=l,c=s(l,r);const h=a.createBuffer(1,2,44100),d=e(a,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),f=n(a,i(i({},c),{},{gain:u})),p=h.getChannelData(0);p[0]=1,p[1]=1,d.buffer=h,d.loop=!0;const m={get bufferSize(){},get channelCount(){return f.channelCount},set channelCount(t){f.channelCount=t},get channelCountMode(){return f.channelCountMode},set channelCountMode(t){f.channelCountMode=t},get channelInterpretation(){return f.channelInterpretation},set channelInterpretation(t){f.channelInterpretation=t},get context(){return f.context},get inputs(){return[]},get numberOfInputs(){return d.numberOfInputs},get numberOfOutputs(){return f.numberOfOutputs},get offset(){return f.gain},get onended(){return d.onended},set onended(t){d.onended=t},addEventListener:function(){return d.addEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])},dispatchEvent:function(){return d.dispatchEvent(arguments.length<=0?void 0:arguments[0])},removeEventListener:function(){return d.removeEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])},start(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;d.start.call(d,t)},stop(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;d.stop.call(d,t)}};return t(a,d),o(Wt(m,f),(()=>d.connect(f)),(()=>d.disconnect(f)))})(Ze,Je,Yt,cn),vn=((t,e,n,s,i)=>(r,o)=>{if(void 0===r.createConstantSource)return n(r,o);const a=r.createConstantSource();return qt(a,o),jt(a,o,"offset"),e(s,(()=>s(r)))||Ut(a),e(i,(()=>i(r)))||zt(a),t(r,a),a})(Ze,we,_n,ue,he),yn=((t,e,n,s,i)=>()=>{const r=new WeakMap;let o=null,a=null;return{set start(t){o=t},set stop(t){a=t},render(l,u){const c=r.get(u);return void 0!==c?Promise.resolve(c):(async(l,u)=>{let c=n(l);const h=L(c,u);if(!h){const t={channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,offset:c.offset.value};c=e(u,t),null!==o&&c.start(o),null!==a&&c.stop(a)}return r.set(u,c),h?await t(u,l.offset,c.offset):await s(u,l.offset,c.offset),await i(l,u,c),c})(l,u)}}})($e,vn,ot,tn,Ae),bn=((t,e,n,s,r,o,a)=>class extends t{constructor(t,a){const l=r(t),u=i(i({},Tt),a),c=s(l,u),h=o(l),d=h?n():null;super(t,!1,c,d),this._constantSourceNodeRenderer=d,this._nativeConstantSourceNode=c,this._offset=e(this,h,c.offset,z,U),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(t){const e="function"==typeof t?a(this,t):null;this._nativeConstantSourceNode.onended=e;const n=this._nativeConstantSourceNode.onended;this._onended=null!==n&&n===e?t:n}start(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(this._nativeConstantSourceNode.start(t),null!==this._constantSourceNodeRenderer&&(this._constantSourceNodeRenderer.start=t),"closed"!==this.context.state){I(this);const t=()=>{this._nativeConstantSourceNode.removeEventListener("ended",t),B(this)&&R(this)};this._nativeConstantSourceNode.addEventListener("ended",t)}}stop(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this._nativeConstantSourceNode.stop(t),null!==this._constantSourceNodeRenderer&&(this._constantSourceNodeRenderer.stop=t)}})(je,nn,yn,vn,Ce,De,me),wn=((t,e)=>(n,s)=>{const i=n.createConvolver();if(qt(i,s),s.disableNormalization===i.normalize&&(i.normalize=!s.disableNormalization),Ft(i,s,"buffer"),s.channelCount>2)throw t();if(e(i,"channelCount",(t=>()=>t.call(i)),(e=>n=>{if(n>2)throw t();return e.call(i,n)})),"max"===s.channelCountMode)throw t();return e(i,"channelCountMode",(t=>()=>t.call(i)),(e=>n=>{if("max"===n)throw t();return e.call(i,n)})),i})($t,ae),xn=((t,e,n)=>()=>{const s=new WeakMap;return{render(i,r){const o=s.get(r);return void 0!==o?Promise.resolve(o):(async(i,r)=>{let o=e(i);if(!L(o,r)){const e={buffer:o.buffer,channelCount:o.channelCount,channelCountMode:o.channelCountMode,channelInterpretation:o.channelInterpretation,disableNormalization:!o.normalize};o=t(r,e)}return s.set(r,o),tt(o)?await n(i,r,o.inputs[0]):await n(i,r,o),o})(i,r)}}})(wn,ot,Ae),Sn=((t,e,n,s,r,o)=>class extends t{constructor(t,a){const l=s(t),u=i(i({},Et),a),c=n(l,u);super(t,!1,c,r(l)?e():null),this._isBufferNullified=!1,this._nativeConvolverNode=c,null!==u.buffer&&o(this,u.buffer.duration)}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(t){if(this._nativeConvolverNode.buffer=t,null===t&&null!==this._nativeConvolverNode.buffer){const t=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=t.createBuffer(1,1,t.sampleRate),this._isBufferNullified=!0,o(this,0)}else this._isBufferNullified=!1,o(this,null===this._nativeConvolverNode.buffer?0:this._nativeConvolverNode.buffer.duration)}get normalize(){return this._nativeConvolverNode.normalize}set normalize(t){this._nativeConvolverNode.normalize=t}})(je,xn,wn,Ce,De,ln),Tn=((t,e,n,s,i)=>r=>{const o=new WeakMap;return{render(a,l){const u=o.get(l);return void 0!==u?Promise.resolve(u):(async(a,l)=>{let u=n(a);const c=L(u,l);if(!c){const t={channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,delayTime:u.delayTime.value,maxDelayTime:r};u=e(l,t)}return o.set(l,u),c?await t(l,a.delayTime,u.delayTime):await s(l,a.delayTime,u.delayTime),await i(a,l,u),u})(a,l)}}})($e,Qt,ot,tn,Ae),En=((t,e,n,s,r,o,a)=>class extends t{constructor(t,l){const u=r(t),c=i(i({},At),l),h=s(u,c),d=o(u);super(t,!1,h,d?n(c.maxDelayTime):null),this._delayTime=e(this,d,h.delayTime),a(this,c.maxDelayTime)}get delayTime(){return this._delayTime}})(je,nn,Tn,Qt,Ce,De,ln),kn=(t=>(e,n)=>{const s=e.createDynamicsCompressor();if(qt(s,n),n.channelCount>2)throw t();if("max"===n.channelCountMode)throw t();return jt(s,n,"attack"),jt(s,n,"knee"),jt(s,n,"ratio"),jt(s,n,"release"),jt(s,n,"threshold"),s})($t),An=((t,e,n,s,i)=>()=>{const r=new WeakMap;return{render(o,a){const l=r.get(a);return void 0!==l?Promise.resolve(l):(async(o,a)=>{let l=n(o);const u=L(l,a);if(!u){const t={attack:l.attack.value,channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,knee:l.knee.value,ratio:l.ratio.value,release:l.release.value,threshold:l.threshold.value};l=e(a,t)}return r.set(a,l),u?(await t(a,o.attack,l.attack),await t(a,o.knee,l.knee),await t(a,o.ratio,l.ratio),await t(a,o.release,l.release),await t(a,o.threshold,l.threshold)):(await s(a,o.attack,l.attack),await s(a,o.knee,l.knee),await s(a,o.ratio,l.ratio),await s(a,o.release,l.release),await s(a,o.threshold,l.threshold)),await i(o,a,l),l})(o,a)}}})($e,kn,ot,tn,Ae),On=((t,e,n,s,r,o,a,l)=>class extends t{constructor(t,r){const u=o(t),c=i(i({},Ct),r),h=s(u,c),d=a(u);super(t,!1,h,d?n():null),this._attack=e(this,d,h.attack),this._knee=e(this,d,h.knee),this._nativeDynamicsCompressorNode=h,this._ratio=e(this,d,h.ratio),this._release=e(this,d,h.release),this._threshold=e(this,d,h.threshold),l(this,.006)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(t){const e=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=t,t>2)throw this._nativeDynamicsCompressorNode.channelCount=e,r()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(t){const e=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=t,"max"===t)throw this._nativeDynamicsCompressorNode.channelCountMode=e,r()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return"number"==typeof this._nativeDynamicsCompressorNode.reduction.value?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}})(je,nn,An,kn,$t,Ce,De,ln),Cn=((t,e,n,s,i)=>()=>{const r=new WeakMap;return{render(o,a){const l=r.get(a);return void 0!==l?Promise.resolve(l):(async(o,a)=>{let l=n(o);const u=L(l,a);if(!u){const t={channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,gain:l.gain.value};l=e(a,t)}return r.set(a,l),u?await t(a,o.gain,l.gain):await s(a,o.gain,l.gain),await i(o,a,l),l})(o,a)}}})($e,Yt,ot,tn,Ae),Mn=((t,e,n,s,r,o)=>class extends t{constructor(t,a){const l=r(t),u=i(i({},Mt),a),c=s(l,u),h=o(l);super(t,!1,c,h?n():null),this._gain=e(this,h,c.gain,z,U)}get gain(){return this._gain}})(je,nn,Cn,Yt,Ce,De),In=((t,e,n,s)=>(i,r,o)=>{let{channelCount:a,channelCountMode:l,channelInterpretation:u,feedback:c,feedforward:h}=o;const d=Bt(r,i.sampleRate),f=c instanceof Float64Array?c:new Float64Array(c),p=h instanceof Float64Array?h:new Float64Array(h),m=f.length,g=p.length,_=Math.min(m,g);if(0===m||m>20)throw s();if(0===f[0])throw e();if(0===g||g>20)throw s();if(0===p[0])throw e();if(1!==f[0]){for(let t=0;t<g;t+=1)p[t]/=f[0];for(let t=1;t<m;t+=1)f[t]/=f[0]}const v=n(i,d,a,a);v.channelCount=a,v.channelCountMode=l,v.channelInterpretation=u;const y=[],b=[],w=[];for(let t=0;t<a;t+=1){y.push(0);const t=new Float32Array(32),e=new Float32Array(32);t.fill(0),e.fill(0),b.push(t),w.push(e)}v.onaudioprocess=t=>{const e=t.inputBuffer,n=t.outputBuffer,s=e.numberOfChannels;for(let i=0;i<s;i+=1){const t=e.getChannelData(i),s=n.getChannelData(i);y[i]=Nt(f,m,p,g,_,b[i],w[i],y[i],32,t,s)}};const x=i.sampleRate/2;return Wt({get bufferSize(){return d},get channelCount(){return v.channelCount},set channelCount(t){v.channelCount=t},get channelCountMode(){return v.channelCountMode},set channelCountMode(t){v.channelCountMode=t},get channelInterpretation(){return v.channelInterpretation},set channelInterpretation(t){v.channelInterpretation=t},get context(){return v.context},get inputs(){return[v]},get numberOfInputs(){return v.numberOfInputs},get numberOfOutputs(){return v.numberOfOutputs},addEventListener:function(){return v.addEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])},dispatchEvent:function(){return v.dispatchEvent(arguments.length<=0?void 0:arguments[0])},getFrequencyResponse(e,n,s){if(e.length!==n.length||n.length!==s.length)throw t();const i=e.length;for(let t=0;t<i;t+=1){const i=-Math.PI*(e[t]/x),r=[Math.cos(i),Math.sin(i)],o=Xt(Zt(p,r),Zt(f,r));n[t]=Math.sqrt(o[0]*o[0]+o[1]*o[1]),s[t]=Math.atan2(o[1],o[0])}},removeEventListener:function(){return v.removeEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])}},v)})(Dt,It,Kt,$t),Dn=((t,e,n,s)=>i=>t(Lt,(()=>Lt(i)))?Promise.resolve(t(s,s)).then((t=>{if(!t){const t=n(i,512,0,1);i.oncomplete=()=>{t.onaudioprocess=null,t.disconnect()},t.onaudioprocess=()=>i.currentTime,t.connect(i.destination)}return i.startRendering()})):new Promise((t=>{const n=e(i,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});i.oncomplete=e=>{n.disconnect(),t(e.renderedBuffer)},n.connect(i.destination),i.startRendering()})))(we,Yt,Kt,((t,e)=>()=>{if(null===e)return Promise.resolve(!1);const n=new e(1,1,44100),s=t(n,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise((t=>{n.oncomplete=()=>{s.disconnect(),t(0!==n.currentTime)},n.startRendering()}))})(Yt,Ie)),Rn=((t,e,n,s,i)=>(r,o)=>{const a=new WeakMap;let l=null;return{render(u,c){const h=a.get(c);return void 0!==h?Promise.resolve(h):(async(u,c)=>{let h=null,d=e(u);const f=L(d,c);if(void 0===c.createIIRFilter?h=t(c,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):f||(d=c.createIIRFilter(o,r)),a.set(c,null===h?d:h),null!==h){if(null===l){if(null===n)throw new Error("Missing the native OfflineAudioContext constructor.");const t=new n(u.context.destination.channelCount,u.context.length,c.sampleRate);l=(async()=>(await s(u,t,t.destination),((t,e,n,s)=>{const i=n instanceof Float64Array?n:new Float64Array(n),r=s instanceof Float64Array?s:new Float64Array(s),o=i.length,a=r.length,l=Math.min(o,a);if(1!==i[0]){for(let t=0;t<o;t+=1)r[t]/=i[0];for(let t=1;t<a;t+=1)i[t]/=i[0]}const u=new Float32Array(32),c=new Float32Array(32),h=e.createBuffer(t.numberOfChannels,t.length,t.sampleRate),d=t.numberOfChannels;for(let f=0;f<d;f+=1){const e=t.getChannelData(f),n=h.getChannelData(f);u.fill(0),c.fill(0),Nt(i,o,r,a,l,u,c,0,32,e,n)}return h})(await i(t),c,r,o)))()}const t=await l;return h.buffer=t,h.start(0),h}return await s(u,c,d),d})(u,c)}}})(Je,ot,Ie,Ae,Dn),Nn=(t=>(e,n,s)=>{if(void 0===e.createIIRFilter)return t(e,n,s);const i=e.createIIRFilter(s.feedforward,s.feedback);return qt(i,s),i})(In),Pn=((t,e,n,s,r,o)=>class extends t{constructor(t,a){const l=s(t),u=r(l),c=i(i({},Rt),a),h=e(l,u?null:t.baseLatency,c);super(t,!1,h,u?n(c.feedback,c.feedforward):null),(t=>{var e;t.getFrequencyResponse=(e=t.getFrequencyResponse,(n,s,i)=>{if(n.length!==s.length||s.length!==i.length)throw Dt();return e.call(t,n,s,i)})})(h),this._nativeIIRFilterNode=h,o(this,1)}getFrequencyResponse(t,e,n){return this._nativeIIRFilterNode.getFrequencyResponse(t,e,n)}})(je,Nn,Rn,Ce,De,ln),Ln=((t,e,n,s,i,r,o,a)=>(l,u)=>{const c=u.listener,{forwardX:h,forwardY:d,forwardZ:f,positionX:p,positionY:m,positionZ:g,upX:_,upY:v,upZ:y}=void 0===c.forwardX?(()=>{const h=new Float32Array(1),d=e(u,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),f=o(u);let p=!1,m=[0,0,-1,0,1,0],g=[0,0,0];const _=()=>{if(p)return;p=!0;const t=s(u,256,9,0);t.onaudioprocess=t=>{let{inputBuffer:e}=t;const n=[r(e,h,0),r(e,h,1),r(e,h,2),r(e,h,3),r(e,h,4),r(e,h,5)];n.some(((t,e)=>t!==m[e]))&&(c.setOrientation(...n),m=n);const s=[r(e,h,6),r(e,h,7),r(e,h,8)];s.some(((t,e)=>t!==g[e]))&&(c.setPosition(...s),g=s)},d.connect(t)},v=t=>e=>{e!==m[t]&&(m[t]=e,c.setOrientation(...m))},y=t=>e=>{e!==g[t]&&(g[t]=e,c.setPosition(...g))},b=(e,s,r)=>{const o=n(u,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:s});o.connect(d,0,e),o.start(),Object.defineProperty(o.offset,"defaultValue",{get:()=>s});const c=t({context:l},f,o.offset,z,U);var h,p,m,g,v,y,b;return a(c,"value",(t=>()=>t.call(c)),(t=>e=>{try{t.call(c,e)}catch(t){if(9!==t.code)throw t}_(),f&&r(e)})),c.cancelAndHoldAtTime=(h=c.cancelAndHoldAtTime,f?()=>{throw i()}:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];const s=h.apply(c,e);return _(),s}),c.cancelScheduledValues=(p=c.cancelScheduledValues,f?()=>{throw i()}:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];const s=p.apply(c,e);return _(),s}),c.exponentialRampToValueAtTime=(m=c.exponentialRampToValueAtTime,f?()=>{throw i()}:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];const s=m.apply(c,e);return _(),s}),c.linearRampToValueAtTime=(g=c.linearRampToValueAtTime,f?()=>{throw i()}:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];const s=g.apply(c,e);return _(),s}),c.setTargetAtTime=(v=c.setTargetAtTime,f?()=>{throw i()}:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];const s=v.apply(c,e);return _(),s}),c.setValueAtTime=(y=c.setValueAtTime,f?()=>{throw i()}:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];const s=y.apply(c,e);return _(),s}),c.setValueCurveAtTime=(b=c.setValueCurveAtTime,f?()=>{throw i()}:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];const s=b.apply(c,e);return _(),s}),c};return{forwardX:b(0,0,v(0)),forwardY:b(1,0,v(1)),forwardZ:b(2,-1,v(2)),positionX:b(6,0,y(0)),positionY:b(7,0,y(1)),positionZ:b(8,0,y(2)),upX:b(3,0,v(3)),upY:b(4,1,v(4)),upZ:b(5,0,v(5))}})():c;return{get forwardX(){return h},get forwardY(){return d},get forwardZ(){return f},get positionX(){return p},get positionY(){return m},get positionZ(){return g},get upX(){return _},get upY(){return v},get upZ(){return y}}})(nn,dn,vn,Kt,$t,re,De,ae),Fn=new WeakMap,qn=((t,e,n,s,i,r)=>class extends n{constructor(n,r){super(n),this._nativeContext=n,_.set(this,n),s(n)&&i.set(n,new Set),this._destination=new t(this,r),this._listener=e(this,n),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(t){const e="function"==typeof t?r(this,t):null;this._nativeContext.onstatechange=e;const n=this._nativeContext.onstatechange;this._onstatechange=null!==n&&n===e?t:n}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}})(on,Ln,Ne,De,Fn,me),Vn=((t,e,n,s,i,r)=>(o,a)=>{const l=o.createOscillator();return qt(l,a),jt(l,a,"detune"),jt(l,a,"frequency"),void 0!==a.periodicWave?l.setPeriodicWave(a.periodicWave):Ft(l,a,"type"),e(n,(()=>n(o)))||Ut(l),e(s,(()=>s(o)))||r(l,o),e(i,(()=>i(o)))||zt(l),t(o,l),l})(Ze,we,ue,ce,he,pe),jn=((t,e,n,s,i)=>()=>{const r=new WeakMap;let o=null,a=null,l=null;return{set periodicWave(t){o=t},set start(t){a=t},set stop(t){l=t},render(u,c){const h=r.get(c);return void 0!==h?Promise.resolve(h):(async(u,c)=>{let h=n(u);const d=L(h,c);if(!d){const t={channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,detune:h.detune.value,frequency:h.frequency.value,periodicWave:null===o?void 0:o,type:h.type};h=e(c,t),null!==a&&h.start(a),null!==l&&h.stop(l)}return r.set(c,h),d?(await t(c,u.detune,h.detune),await t(c,u.frequency,h.frequency)):(await s(c,u.detune,h.detune),await s(c,u.frequency,h.frequency)),await i(u,c,h),h})(u,c)}}})($e,Vn,ot,tn,Ae),Un=((t,e,n,s,r,o,a)=>class extends t{constructor(t,a){const l=r(t),u=i(i({},te),a),c=n(l,u),h=o(l),d=h?s():null,f=t.sampleRate/2;super(t,!1,c,d),this._detune=e(this,h,c.detune,153600,-153600),this._frequency=e(this,h,c.frequency,f,-f),this._nativeOscillatorNode=c,this._onended=null,this._oscillatorNodeRenderer=d,null!==this._oscillatorNodeRenderer&&void 0!==u.periodicWave&&(this._oscillatorNodeRenderer.periodicWave=u.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(t){const e="function"==typeof t?a(this,t):null;this._nativeOscillatorNode.onended=e;const n=this._nativeOscillatorNode.onended;this._onended=null!==n&&n===e?t:n}get type(){return this._nativeOscillatorNode.type}set type(t){this._nativeOscillatorNode.type=t,null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(t){this._nativeOscillatorNode.setPeriodicWave(t),null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.periodicWave=t)}start(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(this._nativeOscillatorNode.start(t),null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.start=t),"closed"!==this.context.state){I(this);const t=()=>{this._nativeOscillatorNode.removeEventListener("ended",t),B(this)&&R(this)};this._nativeOscillatorNode.addEventListener("ended",t)}}stop(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this._nativeOscillatorNode.stop(t),null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.stop=t)}})(je,nn,Vn,jn,Ce,De,me),zn=(t=>(e,n)=>{const s=t(e,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),i=e.createBuffer(1,2,44100);return s.buffer=i,s.loop=!0,s.connect(n),s.start(),()=>{s.stop(),s.disconnect(n)}})(Je),Bn=((t,e,n,r,a)=>(l,u)=>{let{curve:c,oversample:h}=u,d=s(u,o);const f=l.createWaveShaper(),p=l.createWaveShaper();qt(f,d),qt(p,d);const m=n(l,i(i({},d),{},{gain:1})),g=n(l,i(i({},d),{},{gain:-1})),_=n(l,i(i({},d),{},{gain:1})),v=n(l,i(i({},d),{},{gain:-1}));let y=null,b=!1,w=null;const x={get bufferSize(){},get channelCount(){return f.channelCount},set channelCount(t){m.channelCount=t,g.channelCount=t,f.channelCount=t,_.channelCount=t,p.channelCount=t,v.channelCount=t},get channelCountMode(){return f.channelCountMode},set channelCountMode(t){m.channelCountMode=t,g.channelCountMode=t,f.channelCountMode=t,_.channelCountMode=t,p.channelCountMode=t,v.channelCountMode=t},get channelInterpretation(){return f.channelInterpretation},set channelInterpretation(t){m.channelInterpretation=t,g.channelInterpretation=t,f.channelInterpretation=t,_.channelInterpretation=t,p.channelInterpretation=t,v.channelInterpretation=t},get context(){return f.context},get curve(){return w},set curve(n){if(null!==n&&n.length<2)throw e();if(null===n)f.curve=n,p.curve=n;else{const t=n.length,e=new Float32Array(t+2-t%2),s=new Float32Array(t+2-t%2);e[0]=n[0],s[0]=-n[t-1];const i=Math.ceil((t+1)/2),r=(t+1)/2-1;for(let o=1;o<i;o+=1){const a=o/i*r,l=Math.floor(a),u=Math.ceil(a);e[o]=l===u?n[l]:(1-(a-l))*n[l]+(1-(u-a))*n[u],s[o]=l===u?-n[t-1-l]:-(1-(a-l))*n[t-1-l]-(1-(u-a))*n[t-1-u]}e[i]=t%2==1?n[i-1]:(n[i-2]+n[i-1])/2,f.curve=e,p.curve=s}w=n,b&&(r(w)&&null===y?y=t(l,m):null!==y&&(y(),y=null))},get inputs(){return[m]},get numberOfInputs(){return f.numberOfInputs},get numberOfOutputs(){return f.numberOfOutputs},get oversample(){return f.oversample},set oversample(t){f.oversample=t,p.oversample=t},addEventListener:function(){return m.addEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])},dispatchEvent:function(){return m.dispatchEvent(arguments.length<=0?void 0:arguments[0])},removeEventListener:function(){return m.removeEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])}};return null!==c&&(x.curve=c instanceof Float32Array?c:new Float32Array(c)),h!==x.oversample&&(x.oversample=h),a(Wt(x,_),(()=>{m.connect(f).connect(_),m.connect(g).connect(p).connect(v).connect(_),b=!0,r(w)&&(y=t(l,m))}),(()=>{m.disconnect(f),f.disconnect(_),m.disconnect(g),g.disconnect(p),p.disconnect(v),v.disconnect(_),b=!1,null!==y&&(y(),y=null)}))})(zn,It,Yt,oe,cn),Hn=((t,e,n,s,i,r,o)=>(a,l)=>{const u=a.createWaveShaper();if(null!==r&&"webkitAudioContext"===r.name&&void 0===a.createGain().gain.automationRate)return n(a,l);qt(u,l);const c=null===l.curve||l.curve instanceof Float32Array?l.curve:new Float32Array(l.curve);if(null!==c&&c.length<2)throw e();Ft(u,{curve:c},"curve"),Ft(u,l,"oversample");let h=null,d=!1;return o(u,"curve",(t=>()=>t.call(u)),(e=>n=>(e.call(u,n),d&&(s(n)&&null===h?h=t(a,u):s(n)||null===h||(h(),h=null)),n))),i(u,(()=>{d=!0,s(u.curve)&&(h=t(a,u))}),(()=>{d=!1,null!==h&&(h(),h=null)}))})(zn,It,Bn,oe,cn,Pe,ae),Gn=((t,e,n,r,o,l,u,c,h,d)=>(f,p)=>{let{coneInnerAngle:m,coneOuterAngle:g,coneOuterGain:_,distanceModel:v,maxDistance:y,orientationX:b,orientationY:w,orientationZ:x,panningModel:S,positionX:T,positionY:E,positionZ:k,refDistance:A,rolloffFactor:O}=p,C=s(p,a);const M=f.createPanner();if(C.channelCount>2)throw u();if("max"===C.channelCountMode)throw u();qt(M,C);const I={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},D=n(f,i(i({},I),{},{channelInterpretation:"speakers",numberOfInputs:6})),R=r(f,i(i({},C),{},{gain:1})),N=r(f,i(i({},I),{},{gain:1})),P=r(f,i(i({},I),{},{gain:0})),L=r(f,i(i({},I),{},{gain:0})),F=r(f,i(i({},I),{},{gain:0})),q=r(f,i(i({},I),{},{gain:0})),V=r(f,i(i({},I),{},{gain:0})),j=o(f,256,6,1),U=l(f,i(i({},I),{},{curve:new Float32Array([1,1]),oversample:"none"}));let z=[b,w,x],B=[T,E,k];const H=new Float32Array(1);j.onaudioprocess=t=>{let{inputBuffer:e}=t;const n=[h(e,H,0),h(e,H,1),h(e,H,2)];n.some(((t,e)=>t!==z[e]))&&(M.setOrientation(...n),z=n);const s=[h(e,H,3),h(e,H,4),h(e,H,5)];s.some(((t,e)=>t!==B[e]))&&(M.setPosition(...s),B=s)},Object.defineProperty(P.gain,"defaultValue",{get:()=>0}),Object.defineProperty(L.gain,"defaultValue",{get:()=>0}),Object.defineProperty(F.gain,"defaultValue",{get:()=>0}),Object.defineProperty(q.gain,"defaultValue",{get:()=>0}),Object.defineProperty(V.gain,"defaultValue",{get:()=>0});const G={get bufferSize(){},get channelCount(){return M.channelCount},set channelCount(t){if(t>2)throw u();R.channelCount=t,M.channelCount=t},get channelCountMode(){return M.channelCountMode},set channelCountMode(t){if("max"===t)throw u();R.channelCountMode=t,M.channelCountMode=t},get channelInterpretation(){return M.channelInterpretation},set channelInterpretation(t){R.channelInterpretation=t,M.channelInterpretation=t},get coneInnerAngle(){return M.coneInnerAngle},set coneInnerAngle(t){M.coneInnerAngle=t},get coneOuterAngle(){return M.coneOuterAngle},set coneOuterAngle(t){M.coneOuterAngle=t},get coneOuterGain(){return M.coneOuterGain},set coneOuterGain(t){if(t<0||t>1)throw e();M.coneOuterGain=t},get context(){return M.context},get distanceModel(){return M.distanceModel},set distanceModel(t){M.distanceModel=t},get inputs(){return[R]},get maxDistance(){return M.maxDistance},set maxDistance(t){if(t<0)throw new RangeError;M.maxDistance=t},get numberOfInputs(){return M.numberOfInputs},get numberOfOutputs(){return M.numberOfOutputs},get orientationX(){return N.gain},get orientationY(){return P.gain},get orientationZ(){return L.gain},get panningModel(){return M.panningModel},set panningModel(t){M.panningModel=t},get positionX(){return F.gain},get positionY(){return q.gain},get positionZ(){return V.gain},get refDistance(){return M.refDistance},set refDistance(t){if(t<0)throw new RangeError;M.refDistance=t},get rolloffFactor(){return M.rolloffFactor},set rolloffFactor(t){if(t<0)throw new RangeError;M.rolloffFactor=t},addEventListener:function(){return R.addEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])},dispatchEvent:function(){return R.dispatchEvent(arguments.length<=0?void 0:arguments[0])},removeEventListener:function(){return R.removeEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])}};return m!==G.coneInnerAngle&&(G.coneInnerAngle=m),g!==G.coneOuterAngle&&(G.coneOuterAngle=g),_!==G.coneOuterGain&&(G.coneOuterGain=_),v!==G.distanceModel&&(G.distanceModel=v),y!==G.maxDistance&&(G.maxDistance=y),b!==G.orientationX.value&&(G.orientationX.value=b),w!==G.orientationY.value&&(G.orientationY.value=w),x!==G.orientationZ.value&&(G.orientationZ.value=x),S!==G.panningModel&&(G.panningModel=S),T!==G.positionX.value&&(G.positionX.value=T),E!==G.positionY.value&&(G.positionY.value=E),k!==G.positionZ.value&&(G.positionZ.value=k),A!==G.refDistance&&(G.refDistance=A),O!==G.rolloffFactor&&(G.rolloffFactor=O),1===z[0]&&0===z[1]&&0===z[2]||M.setOrientation(...z),0===B[0]&&0===B[1]&&0===B[2]||M.setPosition(...B),d(Wt(G,M),(()=>{R.connect(M),t(R,U,0,0),U.connect(N).connect(D,0,0),U.connect(P).connect(D,0,1),U.connect(L).connect(D,0,2),U.connect(F).connect(D,0,3),U.connect(q).connect(D,0,4),U.connect(V).connect(D,0,5),D.connect(j).connect(f.destination)}),(()=>{R.disconnect(M),c(R,U,0,0),U.disconnect(N),N.disconnect(D),U.disconnect(P),P.disconnect(D),U.disconnect(L),L.disconnect(D),U.disconnect(F),F.disconnect(D),U.disconnect(q),q.disconnect(D),U.disconnect(V),V.disconnect(D),D.disconnect(j),j.disconnect(f.destination)}))})(et,It,dn,Yt,Kt,Hn,$t,rt,re,cn),Wn=(t=>(e,n)=>{const s=e.createPanner();return void 0===s.orientationX?t(e,n):(qt(s,n),jt(s,n,"orientationX"),jt(s,n,"orientationY"),jt(s,n,"orientationZ"),jt(s,n,"positionX"),jt(s,n,"positionY"),jt(s,n,"positionZ"),Ft(s,n,"coneInnerAngle"),Ft(s,n,"coneOuterAngle"),Ft(s,n,"coneOuterGain"),Ft(s,n,"distanceModel"),Ft(s,n,"maxDistance"),Ft(s,n,"panningModel"),Ft(s,n,"refDistance"),Ft(s,n,"rolloffFactor"),s)})(Gn),Qn=((t,e,n,s,r,o,a,l,u,c)=>()=>{const h=new WeakMap;let d=null;return{render(f,p){const m=h.get(p);return void 0!==m?Promise.resolve(m):(async(f,p)=>{let m=null,g=o(f);const _={channelCount:g.channelCount,channelCountMode:g.channelCountMode,channelInterpretation:g.channelInterpretation},v=i(i({},_),{},{coneInnerAngle:g.coneInnerAngle,coneOuterAngle:g.coneOuterAngle,coneOuterGain:g.coneOuterGain,distanceModel:g.distanceModel,maxDistance:g.maxDistance,panningModel:g.panningModel,refDistance:g.refDistance,rolloffFactor:g.rolloffFactor}),y=L(g,p);if("bufferSize"in g)m=s(p,i(i({},_),{},{gain:1}));else if(!y){const t=i(i({},v),{},{orientationX:g.orientationX.value,orientationY:g.orientationY.value,orientationZ:g.orientationZ.value,positionX:g.positionX.value,positionY:g.positionY.value,positionZ:g.positionZ.value});g=r(p,t)}if(h.set(p,null===m?g:m),null!==m){if(null===d){if(null===a)throw new Error("Missing the native OfflineAudioContext constructor.");const t=new a(6,f.context.length,p.sampleRate),s=e(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});s.connect(t.destination),d=(async()=>{const e=await Promise.all([f.orientationX,f.orientationY,f.orientationZ,f.positionX,f.positionY,f.positionZ].map((async(e,s)=>{const i=n(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:0===s?1:0});return await l(t,e,i.offset),i})));for(let t=0;t<6;t+=1)e[t].connect(s,0,t),e[t].start(0);return c(t)})()}const t=await d,o=s(p,i(i({},_),{},{gain:1}));await u(f,p,o);const h=[];for(let e=0;e<t.numberOfChannels;e+=1)h.push(t.getChannelData(e));let g=[h[0][0],h[1][0],h[2][0]],y=[h[3][0],h[4][0],h[5][0]],b=s(p,i(i({},_),{},{gain:1})),w=r(p,i(i({},v),{},{orientationX:g[0],orientationY:g[1],orientationZ:g[2],positionX:y[0],positionY:y[1],positionZ:y[2]}));o.connect(b).connect(w.inputs[0]),w.connect(m);for(let e=128;e<t.length;e+=128){const t=[h[0][e],h[1][e],h[2][e]],n=[h[3][e],h[4][e],h[5][e]];if(t.some(((t,e)=>t!==g[e]))||n.some(((t,e)=>t!==y[e]))){g=t,y=n;const a=e/p.sampleRate;b.gain.setValueAtTime(0,a),b=s(p,i(i({},_),{},{gain:0})),w=r(p,i(i({},v),{},{orientationX:g[0],orientationY:g[1],orientationZ:g[2],positionX:y[0],positionY:y[1],positionZ:y[2]})),b.gain.setValueAtTime(1,a),o.connect(b).connect(w.inputs[0]),w.connect(m)}}return m}return y?(await t(p,f.orientationX,g.orientationX),await t(p,f.orientationY,g.orientationY),await t(p,f.orientationZ,g.orientationZ),await t(p,f.positionX,g.positionX),await t(p,f.positionY,g.positionY),await t(p,f.positionZ,g.positionZ)):(await l(p,f.orientationX,g.orientationX),await l(p,f.orientationY,g.orientationY),await l(p,f.orientationZ,g.orientationZ),await l(p,f.positionX,g.positionX),await l(p,f.positionY,g.positionY),await l(p,f.positionZ,g.positionZ)),tt(g)?await u(f,p,g.inputs[0]):await u(f,p,g),g})(f,p)}}})($e,dn,vn,Yt,Wn,ot,Ie,tn,Ae,Dn),Yn=((t,e,n,s,r,o,a)=>class extends t{constructor(t,l){const u=r(t),c=i(i({},ee),l),h=n(u,c),d=o(u);super(t,!1,h,d?s():null),this._nativePannerNode=h,this._orientationX=e(this,d,h.orientationX,z,U),this._orientationY=e(this,d,h.orientationY,z,U),this._orientationZ=e(this,d,h.orientationZ,z,U),this._positionX=e(this,d,h.positionX,z,U),this._positionY=e(this,d,h.positionY,z,U),this._positionZ=e(this,d,h.positionZ,z,U),a(this,1)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(t){this._nativePannerNode.coneInnerAngle=t}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(t){this._nativePannerNode.coneOuterAngle=t}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(t){this._nativePannerNode.coneOuterGain=t}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(t){this._nativePannerNode.distanceModel=t}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(t){this._nativePannerNode.maxDistance=t}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(t){this._nativePannerNode.panningModel=t}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(t){this._nativePannerNode.refDistance=t}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(t){this._nativePannerNode.rolloffFactor=t}})(je,nn,Wn,Qn,Ce,De,ln),Xn=(t=>(e,n)=>{let{disableNormalization:s,imag:i,real:r}=n;const o=i instanceof Float32Array?i:new Float32Array(i),a=r instanceof Float32Array?r:new Float32Array(r),l=e.createPeriodicWave(a,o,{disableNormalization:s});if(Array.from(i).length<2)throw t();return l})(q),Zn=((t,e,n)=>class s{constructor(s,r){const o=e(s),a=(t=>{const{imag:e,real:n}=t;return i(i({},t),{},void 0===e?void 0===n?{imag:[0,0],real:[0,0]}:{imag:Array.from(n,(()=>0)),real:n}:void 0===n?{imag:e,real:Array.from(e,(()=>0))}:{imag:e,real:n})})(i(i({},ne),r)),l=t(o,a);return n.add(l),l}static[Symbol.hasInstance](t){return null!==t&&"object"==typeof t&&Object.getPrototypeOf(t)===s.prototype||n.has(t)}})(Xn,Ce,new WeakSet),Kn=((t,e,n,r,o,a)=>{const u=16385,c=new Float32Array([1,1]),h=Math.PI/2,d={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},f=i(i({},d),{},{oversample:"none"}),p=(t,s,a,l,p)=>{if(1===s)return((t,e,s,o)=>{const a=new Float32Array(u),l=new Float32Array(u);for(let n=0;n<u;n+=1){const t=n/16384*h;a[n]=Math.cos(t),l[n]=Math.sin(t)}const p=n(t,i(i({},d),{},{gain:0})),m=r(t,i(i({},f),{},{curve:a})),g=r(t,i(i({},f),{},{curve:c})),_=n(t,i(i({},d),{},{gain:0})),v=r(t,i(i({},f),{},{curve:l}));return{connectGraph(){e.connect(p),e.connect(void 0===g.inputs?g:g.inputs[0]),e.connect(_),g.connect(s),s.connect(void 0===m.inputs?m:m.inputs[0]),s.connect(void 0===v.inputs?v:v.inputs[0]),m.connect(p.gain),v.connect(_.gain),p.connect(o,0,0),_.connect(o,0,1)},disconnectGraph(){e.disconnect(p),e.disconnect(void 0===g.inputs?g:g.inputs[0]),e.disconnect(_),g.disconnect(s),s.disconnect(void 0===m.inputs?m:m.inputs[0]),s.disconnect(void 0===v.inputs?v:v.inputs[0]),m.disconnect(p.gain),v.disconnect(_.gain),p.disconnect(o,0,0),_.disconnect(o,0,1)}}})(t,a,l,p);if(2===s)return((t,s,o,a)=>{const l=new Float32Array(u),p=new Float32Array(u),m=new Float32Array(u),g=new Float32Array(u),_=Math.floor(8192.5);for(let e=0;e<u;e+=1)if(e>_){const t=(e-_)/(16384-_)*h;l[e]=Math.cos(t),p[e]=Math.sin(t),m[e]=0,g[e]=1}else{const t=e/(16384-_)*h;l[e]=1,p[e]=0,m[e]=Math.cos(t),g[e]=Math.sin(t)}const v=e(t,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),y=n(t,i(i({},d),{},{gain:0})),b=r(t,i(i({},f),{},{curve:l})),w=n(t,i(i({},d),{},{gain:0})),x=r(t,i(i({},f),{},{curve:p})),S=r(t,i(i({},f),{},{curve:c})),T=n(t,i(i({},d),{},{gain:0})),E=r(t,i(i({},f),{},{curve:m})),k=n(t,i(i({},d),{},{gain:0})),A=r(t,i(i({},f),{},{curve:g}));return{connectGraph(){s.connect(v),s.connect(void 0===S.inputs?S:S.inputs[0]),v.connect(y,0),v.connect(w,0),v.connect(T,1),v.connect(k,1),S.connect(o),o.connect(void 0===b.inputs?b:b.inputs[0]),o.connect(void 0===x.inputs?x:x.inputs[0]),o.connect(void 0===E.inputs?E:E.inputs[0]),o.connect(void 0===A.inputs?A:A.inputs[0]),b.connect(y.gain),x.connect(w.gain),E.connect(T.gain),A.connect(k.gain),y.connect(a,0,0),T.connect(a,0,0),w.connect(a,0,1),k.connect(a,0,1)},disconnectGraph(){s.disconnect(v),s.disconnect(void 0===S.inputs?S:S.inputs[0]),v.disconnect(y,0),v.disconnect(w,0),v.disconnect(T,1),v.disconnect(k,1),S.disconnect(o),o.disconnect(void 0===b.inputs?b:b.inputs[0]),o.disconnect(void 0===x.inputs?x:x.inputs[0]),o.disconnect(void 0===E.inputs?E:E.inputs[0]),o.disconnect(void 0===A.inputs?A:A.inputs[0]),b.disconnect(y.gain),x.disconnect(w.gain),E.disconnect(T.gain),A.disconnect(k.gain),y.disconnect(a,0,0),T.disconnect(a,0,0),w.disconnect(a,0,1),k.disconnect(a,0,1)}}})(t,a,l,p);throw o()};return(e,r)=>{let{channelCount:u,channelCountMode:c,pan:h}=r,d=s(r,l);if("max"===c)throw o();const f=t(e,i(i({},d),{},{channelCount:1,channelCountMode:c,numberOfInputs:2})),m=n(e,i(i({},d),{},{channelCount:u,channelCountMode:c,gain:1})),g=n(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:h});let{connectGraph:_,disconnectGraph:v}=p(e,u,m,g,f);Object.defineProperty(g.gain,"defaultValue",{get:()=>0}),Object.defineProperty(g.gain,"maxValue",{get:()=>1}),Object.defineProperty(g.gain,"minValue",{get:()=>-1});const y={get bufferSize(){},get channelCount(){return m.channelCount},set channelCount(t){m.channelCount!==t&&(b&&v(),({connectGraph:_,disconnectGraph:v}=p(e,t,m,g,f)),b&&_()),m.channelCount=t},get channelCountMode(){return m.channelCountMode},set channelCountMode(t){if("clamped-max"===t||"max"===t)throw o();m.channelCountMode=t},get channelInterpretation(){return m.channelInterpretation},set channelInterpretation(t){m.channelInterpretation=t},get context(){return m.context},get inputs(){return[m]},get numberOfInputs(){return m.numberOfInputs},get numberOfOutputs(){return m.numberOfOutputs},get pan(){return g.gain},addEventListener:function(){return m.addEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])},dispatchEvent:function(){return m.dispatchEvent(arguments.length<=0?void 0:arguments[0])},removeEventListener:function(){return m.removeEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])}};let b=!1;return a(Wt(y,f),(()=>{_(),b=!0}),(()=>{v(),b=!1}))}})(dn,Gt,Yt,Hn,$t,cn),$n=((t,e)=>(n,s)=>{const i=s.channelCountMode;if("clamped-max"===i)throw e();if(void 0===n.createStereoPanner)return t(n,s);const r=n.createStereoPanner();return qt(r,s),jt(r,s,"pan"),Object.defineProperty(r,"channelCountMode",{get:()=>i,set:t=>{if(t!==i)throw e()}}),r})(Kn,$t),Jn=((t,e,n,s,i)=>()=>{const r=new WeakMap;return{render(o,a){const l=r.get(a);return void 0!==l?Promise.resolve(l):(async(o,a)=>{let l=n(o);const u=L(l,a);if(!u){const t={channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,pan:l.pan.value};l=e(a,t)}return r.set(a,l),u?await t(a,o.pan,l.pan):await s(a,o.pan,l.pan),tt(l)?await i(o,a,l.inputs[0]):await i(o,a,l),l})(o,a)}}})($e,$n,ot,tn,Ae),ts=((t,e,n,s,r,o)=>class extends t{constructor(t,a){const l=r(t),u=i(i({},se),a),c=n(l,u),h=o(l);super(t,!1,c,h?s():null),this._pan=e(this,h,c.pan)}get pan(){return this._pan}})(je,nn,$n,Jn,Ce,De),es=((t,e,n)=>()=>{const s=new WeakMap;return{render(i,r){const o=s.get(r);return void 0!==o?Promise.resolve(o):(async(i,r)=>{let o=e(i);if(!L(o,r)){const e={channelCount:o.channelCount,channelCountMode:o.channelCountMode,channelInterpretation:o.channelInterpretation,curve:o.curve,oversample:o.oversample};o=t(r,e)}return s.set(r,o),tt(o)?await n(i,r,o.inputs[0]):await n(i,r,o),o})(i,r)}}})(Hn,ot,Ae),ns=((t,e,n,s,r,o,a)=>class extends t{constructor(t,e){const l=r(t),u=i(i({},ie),e),c=n(l,u);super(t,!0,c,o(l)?s():null),this._isCurveNullified=!1,this._nativeWaveShaperNode=c,a(this,1)}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(t){if(null===t)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(t.length<2)throw e();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=t}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(t){this._nativeWaveShaperNode.oversample=t}})(je,It,Hn,es,Ce,De,ln),ss=(t=>null!==t&&t.isSecureContext)(Te),is=(t=>(e,n,s)=>{Object.defineProperties(t,{currentFrame:{configurable:!0,get:()=>Math.round(e*n)},currentTime:{configurable:!0,get:()=>e}});try{return s()}finally{null!==t&&(delete t.currentFrame,delete t.currentTime)}})(Te),rs=new WeakMap,os=((t,e)=>n=>{let s=t.get(n);if(void 0!==s)return s;if(null===e)throw new Error("Missing the native OfflineAudioContext constructor.");return s=new e(1,1,44100),t.set(n,s),s})(rs,Ie),as=ss?((t,e,n,s,i,r,o,a,l,u,c,h,d)=>{let f=0;return function(p,m){let g=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{credentials:"omit"};const _=c.get(p);if(void 0!==_&&_.has(m))return Promise.resolve();const v=u.get(p);if(void 0!==v){const t=v.get(m);if(void 0!==t)return t}const y=r(p),w=void 0===y.audioWorklet?i(m).then((t=>{let[e,s]=t;const[i,r]=T(e,s);return n("".concat(i,";((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{").concat(r,"\n})})(window,'_AWGS')"))})).then((()=>{const t=d._AWGS.pop();if(void 0===t)throw new SyntaxError;s(y.currentTime,y.sampleRate,(()=>t(class{},void 0,((t,n)=>{if(""===t.trim())throw e();const s=b.get(y);if(void 0!==s){if(s.has(t))throw e();k(n),E(n.parameterDescriptors),s.set(t,n)}else k(n),E(n.parameterDescriptors),b.set(y,new Map([[t,n]]))}),y.sampleRate,void 0,void 0)))})):Promise.all([i(m),Promise.resolve(t(h,h))]).then((t=>{let[[e,n],s]=t;const i=f+1;f=i;const[r,u]=T(e,n),c=new Blob(["".concat(r,";((AudioWorkletProcessor,registerProcessor)=>{").concat(u,"\n})(").concat(s?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}",",(n,p)=>registerProcessor(n,class extends p{").concat(s?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));","process(i,o,p){").concat(s?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));","return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac").concat(i,"',class extends AudioWorkletProcessor{process(){return !1}})")],{type:"application/javascript; charset=utf-8"}),h=URL.createObjectURL(c);return y.audioWorklet.addModule(h,g).then((()=>{if(a(y))return y;const t=o(y);return t.audioWorklet.addModule(h,g).then((()=>t))})).then((t=>{if(null===l)throw new SyntaxError;try{new l(t,"__sac".concat(i))}catch(e){throw new SyntaxError}})).finally((()=>URL.revokeObjectURL(h)))}));return void 0===v?u.set(p,new Map([[m,w]])):v.set(m,w),w.then((()=>{const t=c.get(p);void 0===t?c.set(p,new Set([m])):t.add(m)})).finally((()=>{const t=u.get(p);void 0!==t&&t.delete(m)})),w}})(we,$t,(t=>e=>new Promise(((n,s)=>{if(null===t)return void s(new SyntaxError);const i=t.document.head;if(null===i)s(new SyntaxError);else{const r=t.document.createElement("script"),o=new Blob([e],{type:"application/javascript"}),a=URL.createObjectURL(o),l=t.onerror,u=()=>{t.onerror=l,URL.revokeObjectURL(a)};t.onerror=(e,n,i,r,o)=>n===a||n===t.location.href&&1===i&&1===r?(u(),s(o),!1):null!==l?l(e,n,i,r,o):void 0,r.onerror=()=>{u(),s(new SyntaxError)},r.onload=()=>{u(),n()},r.src=a,r.type="module",i.appendChild(r)}})))(Te),is,(async t=>{try{const e=await fetch(t);if(e.ok)return[await e.text(),e.url]}catch(e){}throw new DOMException("","AbortError")}),Ce,os,De,Ve,new WeakMap,new WeakMap,((t,e)=>async()=>{if(null===t)return!0;if(null===e)return!1;const n=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),s=new e(1,128,44100),i=URL.createObjectURL(n);let r=!1,o=!1;try{await s.audioWorklet.addModule(i);const e=new t(s,"a",{numberOfOutputs:0}),n=s.createOscillator();e.port.onmessage=()=>r=!0,e.onprocessorerror=()=>o=!0,n.connect(e),n.start(0),await s.startRendering(),await new Promise((t=>setTimeout(t)))}catch(a){}finally{URL.revokeObjectURL(i)}return r&&!o})(Ve,Ie),Te):void 0,ls=((t,e)=>n=>t(n)||e(n))(Le,De),us=((t,e,n,s,i,r,o,a,l,u,c)=>(n,s)=>{const h=o(n)?n:r(n);if(i.has(s)){const t=new DOMException("","DataCloneError");return Promise.reject(t)}try{i.add(s)}catch(d){}return e(l,(()=>l(h)))?h.decodeAudioData(s).then((n=>(kt(s).catch((()=>{})),e(a,(()=>a(n)))||c(n),t.add(n),n))):new Promise(((e,n)=>{const i=async()=>{try{await kt(s)}catch(t){}},r=t=>{n(t),i()};try{h.decodeAudioData(s,(n=>{"function"!=typeof n.copyFromChannel&&(u(n),V(n)),t.add(n),i().then((()=>e(n)))}),(t=>{r(null===t?new DOMException("","EncodingError"):t)}))}catch(t){r(t)}}))})(Be,we,0,0,new WeakSet,Ce,ls,F,Lt,Qe,Ye),cs=((t,e,n,s,r,o,a,l,u,c,h,d,f,p,m,g,_,v,y,b)=>class extends m{constructor(e,n){super(e,n),this._nativeContext=e,this._audioWorklet=void 0===t?void 0:{addModule:(e,n)=>t(this,e,n)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new e(this)}createBiquadFilter(){return new r(this)}createBuffer(t,e,s){return new n({length:e,numberOfChannels:t,sampleRate:s})}createBufferSource(){return new s(this)}createChannelMerger(){return new o(this,{numberOfInputs:arguments.length>0&&void 0!==arguments[0]?arguments[0]:6})}createChannelSplitter(){return new a(this,{numberOfOutputs:arguments.length>0&&void 0!==arguments[0]?arguments[0]:6})}createConstantSource(){return new l(this)}createConvolver(){return new u(this)}createDelay(){return new h(this,{maxDelayTime:arguments.length>0&&void 0!==arguments[0]?arguments[0]:1})}createDynamicsCompressor(){return new d(this)}createGain(){return new f(this)}createIIRFilter(t,e){return new p(this,{feedback:e,feedforward:t})}createOscillator(){return new g(this)}createPanner(){return new _(this)}createPeriodicWave(t,e){return new v(this,i(i({},arguments.length>2&&void 0!==arguments[2]?arguments[2]:{disableNormalization:!1}),{},{imag:e,real:t}))}createStereoPanner(){return new y(this)}createWaveShaper(){return new b(this)}decodeAudioData(t,e,n){return c(this._nativeContext,t).then((t=>("function"==typeof e&&e(t),t)),(t=>{throw"function"==typeof n&&n(t),t}))}})(as,ze,Xe,rn,un,pn,gn,bn,Sn,us,En,On,Mn,Pn,qn,Un,Yn,Zn,ts,ns),hs=((t,e,n,s)=>class extends t{constructor(t,e){const i=n(t),r=((t,e)=>t.createMediaElementSource(e.mediaElement))(i,e);if(s(i))throw TypeError();super(t,!0,r,null),this._nativeMediaElementAudioSourceNode=r}get mediaElement(){return this._nativeMediaElementAudioSourceNode.mediaElement}})(je,0,Ce,De),ds=((t,e,n,s)=>class extends t{constructor(t,e){const r=n(t);if(s(r))throw new TypeError;const o=((t,e)=>{const n=t.createMediaStreamDestination();return qt(n,e),1===n.numberOfOutputs&&Object.defineProperty(n,"numberOfOutputs",{get:()=>0}),n})(r,i(i({},Pt),e));super(t,!1,o,null),this._nativeMediaStreamAudioDestinationNode=o}get stream(){return this._nativeMediaStreamAudioDestinationNode.stream}})(je,0,Ce,De),fs=((t,e,n,s)=>class extends t{constructor(t,e){const i=n(t),r=((t,e)=>{let{mediaStream:n}=e;const s=n.getAudioTracks();s.sort(((t,e)=>t.id<e.id?-1:t.id>e.id?1:0));const i=s.slice(0,1),r=t.createMediaStreamSource(new MediaStream(i));return Object.defineProperty(r,"mediaStream",{value:n}),r})(i,e);if(s(i))throw new TypeError;super(t,!0,r,null),this._nativeMediaStreamAudioSourceNode=r}get mediaStream(){return this._nativeMediaStreamAudioSourceNode.mediaStream}})(je,0,Ce,De),ps=((t,e)=>(n,s)=>{let{mediaStreamTrack:i}=s;if("function"==typeof n.createMediaStreamTrackSource)return n.createMediaStreamTrackSource(i);const r=new MediaStream([i]),o=n.createMediaStreamSource(r);if("audio"!==i.kind)throw t();if(e(n))throw new TypeError;return o})(It,De),ms=((t,e,n)=>class extends t{constructor(t,s){const i=n(t);super(t,!0,e(i,s),null)}})(je,ps,Ce),gs=((t,e,n,s,i,r,o,a,l)=>class extends t{constructor(){let t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(null===l)throw new Error("Missing the native AudioContext constructor.");try{t=new l(e)}catch(e){if(12===e.code&&"sampleRate is not in range"===e.message)throw n();throw e}if(null===t)throw s();if(!(t=>void 0===t||"number"==typeof t||"string"==typeof t&&("balanced"===t||"interactive"===t||"playback"===t))(e.latencyHint))throw new TypeError("The provided value '".concat(e.latencyHint,"' is not a valid enum value of type AudioContextLatencyCategory."));if(void 0!==e.sampleRate&&t.sampleRate!==e.sampleRate)throw n();super(t,2);const{latencyHint:i}=e,{sampleRate:r}=t;if(this._baseLatency="number"==typeof t.baseLatency?t.baseLatency:"balanced"===i?512/r:"interactive"===i||void 0===i?256/r:"playback"===i?1024/r:128*Math.max(2,Math.min(128,Math.round(i*r/128)))/r,this._nativeAudioContext=t,"webkitAudioContext"===l.name?(this._nativeGainNode=t.createGain(),this._nativeOscillatorNode=t.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(t.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,"running"===t.state){this._state="suspended";const e=()=>{"suspended"===this._state&&(this._state=null),t.removeEventListener("statechange",e)};t.addEventListener("statechange",e)}}get baseLatency(){return this._baseLatency}get state(){return null!==this._state?this._state:this._nativeAudioContext.state}close(){return"closed"===this.state?this._nativeAudioContext.close().then((()=>{throw e()})):("suspended"===this._state&&(this._state=null),this._nativeAudioContext.close().then((()=>{null!==this._nativeGainNode&&null!==this._nativeOscillatorNode&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),Y(this)})))}createMediaElementSource(t){return new i(this,{mediaElement:t})}createMediaStreamDestination(){return new r(this)}createMediaStreamSource(t){return new o(this,{mediaStream:t})}createMediaStreamTrackSource(t){return new a(this,{mediaStreamTrack:t})}resume(){return"suspended"===this._state?new Promise(((t,e)=>{const n=()=>{this._nativeAudioContext.removeEventListener("statechange",n),"running"===this._nativeAudioContext.state?t():this.resume().then(t,e)};this._nativeAudioContext.addEventListener("statechange",n)})):this._nativeAudioContext.resume().catch((t=>{if(void 0===t||15===t.code)throw e();throw t}))}suspend(){return this._nativeAudioContext.suspend().catch((t=>{if(void 0===t)throw e();throw t}))}})(cs,It,$t,(()=>new DOMException("","UnknownError")),hs,ds,fs,ms,Pe),_s=(t=>e=>{const n=t.get(e);if(void 0===n)throw new Error("The context has no set of AudioWorkletNodes.");return n})(Fn),vs=(t=>(e,n)=>{t(e).add(n)})(_s),ys=(t=>function(e,n){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;const i=e[arguments.length>2&&void 0!==arguments[2]?arguments[2]:0];if(void 0===i)throw t();return dt(n)?i.connect(n,0,s):i.connect(n,0)})(q),bs=(t=>(e,n)=>{t(e).delete(n)})(_s),ws=(t=>function(e,n,s){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return void 0===n?e.forEach((t=>t.disconnect())):"number"==typeof n?Ot(t,e,n).disconnect():dt(n)?void 0===s?e.forEach((t=>t.disconnect(n))):void 0===i?Ot(t,e,s).disconnect(n,0):Ot(t,e,s).disconnect(n,0,i):void 0===s?e.forEach((t=>t.disconnect(n))):Ot(t,e,s).disconnect(n,0)})(q),xs=new WeakMap,Ss=((t,e)=>n=>e(t,n))(xs,A),Ts=((t,e,n,s,r,o,a,l,u,c,h,d,f)=>(p,m,g,_)=>{if(0===_.numberOfInputs&&0===_.numberOfOutputs)throw u();const v=Array.isArray(_.outputChannelCount)?_.outputChannelCount:Array.from(_.outputChannelCount);if(v.some((t=>t<1)))throw u();if(v.length!==_.numberOfOutputs)throw e();if("explicit"!==_.channelCountMode)throw u();const y=_.channelCount*_.numberOfInputs,b=v.reduce(((t,e)=>t+e),0),x=void 0===g.parameterDescriptors?0:g.parameterDescriptors.length;if(y+x>6||b>6)throw u();const S=new MessageChannel,T=[],E=[];for(let t=0;t<_.numberOfInputs;t+=1)T.push(a(p,{channelCount:_.channelCount,channelCountMode:_.channelCountMode,channelInterpretation:_.channelInterpretation,gain:1})),E.push(r(p,{channelCount:_.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:_.channelCount}));const k=[];if(void 0!==g.parameterDescriptors)for(const{defaultValue:t,maxValue:e,minValue:n,name:s}of g.parameterDescriptors){const i=o(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:void 0!==_.parameterData[s]?_.parameterData[s]:void 0===t?0:t});Object.defineProperties(i.offset,{defaultValue:{get:()=>void 0===t?0:t},maxValue:{get:()=>void 0===e?z:e},minValue:{get:()=>void 0===n?U:n}}),k.push(i)}const A=s(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,y+x)}),O=Bt(m,p.sampleRate),C=l(p,O,y+x,Math.max(1,b)),M=r(p,{channelCount:Math.max(1,b),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,b)}),I=[];for(let t=0;t<_.numberOfOutputs;t+=1)I.push(s(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:v[t]}));for(let t=0;t<_.numberOfInputs;t+=1){T[t].connect(E[t]);for(let e=0;e<_.channelCount;e+=1)E[t].connect(A,e,t*_.channelCount+e)}const D=new mt(void 0===g.parameterDescriptors?[]:g.parameterDescriptors.map(((t,e)=>{let{name:n}=t;const s=k[e];return s.connect(A,0,y+e),s.start(0),[n,s.offset]})));A.connect(C);let R=_.channelInterpretation,N=null;const P=0===_.numberOfOutputs?[C]:I,L={get bufferSize(){return O},get channelCount(){return _.channelCount},set channelCount(t){throw n()},get channelCountMode(){return _.channelCountMode},set channelCountMode(t){throw n()},get channelInterpretation(){return R},set channelInterpretation(t){for(const e of T)e.channelInterpretation=t;R=t},get context(){return C.context},get inputs(){return T},get numberOfInputs(){return _.numberOfInputs},get numberOfOutputs(){return _.numberOfOutputs},get onprocessorerror(){return N},set onprocessorerror(t){"function"==typeof N&&L.removeEventListener("processorerror",N),N="function"==typeof t?t:null,"function"==typeof N&&L.addEventListener("processorerror",N)},get parameters(){return D},get port(){return S.port2},addEventListener:function(){return C.addEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])},connect:t.bind(null,P),disconnect:c.bind(null,P),dispatchEvent:function(){return C.dispatchEvent(arguments.length<=0?void 0:arguments[0])},removeEventListener:function(){return C.removeEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])}},F=new Map;var q,V;S.port1.addEventListener=(q=S.port1.addEventListener,function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];if("message"===e[0]){const t="function"==typeof e[1]?e[1]:"object"==typeof e[1]&&null!==e[1]&&"function"==typeof e[1].handleEvent?e[1].handleEvent:null;if(null!==t){const n=F.get(e[1]);void 0!==n?e[1]=n:(e[1]=e=>{h(p.currentTime,p.sampleRate,(()=>t(e)))},F.set(t,e[1]))}}return q.call(S.port1,e[0],e[1],e[2])}),S.port1.removeEventListener=(V=S.port1.removeEventListener,function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];if("message"===e[0]){const t=F.get(e[1]);void 0!==t&&(F.delete(e[1]),e[1]=t)}return V.call(S.port1,e[0],e[1],e[2])});let j=null;Object.defineProperty(S.port1,"onmessage",{get:()=>j,set:t=>{"function"==typeof j&&S.port1.removeEventListener("message",j),j="function"==typeof t?t:null,"function"==typeof j&&(S.port1.addEventListener("message",j),S.port1.start())}}),g.prototype.port=S.port1;let B=null;const H=((t,e,n,s)=>{let i=w.get(t);void 0===i&&(i=new WeakMap,w.set(t,i));const r=(async(t,e)=>{const n=await(t=>new Promise(((e,n)=>{const{port1:s,port2:i}=new MessageChannel;s.onmessage=t=>{let{data:n}=t;s.close(),i.close(),e(n)},s.onmessageerror=t=>{let{data:e}=t;s.close(),i.close(),n(e)},i.postMessage(t)})))(e);return new t(n)})(n,s);return i.set(e,r),r})(p,L,g,_);H.then((t=>B=t));const G=yt(_.numberOfInputs,_.channelCount),W=yt(_.numberOfOutputs,v),Q=void 0===g.parameterDescriptors?[]:g.parameterDescriptors.reduce(((t,e)=>{let{name:n}=e;return i(i({},t),{},{[n]:new Float32Array(128)})}),{});let Y=!0;const X=()=>{_.numberOfOutputs>0&&C.disconnect(M);for(let t=0,e=0;t<_.numberOfOutputs;t+=1){const n=I[t];for(let s=0;s<v[t];s+=1)M.disconnect(n,e+s,s);e+=v[t]}},Z=new Map;C.onaudioprocess=t=>{let{inputBuffer:e,outputBuffer:n}=t;if(null!==B){const t=d(L);for(let s=0;s<O;s+=128){for(let t=0;t<_.numberOfInputs;t+=1)for(let n=0;n<_.channelCount;n+=1)_t(e,G[t],n,n,s);void 0!==g.parameterDescriptors&&g.parameterDescriptors.forEach(((t,n)=>{let{name:i}=t;_t(e,Q,i,y+n,s)}));for(let t=0;t<_.numberOfInputs;t+=1)for(let e=0;e<v[t];e+=1)0===W[t][e].byteLength&&(W[t][e]=new Float32Array(128));try{const e=G.map(((e,n)=>{if(t[n].size>0)return Z.set(n,O/128),e;const s=Z.get(n);return void 0===s?[]:(e.every((t=>t.every((t=>0===t))))&&(1===s?Z.delete(n):Z.set(n,s-1)),e)})),i=h(p.currentTime+s/p.sampleRate,p.sampleRate,(()=>B.process(e,W,Q)));Y=i;for(let t=0,r=0;t<_.numberOfOutputs;t+=1){for(let e=0;e<v[t];e+=1)vt(n,W[t],e,r+e,s);r+=v[t]}}catch(e){Y=!1,L.dispatchEvent(new ErrorEvent("processorerror",{colno:e.colno,filename:e.filename,lineno:e.lineno,message:e.message}))}if(!Y){for(let t=0;t<_.numberOfInputs;t+=1){T[t].disconnect(E[t]);for(let e=0;e<_.channelCount;e+=1)E[s].disconnect(A,e,t*_.channelCount+e)}if(void 0!==g.parameterDescriptors){const t=g.parameterDescriptors.length;for(let e=0;e<t;e+=1){const t=k[e];t.disconnect(A,0,y+e),t.stop()}}A.disconnect(C),C.onaudioprocess=null,K?X():tt();break}}}};let K=!1;const $=a(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),J=()=>C.connect($).connect(p.destination),tt=()=>{C.disconnect($),$.disconnect()};return J(),f(L,(()=>{if(Y){tt(),_.numberOfOutputs>0&&C.connect(M);for(let t=0,e=0;t<_.numberOfOutputs;t+=1){const n=I[t];for(let s=0;s<v[t];s+=1)M.connect(n,e+s,s);e+=v[t]}}K=!0}),(()=>{Y&&(J(),X()),K=!1}))})(ys,q,It,dn,Gt,vn,Yt,Kt,$t,ws,is,Ss,cn),Es=((t,e,n,s,r)=>(o,a,l,u,c,h)=>{if(null!==l)try{const e=new l(o,u,h),s=new Map;let a=null;if(Object.defineProperties(e,{channelCount:{get:()=>h.channelCount,set:()=>{throw t()}},channelCountMode:{get:()=>"explicit",set:()=>{throw t()}},onprocessorerror:{get:()=>a,set:t=>{"function"==typeof a&&e.removeEventListener("processorerror",a),a="function"==typeof t?t:null,"function"==typeof a&&e.addEventListener("processorerror",a)}}}),e.addEventListener=(f=e.addEventListener,function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if("processorerror"===n[0]){const t="function"==typeof n[1]?n[1]:"object"==typeof n[1]&&null!==n[1]&&"function"==typeof n[1].handleEvent?n[1].handleEvent:null;if(null!==t){const e=s.get(n[1]);void 0!==e?n[1]=e:(n[1]=e=>{"error"===e.type?(Object.defineProperties(e,{type:{value:"processorerror"}}),t(e)):t(new ErrorEvent(n[0],i({},e)))},s.set(t,n[1]))}}return f.call(e,"error",n[1],n[2]),f.call(e,...n)}),e.removeEventListener=(d=e.removeEventListener,function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];if("processorerror"===n[0]){const t=s.get(n[1]);void 0!==t&&(s.delete(n[1]),n[1]=t)}return d.call(e,"error",n[1],n[2]),d.call(e,n[0],n[1],n[2])}),0!==h.numberOfOutputs){const t=n(o,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return e.connect(t).connect(o.destination),r(e,(()=>t.disconnect()),(()=>t.connect(o.destination)))}return e}catch(t){if(11===t.code)throw s();throw t}var d,f;if(void 0===c)throw s();return(t=>{const{port1:e}=new MessageChannel;try{e.postMessage(t)}finally{e.close()}})(h),e(o,a,c,h)})(It,Ts,Yt,$t,cn),ks=((t,e,n,s,i,r,o,a,l,u,c,h,d,f,p,m)=>(g,_,v)=>{const y=new WeakMap;let b=null;return{render(w,x){a(x,w);const S=y.get(x);return void 0!==S?Promise.resolve(S):(async(a,w)=>{let x=c(a),S=null;const T=L(x,w),E=Array.isArray(_.outputChannelCount)?_.outputChannelCount:Array.from(_.outputChannelCount);if(null===h){const t=E.reduce(((t,e)=>t+e),0),n=i(w,{channelCount:Math.max(1,t),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,t)}),r=[];for(let e=0;e<a.numberOfOutputs;e+=1)r.push(s(w,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:E[e]}));const u=o(w,{channelCount:_.channelCount,channelCountMode:_.channelCountMode,channelInterpretation:_.channelInterpretation,gain:1});u.connect=e.bind(null,r),u.disconnect=l.bind(null,r),S=[n,r,u]}else T||(x=new h(w,g));if(y.set(w,null===S?x:S[2]),null!==S){if(null===b){if(void 0===v)throw new Error("Missing the processor constructor.");if(null===d)throw new Error("Missing the native OfflineAudioContext constructor.");const t=a.channelCount*a.numberOfInputs,e=void 0===v.parameterDescriptors?0:v.parameterDescriptors.length,n=t+e,l=async()=>{const l=new d(n,128*Math.ceil(a.context.length/128),w.sampleRate),u=[],c=[];for(let t=0;t<_.numberOfInputs;t+=1)u.push(o(l,{channelCount:_.channelCount,channelCountMode:_.channelCountMode,channelInterpretation:_.channelInterpretation,gain:1})),c.push(i(l,{channelCount:_.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:_.channelCount}));const h=await Promise.all(Array.from(a.parameters.values()).map((async t=>{const e=r(l,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:t.value});return await f(l,t,e.offset),e}))),g=s(l,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,t+e)});for(let t=0;t<_.numberOfInputs;t+=1){u[t].connect(c[t]);for(let e=0;e<_.channelCount;e+=1)c[t].connect(g,e,t*_.channelCount+e)}for(const[e,n]of h.entries())n.connect(g,0,t+e),n.start(0);return g.connect(l.destination),await Promise.all(u.map((t=>p(a,l,t)))),m(l)};b=bt(a,0===n?null:await l(),w,_,E,v,u)}const t=await b,e=n(w,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),[l,c,h]=S;null!==t&&(e.buffer=t,e.start(0)),e.connect(l);for(let n=0,s=0;n<a.numberOfOutputs;n+=1){const t=c[n];for(let e=0;e<E[n];e+=1)l.connect(t,s+e,e);s+=E[n]}return h}if(T)for(const[e,n]of a.parameters.entries())await t(w,n,x.parameters.get(e));else for(const[t,e]of a.parameters.entries())await f(w,e,x.parameters.get(t));return await p(a,w,x),x})(w,x)}}})($e,ys,Je,dn,Gt,vn,Yt,bs,ws,is,ot,Ve,Ie,tn,Ae,Dn),As=(t=>e=>t.get(e))(rs),Os=(t=>(e,n)=>{t.set(e,n)})(xs),Cs=ss?((t,e,n,s,r,o,a,l,u,c,h,d,f,p)=>class extends e{constructor(e,h,f){var p;const m=l(e),g=u(m),_=(t=>i(i({},t),{},{outputChannelCount:void 0!==t.outputChannelCount?t.outputChannelCount:1===t.numberOfInputs&&1===t.numberOfOutputs?[t.channelCount]:Array.from({length:t.numberOfOutputs},(()=>1))}))(i(i({},gt),f));(t=>{const{port1:e,port2:n}=new MessageChannel;try{e.postMessage(t)}finally{e.close(),n.close()}})(_);const v=b.get(m),y=null==v?void 0:v.get(h),w=g||"closed"!==m.state?m:null!==(p=a(m))&&void 0!==p?p:m,x=r(w,g?null:e.baseLatency,c,h,y,_);super(e,!0,x,g?s(h,_,y):null);const S=[];x.parameters.forEach(((t,e)=>{const s=n(this,g,t);S.push([e,s])})),this._nativeAudioWorkletNode=x,this._onprocessorerror=null,this._parameters=new mt(S),g&&t(m,this);const{activeInputs:T}=o(this);d(x,T)}get onprocessorerror(){return this._onprocessorerror}set onprocessorerror(t){const e="function"==typeof t?p(this,t):null;this._nativeAudioWorkletNode.onprocessorerror=e;const n=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=null!==n&&n===e?t:n}get parameters(){return null===this._parameters?this._nativeAudioWorkletNode.parameters:this._parameters}get port(){return this._nativeAudioWorkletNode.port}})(vs,je,nn,ks,Es,G,As,Ce,De,Ve,0,Os,0,me):void 0,Ms=((t,e)=>(n,s,i)=>{if(null===e)throw new Error("Missing the native OfflineAudioContext constructor.");try{return new e(n,s,i)}catch(e){if("SyntaxError"===e.name)throw t();throw e}})($t,Ie),Is=((t,e,n,s,i,r,o,a)=>(l,u)=>n(l).render(l,u).then((()=>Promise.all(Array.from(s(u)).map((t=>n(t).render(t,u)))))).then((()=>i(u))).then((n=>("function"!=typeof n.copyFromChannel?(o(n),V(n)):e(r,(()=>r(n)))||a(n),t.add(n),n))))(Be,we,ke,_s,Dn,F,Qe,Ye),Ds=((t,e,n,s,r)=>class extends t{constructor(t,n,r){let o;if("number"==typeof t&&void 0!==n&&void 0!==r)o={length:n,numberOfChannels:t,sampleRate:r};else{if("object"!=typeof t)throw new Error("The given parameters are not valid.");o=t}const{length:a,numberOfChannels:l,sampleRate:u}=i(i({},Jt),o),c=s(l,a,u);e(Lt,(()=>Lt(c)))||c.addEventListener("statechange",(()=>{let t=0;const e=n=>{"running"===this._state&&(t>0?(c.removeEventListener("statechange",e),n.stopImmediatePropagation(),this._waitForThePromiseToSettle(n)):t+=1)};return e})()),super(c,l),this._length=a,this._nativeOfflineAudioContext=c,this._state=null}get length(){return void 0===this._nativeOfflineAudioContext.length?this._length:this._nativeOfflineAudioContext.length}get state(){return null===this._state?this._nativeOfflineAudioContext.state:this._state}startRendering(){return"running"===this._state?Promise.reject(n()):(this._state="running",r(this.destination,this._nativeOfflineAudioContext).finally((()=>{this._state=null,Y(this)})))}_waitForThePromiseToSettle(t){null===this._state?this._nativeOfflineAudioContext.dispatchEvent(t):setTimeout((()=>this._waitForThePromiseToSettle(t)))}})(cs,we,It,Ms,Is),Rs=((t,e)=>n=>{const s=t.get(n);return e(s)||e(n)})(_,Le),Ns=((t,e)=>n=>t.has(n)||e(n))(p,Fe),Ps=((t,e)=>n=>t.has(n)||e(n))(g,qe),Ls=((t,e)=>n=>{const s=t.get(n);return e(s)||e(n)})(_,De),Fs=()=>(async(t,e,n,s,i,r,o,a,l,u,c,h,d,f,p,m)=>!!(t(e,e)&&t(n,n)&&t(i,i)&&t(r,r)&&t(a,a)&&t(l,l)&&t(u,u)&&t(c,c)&&t(h,h)&&t(d,d)&&t(f,f))&&(await Promise.all([t(s,s),t(o,o),t(p,p),t(m,m)])).every((t=>t)))(we,(t=>()=>{if(null===t)return!1;const e=new t(1,1,44100).createBuffer(1,1,44100);if(void 0===e.copyToChannel)return!0;const n=new Float32Array(2);try{e.copyFromChannel(n,0,0)}catch(s){return!1}return!0})(Ie),(t=>()=>{if(null===t)return!1;if(void 0!==t.prototype&&void 0!==t.prototype.close)return!0;const e=new t,n=void 0!==e.close;try{e.close()}catch(s){}return n})(Pe),(t=>()=>{if(null===t)return Promise.resolve(!1);const e=new t(1,1,44100);return new Promise((t=>{let n=!0;const s=s=>{n&&(n=!1,e.startRendering(),t(s instanceof TypeError))};let i;try{i=e.decodeAudioData(null,(()=>{}),s)}catch(t){s(t)}void 0!==i&&i.catch(s)}))})(Ie),(t=>()=>{if(null===t)return!1;let e;try{e=new t({latencyHint:"balanced"})}catch(n){return!1}return e.close(),!0})(Pe),(t=>()=>{if(null===t)return!1;const e=new t(1,1,44100).createGain(),n=e.connect(e)===e;return e.disconnect(e),n})(Ie),((t,e)=>async()=>{if(null===t)return!0;if(null===e)return!1;const n=new Blob(['let c,p;class A extends AudioWorkletProcessor{constructor(){super();this.port.onmessage=(e)=>{p=e.data;p.onmessage=()=>{p.postMessage(c);p.close()};this.port.postMessage(0)}}process(){c=1}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),s=new MessageChannel,i=new e(1,128,44100),r=URL.createObjectURL(n);let o=!1;try{await i.audioWorklet.addModule(r);const e=new t(i,"a",{numberOfOutputs:0}),n=i.createOscillator();await new Promise((t=>{e.port.onmessage=()=>t(),e.port.postMessage(s.port2,[s.port2])})),e.port.onmessage=()=>o=!0,n.connect(e),n.start(0),await i.startRendering(),o=await new Promise((t=>{s.port1.onmessage=e=>{let{data:n}=e;return t(1===n)},s.port1.postMessage(0)}))}catch(a){}finally{s.port1.close(),URL.revokeObjectURL(r)}return o})(Ve,Ie),(t=>()=>{if(null===t)return!1;const e=new t(1,1,44100).createChannelMerger();if("max"===e.channelCountMode)return!0;try{e.channelCount=2}catch(n){return!0}return!1})(Ie),(t=>()=>{if(null===t)return!1;const e=new t(1,1,44100);return void 0===e.createConstantSource||e.createConstantSource().offset.maxValue!==Number.POSITIVE_INFINITY})(Ie),(t=>()=>{if(null===t)return!1;const e=new t(1,1,44100),n=e.createConvolver();n.buffer=e.createBuffer(1,1,e.sampleRate);try{n.buffer=e.createBuffer(1,1,e.sampleRate)}catch(s){return!1}return!0})(Ie),(t=>()=>{if(null===t)return!1;const e=new t(1,1,44100).createConvolver();try{e.channelCount=1}catch(n){return!1}return!0})(Ie),de,(t=>()=>null!==t&&t.hasOwnProperty("isSecureContext"))(Te),(t=>()=>{if(null===t)return!1;const e=new t;try{return e.createMediaStreamSource(new MediaStream),!1}catch(t){return!0}finally{e.close()}})(Pe),(t=>()=>{if(null===t)return Promise.resolve(!1);const e=new t(1,1,44100);if(void 0===e.createStereoPanner)return Promise.resolve(!0);if(void 0===e.createConstantSource)return Promise.resolve(!0);const n=e.createConstantSource(),s=e.createStereoPanner();return n.channelCount=1,n.offset.value=1,s.channelCount=1,n.start(),n.connect(s).connect(e.destination),e.startRendering().then((t=>1!==t.getChannelData(0)[0]))})(Ie),fe);function qs(t){return void 0===t}function Vs(t){return void 0!==t}function js(t){return"function"==typeof t}function Us(t){return"number"==typeof t}function zs(t){return"[object Object]"===Object.prototype.toString.call(t)&&t.constructor===Object}function Bs(t){return"boolean"==typeof t}function Hs(t){return Array.isArray(t)}function Gs(t){return"string"==typeof t}function Ws(t){return Gs(t)&&/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i.test(t)}function Qs(t,e){if(!t)throw new Error(e)}function Ys(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0;if(!(e<=t&&t<=n))throw new RangeError("Value must be within [".concat(e,", ").concat(n,"], got: ").concat(t))}function Xs(t){t.isOffline||"running"===t.state||si('The AudioContext is "suspended". Invoke Tone.start() from a user action to start the audio.')}let Zs=!1,Ks=!1;function $s(t){Zs=t}function Js(t){qs(t)&&Zs&&!Ks&&(Ks=!0,si("Events scheduled inside of scheduled callbacks should use the passed in scheduling time. See https://github.com/Tonejs/Tone.js/wiki/Accurate-Timing"))}let ti=console;function ei(t){ti=t}function ni(){ti.log(...arguments)}function si(){ti.warn(...arguments)}const ii="object"==typeof self?self:null,ri=ii&&(ii.hasOwnProperty("AudioContext")||ii.hasOwnProperty("webkitAudioContext"));function oi(t,e,n,s){var i,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,s);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(o=(r<3?i(o):r>3?i(e,n,o):i(e,n))||o);return r>3&&o&&Object.defineProperty(e,n,o),o}function ai(t,e,n,s){return new(n||(n=Promise))((function(i,r){function o(t){try{l(s.next(t))}catch(t){r(t)}}function a(t){try{l(s.throw(t))}catch(t){r(t)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}l((s=s.apply(t,e||[])).next())}))}Object.create,Object.create,"function"==typeof SuppressedError&&SuppressedError;class li{constructor(t,e,n,s){this._callback=t,this._type=e,this._minimumUpdateInterval=Math.max(128/(s||44100),.001),this.updateInterval=n,this._createClock()}_createWorker(){const t=new Blob(["\n\t\t\t// the initial timeout time\n\t\t\tlet timeoutTime =  ".concat((1e3*this._updateInterval).toFixed(1),";\n\t\t\t// onmessage callback\n\t\t\tself.onmessage = function(msg){\n\t\t\t\ttimeoutTime = parseInt(msg.data);\n\t\t\t};\n\t\t\t// the tick function which posts a message\n\t\t\t// and schedules a new tick\n\t\t\tfunction tick(){\n\t\t\t\tsetTimeout(tick, timeoutTime);\n\t\t\t\tself.postMessage('tick');\n\t\t\t}\n\t\t\t// call tick initially\n\t\t\ttick();\n\t\t\t")],{type:"text/javascript"}),e=URL.createObjectURL(t),n=new Worker(e);n.onmessage=this._callback.bind(this),this._worker=n}_createTimeout(){this._timeout=setTimeout((()=>{this._createTimeout(),this._callback()}),1e3*this._updateInterval)}_createClock(){if("worker"===this._type)try{this._createWorker()}catch(t){this._type="timeout",this._createClock()}else"timeout"===this._type&&this._createTimeout()}_disposeClock(){this._timeout&&clearTimeout(this._timeout),this._worker&&(this._worker.terminate(),this._worker.onmessage=null)}get updateInterval(){return this._updateInterval}set updateInterval(t){var e;this._updateInterval=Math.max(t,this._minimumUpdateInterval),"worker"===this._type&&(null===(e=this._worker)||void 0===e||e.postMessage(1e3*this._updateInterval))}get type(){return this._type}set type(t){this._disposeClock(),this._type=t,this._createClock()}dispose(){this._disposeClock()}}function ui(t){return Ps(t)}function ci(t){return Ns(t)}function hi(t){return Ls(t)}function di(t){return Rs(t)}function fi(t,e){return"value"===t||ui(e)||ci(e)||function(t){return t instanceof Xe}(e)}function pi(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),s=1;s<e;s++)n[s-1]=arguments[s];if(!n.length)return t;const i=n.shift();if(zs(t)&&zs(i))for(const r in i)fi(r,i[r])?t[r]=i[r]:zs(i[r])?(t[r]||Object.assign(t,{[r]:{}}),pi(t[r],i[r])):Object.assign(t,{[r]:i[r]});return pi(t,...n)}function mi(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],s=arguments.length>3?arguments[3]:void 0;const i={},r=Array.from(e);if(zs(r[0])&&s&&!Reflect.has(r[0],s)&&(Object.keys(r[0]).some((e=>Reflect.has(t,e)))||(pi(i,{[s]:r[0]}),n.splice(n.indexOf(s),1),r.shift())),1===r.length&&zs(r[0]))pi(i,r[0]);else for(let o=0;o<n.length;o++)Vs(r[o])&&(i[n[o]]=r[o]);return pi(t,i)}function gi(t,e){return qs(t)?e:t}function _i(t,e){return e.forEach((e=>{Reflect.has(t,e)&&delete t[e]})),t}class vi{constructor(){this.debug=!1,this._wasDisposed=!1}static getDefaults(){return{}}log(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];(this.debug||ii&&this.toString()===ii.TONE_DEBUG_CLASS)&&ni(this,...e)}dispose(){return this._wasDisposed=!0,this}get disposed(){return this._wasDisposed}toString(){return this.name}}vi.version=c;const yi=1e-6;function bi(t,e){return t>e+yi}function wi(t,e){return bi(t,e)||Si(t,e)}function xi(t,e){return t+yi<e}function Si(t,e){return Math.abs(t-e)<yi}function Ti(t,e,n){return Math.max(Math.min(t,n),e)}class Ei extends vi{constructor(){super(),this.name="Timeline",this._timeline=[];const t=mi(Ei.getDefaults(),arguments,["memory"]);this.memory=t.memory,this.increasing=t.increasing}static getDefaults(){return{memory:1/0,increasing:!1}}get length(){return this._timeline.length}add(t){if(Qs(Reflect.has(t,"time"),"Timeline: events must have a time attribute"),t.time=t.time.valueOf(),this.increasing&&this.length){const e=this._timeline[this.length-1];Qs(wi(t.time,e.time),"The time must be greater than or equal to the last scheduled time"),this._timeline.push(t)}else{const e=this._search(t.time);this._timeline.splice(e+1,0,t)}if(this.length>this.memory){const t=this.length-this.memory;this._timeline.splice(0,t)}return this}remove(t){const e=this._timeline.indexOf(t);return-1!==e&&this._timeline.splice(e,1),this}get(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"time";const n=this._search(t,e);return-1!==n?this._timeline[n]:null}peek(){return this._timeline[0]}shift(){return this._timeline.shift()}getAfter(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"time";const n=this._search(t,e);return n+1<this._timeline.length?this._timeline[n+1]:null}getBefore(t){const e=this._timeline.length;if(e>0&&this._timeline[e-1].time<t)return this._timeline[e-1];const n=this._search(t);return n-1>=0?this._timeline[n-1]:null}cancel(t){if(this._timeline.length>1){let e=this._search(t);if(e>=0)if(Si(this._timeline[e].time,t)){for(let n=e;n>=0&&Si(this._timeline[n].time,t);n--)e=n;this._timeline=this._timeline.slice(0,e)}else this._timeline=this._timeline.slice(0,e+1);else this._timeline=[]}else 1===this._timeline.length&&wi(this._timeline[0].time,t)&&(this._timeline=[]);return this}cancelBefore(t){const e=this._search(t);return e>=0&&(this._timeline=this._timeline.slice(e+1)),this}previousEvent(t){const e=this._timeline.indexOf(t);return e>0?this._timeline[e-1]:null}_search(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"time";if(0===this._timeline.length)return-1;let n=0;const s=this._timeline.length;let i=s;if(s>0&&this._timeline[s-1][e]<=t)return s-1;for(;n<i;){let s=Math.floor(n+(i-n)/2);const r=this._timeline[s],o=this._timeline[s+1];if(Si(r[e],t)){for(let n=s;n<this._timeline.length&&Si(this._timeline[n][e],t);n++)s=n;return s}if(xi(r[e],t)&&bi(o[e],t))return s;bi(r[e],t)?i=s:n=s+1}return-1}_iterate(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this._timeline.length-1;this._timeline.slice(e,n+1).forEach(t)}forEach(t){return this._iterate(t),this}forEachBefore(t,e){const n=this._search(t);return-1!==n&&this._iterate(e,0,n),this}forEachAfter(t,e){const n=this._search(t);return this._iterate(e,n+1),this}forEachBetween(t,e,n){let s=this._search(t),i=this._search(e);return-1!==s&&-1!==i?(this._timeline[s].time!==t&&(s+=1),this._timeline[i].time===e&&(i-=1),this._iterate(n,s,i)):-1===s&&this._iterate(n,0,i),this}forEachFrom(t,e){let n=this._search(t);for(;n>=0&&this._timeline[n].time>=t;)n--;return this._iterate(e,n+1),this}forEachAtTime(t,e){const n=this._search(t);if(-1!==n&&Si(this._timeline[n].time,t)){let s=n;for(let e=n;e>=0&&Si(this._timeline[e].time,t);e--)s=e;this._iterate((t=>{e(t)}),s,n)}return this}dispose(){return super.dispose(),this._timeline=[],this}}const ki=[];function Ai(t){ki.push(t)}const Oi=[];function Ci(t){Oi.push(t)}class Mi extends vi{constructor(){super(...arguments),this.name="Emitter"}on(t,e){return t.split(/\W+/).forEach((t=>{qs(this._events)&&(this._events={}),this._events.hasOwnProperty(t)||(this._events[t]=[]),this._events[t].push(e)})),this}once(t,e){var n=this;const s=function(){e(...arguments),n.off(t,s)};return this.on(t,s),this}off(t,e){return t.split(/\W+/).forEach((t=>{if(qs(this._events)&&(this._events={}),this._events.hasOwnProperty(t))if(qs(e))this._events[t]=[];else{const n=this._events[t];for(let t=n.length-1;t>=0;t--)n[t]===e&&n.splice(t,1)}})),this}emit(t){if(this._events&&this._events.hasOwnProperty(t)){const i=this._events[t].slice(0);for(var e=arguments.length,n=new Array(e>1?e-1:0),s=1;s<e;s++)n[s-1]=arguments[s];for(let t=0,e=i.length;t<e;t++)i[t].apply(this,n)}return this}static mixin(t){["on","once","off","emit"].forEach((e=>{const n=Object.getOwnPropertyDescriptor(Mi.prototype,e);Object.defineProperty(t.prototype,e,n)}))}dispose(){return super.dispose(),this._events=void 0,this}}class Ii extends Mi{constructor(){super(...arguments),this.isOffline=!1}toJSON(){return{}}}class Di extends Ii{constructor(){var t,e;super(),this.name="Context",this._constants=new Map,this._timeouts=new Ei,this._timeoutIds=0,this._initialized=!1,this._closeStarted=!1,this.isOffline=!1,this._workletPromise=null;const n=mi(Di.getDefaults(),arguments,["context"]);n.context?(this._context=n.context,this._latencyHint=(null===(t=arguments[0])||void 0===t?void 0:t.latencyHint)||""):(this._context=function(t){return new gs(t)}({latencyHint:n.latencyHint}),this._latencyHint=n.latencyHint),this._ticker=new li(this.emit.bind(this,"tick"),n.clockSource,n.updateInterval,this._context.sampleRate),this.on("tick",this._timeoutLoop.bind(this)),this._context.onstatechange=()=>{this.emit("statechange",this.state)},this[(null===(e=arguments[0])||void 0===e?void 0:e.hasOwnProperty("updateInterval"))?"_lookAhead":"lookAhead"]=n.lookAhead}static getDefaults(){return{clockSource:"worker",latencyHint:"interactive",lookAhead:.1,updateInterval:.05}}initialize(){var t;return this._initialized||(t=this,ki.forEach((e=>e(t))),this._initialized=!0),this}createAnalyser(){return this._context.createAnalyser()}createOscillator(){return this._context.createOscillator()}createBufferSource(){return this._context.createBufferSource()}createBiquadFilter(){return this._context.createBiquadFilter()}createBuffer(t,e,n){return this._context.createBuffer(t,e,n)}createChannelMerger(t){return this._context.createChannelMerger(t)}createChannelSplitter(t){return this._context.createChannelSplitter(t)}createConstantSource(){return this._context.createConstantSource()}createConvolver(){return this._context.createConvolver()}createDelay(t){return this._context.createDelay(t)}createDynamicsCompressor(){return this._context.createDynamicsCompressor()}createGain(){return this._context.createGain()}createIIRFilter(t,e){return this._context.createIIRFilter(t,e)}createPanner(){return this._context.createPanner()}createPeriodicWave(t,e,n){return this._context.createPeriodicWave(t,e,n)}createStereoPanner(){return this._context.createStereoPanner()}createWaveShaper(){return this._context.createWaveShaper()}createMediaStreamSource(t){return Qs(di(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamSource(t)}createMediaElementSource(t){return Qs(di(this._context),"Not available if OfflineAudioContext"),this._context.createMediaElementSource(t)}createMediaStreamDestination(){return Qs(di(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamDestination()}decodeAudioData(t){return this._context.decodeAudioData(t)}get currentTime(){return this._context.currentTime}get state(){return this._context.state}get sampleRate(){return this._context.sampleRate}get listener(){return this.initialize(),this._listener}set listener(t){Qs(!this._initialized,"The listener cannot be set after initialization."),this._listener=t}get transport(){return this.initialize(),this._transport}set transport(t){Qs(!this._initialized,"The transport cannot be set after initialization."),this._transport=t}get draw(){return this.initialize(),this._draw}set draw(t){Qs(!this._initialized,"Draw cannot be set after initialization."),this._draw=t}get destination(){return this.initialize(),this._destination}set destination(t){Qs(!this._initialized,"The destination cannot be set after initialization."),this._destination=t}createAudioWorkletNode(t,e){return function(t,e,n){return Qs(Vs(Cs),"This node only works in a secure context (https or localhost)"),new Cs(t,e,n)}(this.rawContext,t,e)}addAudioWorkletModule(t){return ai(this,void 0,void 0,(function*(){Qs(Vs(this.rawContext.audioWorklet),"AudioWorkletNode is only available in a secure context (https or localhost)"),this._workletPromise||(this._workletPromise=this.rawContext.audioWorklet.addModule(t)),yield this._workletPromise}))}workletsAreReady(){return ai(this,void 0,void 0,(function*(){(yield this._workletPromise)?this._workletPromise:Promise.resolve()}))}get updateInterval(){return this._ticker.updateInterval}set updateInterval(t){this._ticker.updateInterval=t}get clockSource(){return this._ticker.type}set clockSource(t){this._ticker.type=t}get lookAhead(){return this._lookAhead}set lookAhead(t){this._lookAhead=t,this.updateInterval=t?t/2:.01}get latencyHint(){return this._latencyHint}get rawContext(){return this._context}now(){return this._context.currentTime+this._lookAhead}immediate(){return this._context.currentTime}resume(){return di(this._context)?this._context.resume():Promise.resolve()}close(){return ai(this,void 0,void 0,(function*(){var t;di(this._context)&&"closed"!==this.state&&!this._closeStarted&&(this._closeStarted=!0,yield this._context.close()),this._initialized&&(t=this,Oi.forEach((e=>e(t))))}))}getConstant(t){if(this._constants.has(t))return this._constants.get(t);{const e=this._context.createBuffer(1,128,this._context.sampleRate),n=e.getChannelData(0);for(let i=0;i<n.length;i++)n[i]=t;const s=this._context.createBufferSource();return s.channelCount=1,s.channelCountMode="explicit",s.buffer=e,s.loop=!0,s.start(0),this._constants.set(t,s),s}}dispose(){return super.dispose(),this._ticker.dispose(),this._timeouts.dispose(),Object.keys(this._constants).map((t=>this._constants[t].disconnect())),this.close(),this}_timeoutLoop(){const t=this.now();let e=this._timeouts.peek();for(;this._timeouts.length&&e&&e.time<=t;)e.callback(),this._timeouts.shift(),e=this._timeouts.peek()}setTimeout(t,e){this._timeoutIds++;const n=this.now();return this._timeouts.add({callback:t,id:this._timeoutIds,time:n+e}),this._timeoutIds}clearTimeout(t){return this._timeouts.forEach((e=>{e.id===t&&this._timeouts.remove(e)})),this}clearInterval(t){return this.clearTimeout(t)}setInterval(t,e){const n=++this._timeoutIds,s=()=>{const i=this.now();this._timeouts.add({callback:()=>{t(),s()},id:n,time:i+e})};return s(),n}}function Ri(t,e){Hs(e)?e.forEach((e=>Ri(t,e))):Object.defineProperty(t,e,{enumerable:!0,writable:!1})}function Ni(t,e){Hs(e)?e.forEach((e=>Ni(t,e))):Object.defineProperty(t,e,{writable:!0})}const Pi=()=>{};class Li extends vi{constructor(){super(),this.name="ToneAudioBuffer",this.onload=Pi;const t=mi(Li.getDefaults(),arguments,["url","onload","onerror"]);this.reverse=t.reverse,this.onload=t.onload,Gs(t.url)?this.load(t.url).catch(t.onerror):t.url&&this.set(t.url)}static getDefaults(){return{onerror:Pi,onload:Pi,reverse:!1}}get sampleRate(){return this._buffer?this._buffer.sampleRate:ji().sampleRate}set(t){return t instanceof Li?t.loaded?this._buffer=t.get():t.onload=()=>{this.set(t),this.onload(this)}:this._buffer=t,this._reversed&&this._reverse(),this}get(){return this._buffer}load(t){return ai(this,void 0,void 0,(function*(){const e=Li.load(t).then((t=>{this.set(t),this.onload(this)}));Li.downloads.push(e);try{yield e}finally{const t=Li.downloads.indexOf(e);Li.downloads.splice(t,1)}return this}))}dispose(){return super.dispose(),this._buffer=void 0,this}fromArray(t){const e=Hs(t)&&t[0].length>0,n=e?t.length:1,s=e?t[0].length:t.length,i=ji(),r=i.createBuffer(n,s,i.sampleRate),o=e||1!==n?t:[t];for(let a=0;a<n;a++)r.copyToChannel(o[a],a);return this._buffer=r,this}toMono(t){if(Us(t))this.fromArray(this.toArray(t));else{let t=new Float32Array(this.length);const e=this.numberOfChannels;for(let n=0;n<e;n++){const e=this.toArray(n);for(let n=0;n<e.length;n++)t[n]+=e[n]}t=t.map((t=>t/e)),this.fromArray(t)}return this}toArray(t){if(Us(t))return this.getChannelData(t);if(1===this.numberOfChannels)return this.toArray(0);{const t=[];for(let e=0;e<this.numberOfChannels;e++)t[e]=this.getChannelData(e);return t}}getChannelData(t){return this._buffer?this._buffer.getChannelData(t):new Float32Array(0)}slice(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.duration;Qs(this.loaded,"Buffer is not loaded");const n=Math.floor(t*this.sampleRate),s=Math.floor(e*this.sampleRate);Qs(n<s,"The start time must be less than the end time");const i=s-n,r=ji().createBuffer(this.numberOfChannels,i,this.sampleRate);for(let o=0;o<this.numberOfChannels;o++)r.copyToChannel(this.getChannelData(o).subarray(n,s),o);return new Li(r)}_reverse(){if(this.loaded)for(let t=0;t<this.numberOfChannels;t++)this.getChannelData(t).reverse();return this}get loaded(){return this.length>0}get duration(){return this._buffer?this._buffer.duration:0}get length(){return this._buffer?this._buffer.length:0}get numberOfChannels(){return this._buffer?this._buffer.numberOfChannels:0}get reverse(){return this._reversed}set reverse(t){this._reversed!==t&&(this._reversed=t,this._reverse())}static fromArray(t){return(new Li).fromArray(t)}static fromUrl(t){return ai(this,void 0,void 0,(function*(){const e=new Li;return yield e.load(t)}))}static load(t){return ai(this,void 0,void 0,(function*(){const e=t.match(/\[([^\]\[]+\|.+)\]$/);if(e){const n=e[1].split("|");let s=n[0];for(const t of n)if(Li.supportsType(t)){s=t;break}t=t.replace(e[0],s)}const n=""===Li.baseUrl||Li.baseUrl.endsWith("/")?Li.baseUrl:Li.baseUrl+"/",s=document.createElement("a");s.href=n+t,s.pathname=(s.pathname+s.hash).split("/").map(encodeURIComponent).join("/");const i=yield fetch(s.href);if(!i.ok)throw new Error("could not load url: ".concat(t));const r=yield i.arrayBuffer();return yield ji().decodeAudioData(r)}))}static supportsType(t){const e=t.split("."),n=e[e.length-1];return""!==document.createElement("audio").canPlayType("audio/"+n)}static loaded(){return ai(this,void 0,void 0,(function*(){for(yield Promise.resolve();Li.downloads.length;)yield Li.downloads[0]}))}}Li.baseUrl="",Li.downloads=[];class Fi extends Di{constructor(){var t,e,n;super({clockSource:"offline",context:hi(arguments[0])?arguments[0]:(t=arguments[0],e=arguments[1]*arguments[2],n=arguments[2],new Ds(t,e,n)),lookAhead:0,updateInterval:hi(arguments[0])?128/arguments[0].sampleRate:128/arguments[2]}),this.name="OfflineContext",this._currentTime=0,this.isOffline=!0,this._duration=hi(arguments[0])?arguments[0].length/arguments[0].sampleRate:arguments[1]}now(){return this._currentTime}get currentTime(){return this._currentTime}_renderClock(t){return ai(this,void 0,void 0,(function*(){let e=0;for(;this._duration-this._currentTime>=0;){this.emit("tick"),this._currentTime+=128/this.sampleRate,e++;const n=Math.floor(this.sampleRate/128);t&&e%n==0&&(yield new Promise((t=>setTimeout(t,1))))}}))}render(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return ai(this,void 0,void 0,(function*(){yield this.workletsAreReady(),yield this._renderClock(t);const e=yield this._context.startRendering();return new Li(e)}))}close(){return Promise.resolve()}}const qi=new class extends Ii{constructor(){super(...arguments),this.lookAhead=0,this.latencyHint=0,this.isOffline=!1}createAnalyser(){return{}}createOscillator(){return{}}createBufferSource(){return{}}createBiquadFilter(){return{}}createBuffer(t,e,n){return{}}createChannelMerger(t){return{}}createChannelSplitter(t){return{}}createConstantSource(){return{}}createConvolver(){return{}}createDelay(t){return{}}createDynamicsCompressor(){return{}}createGain(){return{}}createIIRFilter(t,e){return{}}createPanner(){return{}}createPeriodicWave(t,e,n){return{}}createStereoPanner(){return{}}createWaveShaper(){return{}}createMediaStreamSource(t){return{}}createMediaElementSource(t){return{}}createMediaStreamDestination(){return{}}decodeAudioData(t){return Promise.resolve({})}createAudioWorkletNode(t,e){return{}}get rawContext(){return{}}addAudioWorkletModule(t){return ai(this,void 0,void 0,(function*(){return Promise.resolve()}))}resume(){return Promise.resolve()}setTimeout(t,e){return 0}clearTimeout(t){return this}setInterval(t,e){return 0}clearInterval(t){return this}getConstant(t){return{}}get currentTime(){return 0}get state(){return{}}get sampleRate(){return 0}get listener(){return{}}get transport(){return{}}get draw(){return{}}set draw(t){}get destination(){return{}}set destination(t){}now(){return 0}immediate(){return 0}};let Vi=qi;function ji(){return Vi===qi&&ri&&Ui(new Di),Vi}function Ui(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&Vi.dispose(),Vi=di(t)?new Di(t):hi(t)?new Fi(t):t}function zi(){return Vi.resume()}if(ii&&!ii.TONE_SILENCE_LOGGING){let t="v";"dev"===c&&(t="");const e=" * Tone.js ".concat(t).concat(c," * ");console.log("%c".concat(e),"background: #000; color: #fff")}function Bi(t){return Math.pow(10,t/20)}function Hi(t){return Math.log(t)/Math.LN10*20}function Gi(t){return Math.pow(2,t/12)}let Wi=440;function Qi(t){return Math.round(Yi(t))}function Yi(t){return 69+12*Math.log2(t/Wi)}function Xi(t){return Wi*Math.pow(2,(t-69)/12)}class Zi extends vi{constructor(t,e,n){super(),this.defaultUnits="s",this._val=e,this._units=n,this.context=t,this._expressions=this._getExpressions()}_getExpressions(){return{hz:{method:t=>this._frequencyToUnits(parseFloat(t)),regexp:/^(\d+(?:\.\d+)?)hz$/i},i:{method:t=>this._ticksToUnits(parseInt(t,10)),regexp:/^(\d+)i$/i},m:{method:t=>this._beatsToUnits(parseInt(t,10)*this._getTimeSignature()),regexp:/^(\d+)m$/i},n:{method:(t,e)=>{const n=parseInt(t,10),s="."===e?1.5:1;return 1===n?this._beatsToUnits(this._getTimeSignature())*s:this._beatsToUnits(4/n)*s},regexp:/^(\d+)n(\.?)$/i},number:{method:t=>this._expressions[this.defaultUnits].method.call(this,t),regexp:/^(\d+(?:\.\d+)?)$/},s:{method:t=>this._secondsToUnits(parseFloat(t)),regexp:/^(\d+(?:\.\d+)?)s$/},samples:{method:t=>parseInt(t,10)/this.context.sampleRate,regexp:/^(\d+)samples$/},t:{method:t=>{const e=parseInt(t,10);return this._beatsToUnits(8/(3*Math.floor(e)))},regexp:/^(\d+)t$/i},tr:{method:(t,e,n)=>{let s=0;return t&&"0"!==t&&(s+=this._beatsToUnits(this._getTimeSignature()*parseFloat(t))),e&&"0"!==e&&(s+=this._beatsToUnits(parseFloat(e))),n&&"0"!==n&&(s+=this._beatsToUnits(parseFloat(n)/4)),s},regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?$/}}}valueOf(){if(this._val instanceof Zi&&this.fromType(this._val),qs(this._val))return this._noArg();if(Gs(this._val)&&qs(this._units)){for(const t in this._expressions)if(this._expressions[t].regexp.test(this._val.trim())){this._units=t;break}}else if(zs(this._val)){let t=0;for(const e in this._val)if(Vs(this._val[e])){const n=this._val[e];t+=new this.constructor(this.context,e).valueOf()*n}return t}if(Vs(this._units)){const t=this._expressions[this._units],e=this._val.toString().trim().match(t.regexp);return e?t.method.apply(this,e.slice(1)):t.method.call(this,this._val)}return Gs(this._val)?parseFloat(this._val):this._val}_frequencyToUnits(t){return 1/t}_beatsToUnits(t){return 60/this._getBpm()*t}_secondsToUnits(t){return t}_ticksToUnits(t){return t*this._beatsToUnits(1)/this._getPPQ()}_noArg(){return this._now()}_getBpm(){return this.context.transport.bpm.value}_getTimeSignature(){return this.context.transport.timeSignature}_getPPQ(){return this.context.transport.PPQ}fromType(t){switch(this._units=void 0,this.defaultUnits){case"s":this._val=t.toSeconds();break;case"i":this._val=t.toTicks();break;case"hz":this._val=t.toFrequency();break;case"midi":this._val=t.toMidi()}return this}toFrequency(){return 1/this.toSeconds()}toSamples(){return this.toSeconds()*this.context.sampleRate}toMilliseconds(){return 1e3*this.toSeconds()}}class Ki extends Zi{constructor(){super(...arguments),this.name="TimeClass"}_getExpressions(){return Object.assign(super._getExpressions(),{now:{method:t=>this._now()+new this.constructor(this.context,t).valueOf(),regexp:/^\+(.+)/},quantize:{method:t=>{const e=new Ki(this.context,t).valueOf();return this._secondsToUnits(this.context.transport.nextSubdivision(e))},regexp:/^@(.+)/}})}quantize(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const n=new this.constructor(this.context,t).valueOf(),s=this.valueOf();return s+(Math.round(s/n)*n-s)*e}toNotation(){const t=this.toSeconds(),e=["1m"];for(let i=1;i<9;i++){const t=Math.pow(2,i);e.push(t+"n."),e.push(t+"n"),e.push(t+"t")}e.push("0");let n=e[0],s=new Ki(this.context,e[0]).toSeconds();return e.forEach((e=>{const i=new Ki(this.context,e).toSeconds();Math.abs(i-t)<Math.abs(s-t)&&(n=e,s=i)})),n}toBarsBeatsSixteenths(){const t=this._beatsToUnits(1);let e=this.valueOf()/t;e=parseFloat(e.toFixed(4));const n=Math.floor(e/this._getTimeSignature());let s=e%1*4;e=Math.floor(e)%this._getTimeSignature();const i=s.toString();return i.length>3&&(s=parseFloat(parseFloat(i).toFixed(3))),[n,e,s].join(":")}toTicks(){const t=this._beatsToUnits(1);return this.valueOf()/t*this._getPPQ()}toSeconds(){return this.valueOf()}toMidi(){return Qi(this.toFrequency())}_now(){return this.context.now()}}function $i(t,e){return new Ki(ji(),t,e)}class Ji extends Ki{constructor(){super(...arguments),this.name="Frequency",this.defaultUnits="hz"}static get A4(){return Wi}static set A4(t){!function(t){Wi=t}(t)}_getExpressions(){return Object.assign({},super._getExpressions(),{midi:{regexp:/^(\d+(?:\.\d+)?midi)/,method(t){return"midi"===this.defaultUnits?t:Ji.mtof(t)}},note:{regexp:/^([a-g]{1}(?:b|#|##|x|bb|###|#x|x#|bbb)?)(-?[0-9]+)/i,method(t,e){const n=tr[t.toLowerCase()]+12*(parseInt(e,10)+1);return"midi"===this.defaultUnits?n:Ji.mtof(n)}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method(t,e,n){let s=1;return t&&"0"!==t&&(s*=this._beatsToUnits(this._getTimeSignature()*parseFloat(t))),e&&"0"!==e&&(s*=this._beatsToUnits(parseFloat(e))),n&&"0"!==n&&(s*=this._beatsToUnits(parseFloat(n)/4)),s}}})}transpose(t){return new Ji(this.context,this.valueOf()*Gi(t))}harmonize(t){return t.map((t=>this.transpose(t)))}toMidi(){return Qi(this.valueOf())}toNote(){const t=this.toFrequency(),e=Math.log2(t/Ji.A4);let n=Math.round(12*e)+57;const s=Math.floor(n/12);return s<0&&(n+=-12*s),er[n%12]+s.toString()}toSeconds(){return 1/super.toSeconds()}toTicks(){const t=this._beatsToUnits(1),e=this.valueOf()/t;return Math.floor(e*this._getPPQ())}_noArg(){return 0}_frequencyToUnits(t){return t}_ticksToUnits(t){return 1/(60*t/(this._getBpm()*this._getPPQ()))}_beatsToUnits(t){return 1/super._beatsToUnits(t)}_secondsToUnits(t){return 1/t}static mtof(t){return Xi(t)}static ftom(t){return Qi(t)}}const tr={cbbb:-3,cbb:-2,cb:-1,c:0,"c#":1,cx:2,"c##":2,"c###":3,"cx#":3,"c#x":3,dbbb:-1,dbb:0,db:1,d:2,"d#":3,dx:4,"d##":4,"d###":5,"dx#":5,"d#x":5,ebbb:1,ebb:2,eb:3,e:4,"e#":5,ex:6,"e##":6,"e###":7,"ex#":7,"e#x":7,fbbb:2,fbb:3,fb:4,f:5,"f#":6,fx:7,"f##":7,"f###":8,"fx#":8,"f#x":8,gbbb:4,gbb:5,gb:6,g:7,"g#":8,gx:9,"g##":9,"g###":10,"gx#":10,"g#x":10,abbb:6,abb:7,ab:8,a:9,"a#":10,ax:11,"a##":11,"a###":12,"ax#":12,"a#x":12,bbbb:8,bbb:9,bb:10,b:11,"b#":12,bx:13,"b##":13,"b###":14,"bx#":14,"b#x":14},er=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];function nr(t,e){return new Ji(ji(),t,e)}class sr extends Ki{constructor(){super(...arguments),this.name="TransportTime"}_now(){return this.context.transport.seconds}}function ir(t,e){return new sr(ji(),t,e)}class rr extends vi{constructor(){super();const t=mi(rr.getDefaults(),arguments,["context"]);this.defaultContext?this.context=this.defaultContext:this.context=t.context}static getDefaults(){return{context:ji()}}now(){return this.context.currentTime+this.context.lookAhead}immediate(){return this.context.currentTime}get sampleTime(){return 1/this.context.sampleRate}get blockTime(){return 128/this.context.sampleRate}toSeconds(t){return Js(t),new Ki(this.context,t).toSeconds()}toFrequency(t){return new Ji(this.context,t).toFrequency()}toTicks(t){return new sr(this.context,t).toTicks()}_getPartialProperties(t){const e=this.get();return Object.keys(e).forEach((n=>{qs(t[n])&&delete e[n]})),e}get(){const t=this.constructor.getDefaults();return Object.keys(t).forEach((e=>{if(Reflect.has(this,e)){const n=this[e];Vs(n)&&Vs(n.value)&&Vs(n.setValueAtTime)?t[e]=n.value:n instanceof rr?t[e]=n._getPartialProperties(t[e]):Hs(n)||Us(n)||Gs(n)||Bs(n)?t[e]=n:delete t[e]}})),t}set(t){return Object.keys(t).forEach((e=>{Reflect.has(this,e)&&Vs(this[e])&&(this[e]&&Vs(this[e].value)&&Vs(this[e].setValueAtTime)?this[e].value!==t[e]&&(this[e].value=t[e]):this[e]instanceof rr?this[e].set(t[e]):this[e]=t[e])})),this}}class or extends Ei{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"stopped";super(),this.name="StateTimeline",this._initial=t,this.setStateAtTime(this._initial,0)}getValueAtTime(t){const e=this.get(t);return null!==e?e.state:this._initial}setStateAtTime(t,e,n){return Ys(e,0),this.add(Object.assign({},n,{state:t,time:e})),this}getLastState(t,e){for(let n=this._search(e);n>=0;n--){const e=this._timeline[n];if(e.state===t)return e}}getNextState(t,e){const n=this._search(e);if(-1!==n)for(let s=n;s<this._timeline.length;s++){const e=this._timeline[s];if(e.state===t)return e}}}class ar extends rr{constructor(){super(mi(ar.getDefaults(),arguments,["param","units","convert"])),this.name="Param",this.overridden=!1,this._minOutput=1e-7;const t=mi(ar.getDefaults(),arguments,["param","units","convert"]);for(Qs(Vs(t.param)&&(ui(t.param)||t.param instanceof ar),"param must be an AudioParam");!ui(t.param);)t.param=t.param._param;this._swappable=!!Vs(t.swappable)&&t.swappable,this._swappable?(this.input=this.context.createGain(),this._param=t.param,this.input.connect(this._param)):this._param=this.input=t.param,this._events=new Ei(1e3),this._initialValue=this._param.defaultValue,this.units=t.units,this.convert=t.convert,this._minValue=t.minValue,this._maxValue=t.maxValue,Vs(t.value)&&t.value!==this._toType(this._initialValue)&&this.setValueAtTime(t.value,0)}static getDefaults(){return Object.assign(rr.getDefaults(),{convert:!0,units:"number"})}get value(){const t=this.now();return this.getValueAtTime(t)}set value(t){this.cancelScheduledValues(this.now()),this.setValueAtTime(t,this.now())}get minValue(){return Vs(this._minValue)?this._minValue:"time"===this.units||"frequency"===this.units||"normalRange"===this.units||"positive"===this.units||"transportTime"===this.units||"ticks"===this.units||"bpm"===this.units||"hertz"===this.units||"samples"===this.units?0:"audioRange"===this.units?-1:"decibels"===this.units?-1/0:this._param.minValue}get maxValue(){return Vs(this._maxValue)?this._maxValue:"normalRange"===this.units||"audioRange"===this.units?1:this._param.maxValue}_is(t,e){return this.units===e}_assertRange(t){return Vs(this.maxValue)&&Vs(this.minValue)&&Ys(t,this._fromType(this.minValue),this._fromType(this.maxValue)),t}_fromType(t){return this.convert&&!this.overridden?this._is(t,"time")?this.toSeconds(t):this._is(t,"decibels")?Bi(t):this._is(t,"frequency")?this.toFrequency(t):t:this.overridden?0:t}_toType(t){return this.convert&&"decibels"===this.units?Hi(t):t}setValueAtTime(t,e){const n=this.toSeconds(e),s=this._fromType(t);return Qs(isFinite(s)&&isFinite(n),"Invalid argument(s) to setValueAtTime: ".concat(JSON.stringify(t),", ").concat(JSON.stringify(e))),this._assertRange(s),this.log(this.units,"setValueAtTime",t,n),this._events.add({time:n,type:"setValueAtTime",value:s}),this._param.setValueAtTime(s,n),this}getValueAtTime(t){const e=Math.max(this.toSeconds(t),0),n=this._events.getAfter(e),s=this._events.get(e);let i=this._initialValue;if(null===s)i=this._initialValue;else if("setTargetAtTime"!==s.type||null!==n&&"setValueAtTime"!==n.type)if(null===n)i=s.value;else if("linearRampToValueAtTime"===n.type||"exponentialRampToValueAtTime"===n.type){let t=s.value;if("setTargetAtTime"===s.type){const e=this._events.getBefore(s.time);t=null===e?this._initialValue:e.value}i="linearRampToValueAtTime"===n.type?this._linearInterpolate(s.time,t,n.time,n.value,e):this._exponentialInterpolate(s.time,t,n.time,n.value,e)}else i=s.value;else{const t=this._events.getBefore(s.time);let n;n=null===t?this._initialValue:t.value,"setTargetAtTime"===s.type&&(i=this._exponentialApproach(s.time,n,s.value,s.constant,e))}return this._toType(i)}setRampPoint(t){t=this.toSeconds(t);let e=this.getValueAtTime(t);return this.cancelAndHoldAtTime(t),0===this._fromType(e)&&(e=this._toType(this._minOutput)),this.setValueAtTime(e,t),this}linearRampToValueAtTime(t,e){const n=this._fromType(t),s=this.toSeconds(e);return Qs(isFinite(n)&&isFinite(s),"Invalid argument(s) to linearRampToValueAtTime: ".concat(JSON.stringify(t),", ").concat(JSON.stringify(e))),this._assertRange(n),this._events.add({time:s,type:"linearRampToValueAtTime",value:n}),this.log(this.units,"linearRampToValueAtTime",t,s),this._param.linearRampToValueAtTime(n,s),this}exponentialRampToValueAtTime(t,e){let n=this._fromType(t);n=Si(n,0)?this._minOutput:n,this._assertRange(n);const s=this.toSeconds(e);return Qs(isFinite(n)&&isFinite(s),"Invalid argument(s) to exponentialRampToValueAtTime: ".concat(JSON.stringify(t),", ").concat(JSON.stringify(e))),this._events.add({time:s,type:"exponentialRampToValueAtTime",value:n}),this.log(this.units,"exponentialRampToValueAtTime",t,s),this._param.exponentialRampToValueAtTime(n,s),this}exponentialRampTo(t,e,n){return n=this.toSeconds(n),this.setRampPoint(n),this.exponentialRampToValueAtTime(t,n+this.toSeconds(e)),this}linearRampTo(t,e,n){return n=this.toSeconds(n),this.setRampPoint(n),this.linearRampToValueAtTime(t,n+this.toSeconds(e)),this}targetRampTo(t,e,n){return n=this.toSeconds(n),this.setRampPoint(n),this.exponentialApproachValueAtTime(t,n,e),this}exponentialApproachValueAtTime(t,e,n){e=this.toSeconds(e),n=this.toSeconds(n);const s=Math.log(n+1)/Math.log(200);return this.setTargetAtTime(t,e,s),this.cancelAndHoldAtTime(e+.9*n),this.linearRampToValueAtTime(t,e+n),this}setTargetAtTime(t,e,n){const s=this._fromType(t);Qs(isFinite(n)&&n>0,"timeConstant must be a number greater than 0");const i=this.toSeconds(e);return this._assertRange(s),Qs(isFinite(s)&&isFinite(i),"Invalid argument(s) to setTargetAtTime: ".concat(JSON.stringify(t),", ").concat(JSON.stringify(e))),this._events.add({constant:n,time:i,type:"setTargetAtTime",value:s}),this.log(this.units,"setTargetAtTime",t,i,n),this._param.setTargetAtTime(s,i,n),this}setValueCurveAtTime(t,e,n){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;n=this.toSeconds(n),e=this.toSeconds(e);const i=this._fromType(t[0])*s;this.setValueAtTime(this._toType(i),e);const r=n/(t.length-1);for(let o=1;o<t.length;o++){const n=this._fromType(t[o])*s;this.linearRampToValueAtTime(this._toType(n),e+o*r)}return this}cancelScheduledValues(t){const e=this.toSeconds(t);return Qs(isFinite(e),"Invalid argument to cancelScheduledValues: ".concat(JSON.stringify(t))),this._events.cancel(e),this._param.cancelScheduledValues(e),this.log(this.units,"cancelScheduledValues",e),this}cancelAndHoldAtTime(t){const e=this.toSeconds(t),n=this._fromType(this.getValueAtTime(e));Qs(isFinite(e),"Invalid argument to cancelAndHoldAtTime: ".concat(JSON.stringify(t))),this.log(this.units,"cancelAndHoldAtTime",e,"value="+n);const s=this._events.get(e),i=this._events.getAfter(e);return s&&Si(s.time,e)?i?(this._param.cancelScheduledValues(i.time),this._events.cancel(i.time)):(this._param.cancelAndHoldAtTime(e),this._events.cancel(e+this.sampleTime)):i&&(this._param.cancelScheduledValues(i.time),this._events.cancel(i.time),"linearRampToValueAtTime"===i.type?this.linearRampToValueAtTime(this._toType(n),e):"exponentialRampToValueAtTime"===i.type&&this.exponentialRampToValueAtTime(this._toType(n),e)),this._events.add({time:e,type:"setValueAtTime",value:n}),this._param.setValueAtTime(n,e),this}rampTo(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1,n=arguments.length>2?arguments[2]:void 0;return"frequency"===this.units||"bpm"===this.units||"decibels"===this.units?this.exponentialRampTo(t,e,n):this.linearRampTo(t,e,n),this}apply(t){const e=this.context.currentTime;t.setValueAtTime(this.getValueAtTime(e),e);const n=this._events.get(e);if(n&&"setTargetAtTime"===n.type){const s=this._events.getAfter(n.time),i=s?s.time:e+2,r=(i-e)/10;for(let n=e;n<i;n+=r)t.linearRampToValueAtTime(this.getValueAtTime(n),n)}return this._events.forEachAfter(this.context.currentTime,(e=>{"cancelScheduledValues"===e.type?t.cancelScheduledValues(e.time):"setTargetAtTime"===e.type?t.setTargetAtTime(e.value,e.time,e.constant):t[e.type](e.value,e.time)})),this}setParam(t){Qs(this._swappable,"The Param must be assigned as 'swappable' in the constructor");const e=this.input;return e.disconnect(this._param),this.apply(t),this._param=t,e.connect(this._param),this}dispose(){return super.dispose(),this._events.dispose(),this}get defaultValue(){return this._toType(this._param.defaultValue)}_exponentialApproach(t,e,n,s,i){return n+(e-n)*Math.exp(-(i-t)/s)}_linearInterpolate(t,e,n,s,i){return e+(i-t)/(n-t)*(s-e)}_exponentialInterpolate(t,e,n,s,i){return e*Math.pow(s/e,(i-t)/(n-t))}}class lr extends rr{constructor(){super(...arguments),this._internalChannels=[]}get numberOfInputs(){return Vs(this.input)?ui(this.input)||this.input instanceof ar?1:this.input.numberOfInputs:0}get numberOfOutputs(){return Vs(this.output)?this.output.numberOfOutputs:0}_isAudioNode(t){return Vs(t)&&(t instanceof lr||ci(t))}_getInternalNodes(){const t=this._internalChannels.slice(0);return this._isAudioNode(this.input)&&t.push(this.input),this._isAudioNode(this.output)&&this.input!==this.output&&t.push(this.output),t}_setChannelProperties(t){this._getInternalNodes().forEach((e=>{e.channelCount=t.channelCount,e.channelCountMode=t.channelCountMode,e.channelInterpretation=t.channelInterpretation}))}_getChannelProperties(){const t=this._getInternalNodes();Qs(t.length>0,"ToneAudioNode does not have any internal nodes");const e=t[0];return{channelCount:e.channelCount,channelCountMode:e.channelCountMode,channelInterpretation:e.channelInterpretation}}get channelCount(){return this._getChannelProperties().channelCount}set channelCount(t){const e=this._getChannelProperties();this._setChannelProperties(Object.assign(e,{channelCount:t}))}get channelCountMode(){return this._getChannelProperties().channelCountMode}set channelCountMode(t){const e=this._getChannelProperties();this._setChannelProperties(Object.assign(e,{channelCountMode:t}))}get channelInterpretation(){return this._getChannelProperties().channelInterpretation}set channelInterpretation(t){const e=this._getChannelProperties();this._setChannelProperties(Object.assign(e,{channelInterpretation:t}))}connect(t){return cr(this,t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,arguments.length>2&&void 0!==arguments[2]?arguments[2]:0),this}toDestination(){return this.connect(this.context.destination),this}toMaster(){return si("toMaster() has been renamed toDestination()"),this.toDestination()}disconnect(t){return hr(this,t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,arguments.length>2&&void 0!==arguments[2]?arguments[2]:0),this}chain(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return ur(this,...e),this}fan(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.forEach((t=>this.connect(t))),this}dispose(){return super.dispose(),Vs(this.input)&&(this.input instanceof lr?this.input.dispose():ci(this.input)&&this.input.disconnect()),Vs(this.output)&&(this.output instanceof lr?this.output.dispose():ci(this.output)&&this.output.disconnect()),this._internalChannels=[],this}}function ur(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];const s=e.shift();e.reduce(((t,e)=>(t instanceof lr?t.connect(e):ci(t)&&cr(t,e),e)),s)}function cr(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;for(Qs(Vs(t),"Cannot connect from undefined node"),Qs(Vs(e),"Cannot connect to undefined node"),(e instanceof lr||ci(e))&&Qs(e.numberOfInputs>0,"Cannot connect to node with no inputs"),Qs(t.numberOfOutputs>0,"Cannot connect from node with no outputs");e instanceof lr||e instanceof ar;)Vs(e.input)&&(e=e.input);for(;t instanceof lr;)Vs(t.output)&&(t=t.output);ui(e)?t.connect(e,n):t.connect(e,n,s)}function hr(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(Vs(e))for(;e instanceof lr;)e=e.input;for(;!ci(t);)Vs(t.output)&&(t=t.output);ui(e)?t.disconnect(e,n):ci(e)?t.disconnect(e,n,s):t.disconnect()}function dr(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];const s=e.pop();Vs(s)&&e.forEach((t=>cr(t,s)))}class fr extends lr{constructor(){super(mi(fr.getDefaults(),arguments,["gain","units"])),this.name="Gain",this._gainNode=this.context.createGain(),this.input=this._gainNode,this.output=this._gainNode;const t=mi(fr.getDefaults(),arguments,["gain","units"]);this.gain=new ar({context:this.context,convert:t.convert,param:this._gainNode.gain,units:t.units,value:t.gain,minValue:t.minValue,maxValue:t.maxValue}),Ri(this,"gain")}static getDefaults(){return Object.assign(lr.getDefaults(),{convert:!0,gain:1,units:"gain"})}dispose(){return super.dispose(),this._gainNode.disconnect(),this.gain.dispose(),this}}class pr extends lr{constructor(t){super(t),this.onended=Pi,this._startTime=-1,this._stopTime=-1,this._timeout=-1,this.output=new fr({context:this.context,gain:0}),this._gainNode=this.output,this.getStateAtTime=function(t){const e=this.toSeconds(t);return-1!==this._startTime&&e>=this._startTime&&(-1===this._stopTime||e<=this._stopTime)?"started":"stopped"},this._fadeIn=t.fadeIn,this._fadeOut=t.fadeOut,this._curve=t.curve,this.onended=t.onended}static getDefaults(){return Object.assign(lr.getDefaults(),{curve:"linear",fadeIn:0,fadeOut:0,onended:Pi})}_startGain(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;Qs(-1===this._startTime,"Source cannot be started more than once");const n=this.toSeconds(this._fadeIn);return this._startTime=t+n,this._startTime=Math.max(this._startTime,this.context.currentTime),n>0?(this._gainNode.gain.setValueAtTime(0,t),"linear"===this._curve?this._gainNode.gain.linearRampToValueAtTime(e,t+n):this._gainNode.gain.exponentialApproachValueAtTime(e,t,n)):this._gainNode.gain.setValueAtTime(e,t),this}stop(t){return this.log("stop",t),this._stopGain(this.toSeconds(t)),this}_stopGain(t){Qs(-1!==this._startTime,"'start' must be called before 'stop'"),this.cancelStop();const e=this.toSeconds(this._fadeOut);return this._stopTime=this.toSeconds(t)+e,this._stopTime=Math.max(this._stopTime,this.now()),e>0?"linear"===this._curve?this._gainNode.gain.linearRampTo(0,e,t):this._gainNode.gain.targetRampTo(0,e,t):(this._gainNode.gain.cancelAndHoldAtTime(t),this._gainNode.gain.setValueAtTime(0,t)),this.context.clearTimeout(this._timeout),this._timeout=this.context.setTimeout((()=>{const t="exponential"===this._curve?2*e:0;this._stopSource(this.now()+t),this._onended()}),this._stopTime-this.context.currentTime),this}_onended(){if(this.onended!==Pi&&(this.onended(this),this.onended=Pi,!this.context.isOffline)){const t=()=>this.dispose();void 0!==window.requestIdleCallback?window.requestIdleCallback(t):setTimeout(t,1e3)}}get state(){return this.getStateAtTime(this.now())}cancelStop(){return this.log("cancelStop"),Qs(-1!==this._startTime,"Source is not started"),this._gainNode.gain.cancelScheduledValues(this._startTime+this.sampleTime),this.context.clearTimeout(this._timeout),this._stopTime=-1,this}dispose(){return super.dispose(),this._gainNode.dispose(),this.onended=Pi,this}}class mr extends pr{constructor(){super(mi(mr.getDefaults(),arguments,["offset"])),this.name="ToneConstantSource",this._source=this.context.createConstantSource();const t=mi(mr.getDefaults(),arguments,["offset"]);cr(this._source,this._gainNode),this.offset=new ar({context:this.context,convert:t.convert,param:this._source.offset,units:t.units,value:t.offset,minValue:t.minValue,maxValue:t.maxValue})}static getDefaults(){return Object.assign(pr.getDefaults(),{convert:!0,offset:1,units:"number"})}start(t){const e=this.toSeconds(t);return this.log("start",e),this._startGain(e),this._source.start(e),this}_stopSource(t){this._source.stop(t)}dispose(){return super.dispose(),"started"===this.state&&this.stop(),this._source.disconnect(),this.offset.dispose(),this}}class gr extends lr{constructor(){super(mi(gr.getDefaults(),arguments,["value","units"])),this.name="Signal",this.override=!0;const t=mi(gr.getDefaults(),arguments,["value","units"]);this.output=this._constantSource=new mr({context:this.context,convert:t.convert,offset:t.value,units:t.units,minValue:t.minValue,maxValue:t.maxValue}),this._constantSource.start(0),this.input=this._param=this._constantSource.offset}static getDefaults(){return Object.assign(lr.getDefaults(),{convert:!0,units:"number",value:0})}connect(t){return _r(this,t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,arguments.length>2&&void 0!==arguments[2]?arguments[2]:0),this}dispose(){return super.dispose(),this._param.dispose(),this._constantSource.dispose(),this}setValueAtTime(t,e){return this._param.setValueAtTime(t,e),this}getValueAtTime(t){return this._param.getValueAtTime(t)}setRampPoint(t){return this._param.setRampPoint(t),this}linearRampToValueAtTime(t,e){return this._param.linearRampToValueAtTime(t,e),this}exponentialRampToValueAtTime(t,e){return this._param.exponentialRampToValueAtTime(t,e),this}exponentialRampTo(t,e,n){return this._param.exponentialRampTo(t,e,n),this}linearRampTo(t,e,n){return this._param.linearRampTo(t,e,n),this}targetRampTo(t,e,n){return this._param.targetRampTo(t,e,n),this}exponentialApproachValueAtTime(t,e,n){return this._param.exponentialApproachValueAtTime(t,e,n),this}setTargetAtTime(t,e,n){return this._param.setTargetAtTime(t,e,n),this}setValueCurveAtTime(t,e,n,s){return this._param.setValueCurveAtTime(t,e,n,s),this}cancelScheduledValues(t){return this._param.cancelScheduledValues(t),this}cancelAndHoldAtTime(t){return this._param.cancelAndHoldAtTime(t),this}rampTo(t,e,n){return this._param.rampTo(t,e,n),this}get value(){return this._param.value}set value(t){this._param.value=t}get convert(){return this._param.convert}set convert(t){this._param.convert=t}get units(){return this._param.units}get overridden(){return this._param.overridden}set overridden(t){this._param.overridden=t}get maxValue(){return this._param.maxValue}get minValue(){return this._param.minValue}apply(t){return this._param.apply(t),this}}function _r(t,e,n,s){(e instanceof ar||ui(e)||e instanceof gr&&e.override)&&(e.cancelScheduledValues(0),e.setValueAtTime(0,0),e instanceof gr&&(e.overridden=!0)),cr(t,e,n,s)}class vr extends ar{constructor(){super(mi(vr.getDefaults(),arguments,["value"])),this.name="TickParam",this._events=new Ei(1/0),this._multiplier=1;const t=mi(vr.getDefaults(),arguments,["value"]);this._multiplier=t.multiplier,this._events.cancel(0),this._events.add({ticks:0,time:0,type:"setValueAtTime",value:this._fromType(t.value)}),this.setValueAtTime(t.value,0)}static getDefaults(){return Object.assign(ar.getDefaults(),{multiplier:1,units:"hertz",value:1})}setTargetAtTime(t,e,n){e=this.toSeconds(e),this.setRampPoint(e);const s=this._fromType(t),i=this._events.get(e),r=Math.round(Math.max(1/n,1));for(let o=0;o<=r;o++){const t=n*o+e,r=this._exponentialApproach(i.time,i.value,s,n,t);this.linearRampToValueAtTime(this._toType(r),t)}return this}setValueAtTime(t,e){const n=this.toSeconds(e);super.setValueAtTime(t,e);const s=this._events.get(n),i=this._events.previousEvent(s),r=this._getTicksUntilEvent(i,n);return s.ticks=Math.max(r,0),this}linearRampToValueAtTime(t,e){const n=this.toSeconds(e);super.linearRampToValueAtTime(t,e);const s=this._events.get(n),i=this._events.previousEvent(s),r=this._getTicksUntilEvent(i,n);return s.ticks=Math.max(r,0),this}exponentialRampToValueAtTime(t,e){e=this.toSeconds(e);const n=this._fromType(t),s=this._events.get(e),i=Math.round(Math.max(10*(e-s.time),1)),r=(e-s.time)/i;for(let o=0;o<=i;o++){const t=r*o+s.time,i=this._exponentialInterpolate(s.time,s.value,e,n,t);this.linearRampToValueAtTime(this._toType(i),t)}return this}_getTicksUntilEvent(t,e){if(null===t)t={ticks:0,time:0,type:"setValueAtTime",value:0};else if(qs(t.ticks)){const e=this._events.previousEvent(t);t.ticks=this._getTicksUntilEvent(e,t.time)}const n=this._fromType(this.getValueAtTime(t.time));let s=this._fromType(this.getValueAtTime(e));const i=this._events.get(e);return i&&i.time===e&&"setValueAtTime"===i.type&&(s=this._fromType(this.getValueAtTime(e-this.sampleTime))),.5*(e-t.time)*(n+s)+t.ticks}getTicksAtTime(t){const e=this.toSeconds(t),n=this._events.get(e);return Math.max(this._getTicksUntilEvent(n,e),0)}getDurationOfTicks(t,e){const n=this.toSeconds(e),s=this.getTicksAtTime(e);return this.getTimeOfTick(s+t)-n}getTimeOfTick(t){const e=this._events.get(t,"ticks"),n=this._events.getAfter(t,"ticks");if(e&&e.ticks===t)return e.time;if(e&&n&&"linearRampToValueAtTime"===n.type&&e.value!==n.value){const s=this._fromType(this.getValueAtTime(e.time)),i=(this._fromType(this.getValueAtTime(n.time))-s)/(n.time-e.time),r=Math.sqrt(Math.pow(s,2)-2*i*(e.ticks-t)),o=(-s+r)/i;return(o>0?o:(-s-r)/i)+e.time}return e?0===e.value?1/0:e.time+(t-e.ticks)/e.value:t/this._initialValue}ticksToTime(t,e){return this.getDurationOfTicks(t,e)}timeToTicks(t,e){const n=this.toSeconds(e),s=this.toSeconds(t),i=this.getTicksAtTime(n);return this.getTicksAtTime(n+s)-i}_fromType(t){return"bpm"===this.units&&this.multiplier?1/(60/t/this.multiplier):super._fromType(t)}_toType(t){return"bpm"===this.units&&this.multiplier?t/this.multiplier*60:super._toType(t)}get multiplier(){return this._multiplier}set multiplier(t){const e=this.value;this._multiplier=t,this.cancelScheduledValues(0),this.setValueAtTime(e,0)}}class yr extends gr{constructor(){super(mi(yr.getDefaults(),arguments,["value"])),this.name="TickSignal";const t=mi(yr.getDefaults(),arguments,["value"]);this.input=this._param=new vr({context:this.context,convert:t.convert,multiplier:t.multiplier,param:this._constantSource.offset,units:t.units,value:t.value})}static getDefaults(){return Object.assign(gr.getDefaults(),{multiplier:1,units:"hertz",value:1})}ticksToTime(t,e){return this._param.ticksToTime(t,e)}timeToTicks(t,e){return this._param.timeToTicks(t,e)}getTimeOfTick(t){return this._param.getTimeOfTick(t)}getDurationOfTicks(t,e){return this._param.getDurationOfTicks(t,e)}getTicksAtTime(t){return this._param.getTicksAtTime(t)}get multiplier(){return this._param.multiplier}set multiplier(t){this._param.multiplier=t}dispose(){return super.dispose(),this._param.dispose(),this}}class br extends rr{constructor(){super(mi(br.getDefaults(),arguments,["frequency"])),this.name="TickSource",this._state=new or,this._tickOffset=new Ei,this._ticksAtTime=new Ei,this._secondsAtTime=new Ei;const t=mi(br.getDefaults(),arguments,["frequency"]);this.frequency=new yr({context:this.context,units:t.units,value:t.frequency}),Ri(this,"frequency"),this._state.setStateAtTime("stopped",0),this.setTicksAtTime(0,0)}static getDefaults(){return Object.assign({frequency:1,units:"hertz"},rr.getDefaults())}get state(){return this.getStateAtTime(this.now())}start(t,e){const n=this.toSeconds(t);return"started"!==this._state.getValueAtTime(n)&&(this._state.setStateAtTime("started",n),Vs(e)&&this.setTicksAtTime(e,n),this._ticksAtTime.cancel(n),this._secondsAtTime.cancel(n)),this}stop(t){const e=this.toSeconds(t);if("stopped"===this._state.getValueAtTime(e)){const t=this._state.get(e);t&&t.time>0&&(this._tickOffset.cancel(t.time),this._state.cancel(t.time))}return this._state.cancel(e),this._state.setStateAtTime("stopped",e),this.setTicksAtTime(0,e),this._ticksAtTime.cancel(e),this._secondsAtTime.cancel(e),this}pause(t){const e=this.toSeconds(t);return"started"===this._state.getValueAtTime(e)&&(this._state.setStateAtTime("paused",e),this._ticksAtTime.cancel(e),this._secondsAtTime.cancel(e)),this}cancel(t){return t=this.toSeconds(t),this._state.cancel(t),this._tickOffset.cancel(t),this._ticksAtTime.cancel(t),this._secondsAtTime.cancel(t),this}getTicksAtTime(t){const e=this.toSeconds(t),n=this._state.getLastState("stopped",e),s=this._ticksAtTime.get(e),i={state:"paused",time:e};this._state.add(i);let r=s||n,o=s?s.ticks:0,a=null;return this._state.forEachBetween(r.time,e+this.sampleTime,(t=>{let e=r.time;const n=this._tickOffset.get(t.time);n&&n.time>=r.time&&(o=n.ticks,e=n.time),"started"===r.state&&"started"!==t.state&&(o+=this.frequency.getTicksAtTime(t.time)-this.frequency.getTicksAtTime(e),t.time!==i.time&&(a={state:t.state,time:t.time,ticks:o})),r=t})),this._state.remove(i),a&&this._ticksAtTime.add(a),o}get ticks(){return this.getTicksAtTime(this.now())}set ticks(t){this.setTicksAtTime(t,this.now())}get seconds(){return this.getSecondsAtTime(this.now())}set seconds(t){const e=this.now(),n=this.frequency.timeToTicks(t,e);this.setTicksAtTime(n,e)}getSecondsAtTime(t){t=this.toSeconds(t);const e=this._state.getLastState("stopped",t),n={state:"paused",time:t};this._state.add(n);const s=this._secondsAtTime.get(t);let i=s||e,r=s?s.seconds:0,o=null;return this._state.forEachBetween(i.time,t+this.sampleTime,(t=>{let e=i.time;const s=this._tickOffset.get(t.time);s&&s.time>=i.time&&(r=s.seconds,e=s.time),"started"===i.state&&"started"!==t.state&&(r+=t.time-e,t.time!==n.time&&(o={state:t.state,time:t.time,seconds:r})),i=t})),this._state.remove(n),o&&this._secondsAtTime.add(o),r}setTicksAtTime(t,e){return e=this.toSeconds(e),this._tickOffset.cancel(e),this._tickOffset.add({seconds:this.frequency.getDurationOfTicks(t,e),ticks:t,time:e}),this._ticksAtTime.cancel(e),this._secondsAtTime.cancel(e),this}getStateAtTime(t){return t=this.toSeconds(t),this._state.getValueAtTime(t)}getTimeOfTick(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.now();const n=this._tickOffset.get(e),s=this._state.get(e),i=Math.max(n.time,s.time),r=this.frequency.getTicksAtTime(i)+t-n.ticks;return this.frequency.getTimeOfTick(r)}forEachTickBetween(t,e,n){let s=this._state.get(t);this._state.forEachBetween(t,e,(e=>{s&&"started"===s.state&&"started"!==e.state&&this.forEachTickBetween(Math.max(s.time,t),e.time-this.sampleTime,n),s=e}));let i=null;if(s&&"started"===s.state){const r=Math.max(s.time,t),o=this.frequency.getTicksAtTime(r),a=o-this.frequency.getTicksAtTime(s.time);let l=Math.ceil(a)-a;l=Si(l,1)?0:l;let u=this.frequency.getTimeOfTick(o+l);for(;u<e;){try{n(u,Math.round(this.getTicksAtTime(u)))}catch(t){i=t;break}u+=this.frequency.getDurationOfTicks(1,u)}}if(i)throw i;return this}dispose(){return super.dispose(),this._state.dispose(),this._tickOffset.dispose(),this._ticksAtTime.dispose(),this._secondsAtTime.dispose(),this.frequency.dispose(),this}}class wr extends rr{constructor(){super(mi(wr.getDefaults(),arguments,["callback","frequency"])),this.name="Clock",this.callback=Pi,this._lastUpdate=0,this._state=new or("stopped"),this._boundLoop=this._loop.bind(this);const t=mi(wr.getDefaults(),arguments,["callback","frequency"]);this.callback=t.callback,this._tickSource=new br({context:this.context,frequency:t.frequency,units:t.units}),this._lastUpdate=0,this.frequency=this._tickSource.frequency,Ri(this,"frequency"),this._state.setStateAtTime("stopped",0),this.context.on("tick",this._boundLoop)}static getDefaults(){return Object.assign(rr.getDefaults(),{callback:Pi,frequency:1,units:"hertz"})}get state(){return this._state.getValueAtTime(this.now())}start(t,e){Xs(this.context);const n=this.toSeconds(t);return this.log("start",n),"started"!==this._state.getValueAtTime(n)&&(this._state.setStateAtTime("started",n),this._tickSource.start(n,e),n<this._lastUpdate&&this.emit("start",n,e)),this}stop(t){const e=this.toSeconds(t);return this.log("stop",e),this._state.cancel(e),this._state.setStateAtTime("stopped",e),this._tickSource.stop(e),e<this._lastUpdate&&this.emit("stop",e),this}pause(t){const e=this.toSeconds(t);return"started"===this._state.getValueAtTime(e)&&(this._state.setStateAtTime("paused",e),this._tickSource.pause(e),e<this._lastUpdate&&this.emit("pause",e)),this}get ticks(){return Math.ceil(this.getTicksAtTime(this.now()))}set ticks(t){this._tickSource.ticks=t}get seconds(){return this._tickSource.seconds}set seconds(t){this._tickSource.seconds=t}getSecondsAtTime(t){return this._tickSource.getSecondsAtTime(t)}setTicksAtTime(t,e){return this._tickSource.setTicksAtTime(t,e),this}getTimeOfTick(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.now();return this._tickSource.getTimeOfTick(t,e)}getTicksAtTime(t){return this._tickSource.getTicksAtTime(t)}nextTickTime(t,e){const n=this.toSeconds(e),s=this.getTicksAtTime(n);return this._tickSource.getTimeOfTick(s+t,n)}_loop(){const t=this._lastUpdate,e=this.now();this._lastUpdate=e,this.log("loop",t,e),t!==e&&(this._state.forEachBetween(t,e,(t=>{switch(t.state){case"started":const e=this._tickSource.getTicksAtTime(t.time);this.emit("start",t.time,e);break;case"stopped":0!==t.time&&this.emit("stop",t.time);break;case"paused":this.emit("pause",t.time)}})),this._tickSource.forEachTickBetween(t,e,((t,e)=>{this.callback(t,e)})))}getStateAtTime(t){const e=this.toSeconds(t);return this._state.getValueAtTime(e)}dispose(){return super.dispose(),this.context.off("tick",this._boundLoop),this._tickSource.dispose(),this._state.dispose(),this}}Mi.mixin(wr);class xr extends lr{constructor(){super(mi(xr.getDefaults(),arguments,["delayTime","maxDelay"])),this.name="Delay";const t=mi(xr.getDefaults(),arguments,["delayTime","maxDelay"]),e=this.toSeconds(t.maxDelay);this._maxDelay=Math.max(e,this.toSeconds(t.delayTime)),this._delayNode=this.input=this.output=this.context.createDelay(e),this.delayTime=new ar({context:this.context,param:this._delayNode.delayTime,units:"time",value:t.delayTime,minValue:0,maxValue:this.maxDelay}),Ri(this,"delayTime")}static getDefaults(){return Object.assign(lr.getDefaults(),{delayTime:0,maxDelay:1})}get maxDelay(){return this._maxDelay}dispose(){return super.dispose(),this._delayNode.disconnect(),this.delayTime.dispose(),this}}function Sr(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:ji().sampleRate;return ai(this,void 0,void 0,(function*(){const i=ji(),r=new Fi(n,e,s);Ui(r),yield t(r);const o=r.render();Ui(i);const a=yield o;return new Li(a)}))}class Tr extends vi{constructor(){super(),this.name="ToneAudioBuffers",this._buffers=new Map,this._loadingCount=0;const t=mi(Tr.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");this.baseUrl=t.baseUrl,Object.keys(t.urls).forEach((e=>{this._loadingCount++;const n=t.urls[e];this.add(e,n,this._bufferLoaded.bind(this,t.onload),t.onerror)}))}static getDefaults(){return{baseUrl:"",onerror:Pi,onload:Pi,urls:{}}}has(t){return this._buffers.has(t.toString())}get(t){return Qs(this.has(t),"ToneAudioBuffers has no buffer named: ".concat(t)),this._buffers.get(t.toString())}_bufferLoaded(t){this._loadingCount--,0===this._loadingCount&&t&&t()}get loaded(){return Array.from(this._buffers).every((t=>{let[e,n]=t;return n.loaded}))}add(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Pi,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Pi;return Gs(e)?(this.baseUrl&&"data:audio/"===e.trim().substring(0,11).toLowerCase()&&(this.baseUrl=""),this._buffers.set(t.toString(),new Li(this.baseUrl+e,n,s))):this._buffers.set(t.toString(),new Li(e,n,s)),this}dispose(){return super.dispose(),this._buffers.forEach((t=>t.dispose())),this._buffers.clear(),this}}class Er extends Ji{constructor(){super(...arguments),this.name="MidiClass",this.defaultUnits="midi"}_frequencyToUnits(t){return Qi(super._frequencyToUnits(t))}_ticksToUnits(t){return Qi(super._ticksToUnits(t))}_beatsToUnits(t){return Qi(super._beatsToUnits(t))}_secondsToUnits(t){return Qi(super._secondsToUnits(t))}toMidi(){return this.valueOf()}toFrequency(){return Xi(this.toMidi())}transpose(t){return new Er(this.context,this.toMidi()+t)}}function kr(t,e){return new Er(ji(),t,e)}class Ar extends sr{constructor(){super(...arguments),this.name="Ticks",this.defaultUnits="i"}_now(){return this.context.transport.ticks}_beatsToUnits(t){return this._getPPQ()*t}_secondsToUnits(t){return Math.floor(t/(60/this._getBpm())*this._getPPQ())}_ticksToUnits(t){return t}toTicks(){return this.valueOf()}toSeconds(){return this.valueOf()/this._getPPQ()*(60/this._getBpm())}}function Or(t,e){return new Ar(ji(),t,e)}class Cr extends rr{constructor(){super(...arguments),this.name="Draw",this.expiration=.25,this.anticipation=.008,this._events=new Ei,this._boundDrawLoop=this._drawLoop.bind(this),this._animationFrame=-1}schedule(t,e){return this._events.add({callback:t,time:this.toSeconds(e)}),1===this._events.length&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop)),this}cancel(t){return this._events.cancel(this.toSeconds(t)),this}_drawLoop(){const t=this.context.currentTime;for(;this._events.length&&this._events.peek().time-this.anticipation<=t;){const e=this._events.shift();e&&t-e.time<=this.expiration&&e.callback()}this._events.length>0&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop))}dispose(){return super.dispose(),this._events.dispose(),cancelAnimationFrame(this._animationFrame),this}}Ai((t=>{t.draw=new Cr({context:t})})),Ci((t=>{t.draw.dispose()}));class Mr extends vi{constructor(){super(...arguments),this.name="IntervalTimeline",this._root=null,this._length=0}add(t){Qs(Vs(t.time),"Events must have a time property"),Qs(Vs(t.duration),"Events must have a duration parameter"),t.time=t.time.valueOf();let e=new Ir(t.time,t.time+t.duration,t);for(null===this._root?this._root=e:this._root.insert(e),this._length++;null!==e;)e.updateHeight(),e.updateMax(),this._rebalance(e),e=e.parent;return this}remove(t){if(null!==this._root){const e=[];this._root.search(t.time,e);for(const n of e)if(n.event===t){this._removeNode(n),this._length--;break}}return this}get length(){return this._length}cancel(t){return this.forEachFrom(t,(t=>this.remove(t))),this}_setRoot(t){this._root=t,null!==this._root&&(this._root.parent=null)}_replaceNodeInParent(t,e){null!==t.parent?(t.isLeftChild()?t.parent.left=e:t.parent.right=e,this._rebalance(t.parent)):this._setRoot(e)}_removeNode(t){if(null===t.left&&null===t.right)this._replaceNodeInParent(t,null);else if(null===t.right)this._replaceNodeInParent(t,t.left);else if(null===t.left)this._replaceNodeInParent(t,t.right);else{let e,n=null;if(t.getBalance()>0)if(null===t.left.right)e=t.left,e.right=t.right,n=e;else{for(e=t.left.right;null!==e.right;)e=e.right;e.parent&&(e.parent.right=e.left,n=e.parent,e.left=t.left,e.right=t.right)}else if(null===t.right.left)e=t.right,e.left=t.left,n=e;else{for(e=t.right.left;null!==e.left;)e=e.left;e.parent&&(e.parent.left=e.right,n=e.parent,e.left=t.left,e.right=t.right)}null!==t.parent?t.isLeftChild()?t.parent.left=e:t.parent.right=e:this._setRoot(e),n&&this._rebalance(n)}t.dispose()}_rotateLeft(t){const e=t.parent,n=t.isLeftChild(),s=t.right;s&&(t.right=s.left,s.left=t),null!==e?n?e.left=s:e.right=s:this._setRoot(s)}_rotateRight(t){const e=t.parent,n=t.isLeftChild(),s=t.left;s&&(t.left=s.right,s.right=t),null!==e?n?e.left=s:e.right=s:this._setRoot(s)}_rebalance(t){const e=t.getBalance();e>1&&t.left?t.left.getBalance()<0?this._rotateLeft(t.left):this._rotateRight(t):e<-1&&t.right&&(t.right.getBalance()>0?this._rotateRight(t.right):this._rotateLeft(t))}get(t){if(null!==this._root){const e=[];if(this._root.search(t,e),e.length>0){let t=e[0];for(let n=1;n<e.length;n++)e[n].low>t.low&&(t=e[n]);return t.event}}return null}forEach(t){if(null!==this._root){const e=[];this._root.traverse((t=>e.push(t))),e.forEach((e=>{e.event&&t(e.event)}))}return this}forEachAtTime(t,e){if(null!==this._root){const n=[];this._root.search(t,n),n.forEach((t=>{t.event&&e(t.event)}))}return this}forEachFrom(t,e){if(null!==this._root){const n=[];this._root.searchAfter(t,n),n.forEach((t=>{t.event&&e(t.event)}))}return this}dispose(){return super.dispose(),null!==this._root&&this._root.traverse((t=>t.dispose())),this._root=null,this}}class Ir{constructor(t,e,n){this._left=null,this._right=null,this.parent=null,this.height=0,this.event=n,this.low=t,this.high=e,this.max=this.high}insert(t){t.low<=this.low?null===this.left?this.left=t:this.left.insert(t):null===this.right?this.right=t:this.right.insert(t)}search(t,e){t>this.max||(null!==this.left&&this.left.search(t,e),this.low<=t&&this.high>t&&e.push(this),this.low>t||null!==this.right&&this.right.search(t,e))}searchAfter(t,e){this.low>=t&&(e.push(this),null!==this.left&&this.left.searchAfter(t,e)),null!==this.right&&this.right.searchAfter(t,e)}traverse(t){t(this),null!==this.left&&this.left.traverse(t),null!==this.right&&this.right.traverse(t)}updateHeight(){null!==this.left&&null!==this.right?this.height=Math.max(this.left.height,this.right.height)+1:null!==this.right?this.height=this.right.height+1:null!==this.left?this.height=this.left.height+1:this.height=0}updateMax(){this.max=this.high,null!==this.left&&(this.max=Math.max(this.max,this.left.max)),null!==this.right&&(this.max=Math.max(this.max,this.right.max))}getBalance(){let t=0;return null!==this.left&&null!==this.right?t=this.left.height-this.right.height:null!==this.left?t=this.left.height+1:null!==this.right&&(t=-(this.right.height+1)),t}isLeftChild(){return null!==this.parent&&this.parent.left===this}get left(){return this._left}set left(t){this._left=t,null!==t&&(t.parent=this),this.updateHeight(),this.updateMax()}get right(){return this._right}set right(t){this._right=t,null!==t&&(t.parent=this),this.updateHeight(),this.updateMax()}dispose(){this.parent=null,this._left=null,this._right=null,this.event=null}}class Dr extends lr{constructor(){super(mi(Dr.getDefaults(),arguments,["volume"])),this.name="Volume";const t=mi(Dr.getDefaults(),arguments,["volume"]);this.input=this.output=new fr({context:this.context,gain:t.volume,units:"decibels"}),this.volume=this.output.gain,Ri(this,"volume"),this._unmutedVolume=t.volume,this.mute=t.mute}static getDefaults(){return Object.assign(lr.getDefaults(),{mute:!1,volume:0})}get mute(){return this.volume.value===-1/0}set mute(t){!this.mute&&t?(this._unmutedVolume=this.volume.value,this.volume.value=-1/0):this.mute&&!t&&(this.volume.value=this._unmutedVolume)}dispose(){return super.dispose(),this.input.dispose(),this.volume.dispose(),this}}class Rr extends lr{constructor(){super(mi(Rr.getDefaults(),arguments)),this.name="Destination",this.input=new Dr({context:this.context}),this.output=new fr({context:this.context}),this.volume=this.input.volume;const t=mi(Rr.getDefaults(),arguments);ur(this.input,this.output,this.context.rawContext.destination),this.mute=t.mute,this._internalChannels=[this.input,this.context.rawContext.destination,this.output]}static getDefaults(){return Object.assign(lr.getDefaults(),{mute:!1,volume:0})}get mute(){return this.input.mute}set mute(t){this.input.mute=t}chain(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.input.disconnect(),e.unshift(this.input),e.push(this.output),ur(...e),this}get maxChannelCount(){return this.context.rawContext.destination.maxChannelCount}dispose(){return super.dispose(),this.volume.dispose(),this}}Ai((t=>{t.destination=new Rr({context:t})})),Ci((t=>{t.destination.dispose()}));class Nr extends vi{constructor(t){super(),this.name="TimelineValue",this._timeline=new Ei({memory:10}),this._initialValue=t}set(t,e){return this._timeline.add({value:t,time:e}),this}get(t){const e=this._timeline.get(t);return e?e.value:this._initialValue}}class Pr extends lr{constructor(){super(Object.assign(mi(Pr.getDefaults(),arguments,["context"])))}connect(t){return _r(this,t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,arguments.length>2&&void 0!==arguments[2]?arguments[2]:0),this}}class Lr extends Pr{constructor(){super(Object.assign(mi(Lr.getDefaults(),arguments,["mapping","length"]))),this.name="WaveShaper",this._shaper=this.context.createWaveShaper(),this.input=this._shaper,this.output=this._shaper;const t=mi(Lr.getDefaults(),arguments,["mapping","length"]);Hs(t.mapping)||t.mapping instanceof Float32Array?this.curve=Float32Array.from(t.mapping):js(t.mapping)&&this.setMap(t.mapping,t.length)}static getDefaults(){return Object.assign(gr.getDefaults(),{length:1024})}setMap(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=new Float32Array(e);for(let s=0,i=e;s<i;s++){const e=s/(i-1)*2-1;n[s]=t(e,s)}return this.curve=n,this}get curve(){return this._shaper.curve}set curve(t){this._shaper.curve=t}get oversample(){return this._shaper.oversample}set oversample(t){Qs(["none","2x","4x"].some((e=>e.includes(t))),"oversampling must be either 'none', '2x', or '4x'"),this._shaper.oversample=t}dispose(){return super.dispose(),this._shaper.disconnect(),this}}class Fr extends Pr{constructor(){super(Object.assign(mi(Fr.getDefaults(),arguments,["value"]))),this.name="Pow";const t=mi(Fr.getDefaults(),arguments,["value"]);this._exponentScaler=this.input=this.output=new Lr({context:this.context,mapping:this._expFunc(t.value),length:8192}),this._exponent=t.value}static getDefaults(){return Object.assign(Pr.getDefaults(),{value:1})}_expFunc(t){return e=>Math.pow(Math.abs(e),t)}get value(){return this._exponent}set value(t){this._exponent=t,this._exponentScaler.setMap(this._expFunc(this._exponent))}dispose(){return super.dispose(),this._exponentScaler.dispose(),this}}class qr{constructor(t,e){this.id=qr._eventId++,this._remainderTime=0;const n=Object.assign(qr.getDefaults(),e);this.transport=t,this.callback=n.callback,this._once=n.once,this.time=Math.floor(n.time),this._remainderTime=n.time-this.time}static getDefaults(){return{callback:Pi,once:!1,time:0}}get floatTime(){return this.time+this._remainderTime}invoke(t){if(this.callback){const e=this.transport.bpm.getDurationOfTicks(1,t);this.callback(t+this._remainderTime*e),this._once&&this.transport.clear(this.id)}}dispose(){return this.callback=void 0,this}}qr._eventId=0;class Vr extends qr{constructor(t,e){super(t,e),this._currentId=-1,this._nextId=-1,this._nextTick=this.time,this._boundRestart=this._restart.bind(this);const n=Object.assign(Vr.getDefaults(),e);this.duration=n.duration,this._interval=n.interval,this._nextTick=n.time,this.transport.on("start",this._boundRestart),this.transport.on("loopStart",this._boundRestart),this.transport.on("ticks",this._boundRestart),this.context=this.transport.context,this._restart()}static getDefaults(){return Object.assign({},qr.getDefaults(),{duration:1/0,interval:1,once:!1})}invoke(t){this._createEvents(t),super.invoke(t)}_createEvent(){return xi(this._nextTick,this.floatTime+this.duration)?this.transport.scheduleOnce(this.invoke.bind(this),new Ar(this.context,this._nextTick).toSeconds()):-1}_createEvents(t){xi(this._nextTick+this._interval,this.floatTime+this.duration)&&(this._nextTick+=this._interval,this._currentId=this._nextId,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new Ar(this.context,this._nextTick).toSeconds()))}_restart(t){this.transport.clear(this._currentId),this.transport.clear(this._nextId),this._nextTick=this.floatTime;const e=this.transport.getTicksAtTime(t);bi(e,this.time)&&(this._nextTick=this.floatTime+Math.ceil((e-this.floatTime)/this._interval)*this._interval),this._currentId=this._createEvent(),this._nextTick+=this._interval,this._nextId=this._createEvent()}dispose(){return super.dispose(),this.transport.clear(this._currentId),this.transport.clear(this._nextId),this.transport.off("start",this._boundRestart),this.transport.off("loopStart",this._boundRestart),this.transport.off("ticks",this._boundRestart),this}}class jr extends rr{constructor(){super(mi(jr.getDefaults(),arguments)),this.name="Transport",this._loop=new Nr(!1),this._loopStart=0,this._loopEnd=0,this._scheduledEvents={},this._timeline=new Ei,this._repeatedEvents=new Mr,this._syncedSignals=[],this._swingAmount=0;const t=mi(jr.getDefaults(),arguments);this._ppq=t.ppq,this._clock=new wr({callback:this._processTick.bind(this),context:this.context,frequency:0,units:"bpm"}),this._bindClockEvents(),this.bpm=this._clock.frequency,this._clock.frequency.multiplier=t.ppq,this.bpm.setValueAtTime(t.bpm,0),Ri(this,"bpm"),this._timeSignature=t.timeSignature,this._swingTicks=t.ppq/2}static getDefaults(){return Object.assign(rr.getDefaults(),{bpm:120,loopEnd:"4m",loopStart:0,ppq:192,swing:0,swingSubdivision:"8n",timeSignature:4})}_processTick(t,e){if(this._loop.get(t)&&e>=this._loopEnd&&(this.emit("loopEnd",t),this._clock.setTicksAtTime(this._loopStart,t),e=this._loopStart,this.emit("loopStart",t,this._clock.getSecondsAtTime(t)),this.emit("loop",t)),this._swingAmount>0&&e%this._ppq!=0&&e%(2*this._swingTicks)!=0){const n=e%(2*this._swingTicks)/(2*this._swingTicks),s=Math.sin(n*Math.PI)*this._swingAmount;t+=new Ar(this.context,2*this._swingTicks/3).toSeconds()*s}$s(!0),this._timeline.forEachAtTime(e,(e=>e.invoke(t))),$s(!1)}schedule(t,e){const n=new qr(this,{callback:t,time:new sr(this.context,e).toTicks()});return this._addEvent(n,this._timeline)}scheduleRepeat(t,e,n){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;const i=new Vr(this,{callback:t,duration:new Ki(this.context,s).toTicks(),interval:new Ki(this.context,e).toTicks(),time:new sr(this.context,n).toTicks()});return this._addEvent(i,this._repeatedEvents)}scheduleOnce(t,e){const n=new qr(this,{callback:t,once:!0,time:new sr(this.context,e).toTicks()});return this._addEvent(n,this._timeline)}clear(t){if(this._scheduledEvents.hasOwnProperty(t)){const e=this._scheduledEvents[t.toString()];e.timeline.remove(e.event),e.event.dispose(),delete this._scheduledEvents[t.toString()]}return this}_addEvent(t,e){return this._scheduledEvents[t.id.toString()]={event:t,timeline:e},e.add(t),t.id}cancel(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;const e=this.toTicks(t);return this._timeline.forEachFrom(e,(t=>this.clear(t.id))),this._repeatedEvents.forEachFrom(e,(t=>this.clear(t.id))),this}_bindClockEvents(){this._clock.on("start",((t,e)=>{e=new Ar(this.context,e).toSeconds(),this.emit("start",t,e)})),this._clock.on("stop",(t=>{this.emit("stop",t)})),this._clock.on("pause",(t=>{this.emit("pause",t)}))}get state(){return this._clock.getStateAtTime(this.now())}start(t,e){let n;return this.context.resume(),Vs(e)&&(n=this.toTicks(e)),this._clock.start(t,n),this}stop(t){return this._clock.stop(t),this}pause(t){return this._clock.pause(t),this}toggle(t){return t=this.toSeconds(t),"started"!==this._clock.getStateAtTime(t)?this.start(t):this.stop(t),this}get timeSignature(){return this._timeSignature}set timeSignature(t){Hs(t)&&(t=t[0]/t[1]*4),this._timeSignature=t}get loopStart(){return new Ki(this.context,this._loopStart,"i").toSeconds()}set loopStart(t){this._loopStart=this.toTicks(t)}get loopEnd(){return new Ki(this.context,this._loopEnd,"i").toSeconds()}set loopEnd(t){this._loopEnd=this.toTicks(t)}get loop(){return this._loop.get(this.now())}set loop(t){this._loop.set(t,this.now())}setLoopPoints(t,e){return this.loopStart=t,this.loopEnd=e,this}get swing(){return this._swingAmount}set swing(t){this._swingAmount=t}get swingSubdivision(){return new Ar(this.context,this._swingTicks).toNotation()}set swingSubdivision(t){this._swingTicks=this.toTicks(t)}get position(){const t=this.now(),e=this._clock.getTicksAtTime(t);return new Ar(this.context,e).toBarsBeatsSixteenths()}set position(t){const e=this.toTicks(t);this.ticks=e}get seconds(){return this._clock.seconds}set seconds(t){const e=this.now(),n=this._clock.frequency.timeToTicks(t,e);this.ticks=n}get progress(){if(this.loop){const t=this.now();return(this._clock.getTicksAtTime(t)-this._loopStart)/(this._loopEnd-this._loopStart)}return 0}get ticks(){return this._clock.ticks}set ticks(t){if(this._clock.ticks!==t){const e=this.now();if("started"===this.state){const n=this._clock.getTicksAtTime(e),s=e+this._clock.frequency.getDurationOfTicks(Math.ceil(n)-n,e);this.emit("stop",s),this._clock.setTicksAtTime(t,s),this.emit("start",s,this._clock.getSecondsAtTime(s))}else this.emit("ticks",e),this._clock.setTicksAtTime(t,e)}}getTicksAtTime(t){return this._clock.getTicksAtTime(t)}getSecondsAtTime(t){return this._clock.getSecondsAtTime(t)}get PPQ(){return this._clock.frequency.multiplier}set PPQ(t){this._clock.frequency.multiplier=t}nextSubdivision(t){if(t=this.toTicks(t),"started"!==this.state)return 0;{const e=this.now(),n=t-this.getTicksAtTime(e)%t;return this._clock.nextTickTime(n,e)}}syncSignal(t,e){const n=this.now();let s=this.bpm,i=1/(60/s.getValueAtTime(n)/this.PPQ),r=[];if("time"===t.units){const t=1/64/i,e=new fr(t),n=new Fr(-1),o=new fr(t);s.chain(e,n,o),s=o,i=1/i,r=[e,n,o]}e||(e=0!==t.getValueAtTime(n)?t.getValueAtTime(n)/i:0);const o=new fr(e);return s.connect(o),o.connect(t._param),r.push(o),this._syncedSignals.push({initial:t.value,nodes:r,signal:t}),t.value=0,this}unsyncSignal(t){for(let e=this._syncedSignals.length-1;e>=0;e--){const n=this._syncedSignals[e];n.signal===t&&(n.nodes.forEach((t=>t.dispose())),n.signal.value=n.initial,this._syncedSignals.splice(e,1))}return this}dispose(){return super.dispose(),this._clock.dispose(),Ni(this,"bpm"),this._timeline.dispose(),this._repeatedEvents.dispose(),this}}Mi.mixin(jr),Ai((t=>{t.transport=new jr({context:t})})),Ci((t=>{t.transport.dispose()}));class Ur extends lr{constructor(t){super(t),this.input=void 0,this._state=new or("stopped"),this._synced=!1,this._scheduled=[],this._syncedStart=Pi,this._syncedStop=Pi,this._state.memory=100,this._state.increasing=!0,this._volume=this.output=new Dr({context:this.context,mute:t.mute,volume:t.volume}),this.volume=this._volume.volume,Ri(this,"volume"),this.onstop=t.onstop}static getDefaults(){return Object.assign(lr.getDefaults(),{mute:!1,onstop:Pi,volume:0})}get state(){return this._synced?"started"===this.context.transport.state?this._state.getValueAtTime(this.context.transport.seconds):"stopped":this._state.getValueAtTime(this.now())}get mute(){return this._volume.mute}set mute(t){this._volume.mute=t}_clampToCurrentTime(t){return this._synced?t:Math.max(t,this.context.currentTime)}start(t,e,n){let s=qs(t)&&this._synced?this.context.transport.seconds:this.toSeconds(t);if(s=this._clampToCurrentTime(s),this._synced||"started"!==this._state.getValueAtTime(s))if(this.log("start",s),this._state.setStateAtTime("started",s),this._synced){const t=this._state.get(s);t&&(t.offset=this.toSeconds(gi(e,0)),t.duration=n?this.toSeconds(n):void 0);const i=this.context.transport.schedule((t=>{this._start(t,e,n)}),s);this._scheduled.push(i),"started"===this.context.transport.state&&this.context.transport.getSecondsAtTime(this.immediate())>s&&this._syncedStart(this.now(),this.context.transport.seconds)}else Xs(this.context),this._start(s,e,n);else Qs(bi(s,this._state.get(s).time),"Start time must be strictly greater than previous start time"),this._state.cancel(s),this._state.setStateAtTime("started",s),this.log("restart",s),this.restart(s,e,n);return this}stop(t){let e=qs(t)&&this._synced?this.context.transport.seconds:this.toSeconds(t);if(e=this._clampToCurrentTime(e),"started"===this._state.getValueAtTime(e)||Vs(this._state.getNextState("started",e))){if(this.log("stop",e),this._synced){const t=this.context.transport.schedule(this._stop.bind(this),e);this._scheduled.push(t)}else this._stop(e);this._state.cancel(e),this._state.setStateAtTime("stopped",e)}return this}restart(t,e,n){return t=this.toSeconds(t),"started"===this._state.getValueAtTime(t)&&(this._state.cancel(t),this._restart(t,e,n)),this}sync(){return this._synced||(this._synced=!0,this._syncedStart=(t,e)=>{if(bi(e,0)){const n=this._state.get(e);if(n&&"started"===n.state&&n.time!==e){const s=e-this.toSeconds(n.time);let i;n.duration&&(i=this.toSeconds(n.duration)-s),this._start(t,this.toSeconds(n.offset)+s,i)}}},this._syncedStop=t=>{const e=this.context.transport.getSecondsAtTime(Math.max(t-this.sampleTime,0));"started"===this._state.getValueAtTime(e)&&this._stop(t)},this.context.transport.on("start",this._syncedStart),this.context.transport.on("loopStart",this._syncedStart),this.context.transport.on("stop",this._syncedStop),this.context.transport.on("pause",this._syncedStop),this.context.transport.on("loopEnd",this._syncedStop)),this}unsync(){return this._synced&&(this.context.transport.off("stop",this._syncedStop),this.context.transport.off("pause",this._syncedStop),this.context.transport.off("loopEnd",this._syncedStop),this.context.transport.off("start",this._syncedStart),this.context.transport.off("loopStart",this._syncedStart)),this._synced=!1,this._scheduled.forEach((t=>this.context.transport.clear(t))),this._scheduled=[],this._state.cancel(0),this._stop(0),this}dispose(){return super.dispose(),this.onstop=Pi,this.unsync(),this._volume.dispose(),this._state.dispose(),this}}class zr extends pr{constructor(){super(mi(zr.getDefaults(),arguments,["url","onload"])),this.name="ToneBufferSource",this._source=this.context.createBufferSource(),this._internalChannels=[this._source],this._sourceStarted=!1,this._sourceStopped=!1;const t=mi(zr.getDefaults(),arguments,["url","onload"]);cr(this._source,this._gainNode),this._source.onended=()=>this._stopSource(),this.playbackRate=new ar({context:this.context,param:this._source.playbackRate,units:"positive",value:t.playbackRate}),this.loop=t.loop,this.loopStart=t.loopStart,this.loopEnd=t.loopEnd,this._buffer=new Li(t.url,t.onload,t.onerror),this._internalChannels.push(this._source)}static getDefaults(){return Object.assign(pr.getDefaults(),{url:new Li,loop:!1,loopEnd:0,loopStart:0,onload:Pi,onerror:Pi,playbackRate:1})}get fadeIn(){return this._fadeIn}set fadeIn(t){this._fadeIn=t}get fadeOut(){return this._fadeOut}set fadeOut(t){this._fadeOut=t}get curve(){return this._curve}set curve(t){this._curve=t}start(t,e,n){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;Qs(this.buffer.loaded,"buffer is either not set or not loaded");const i=this.toSeconds(t);this._startGain(i,s),e=this.loop?gi(e,this.loopStart):gi(e,0);let r=Math.max(this.toSeconds(e),0);if(this.loop){const t=this.toSeconds(this.loopEnd)||this.buffer.duration,e=this.toSeconds(this.loopStart),n=t-e;wi(r,t)&&(r=(r-e)%n+e),Si(r,this.buffer.duration)&&(r=0)}if(this._source.buffer=this.buffer.get(),this._source.loopEnd=this.toSeconds(this.loopEnd)||this.buffer.duration,xi(r,this.buffer.duration)&&(this._sourceStarted=!0,this._source.start(i,r)),Vs(n)){let t=this.toSeconds(n);t=Math.max(t,0),this.stop(i+t)}return this}_stopSource(t){!this._sourceStopped&&this._sourceStarted&&(this._sourceStopped=!0,this._source.stop(this.toSeconds(t)),this._onended())}get loopStart(){return this._source.loopStart}set loopStart(t){this._source.loopStart=this.toSeconds(t)}get loopEnd(){return this._source.loopEnd}set loopEnd(t){this._source.loopEnd=this.toSeconds(t)}get buffer(){return this._buffer}set buffer(t){this._buffer.set(t)}get loop(){return this._source.loop}set loop(t){this._source.loop=t,this._sourceStarted&&this.cancelStop()}dispose(){return super.dispose(),this._source.onended=null,this._source.disconnect(),this._buffer.dispose(),this.playbackRate.dispose(),this}}class Br extends Ur{constructor(){super(mi(Br.getDefaults(),arguments,["type"])),this.name="Noise",this._source=null;const t=mi(Br.getDefaults(),arguments,["type"]);this._playbackRate=t.playbackRate,this.type=t.type,this._fadeIn=t.fadeIn,this._fadeOut=t.fadeOut}static getDefaults(){return Object.assign(Ur.getDefaults(),{fadeIn:0,fadeOut:0,playbackRate:1,type:"white"})}get type(){return this._type}set type(t){if(Qs(t in Wr,"Noise: invalid type: "+t),this._type!==t&&(this._type=t,"started"===this.state)){const t=this.now();this._stop(t),this._start(t)}}get playbackRate(){return this._playbackRate}set playbackRate(t){this._playbackRate=t,this._source&&(this._source.playbackRate.value=t)}_start(t){const e=Wr[this._type];this._source=new zr({url:e,context:this.context,fadeIn:this._fadeIn,fadeOut:this._fadeOut,loop:!0,onended:()=>this.onstop(this),playbackRate:this._playbackRate}).connect(this.output),this._source.start(this.toSeconds(t),Math.random()*(e.duration-.001))}_stop(t){this._source&&(this._source.stop(this.toSeconds(t)),this._source=null)}get fadeIn(){return this._fadeIn}set fadeIn(t){this._fadeIn=t,this._source&&(this._source.fadeIn=this._fadeIn)}get fadeOut(){return this._fadeOut}set fadeOut(t){this._fadeOut=t,this._source&&(this._source.fadeOut=this._fadeOut)}_restart(t){this._stop(t),this._start(t)}dispose(){return super.dispose(),this._source&&this._source.disconnect(),this}}const Hr=220500,Gr={brown:null,pink:null,white:null},Wr={get brown(){if(!Gr.brown){const t=[];for(let e=0;e<2;e++){const n=new Float32Array(Hr);t[e]=n;let s=0;for(let t=0;t<Hr;t++){const e=2*Math.random()-1;n[t]=(s+.02*e)/1.02,s=n[t],n[t]*=3.5}}Gr.brown=(new Li).fromArray(t)}return Gr.brown},get pink(){if(!Gr.pink){const t=[];for(let e=0;e<2;e++){const n=new Float32Array(Hr);let s,i,r,o,a,l,u;t[e]=n,s=i=r=o=a=l=u=0;for(let t=0;t<Hr;t++){const e=2*Math.random()-1;s=.99886*s+.0555179*e,i=.99332*i+.0750759*e,r=.969*r+.153852*e,o=.8665*o+.3104856*e,a=.55*a+.5329522*e,l=-.7616*l-.016898*e,n[t]=s+i+r+o+a+l+u+.5362*e,n[t]*=.11,u=.115926*e}}Gr.pink=(new Li).fromArray(t)}return Gr.pink},get white(){if(!Gr.white){const t=[];for(let e=0;e<2;e++){const n=new Float32Array(Hr);t[e]=n;for(let t=0;t<Hr;t++)n[t]=2*Math.random()-1}Gr.white=(new Li).fromArray(t)}return Gr.white}};class Qr extends lr{constructor(){super(mi(Qr.getDefaults(),arguments,["volume"])),this.name="UserMedia";const t=mi(Qr.getDefaults(),arguments,["volume"]);this._volume=this.output=new Dr({context:this.context,volume:t.volume}),this.volume=this._volume.volume,Ri(this,"volume"),this.mute=t.mute}static getDefaults(){return Object.assign(lr.getDefaults(),{mute:!1,volume:0})}open(t){return ai(this,void 0,void 0,(function*(){Qs(Qr.supported,"UserMedia is not supported"),"started"===this.state&&this.close();const e=yield Qr.enumerateDevices();Us(t)?this._device=e[t]:(this._device=e.find((e=>e.label===t||e.deviceId===t)),!this._device&&e.length>0&&(this._device=e[0]),Qs(Vs(this._device),"No matching device ".concat(t)));const n={audio:{echoCancellation:!1,sampleRate:this.context.sampleRate,noiseSuppression:!1,mozNoiseSuppression:!1}};this._device&&(n.audio.deviceId=this._device.deviceId);const s=yield navigator.mediaDevices.getUserMedia(n);if(!this._stream){this._stream=s;const t=this.context.createMediaStreamSource(s);cr(t,this.output),this._mediaStream=t}return this}))}close(){return this._stream&&this._mediaStream&&(this._stream.getAudioTracks().forEach((t=>{t.stop()})),this._stream=void 0,this._mediaStream.disconnect(),this._mediaStream=void 0),this._device=void 0,this}static enumerateDevices(){return ai(this,void 0,void 0,(function*(){return(yield navigator.mediaDevices.enumerateDevices()).filter((t=>"audioinput"===t.kind))}))}get state(){return this._stream&&this._stream.active?"started":"stopped"}get deviceId(){return this._device?this._device.deviceId:void 0}get groupId(){return this._device?this._device.groupId:void 0}get label(){return this._device?this._device.label:void 0}get mute(){return this._volume.mute}set mute(t){this._volume.mute=t}dispose(){return super.dispose(),this.close(),this._volume.dispose(),this.volume.dispose(),this}static get supported(){return Vs(navigator.mediaDevices)&&Vs(navigator.mediaDevices.getUserMedia)}}function Yr(t,e){return ai(this,void 0,void 0,(function*(){const n=e/t.context.sampleRate,s=new Fi(1,n,t.context.sampleRate);return new t.constructor(Object.assign(t.get(),{frequency:2/n,detune:0,context:s})).toDestination().start(0),(yield s.render()).getChannelData(0)}))}class Xr extends pr{constructor(){super(mi(Xr.getDefaults(),arguments,["frequency","type"])),this.name="ToneOscillatorNode",this._oscillator=this.context.createOscillator(),this._internalChannels=[this._oscillator];const t=mi(Xr.getDefaults(),arguments,["frequency","type"]);cr(this._oscillator,this._gainNode),this.type=t.type,this.frequency=new ar({context:this.context,param:this._oscillator.frequency,units:"frequency",value:t.frequency}),this.detune=new ar({context:this.context,param:this._oscillator.detune,units:"cents",value:t.detune}),Ri(this,["frequency","detune"])}static getDefaults(){return Object.assign(pr.getDefaults(),{detune:0,frequency:440,type:"sine"})}start(t){const e=this.toSeconds(t);return this.log("start",e),this._startGain(e),this._oscillator.start(e),this}_stopSource(t){this._oscillator.stop(t)}setPeriodicWave(t){return this._oscillator.setPeriodicWave(t),this}get type(){return this._oscillator.type}set type(t){this._oscillator.type=t}dispose(){return super.dispose(),"started"===this.state&&this.stop(),this._oscillator.disconnect(),this.frequency.dispose(),this.detune.dispose(),this}}class Zr extends Ur{constructor(){super(mi(Zr.getDefaults(),arguments,["frequency","type"])),this.name="Oscillator",this._oscillator=null;const t=mi(Zr.getDefaults(),arguments,["frequency","type"]);this.frequency=new gr({context:this.context,units:"frequency",value:t.frequency}),Ri(this,"frequency"),this.detune=new gr({context:this.context,units:"cents",value:t.detune}),Ri(this,"detune"),this._partials=t.partials,this._partialCount=t.partialCount,this._type=t.type,t.partialCount&&"custom"!==t.type&&(this._type=this.baseType+t.partialCount.toString()),this.phase=t.phase}static getDefaults(){return Object.assign(Ur.getDefaults(),{detune:0,frequency:440,partialCount:0,partials:[],phase:0,type:"sine"})}_start(t){const e=this.toSeconds(t),n=new Xr({context:this.context,onended:()=>this.onstop(this)});this._oscillator=n,this._wave?this._oscillator.setPeriodicWave(this._wave):this._oscillator.type=this._type,this._oscillator.connect(this.output),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.start(e)}_stop(t){const e=this.toSeconds(t);this._oscillator&&this._oscillator.stop(e)}_restart(t){const e=this.toSeconds(t);return this.log("restart",e),this._oscillator&&this._oscillator.cancelStop(),this._state.cancel(e),this}syncFrequency(){return this.context.transport.syncSignal(this.frequency),this}unsyncFrequency(){return this.context.transport.unsyncSignal(this.frequency),this}_getCachedPeriodicWave(){if("custom"===this._type)return Zr._periodicWaveCache.find((t=>{return t.phase===this._phase&&(e=t.partials,n=this._partials,e.length===n.length&&e.every(((t,e)=>n[e]===t)));var e,n}));{const t=Zr._periodicWaveCache.find((t=>t.type===this._type&&t.phase===this._phase));return this._partialCount=t?t.partialCount:this._partialCount,t}}get type(){return this._type}set type(t){this._type=t;const e=-1!==["sine","square","sawtooth","triangle"].indexOf(t);if(0===this._phase&&e)this._wave=void 0,this._partialCount=0,null!==this._oscillator&&(this._oscillator.type=t);else{const e=this._getCachedPeriodicWave();if(Vs(e)){const{partials:t,wave:n}=e;this._wave=n,this._partials=t,null!==this._oscillator&&this._oscillator.setPeriodicWave(this._wave)}else{const[e,n]=this._getRealImaginary(t,this._phase),s=this.context.createPeriodicWave(e,n);this._wave=s,null!==this._oscillator&&this._oscillator.setPeriodicWave(this._wave),Zr._periodicWaveCache.push({imag:n,partialCount:this._partialCount,partials:this._partials,phase:this._phase,real:e,type:this._type,wave:this._wave}),Zr._periodicWaveCache.length>100&&Zr._periodicWaveCache.shift()}}}get baseType(){return this._type.replace(this.partialCount.toString(),"")}set baseType(t){this.partialCount&&"custom"!==this._type&&"custom"!==t?this.type=t+this.partialCount:this.type=t}get partialCount(){return this._partialCount}set partialCount(t){Ys(t,0);let e=this._type;const n=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(this._type);if(n&&(e=n[1]),"custom"!==this._type)this.type=0===t?e:e+t.toString();else{const e=new Float32Array(t);this._partials.forEach(((t,n)=>e[n]=t)),this._partials=Array.from(e),this.type=this._type}}_getRealImaginary(t,e){let n=2048;const s=new Float32Array(n),i=new Float32Array(n);let r=1;if("custom"===t){if(r=this._partials.length+1,this._partialCount=this._partials.length,n=r,0===this._partials.length)return[s,i]}else{const e=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(t);e?(r=parseInt(e[2],10)+1,this._partialCount=parseInt(e[2],10),t=e[1],r=Math.max(r,2),n=r):this._partialCount=0,this._partials=[]}for(let o=1;o<n;++o){const n=2/(o*Math.PI);let a;switch(t){case"sine":a=o<=r?1:0,this._partials[o-1]=a;break;case"square":a=1&o?2*n:0,this._partials[o-1]=a;break;case"sawtooth":a=n*(1&o?1:-1),this._partials[o-1]=a;break;case"triangle":a=1&o?n*n*2*(o-1>>1&1?-1:1):0,this._partials[o-1]=a;break;case"custom":a=this._partials[o-1];break;default:throw new TypeError("Oscillator: invalid type: "+t)}0!==a?(s[o]=-a*Math.sin(e*o),i[o]=a*Math.cos(e*o)):(s[o]=0,i[o]=0)}return[s,i]}_inverseFFT(t,e,n){let s=0;const i=t.length;for(let r=0;r<i;r++)s+=t[r]*Math.cos(r*n)+e[r]*Math.sin(r*n);return s}getInitialValue(){const[t,e]=this._getRealImaginary(this._type,0);let n=0;const s=2*Math.PI;for(let i=0;i<32;i++)n=Math.max(this._inverseFFT(t,e,i/32*s),n);return Ti(-this._inverseFFT(t,e,this._phase)/n,-1,1)}get partials(){return this._partials.slice(0,this.partialCount)}set partials(t){this._partials=t,this._partialCount=this._partials.length,t.length&&(this.type="custom")}get phase(){return this._phase*(180/Math.PI)}set phase(t){this._phase=t*Math.PI/180,this.type=this._type}asArray(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1024;return ai(this,void 0,void 0,(function*(){return Yr(this,t)}))}dispose(){return super.dispose(),null!==this._oscillator&&this._oscillator.dispose(),this._wave=void 0,this.frequency.dispose(),this.detune.dispose(),this}}Zr._periodicWaveCache=[];class Kr extends Pr{constructor(){super(...arguments),this.name="AudioToGain",this._norm=new Lr({context:this.context,mapping:t=>(t+1)/2}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class $r extends gr{constructor(){super(Object.assign(mi($r.getDefaults(),arguments,["value"]))),this.name="Multiply",this.override=!1;const t=mi($r.getDefaults(),arguments,["value"]);this._mult=this.input=this.output=new fr({context:this.context,minValue:t.minValue,maxValue:t.maxValue}),this.factor=this._param=this._mult.gain,this.factor.setValueAtTime(t.value,0)}static getDefaults(){return Object.assign(gr.getDefaults(),{value:0})}dispose(){return super.dispose(),this._mult.dispose(),this}}class Jr extends Ur{constructor(){super(mi(Jr.getDefaults(),arguments,["frequency","type","modulationType"])),this.name="AMOscillator",this._modulationScale=new Kr({context:this.context}),this._modulationNode=new fr({context:this.context});const t=mi(Jr.getDefaults(),arguments,["frequency","type","modulationType"]);this._carrier=new Zr({context:this.context,detune:t.detune,frequency:t.frequency,onstop:()=>this.onstop(this),phase:t.phase,type:t.type}),this.frequency=this._carrier.frequency,this.detune=this._carrier.detune,this._modulator=new Zr({context:this.context,phase:t.phase,type:t.modulationType}),this.harmonicity=new $r({context:this.context,units:"positive",value:t.harmonicity}),this.frequency.chain(this.harmonicity,this._modulator.frequency),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output),Ri(this,["frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(Zr.getDefaults(),{harmonicity:1,modulationType:"square"})}_start(t){this._modulator.start(t),this._carrier.start(t)}_stop(t){this._modulator.stop(t),this._carrier.stop(t)}_restart(t){this._modulator.restart(t),this._carrier.restart(t)}get type(){return this._carrier.type}set type(t){this._carrier.type=t}get baseType(){return this._carrier.baseType}set baseType(t){this._carrier.baseType=t}get partialCount(){return this._carrier.partialCount}set partialCount(t){this._carrier.partialCount=t}get modulationType(){return this._modulator.type}set modulationType(t){this._modulator.type=t}get phase(){return this._carrier.phase}set phase(t){this._carrier.phase=t,this._modulator.phase=t}get partials(){return this._carrier.partials}set partials(t){this._carrier.partials=t}asArray(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1024;return ai(this,void 0,void 0,(function*(){return Yr(this,t)}))}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this._modulationScale.dispose(),this}}class to extends Ur{constructor(){super(mi(to.getDefaults(),arguments,["frequency","type","modulationType"])),this.name="FMOscillator",this._modulationNode=new fr({context:this.context,gain:0});const t=mi(to.getDefaults(),arguments,["frequency","type","modulationType"]);this._carrier=new Zr({context:this.context,detune:t.detune,frequency:0,onstop:()=>this.onstop(this),phase:t.phase,type:t.type}),this.detune=this._carrier.detune,this.frequency=new gr({context:this.context,units:"frequency",value:t.frequency}),this._modulator=new Zr({context:this.context,phase:t.phase,type:t.modulationType}),this.harmonicity=new $r({context:this.context,units:"positive",value:t.harmonicity}),this.modulationIndex=new $r({context:this.context,units:"positive",value:t.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output),this.detune.connect(this._modulator.detune),Ri(this,["modulationIndex","frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(Zr.getDefaults(),{harmonicity:1,modulationIndex:2,modulationType:"square"})}_start(t){this._modulator.start(t),this._carrier.start(t)}_stop(t){this._modulator.stop(t),this._carrier.stop(t)}_restart(t){return this._modulator.restart(t),this._carrier.restart(t),this}get type(){return this._carrier.type}set type(t){this._carrier.type=t}get baseType(){return this._carrier.baseType}set baseType(t){this._carrier.baseType=t}get partialCount(){return this._carrier.partialCount}set partialCount(t){this._carrier.partialCount=t}get modulationType(){return this._modulator.type}set modulationType(t){this._modulator.type=t}get phase(){return this._carrier.phase}set phase(t){this._carrier.phase=t,this._modulator.phase=t}get partials(){return this._carrier.partials}set partials(t){this._carrier.partials=t}asArray(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1024;return ai(this,void 0,void 0,(function*(){return Yr(this,t)}))}dispose(){return super.dispose(),this.frequency.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this.modulationIndex.dispose(),this}}class eo extends Ur{constructor(){super(mi(eo.getDefaults(),arguments,["frequency","width"])),this.name="PulseOscillator",this._widthGate=new fr({context:this.context,gain:0}),this._thresh=new Lr({context:this.context,mapping:t=>t<=0?-1:1});const t=mi(eo.getDefaults(),arguments,["frequency","width"]);this.width=new gr({context:this.context,units:"audioRange",value:t.width}),this._triangle=new Zr({context:this.context,detune:t.detune,frequency:t.frequency,onstop:()=>this.onstop(this),phase:t.phase,type:"triangle"}),this.frequency=this._triangle.frequency,this.detune=this._triangle.detune,this._triangle.chain(this._thresh,this.output),this.width.chain(this._widthGate,this._thresh),Ri(this,["width","frequency","detune"])}static getDefaults(){return Object.assign(Ur.getDefaults(),{detune:0,frequency:440,phase:0,type:"pulse",width:.2})}_start(t){t=this.toSeconds(t),this._triangle.start(t),this._widthGate.gain.setValueAtTime(1,t)}_stop(t){t=this.toSeconds(t),this._triangle.stop(t),this._widthGate.gain.cancelScheduledValues(t),this._widthGate.gain.setValueAtTime(0,t)}_restart(t){this._triangle.restart(t),this._widthGate.gain.cancelScheduledValues(t),this._widthGate.gain.setValueAtTime(1,t)}get phase(){return this._triangle.phase}set phase(t){this._triangle.phase=t}get type(){return"pulse"}get baseType(){return"pulse"}get partials(){return[]}get partialCount(){return 0}set carrierType(t){this._triangle.type=t}asArray(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1024;return ai(this,void 0,void 0,(function*(){return Yr(this,t)}))}dispose(){return super.dispose(),this._triangle.dispose(),this.width.dispose(),this._widthGate.dispose(),this._thresh.dispose(),this}}class no extends Ur{constructor(){super(mi(no.getDefaults(),arguments,["frequency","type","spread"])),this.name="FatOscillator",this._oscillators=[];const t=mi(no.getDefaults(),arguments,["frequency","type","spread"]);this.frequency=new gr({context:this.context,units:"frequency",value:t.frequency}),this.detune=new gr({context:this.context,units:"cents",value:t.detune}),this._spread=t.spread,this._type=t.type,this._phase=t.phase,this._partials=t.partials,this._partialCount=t.partialCount,this.count=t.count,Ri(this,["frequency","detune"])}static getDefaults(){return Object.assign(Zr.getDefaults(),{count:3,spread:20,type:"sawtooth"})}_start(t){t=this.toSeconds(t),this._forEach((e=>e.start(t)))}_stop(t){t=this.toSeconds(t),this._forEach((e=>e.stop(t)))}_restart(t){this._forEach((e=>e.restart(t)))}_forEach(t){for(let e=0;e<this._oscillators.length;e++)t(this._oscillators[e],e)}get type(){return this._type}set type(t){this._type=t,this._forEach((e=>e.type=t))}get spread(){return this._spread}set spread(t){if(this._spread=t,this._oscillators.length>1){const e=-t/2,n=t/(this._oscillators.length-1);this._forEach(((t,s)=>t.detune.value=e+n*s))}}get count(){return this._oscillators.length}set count(t){if(Ys(t,1),this._oscillators.length!==t){this._forEach((t=>t.dispose())),this._oscillators=[];for(let e=0;e<t;e++){const n=new Zr({context:this.context,volume:-6-1.1*t,type:this._type,phase:this._phase+e/t*360,partialCount:this._partialCount,onstop:0===e?()=>this.onstop(this):Pi});"custom"===this.type&&(n.partials=this._partials),this.frequency.connect(n.frequency),this.detune.connect(n.detune),n.detune.overridden=!1,n.connect(this.output),this._oscillators[e]=n}this.spread=this._spread,"started"===this.state&&this._forEach((t=>t.start()))}}get phase(){return this._phase}set phase(t){this._phase=t,this._forEach(((t,e)=>t.phase=this._phase+e/this.count*360))}get baseType(){return this._oscillators[0].baseType}set baseType(t){this._forEach((e=>e.baseType=t)),this._type=this._oscillators[0].type}get partials(){return this._oscillators[0].partials}set partials(t){this._partials=t,this._partialCount=this._partials.length,t.length&&(this._type="custom",this._forEach((e=>e.partials=t)))}get partialCount(){return this._oscillators[0].partialCount}set partialCount(t){this._partialCount=t,this._forEach((e=>e.partialCount=t)),this._type=this._oscillators[0].type}asArray(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1024;return ai(this,void 0,void 0,(function*(){return Yr(this,t)}))}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this._forEach((t=>t.dispose())),this}}class so extends Ur{constructor(){super(mi(so.getDefaults(),arguments,["frequency","modulationFrequency"])),this.name="PWMOscillator",this.sourceType="pwm",this._scale=new $r({context:this.context,value:2});const t=mi(so.getDefaults(),arguments,["frequency","modulationFrequency"]);this._pulse=new eo({context:this.context,frequency:t.modulationFrequency}),this._pulse.carrierType="sine",this.modulationFrequency=this._pulse.frequency,this._modulator=new Zr({context:this.context,detune:t.detune,frequency:t.frequency,onstop:()=>this.onstop(this),phase:t.phase}),this.frequency=this._modulator.frequency,this.detune=this._modulator.detune,this._modulator.chain(this._scale,this._pulse.width),this._pulse.connect(this.output),Ri(this,["modulationFrequency","frequency","detune"])}static getDefaults(){return Object.assign(Ur.getDefaults(),{detune:0,frequency:440,modulationFrequency:.4,phase:0,type:"pwm"})}_start(t){t=this.toSeconds(t),this._modulator.start(t),this._pulse.start(t)}_stop(t){t=this.toSeconds(t),this._modulator.stop(t),this._pulse.stop(t)}_restart(t){this._modulator.restart(t),this._pulse.restart(t)}get type(){return"pwm"}get baseType(){return"pwm"}get partials(){return[]}get partialCount(){return 0}get phase(){return this._modulator.phase}set phase(t){this._modulator.phase=t}asArray(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1024;return ai(this,void 0,void 0,(function*(){return Yr(this,t)}))}dispose(){return super.dispose(),this._pulse.dispose(),this._scale.dispose(),this._modulator.dispose(),this}}const io={am:Jr,fat:no,fm:to,oscillator:Zr,pulse:eo,pwm:so};class ro extends Ur{constructor(){super(mi(ro.getDefaults(),arguments,["frequency","type"])),this.name="OmniOscillator";const t=mi(ro.getDefaults(),arguments,["frequency","type"]);this.frequency=new gr({context:this.context,units:"frequency",value:t.frequency}),this.detune=new gr({context:this.context,units:"cents",value:t.detune}),Ri(this,["frequency","detune"]),this.set(t)}static getDefaults(){return Object.assign(Zr.getDefaults(),to.getDefaults(),Jr.getDefaults(),no.getDefaults(),eo.getDefaults(),so.getDefaults())}_start(t){this._oscillator.start(t)}_stop(t){this._oscillator.stop(t)}_restart(t){return this._oscillator.restart(t),this}get type(){let t="";return["am","fm","fat"].some((t=>this._sourceType===t))&&(t=this._sourceType),t+this._oscillator.type}set type(t){"fm"===t.substr(0,2)?(this._createNewOscillator("fm"),this._oscillator=this._oscillator,this._oscillator.type=t.substr(2)):"am"===t.substr(0,2)?(this._createNewOscillator("am"),this._oscillator=this._oscillator,this._oscillator.type=t.substr(2)):"fat"===t.substr(0,3)?(this._createNewOscillator("fat"),this._oscillator=this._oscillator,this._oscillator.type=t.substr(3)):"pwm"===t?(this._createNewOscillator("pwm"),this._oscillator=this._oscillator):"pulse"===t?this._createNewOscillator("pulse"):(this._createNewOscillator("oscillator"),this._oscillator=this._oscillator,this._oscillator.type=t)}get partials(){return this._oscillator.partials}set partials(t){this._getOscType(this._oscillator,"pulse")||this._getOscType(this._oscillator,"pwm")||(this._oscillator.partials=t)}get partialCount(){return this._oscillator.partialCount}set partialCount(t){this._getOscType(this._oscillator,"pulse")||this._getOscType(this._oscillator,"pwm")||(this._oscillator.partialCount=t)}set(t){return Reflect.has(t,"type")&&t.type&&(this.type=t.type),super.set(t),this}_createNewOscillator(t){if(t!==this._sourceType){this._sourceType=t;const e=io[t],n=this.now();if(this._oscillator){const t=this._oscillator;t.stop(n),this.context.setTimeout((()=>t.dispose()),this.blockTime)}this._oscillator=new e({context:this.context}),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.connect(this.output),this._oscillator.onstop=()=>this.onstop(this),"started"===this.state&&this._oscillator.start(n)}}get phase(){return this._oscillator.phase}set phase(t){this._oscillator.phase=t}get sourceType(){return this._sourceType}set sourceType(t){let e="sine";"pwm"!==this._oscillator.type&&"pulse"!==this._oscillator.type&&(e=this._oscillator.type),"fm"===t?this.type="fm"+e:"am"===t?this.type="am"+e:"fat"===t?this.type="fat"+e:"oscillator"===t?this.type=e:"pulse"===t?this.type="pulse":"pwm"===t&&(this.type="pwm")}_getOscType(t,e){return t instanceof io[e]}get baseType(){return this._oscillator.baseType}set baseType(t){this._getOscType(this._oscillator,"pulse")||this._getOscType(this._oscillator,"pwm")||"pulse"===t||"pwm"===t||(this._oscillator.baseType=t)}get width(){return this._getOscType(this._oscillator,"pulse")?this._oscillator.width:void 0}get count(){return this._getOscType(this._oscillator,"fat")?this._oscillator.count:void 0}set count(t){this._getOscType(this._oscillator,"fat")&&Us(t)&&(this._oscillator.count=t)}get spread(){return this._getOscType(this._oscillator,"fat")?this._oscillator.spread:void 0}set spread(t){this._getOscType(this._oscillator,"fat")&&Us(t)&&(this._oscillator.spread=t)}get modulationType(){return this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am")?this._oscillator.modulationType:void 0}set modulationType(t){(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))&&Gs(t)&&(this._oscillator.modulationType=t)}get modulationIndex(){return this._getOscType(this._oscillator,"fm")?this._oscillator.modulationIndex:void 0}get harmonicity(){return this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am")?this._oscillator.harmonicity:void 0}get modulationFrequency(){return this._getOscType(this._oscillator,"pwm")?this._oscillator.modulationFrequency:void 0}asArray(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1024;return ai(this,void 0,void 0,(function*(){return Yr(this,t)}))}dispose(){return super.dispose(),this.detune.dispose(),this.frequency.dispose(),this._oscillator.dispose(),this}}class oo extends gr{constructor(){super(Object.assign(mi(oo.getDefaults(),arguments,["value"]))),this.override=!1,this.name="Add",this._sum=new fr({context:this.context}),this.input=this._sum,this.output=this._sum,this.addend=this._param,ur(this._constantSource,this._sum)}static getDefaults(){return Object.assign(gr.getDefaults(),{value:0})}dispose(){return super.dispose(),this._sum.dispose(),this}}class ao extends Pr{constructor(){super(Object.assign(mi(ao.getDefaults(),arguments,["min","max"]))),this.name="Scale";const t=mi(ao.getDefaults(),arguments,["min","max"]);this._mult=this.input=new $r({context:this.context,value:t.max-t.min}),this._add=this.output=new oo({context:this.context,value:t.min}),this._min=t.min,this._max=t.max,this.input.connect(this.output)}static getDefaults(){return Object.assign(Pr.getDefaults(),{max:1,min:0})}get min(){return this._min}set min(t){this._min=t,this._setRange()}get max(){return this._max}set max(t){this._max=t,this._setRange()}_setRange(){this._add.value=this._min,this._mult.value=this._max-this._min}dispose(){return super.dispose(),this._add.dispose(),this._mult.dispose(),this}}class lo extends Pr{constructor(){super(Object.assign(mi(lo.getDefaults(),arguments))),this.name="Zero",this._gain=new fr({context:this.context}),this.output=this._gain,this.input=void 0,cr(this.context.getConstant(0),this._gain)}dispose(){return super.dispose(),hr(this.context.getConstant(0),this._gain),this}}class uo extends lr{constructor(){super(mi(uo.getDefaults(),arguments,["frequency","min","max"])),this.name="LFO",this._stoppedValue=0,this._units="number",this.convert=!0,this._fromType=ar.prototype._fromType,this._toType=ar.prototype._toType,this._is=ar.prototype._is,this._clampValue=ar.prototype._clampValue;const t=mi(uo.getDefaults(),arguments,["frequency","min","max"]);this._oscillator=new Zr(t),this.frequency=this._oscillator.frequency,this._amplitudeGain=new fr({context:this.context,gain:t.amplitude,units:"normalRange"}),this.amplitude=this._amplitudeGain.gain,this._stoppedSignal=new gr({context:this.context,units:"audioRange",value:0}),this._zeros=new lo({context:this.context}),this._a2g=new Kr({context:this.context}),this._scaler=this.output=new ao({context:this.context,max:t.max,min:t.min}),this.units=t.units,this.min=t.min,this.max=t.max,this._oscillator.chain(this._amplitudeGain,this._a2g,this._scaler),this._zeros.connect(this._a2g),this._stoppedSignal.connect(this._a2g),Ri(this,["amplitude","frequency"]),this.phase=t.phase}static getDefaults(){return Object.assign(Zr.getDefaults(),{amplitude:1,frequency:"4n",max:1,min:0,type:"sine",units:"number"})}start(t){return t=this.toSeconds(t),this._stoppedSignal.setValueAtTime(0,t),this._oscillator.start(t),this}stop(t){return t=this.toSeconds(t),this._stoppedSignal.setValueAtTime(this._stoppedValue,t),this._oscillator.stop(t),this}sync(){return this._oscillator.sync(),this._oscillator.syncFrequency(),this}unsync(){return this._oscillator.unsync(),this._oscillator.unsyncFrequency(),this}_setStoppedValue(){this._stoppedValue=this._oscillator.getInitialValue(),this._stoppedSignal.value=this._stoppedValue}get min(){return this._toType(this._scaler.min)}set min(t){t=this._fromType(t),this._scaler.min=t}get max(){return this._toType(this._scaler.max)}set max(t){t=this._fromType(t),this._scaler.max=t}get type(){return this._oscillator.type}set type(t){this._oscillator.type=t,this._setStoppedValue()}get partials(){return this._oscillator.partials}set partials(t){this._oscillator.partials=t,this._setStoppedValue()}get phase(){return this._oscillator.phase}set phase(t){this._oscillator.phase=t,this._setStoppedValue()}get units(){return this._units}set units(t){const e=this.min,n=this.max;this._units=t,this.min=e,this.max=n}get state(){return this._oscillator.state}connect(t,e,n){return(t instanceof ar||t instanceof gr)&&(this.convert=t.convert,this.units=t.units),_r(this,t,e,n),this}dispose(){return super.dispose(),this._oscillator.dispose(),this._stoppedSignal.dispose(),this._zeros.dispose(),this._scaler.dispose(),this._a2g.dispose(),this._amplitudeGain.dispose(),this.amplitude.dispose(),this}}function co(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0;const n=new WeakMap;return function(s,i){Reflect.defineProperty(s,i,{configurable:!0,enumerable:!0,get:function(){return n.get(this)},set:function(s){Ys(s,t,e),n.set(this,s)}})}}function ho(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0;const n=new WeakMap;return function(s,i){Reflect.defineProperty(s,i,{configurable:!0,enumerable:!0,get:function(){return n.get(this)},set:function(s){Ys(this.toSeconds(s),t,e),n.set(this,s)}})}}class fo extends Ur{constructor(){super(mi(fo.getDefaults(),arguments,["url","onload"])),this.name="Player",this._activeSources=new Set;const t=mi(fo.getDefaults(),arguments,["url","onload"]);this._buffer=new Li({onload:this._onload.bind(this,t.onload),onerror:t.onerror,reverse:t.reverse,url:t.url}),this.autostart=t.autostart,this._loop=t.loop,this._loopStart=t.loopStart,this._loopEnd=t.loopEnd,this._playbackRate=t.playbackRate,this.fadeIn=t.fadeIn,this.fadeOut=t.fadeOut}static getDefaults(){return Object.assign(Ur.getDefaults(),{autostart:!1,fadeIn:0,fadeOut:0,loop:!1,loopEnd:0,loopStart:0,onload:Pi,onerror:Pi,playbackRate:1,reverse:!1})}load(t){return ai(this,void 0,void 0,(function*(){return yield this._buffer.load(t),this._onload(),this}))}_onload(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pi)(),this.autostart&&this.start()}_onSourceEnd(t){this.onstop(this),this._activeSources.delete(t),0!==this._activeSources.size||this._synced||"started"!==this._state.getValueAtTime(this.now())||(this._state.cancel(this.now()),this._state.setStateAtTime("stopped",this.now()))}start(t,e,n){return super.start(t,e,n),this}_start(t,e,n){e=this._loop?gi(e,this._loopStart):gi(e,0);const s=this.toSeconds(e),i=n;n=gi(n,Math.max(this._buffer.duration-s,0));let r=this.toSeconds(n);r/=this._playbackRate,t=this.toSeconds(t);const o=new zr({url:this._buffer,context:this.context,fadeIn:this.fadeIn,fadeOut:this.fadeOut,loop:this._loop,loopEnd:this._loopEnd,loopStart:this._loopStart,onended:this._onSourceEnd.bind(this),playbackRate:this._playbackRate}).connect(this.output);this._loop||this._synced||(this._state.cancel(t+r),this._state.setStateAtTime("stopped",t+r,{implicitEnd:!0})),this._activeSources.add(o),this._loop&&qs(i)?o.start(t,s):o.start(t,s,r-this.toSeconds(this.fadeOut))}_stop(t){const e=this.toSeconds(t);this._activeSources.forEach((t=>t.stop(e)))}restart(t,e,n){return super.restart(t,e,n),this}_restart(t,e,n){var s;null===(s=[...this._activeSources].pop())||void 0===s||s.stop(t),this._start(t,e,n)}seek(t,e){const n=this.toSeconds(e);if("started"===this._state.getValueAtTime(n)){const e=this.toSeconds(t);this._stop(n),this._start(n,e)}return this}setLoopPoints(t,e){return this.loopStart=t,this.loopEnd=e,this}get loopStart(){return this._loopStart}set loopStart(t){this._loopStart=t,this.buffer.loaded&&Ys(this.toSeconds(t),0,this.buffer.duration),this._activeSources.forEach((e=>{e.loopStart=t}))}get loopEnd(){return this._loopEnd}set loopEnd(t){this._loopEnd=t,this.buffer.loaded&&Ys(this.toSeconds(t),0,this.buffer.duration),this._activeSources.forEach((e=>{e.loopEnd=t}))}get buffer(){return this._buffer}set buffer(t){this._buffer.set(t)}get loop(){return this._loop}set loop(t){if(this._loop!==t&&(this._loop=t,this._activeSources.forEach((e=>{e.loop=t})),t)){const t=this._state.getNextState("stopped",this.now());t&&this._state.cancel(t.time)}}get playbackRate(){return this._playbackRate}set playbackRate(t){this._playbackRate=t;const e=this.now(),n=this._state.getNextState("stopped",e);n&&n.implicitEnd&&(this._state.cancel(n.time),this._activeSources.forEach((t=>t.cancelStop()))),this._activeSources.forEach((n=>{n.playbackRate.setValueAtTime(t,e)}))}get reverse(){return this._buffer.reverse}set reverse(t){this._buffer.reverse=t}get loaded(){return this._buffer.loaded}dispose(){return super.dispose(),this._activeSources.forEach((t=>t.dispose())),this._activeSources.clear(),this._buffer.dispose(),this}}oi([ho(0)],fo.prototype,"fadeIn",void 0),oi([ho(0)],fo.prototype,"fadeOut",void 0);class po extends lr{constructor(){super(mi(po.getDefaults(),arguments,["urls","onload"],"urls")),this.name="Players",this.input=void 0,this._players=new Map;const t=mi(po.getDefaults(),arguments,["urls","onload"],"urls");this._volume=this.output=new Dr({context:this.context,volume:t.volume}),this.volume=this._volume.volume,Ri(this,"volume"),this._buffers=new Tr({urls:t.urls,onload:t.onload,baseUrl:t.baseUrl,onerror:t.onerror}),this.mute=t.mute,this._fadeIn=t.fadeIn,this._fadeOut=t.fadeOut}static getDefaults(){return Object.assign(Ur.getDefaults(),{baseUrl:"",fadeIn:0,fadeOut:0,mute:!1,onload:Pi,onerror:Pi,urls:{},volume:0})}get mute(){return this._volume.mute}set mute(t){this._volume.mute=t}get fadeIn(){return this._fadeIn}set fadeIn(t){this._fadeIn=t,this._players.forEach((e=>{e.fadeIn=t}))}get fadeOut(){return this._fadeOut}set fadeOut(t){this._fadeOut=t,this._players.forEach((e=>{e.fadeOut=t}))}get state(){return Array.from(this._players).some((t=>{let[e,n]=t;return"started"===n.state}))?"started":"stopped"}has(t){return this._buffers.has(t)}player(t){if(Qs(this.has(t),"No Player with the name ".concat(t," exists on this object")),!this._players.has(t)){const e=new fo({context:this.context,fadeIn:this._fadeIn,fadeOut:this._fadeOut,url:this._buffers.get(t)}).connect(this.output);this._players.set(t,e)}return this._players.get(t)}get loaded(){return this._buffers.loaded}add(t,e,n){return Qs(!this._buffers.has(t),"A buffer with that name already exists on this object"),this._buffers.add(t,e,n),this}stopAll(t){return this._players.forEach((e=>e.stop(t))),this}dispose(){return super.dispose(),this._volume.dispose(),this.volume.dispose(),this._players.forEach((t=>t.dispose())),this._buffers.dispose(),this}}class mo extends Ur{constructor(){super(mi(mo.getDefaults(),arguments,["url","onload"])),this.name="GrainPlayer",this._loopStart=0,this._loopEnd=0,this._activeSources=[];const t=mi(mo.getDefaults(),arguments,["url","onload"]);this.buffer=new Li({onload:t.onload,onerror:t.onerror,reverse:t.reverse,url:t.url}),this._clock=new wr({context:this.context,callback:this._tick.bind(this),frequency:1/t.grainSize}),this._playbackRate=t.playbackRate,this._grainSize=t.grainSize,this._overlap=t.overlap,this.detune=t.detune,this.overlap=t.overlap,this.loop=t.loop,this.playbackRate=t.playbackRate,this.grainSize=t.grainSize,this.loopStart=t.loopStart,this.loopEnd=t.loopEnd,this.reverse=t.reverse,this._clock.on("stop",this._onstop.bind(this))}static getDefaults(){return Object.assign(Ur.getDefaults(),{onload:Pi,onerror:Pi,overlap:.1,grainSize:.2,playbackRate:1,detune:0,loop:!1,loopStart:0,loopEnd:0,reverse:!1})}_start(t,e,n){e=gi(e,0),e=this.toSeconds(e),t=this.toSeconds(t);const s=1/this._clock.frequency.getValueAtTime(t);this._clock.start(t,e/s),n&&this.stop(t+this.toSeconds(n))}restart(t,e,n){return super.restart(t,e,n),this}_restart(t,e,n){this._stop(t),this._start(t,e,n)}_stop(t){this._clock.stop(t)}_onstop(t){this._activeSources.forEach((e=>{e.fadeOut=0,e.stop(t)})),this.onstop(this)}_tick(t){const e=this._clock.getTicksAtTime(t),n=e*this._grainSize;if(this.log("offset",n),!this.loop&&n>this.buffer.duration)return void this.stop(t);const s=n<this._overlap?0:this._overlap,i=new zr({context:this.context,url:this.buffer,fadeIn:s,fadeOut:this._overlap,loop:this.loop,loopStart:this._loopStart,loopEnd:this._loopEnd,playbackRate:Gi(this.detune/100)}).connect(this.output);i.start(t,this._grainSize*e),i.stop(t+this._grainSize/this.playbackRate),this._activeSources.push(i),i.onended=()=>{const t=this._activeSources.indexOf(i);-1!==t&&this._activeSources.splice(t,1)}}get playbackRate(){return this._playbackRate}set playbackRate(t){Ys(t,.001),this._playbackRate=t,this.grainSize=this._grainSize}get loopStart(){return this._loopStart}set loopStart(t){this.buffer.loaded&&Ys(this.toSeconds(t),0,this.buffer.duration),this._loopStart=this.toSeconds(t)}get loopEnd(){return this._loopEnd}set loopEnd(t){this.buffer.loaded&&Ys(this.toSeconds(t),0,this.buffer.duration),this._loopEnd=this.toSeconds(t)}get reverse(){return this.buffer.reverse}set reverse(t){this.buffer.reverse=t}get grainSize(){return this._grainSize}set grainSize(t){this._grainSize=this.toSeconds(t),this._clock.frequency.setValueAtTime(this._playbackRate/this._grainSize,this.now())}get overlap(){return this._overlap}set overlap(t){const e=this.toSeconds(t);Ys(e,0),this._overlap=e}get loaded(){return this.buffer.loaded}dispose(){return super.dispose(),this.buffer.dispose(),this._clock.dispose(),this._activeSources.forEach((t=>t.dispose())),this}}class go extends Pr{constructor(){super(...arguments),this.name="Abs",this._abs=new Lr({context:this.context,mapping:t=>Math.abs(t)<.001?0:Math.abs(t)}),this.input=this._abs,this.output=this._abs}dispose(){return super.dispose(),this._abs.dispose(),this}}class _o extends Pr{constructor(){super(...arguments),this.name="GainToAudio",this._norm=new Lr({context:this.context,mapping:t=>2*Math.abs(t)-1}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class vo extends Pr{constructor(){super(...arguments),this.name="Negate",this._multiply=new $r({context:this.context,value:-1}),this.input=this._multiply,this.output=this._multiply}dispose(){return super.dispose(),this._multiply.dispose(),this}}class yo extends gr{constructor(){super(Object.assign(mi(yo.getDefaults(),arguments,["value"]))),this.override=!1,this.name="Subtract",this._sum=new fr({context:this.context}),this.input=this._sum,this.output=this._sum,this._neg=new vo({context:this.context}),this.subtrahend=this._param,ur(this._constantSource,this._neg,this._sum)}static getDefaults(){return Object.assign(gr.getDefaults(),{value:0})}dispose(){return super.dispose(),this._neg.dispose(),this._sum.dispose(),this}}class bo extends Pr{constructor(){super(Object.assign(mi(bo.getDefaults(),arguments))),this.name="GreaterThanZero",this._thresh=this.output=new Lr({context:this.context,length:127,mapping:t=>t<=0?0:1}),this._scale=this.input=new $r({context:this.context,value:1e4}),this._scale.connect(this._thresh)}dispose(){return super.dispose(),this._scale.dispose(),this._thresh.dispose(),this}}class wo extends gr{constructor(){super(Object.assign(mi(wo.getDefaults(),arguments,["value"]))),this.name="GreaterThan",this.override=!1;const t=mi(wo.getDefaults(),arguments,["value"]);this._subtract=this.input=new yo({context:this.context,value:t.value}),this._gtz=this.output=new bo({context:this.context}),this.comparator=this._param=this._subtract.subtrahend,Ri(this,"comparator"),this._subtract.connect(this._gtz)}static getDefaults(){return Object.assign(gr.getDefaults(),{value:0})}dispose(){return super.dispose(),this._gtz.dispose(),this._subtract.dispose(),this.comparator.dispose(),this}}class xo extends ao{constructor(){super(Object.assign(mi(xo.getDefaults(),arguments,["min","max","exponent"]))),this.name="ScaleExp";const t=mi(xo.getDefaults(),arguments,["min","max","exponent"]);this.input=this._exp=new Fr({context:this.context,value:t.exponent}),this._exp.connect(this._mult)}static getDefaults(){return Object.assign(ao.getDefaults(),{exponent:1})}get exponent(){return this._exp.value}set exponent(t){this._exp.value=t}dispose(){return super.dispose(),this._exp.dispose(),this}}class So extends gr{constructor(){super(mi(gr.getDefaults(),arguments,["value","units"])),this.name="SyncedSignal",this.override=!1;const t=mi(gr.getDefaults(),arguments,["value","units"]);this._lastVal=t.value,this._synced=this.context.transport.scheduleRepeat(this._onTick.bind(this),"1i"),this._syncedCallback=this._anchorValue.bind(this),this.context.transport.on("start",this._syncedCallback),this.context.transport.on("pause",this._syncedCallback),this.context.transport.on("stop",this._syncedCallback),this._constantSource.disconnect(),this._constantSource.stop(0),this._constantSource=this.output=new mr({context:this.context,offset:t.value,units:t.units}).start(0),this.setValueAtTime(t.value,0)}_onTick(t){const e=super.getValueAtTime(this.context.transport.seconds);this._lastVal!==e&&(this._lastVal=e,this._constantSource.offset.setValueAtTime(e,t))}_anchorValue(t){const e=super.getValueAtTime(this.context.transport.seconds);this._lastVal=e,this._constantSource.offset.cancelAndHoldAtTime(t),this._constantSource.offset.setValueAtTime(e,t)}getValueAtTime(t){const e=new sr(this.context,t).toSeconds();return super.getValueAtTime(e)}setValueAtTime(t,e){const n=new sr(this.context,e).toSeconds();return super.setValueAtTime(t,n),this}linearRampToValueAtTime(t,e){const n=new sr(this.context,e).toSeconds();return super.linearRampToValueAtTime(t,n),this}exponentialRampToValueAtTime(t,e){const n=new sr(this.context,e).toSeconds();return super.exponentialRampToValueAtTime(t,n),this}setTargetAtTime(t,e,n){const s=new sr(this.context,e).toSeconds();return super.setTargetAtTime(t,s,n),this}cancelScheduledValues(t){const e=new sr(this.context,t).toSeconds();return super.cancelScheduledValues(e),this}setValueCurveAtTime(t,e,n,s){const i=new sr(this.context,e).toSeconds();return n=this.toSeconds(n),super.setValueCurveAtTime(t,i,n,s),this}cancelAndHoldAtTime(t){const e=new sr(this.context,t).toSeconds();return super.cancelAndHoldAtTime(e),this}setRampPoint(t){const e=new sr(this.context,t).toSeconds();return super.setRampPoint(e),this}exponentialRampTo(t,e,n){const s=new sr(this.context,n).toSeconds();return super.exponentialRampTo(t,e,s),this}linearRampTo(t,e,n){const s=new sr(this.context,n).toSeconds();return super.linearRampTo(t,e,s),this}targetRampTo(t,e,n){const s=new sr(this.context,n).toSeconds();return super.targetRampTo(t,e,s),this}dispose(){return super.dispose(),this.context.transport.clear(this._synced),this.context.transport.off("start",this._syncedCallback),this.context.transport.off("pause",this._syncedCallback),this.context.transport.off("stop",this._syncedCallback),this._constantSource.dispose(),this}}class To extends lr{constructor(){super(mi(To.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="Envelope",this._sig=new gr({context:this.context,value:0}),this.output=this._sig,this.input=void 0;const t=mi(To.getDefaults(),arguments,["attack","decay","sustain","release"]);this.attack=t.attack,this.decay=t.decay,this.sustain=t.sustain,this.release=t.release,this.attackCurve=t.attackCurve,this.releaseCurve=t.releaseCurve,this.decayCurve=t.decayCurve}static getDefaults(){return Object.assign(lr.getDefaults(),{attack:.01,attackCurve:"linear",decay:.1,decayCurve:"exponential",release:1,releaseCurve:"exponential",sustain:.5})}get value(){return this.getValueAtTime(this.now())}_getCurve(t,e){if(Gs(t))return t;{let n;for(n in Eo)if(Eo[n][e]===t)return n;return t}}_setCurve(t,e,n){if(Gs(n)&&Reflect.has(Eo,n)){const s=Eo[n];zs(s)?"_decayCurve"!==t&&(this[t]=s[e]):this[t]=s}else{if(!Hs(n)||"_decayCurve"===t)throw new Error("Envelope: invalid curve: "+n);this[t]=n}}get attackCurve(){return this._getCurve(this._attackCurve,"In")}set attackCurve(t){this._setCurve("_attackCurve","In",t)}get releaseCurve(){return this._getCurve(this._releaseCurve,"Out")}set releaseCurve(t){this._setCurve("_releaseCurve","Out",t)}get decayCurve(){return this._getCurve(this._decayCurve,"Out")}set decayCurve(t){this._setCurve("_decayCurve","Out",t)}triggerAttack(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.log("triggerAttack",t,e),t=this.toSeconds(t);let n=this.toSeconds(this.attack);const s=this.toSeconds(this.decay),i=this.getValueAtTime(t);if(i>0&&(n=(1-i)/(1/n)),n<this.sampleTime)this._sig.cancelScheduledValues(t),this._sig.setValueAtTime(e,t);else if("linear"===this._attackCurve)this._sig.linearRampTo(e,n,t);else if("exponential"===this._attackCurve)this._sig.targetRampTo(e,n,t);else{this._sig.cancelAndHoldAtTime(t);let s=this._attackCurve;for(let t=1;t<s.length;t++)if(s[t-1]<=i&&i<=s[t]){s=this._attackCurve.slice(t),s[0]=i;break}this._sig.setValueCurveAtTime(s,t,n,e)}if(s&&this.sustain<1){const i=e*this.sustain,r=t+n;this.log("decay",r),"linear"===this._decayCurve?this._sig.linearRampToValueAtTime(i,s+r):this._sig.exponentialApproachValueAtTime(i,r,s)}return this}triggerRelease(t){this.log("triggerRelease",t),t=this.toSeconds(t);const e=this.getValueAtTime(t);if(e>0){const n=this.toSeconds(this.release);n<this.sampleTime?this._sig.setValueAtTime(0,t):"linear"===this._releaseCurve?this._sig.linearRampTo(0,n,t):"exponential"===this._releaseCurve?this._sig.targetRampTo(0,n,t):(Qs(Hs(this._releaseCurve),"releaseCurve must be either 'linear', 'exponential' or an array"),this._sig.cancelAndHoldAtTime(t),this._sig.setValueCurveAtTime(this._releaseCurve,t,n,e))}return this}getValueAtTime(t){return this._sig.getValueAtTime(t)}triggerAttackRelease(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return e=this.toSeconds(e),this.triggerAttack(e,n),this.triggerRelease(e+this.toSeconds(t)),this}cancel(t){return this._sig.cancelScheduledValues(this.toSeconds(t)),this}connect(t){return _r(this,t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,arguments.length>2&&void 0!==arguments[2]?arguments[2]:0),this}asArray(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1024;return ai(this,void 0,void 0,(function*(){const e=t/this.context.sampleRate,n=new Fi(1,e,this.context.sampleRate),s=this.toSeconds(this.attack)+this.toSeconds(this.decay),i=s+this.toSeconds(this.release),r=.1*i,o=i+r,a=new this.constructor(Object.assign(this.get(),{attack:e*this.toSeconds(this.attack)/o,decay:e*this.toSeconds(this.decay)/o,release:e*this.toSeconds(this.release)/o,context:n}));return a._sig.toDestination(),a.triggerAttackRelease(e*(s+r)/o,0),(yield n.render()).getChannelData(0)}))}dispose(){return super.dispose(),this._sig.dispose(),this}}oi([ho(0)],To.prototype,"attack",void 0),oi([ho(0)],To.prototype,"decay",void 0),oi([co(0,1)],To.prototype,"sustain",void 0),oi([ho(0)],To.prototype,"release",void 0);const Eo=(()=>{const t=128;let e,n;const s=[];for(e=0;e<t;e++)s[e]=Math.sin(e/127*(Math.PI/2));const i=[];for(e=0;e<127;e++){n=e/127;const t=Math.sin(n*(2*Math.PI)*6.4-Math.PI/2)+1;i[e]=t/10+.83*n}i[127]=1;const r=[];for(e=0;e<t;e++)r[e]=Math.ceil(e/127*5)/5;const o=[];for(e=0;e<t;e++)n=e/127,o[e]=.5*(1-Math.cos(Math.PI*n));const a=[];for(e=0;e<t;e++){n=e/127;const t=4*Math.pow(n,3)+.2,s=Math.cos(t*Math.PI*2*n);a[e]=Math.abs(s*(1-n))}function l(t){const e=new Array(t.length);for(let n=0;n<t.length;n++)e[n]=1-t[n];return e}return{bounce:{In:l(a),Out:a},cosine:{In:s,Out:(u=s,u.slice(0).reverse())},exponential:"exponential",linear:"linear",ripple:{In:i,Out:l(i)},sine:{In:o,Out:l(o)},step:{In:r,Out:l(r)}};var u})();class ko extends lr{constructor(){super(mi(ko.getDefaults(),arguments)),this._scheduledEvents=[],this._synced=!1,this._original_triggerAttack=this.triggerAttack,this._original_triggerRelease=this.triggerRelease,this._syncedRelease=t=>this._original_triggerRelease(t);const t=mi(ko.getDefaults(),arguments);this._volume=this.output=new Dr({context:this.context,volume:t.volume}),this.volume=this._volume.volume,Ri(this,"volume")}static getDefaults(){return Object.assign(lr.getDefaults(),{volume:0})}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",0),this.context.transport.on("stop",this._syncedRelease),this.context.transport.on("pause",this._syncedRelease),this.context.transport.on("loopEnd",this._syncedRelease)),this}_syncState(){let t=!1;return this._synced||(this._synced=!0,t=!0),t}_syncMethod(t,e){var n=this;const s=this["_original_"+t]=this[t];this[t]=function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];const o=i[e],a=n.context.transport.schedule((t=>{i[e]=t,s.apply(n,i)}),o);n._scheduledEvents.push(a)}}unsync(){return this._scheduledEvents.forEach((t=>this.context.transport.clear(t))),this._scheduledEvents=[],this._synced&&(this._synced=!1,this.triggerAttack=this._original_triggerAttack,this.triggerRelease=this._original_triggerRelease,this.context.transport.off("stop",this._syncedRelease),this.context.transport.off("pause",this._syncedRelease),this.context.transport.off("loopEnd",this._syncedRelease)),this}triggerAttackRelease(t,e,n,s){const i=this.toSeconds(n),r=this.toSeconds(e);return this.triggerAttack(t,i,s),this.triggerRelease(i+r),this}dispose(){return super.dispose(),this._volume.dispose(),this.unsync(),this._scheduledEvents=[],this}}class Ao extends ko{constructor(){super(mi(Ao.getDefaults(),arguments));const t=mi(Ao.getDefaults(),arguments);this.portamento=t.portamento,this.onsilence=t.onsilence}static getDefaults(){return Object.assign(ko.getDefaults(),{detune:0,onsilence:Pi,portamento:0})}triggerAttack(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this.log("triggerAttack",t,e,n);const s=this.toSeconds(e);return this._triggerEnvelopeAttack(s,n),this.setNote(t,s),this}triggerRelease(t){this.log("triggerRelease",t);const e=this.toSeconds(t);return this._triggerEnvelopeRelease(e),this}setNote(t,e){const n=this.toSeconds(e),s=t instanceof Ji?t.toFrequency():t;if(this.portamento>0&&this.getLevelAtTime(n)>.05){const t=this.toSeconds(this.portamento);this.frequency.exponentialRampTo(s,t,n)}else this.frequency.setValueAtTime(s,n);return this}}oi([ho(0)],Ao.prototype,"portamento",void 0);class Oo extends To{constructor(){super(mi(Oo.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="AmplitudeEnvelope",this._gainNode=new fr({context:this.context,gain:0}),this.output=this._gainNode,this.input=this._gainNode,this._sig.connect(this._gainNode.gain),this.output=this._gainNode,this.input=this._gainNode}dispose(){return super.dispose(),this._gainNode.dispose(),this}}class Co extends Ao{constructor(){super(mi(Co.getDefaults(),arguments)),this.name="Synth";const t=mi(Co.getDefaults(),arguments);this.oscillator=new ro(Object.assign({context:this.context,detune:t.detune,onstop:()=>this.onsilence(this)},t.oscillator)),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.envelope=new Oo(Object.assign({context:this.context},t.envelope)),this.oscillator.chain(this.envelope,this.output),Ri(this,["oscillator","frequency","detune","envelope"])}static getDefaults(){return Object.assign(Ao.getDefaults(),{envelope:Object.assign(_i(To.getDefaults(),Object.keys(lr.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.3}),oscillator:Object.assign(_i(ro.getDefaults(),[...Object.keys(Ur.getDefaults()),"frequency","detune"]),{type:"triangle"})})}_triggerEnvelopeAttack(t,e){if(this.envelope.triggerAttack(t,e),this.oscillator.start(t),0===this.envelope.sustain){const e=this.toSeconds(this.envelope.attack),n=this.toSeconds(this.envelope.decay);this.oscillator.stop(t+e+n)}}_triggerEnvelopeRelease(t){this.envelope.triggerRelease(t),this.oscillator.stop(t+this.toSeconds(this.envelope.release))}getLevelAtTime(t){return t=this.toSeconds(t),this.envelope.getValueAtTime(t)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this}}class Mo extends Ao{constructor(){super(mi(Mo.getDefaults(),arguments)),this.name="ModulationSynth";const t=mi(Mo.getDefaults(),arguments);this._carrier=new Co({context:this.context,oscillator:t.oscillator,envelope:t.envelope,onsilence:()=>this.onsilence(this),volume:-10}),this._modulator=new Co({context:this.context,oscillator:t.modulation,envelope:t.modulationEnvelope,volume:-10}),this.oscillator=this._carrier.oscillator,this.envelope=this._carrier.envelope,this.modulation=this._modulator.oscillator,this.modulationEnvelope=this._modulator.envelope,this.frequency=new gr({context:this.context,units:"frequency"}),this.detune=new gr({context:this.context,value:t.detune,units:"cents"}),this.harmonicity=new $r({context:this.context,value:t.harmonicity,minValue:0}),this._modulationNode=new fr({context:this.context,gain:0}),Ri(this,["frequency","harmonicity","oscillator","envelope","modulation","modulationEnvelope","detune"])}static getDefaults(){return Object.assign(Ao.getDefaults(),{harmonicity:3,oscillator:Object.assign(_i(ro.getDefaults(),[...Object.keys(Ur.getDefaults()),"frequency","detune"]),{type:"sine"}),envelope:Object.assign(_i(To.getDefaults(),Object.keys(lr.getDefaults())),{attack:.01,decay:.01,sustain:1,release:.5}),modulation:Object.assign(_i(ro.getDefaults(),[...Object.keys(Ur.getDefaults()),"frequency","detune"]),{type:"square"}),modulationEnvelope:Object.assign(_i(To.getDefaults(),Object.keys(lr.getDefaults())),{attack:.5,decay:0,sustain:1,release:.5})})}_triggerEnvelopeAttack(t,e){this._carrier._triggerEnvelopeAttack(t,e),this._modulator._triggerEnvelopeAttack(t,e)}_triggerEnvelopeRelease(t){return this._carrier._triggerEnvelopeRelease(t),this._modulator._triggerEnvelopeRelease(t),this}getLevelAtTime(t){return t=this.toSeconds(t),this.envelope.getValueAtTime(t)}dispose(){return super.dispose(),this._carrier.dispose(),this._modulator.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._modulationNode.dispose(),this}}class Io extends Mo{constructor(){super(mi(Io.getDefaults(),arguments)),this.name="AMSynth",this._modulationScale=new Kr({context:this.context}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.detune.fan(this._carrier.detune,this._modulator.detune),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output)}dispose(){return super.dispose(),this._modulationScale.dispose(),this}}class Do extends lr{constructor(){super(mi(Do.getDefaults(),arguments,["frequency","type"])),this.name="BiquadFilter";const t=mi(Do.getDefaults(),arguments,["frequency","type"]);this._filter=this.context.createBiquadFilter(),this.input=this.output=this._filter,this.Q=new ar({context:this.context,units:"number",value:t.Q,param:this._filter.Q}),this.frequency=new ar({context:this.context,units:"frequency",value:t.frequency,param:this._filter.frequency}),this.detune=new ar({context:this.context,units:"cents",value:t.detune,param:this._filter.detune}),this.gain=new ar({context:this.context,units:"decibels",convert:!1,value:t.gain,param:this._filter.gain}),this.type=t.type}static getDefaults(){return Object.assign(lr.getDefaults(),{Q:1,type:"lowpass",frequency:350,detune:0,gain:0})}get type(){return this._filter.type}set type(t){Qs(-1!==["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"].indexOf(t),"Invalid filter type: ".concat(t)),this._filter.type=t}getFrequencyResponse(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:128;const e=new Float32Array(t);for(let r=0;r<t;r++){const n=19980*Math.pow(r/t,2)+20;e[r]=n}const n=new Float32Array(t),s=new Float32Array(t),i=this.context.createBiquadFilter();return i.type=this.type,i.Q.value=this.Q.value,i.frequency.value=this.frequency.value,i.gain.value=this.gain.value,i.getFrequencyResponse(e,n,s),n}dispose(){return super.dispose(),this._filter.disconnect(),this.Q.dispose(),this.frequency.dispose(),this.gain.dispose(),this.detune.dispose(),this}}class Ro extends lr{constructor(){super(mi(Ro.getDefaults(),arguments,["frequency","type","rolloff"])),this.name="Filter",this.input=new fr({context:this.context}),this.output=new fr({context:this.context}),this._filters=[];const t=mi(Ro.getDefaults(),arguments,["frequency","type","rolloff"]);this._filters=[],this.Q=new gr({context:this.context,units:"positive",value:t.Q}),this.frequency=new gr({context:this.context,units:"frequency",value:t.frequency}),this.detune=new gr({context:this.context,units:"cents",value:t.detune}),this.gain=new gr({context:this.context,units:"decibels",convert:!1,value:t.gain}),this._type=t.type,this.rolloff=t.rolloff,Ri(this,["detune","frequency","gain","Q"])}static getDefaults(){return Object.assign(lr.getDefaults(),{Q:1,detune:0,frequency:350,gain:0,rolloff:-12,type:"lowpass"})}get type(){return this._type}set type(t){Qs(-1!==["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"].indexOf(t),"Invalid filter type: ".concat(t)),this._type=t,this._filters.forEach((e=>e.type=t))}get rolloff(){return this._rolloff}set rolloff(t){const e=Us(t)?t:parseInt(t,10),n=[-12,-24,-48,-96];let s=n.indexOf(e);Qs(-1!==s,"rolloff can only be ".concat(n.join(", "))),s+=1,this._rolloff=e,this.input.disconnect(),this._filters.forEach((t=>t.disconnect())),this._filters=new Array(s);for(let i=0;i<s;i++){const t=new Do({context:this.context});t.type=this._type,this.frequency.connect(t.frequency),this.detune.connect(t.detune),this.Q.connect(t.Q),this.gain.connect(t.gain),this._filters[i]=t}this._internalChannels=this._filters,ur(this.input,...this._internalChannels,this.output)}getFrequencyResponse(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:128;const e=new Do({frequency:this.frequency.value,gain:this.gain.value,Q:this.Q.value,type:this._type,detune:this.detune.value}),n=new Float32Array(t).map((()=>1));return this._filters.forEach((()=>{e.getFrequencyResponse(t).forEach(((t,e)=>n[e]*=t))})),e.dispose(),n}dispose(){return super.dispose(),this._filters.forEach((t=>{t.dispose()})),Ni(this,["detune","frequency","gain","Q"]),this.frequency.dispose(),this.Q.dispose(),this.detune.dispose(),this.gain.dispose(),this}}class No extends To{constructor(){super(mi(No.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="FrequencyEnvelope";const t=mi(No.getDefaults(),arguments,["attack","decay","sustain","release"]);this._octaves=t.octaves,this._baseFrequency=this.toFrequency(t.baseFrequency),this._exponent=this.input=new Fr({context:this.context,value:t.exponent}),this._scale=this.output=new ao({context:this.context,min:this._baseFrequency,max:this._baseFrequency*Math.pow(2,this._octaves)}),this._sig.chain(this._exponent,this._scale)}static getDefaults(){return Object.assign(To.getDefaults(),{baseFrequency:200,exponent:1,octaves:4})}get baseFrequency(){return this._baseFrequency}set baseFrequency(t){const e=this.toFrequency(t);Ys(e,0),this._baseFrequency=e,this._scale.min=this._baseFrequency,this.octaves=this._octaves}get octaves(){return this._octaves}set octaves(t){this._octaves=t,this._scale.max=this._baseFrequency*Math.pow(2,t)}get exponent(){return this._exponent.value}set exponent(t){this._exponent.value=t}dispose(){return super.dispose(),this._exponent.dispose(),this._scale.dispose(),this}}class Po extends Ao{constructor(){super(mi(Po.getDefaults(),arguments)),this.name="MonoSynth";const t=mi(Po.getDefaults(),arguments);this.oscillator=new ro(Object.assign(t.oscillator,{context:this.context,detune:t.detune,onstop:()=>this.onsilence(this)})),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.filter=new Ro(Object.assign(t.filter,{context:this.context})),this.filterEnvelope=new No(Object.assign(t.filterEnvelope,{context:this.context})),this.envelope=new Oo(Object.assign(t.envelope,{context:this.context})),this.oscillator.chain(this.filter,this.envelope,this.output),this.filterEnvelope.connect(this.filter.frequency),Ri(this,["oscillator","frequency","detune","filter","filterEnvelope","envelope"])}static getDefaults(){return Object.assign(Ao.getDefaults(),{envelope:Object.assign(_i(To.getDefaults(),Object.keys(lr.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.9}),filter:Object.assign(_i(Ro.getDefaults(),Object.keys(lr.getDefaults())),{Q:1,rolloff:-12,type:"lowpass"}),filterEnvelope:Object.assign(_i(No.getDefaults(),Object.keys(lr.getDefaults())),{attack:.6,baseFrequency:200,decay:.2,exponent:2,octaves:3,release:2,sustain:.5}),oscillator:Object.assign(_i(ro.getDefaults(),Object.keys(Ur.getDefaults())),{type:"sawtooth"})})}_triggerEnvelopeAttack(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(this.envelope.triggerAttack(t,e),this.filterEnvelope.triggerAttack(t),this.oscillator.start(t),0===this.envelope.sustain){const e=this.toSeconds(this.envelope.attack),n=this.toSeconds(this.envelope.decay);this.oscillator.stop(t+e+n)}}_triggerEnvelopeRelease(t){this.envelope.triggerRelease(t),this.filterEnvelope.triggerRelease(t),this.oscillator.stop(t+this.toSeconds(this.envelope.release))}getLevelAtTime(t){return t=this.toSeconds(t),this.envelope.getValueAtTime(t)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this.filterEnvelope.dispose(),this.filter.dispose(),this}}class Lo extends Ao{constructor(){super(mi(Lo.getDefaults(),arguments)),this.name="DuoSynth";const t=mi(Lo.getDefaults(),arguments);this.voice0=new Po(Object.assign(t.voice0,{context:this.context,onsilence:()=>this.onsilence(this)})),this.voice1=new Po(Object.assign(t.voice1,{context:this.context})),this.harmonicity=new $r({context:this.context,units:"positive",value:t.harmonicity}),this._vibrato=new uo({frequency:t.vibratoRate,context:this.context,min:-50,max:50}),this._vibrato.start(),this.vibratoRate=this._vibrato.frequency,this._vibratoGain=new fr({context:this.context,units:"normalRange",gain:t.vibratoAmount}),this.vibratoAmount=this._vibratoGain.gain,this.frequency=new gr({context:this.context,units:"frequency",value:440}),this.detune=new gr({context:this.context,units:"cents",value:t.detune}),this.frequency.connect(this.voice0.frequency),this.frequency.chain(this.harmonicity,this.voice1.frequency),this._vibrato.connect(this._vibratoGain),this._vibratoGain.fan(this.voice0.detune,this.voice1.detune),this.detune.fan(this.voice0.detune,this.voice1.detune),this.voice0.connect(this.output),this.voice1.connect(this.output),Ri(this,["voice0","voice1","frequency","vibratoAmount","vibratoRate"])}getLevelAtTime(t){return t=this.toSeconds(t),this.voice0.envelope.getValueAtTime(t)+this.voice1.envelope.getValueAtTime(t)}static getDefaults(){return pi(Ao.getDefaults(),{vibratoAmount:.5,vibratoRate:5,harmonicity:1.5,voice0:pi(_i(Po.getDefaults(),Object.keys(Ao.getDefaults())),{filterEnvelope:{attack:.01,decay:0,sustain:1,release:.5},envelope:{attack:.01,decay:0,sustain:1,release:.5}}),voice1:pi(_i(Po.getDefaults(),Object.keys(Ao.getDefaults())),{filterEnvelope:{attack:.01,decay:0,sustain:1,release:.5},envelope:{attack:.01,decay:0,sustain:1,release:.5}})})}_triggerEnvelopeAttack(t,e){this.voice0._triggerEnvelopeAttack(t,e),this.voice1._triggerEnvelopeAttack(t,e)}_triggerEnvelopeRelease(t){return this.voice0._triggerEnvelopeRelease(t),this.voice1._triggerEnvelopeRelease(t),this}dispose(){return super.dispose(),this.voice0.dispose(),this.voice1.dispose(),this.frequency.dispose(),this.detune.dispose(),this._vibrato.dispose(),this.vibratoRate.dispose(),this._vibratoGain.dispose(),this.harmonicity.dispose(),this}}class Fo extends Mo{constructor(){super(mi(Fo.getDefaults(),arguments)),this.name="FMSynth";const t=mi(Fo.getDefaults(),arguments);this.modulationIndex=new $r({context:this.context,value:t.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this.detune.fan(this._carrier.detune,this._modulator.detune),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output)}static getDefaults(){return Object.assign(Mo.getDefaults(),{modulationIndex:10})}dispose(){return super.dispose(),this.modulationIndex.dispose(),this}}const qo=[1,1.483,1.932,2.546,2.63,3.897];class Vo extends Ao{constructor(){super(mi(Vo.getDefaults(),arguments)),this.name="MetalSynth",this._oscillators=[],this._freqMultipliers=[];const t=mi(Vo.getDefaults(),arguments);this.detune=new gr({context:this.context,units:"cents",value:t.detune}),this.frequency=new gr({context:this.context,units:"frequency"}),this._amplitude=new fr({context:this.context,gain:0}).connect(this.output),this._highpass=new Ro({Q:0,context:this.context,type:"highpass"}).connect(this._amplitude);for(let e=0;e<qo.length;e++){const n=new to({context:this.context,harmonicity:t.harmonicity,modulationIndex:t.modulationIndex,modulationType:"square",onstop:0===e?()=>this.onsilence(this):Pi,type:"square"});n.connect(this._highpass),this._oscillators[e]=n;const s=new $r({context:this.context,value:qo[e]});this._freqMultipliers[e]=s,this.frequency.chain(s,n.frequency),this.detune.connect(n.detune)}this._filterFreqScaler=new ao({context:this.context,max:7e3,min:this.toFrequency(t.resonance)}),this.envelope=new To({attack:t.envelope.attack,attackCurve:"linear",context:this.context,decay:t.envelope.decay,release:t.envelope.release,sustain:0}),this.envelope.chain(this._filterFreqScaler,this._highpass.frequency),this.envelope.connect(this._amplitude.gain),this._octaves=t.octaves,this.octaves=t.octaves}static getDefaults(){return pi(Ao.getDefaults(),{envelope:Object.assign(_i(To.getDefaults(),Object.keys(lr.getDefaults())),{attack:.001,decay:1.4,release:.2}),harmonicity:5.1,modulationIndex:32,octaves:1.5,resonance:4e3})}_triggerEnvelopeAttack(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this.envelope.triggerAttack(t,e),this._oscillators.forEach((e=>e.start(t))),0===this.envelope.sustain&&this._oscillators.forEach((e=>{e.stop(t+this.toSeconds(this.envelope.attack)+this.toSeconds(this.envelope.decay))})),this}_triggerEnvelopeRelease(t){return this.envelope.triggerRelease(t),this._oscillators.forEach((e=>e.stop(t+this.toSeconds(this.envelope.release)))),this}getLevelAtTime(t){return t=this.toSeconds(t),this.envelope.getValueAtTime(t)}get modulationIndex(){return this._oscillators[0].modulationIndex.value}set modulationIndex(t){this._oscillators.forEach((e=>e.modulationIndex.value=t))}get harmonicity(){return this._oscillators[0].harmonicity.value}set harmonicity(t){this._oscillators.forEach((e=>e.harmonicity.value=t))}get resonance(){return this._filterFreqScaler.min}set resonance(t){this._filterFreqScaler.min=this.toFrequency(t),this.octaves=this._octaves}get octaves(){return this._octaves}set octaves(t){this._octaves=t,this._filterFreqScaler.max=this._filterFreqScaler.min*Math.pow(2,t)}dispose(){return super.dispose(),this._oscillators.forEach((t=>t.dispose())),this._freqMultipliers.forEach((t=>t.dispose())),this.frequency.dispose(),this.detune.dispose(),this._filterFreqScaler.dispose(),this._amplitude.dispose(),this.envelope.dispose(),this._highpass.dispose(),this}}class jo extends Co{constructor(){super(mi(jo.getDefaults(),arguments)),this.name="MembraneSynth",this.portamento=0;const t=mi(jo.getDefaults(),arguments);this.pitchDecay=t.pitchDecay,this.octaves=t.octaves,Ri(this,["oscillator","envelope"])}static getDefaults(){return pi(Ao.getDefaults(),Co.getDefaults(),{envelope:{attack:.001,attackCurve:"exponential",decay:.4,release:1.4,sustain:.01},octaves:10,oscillator:{type:"sine"},pitchDecay:.05})}setNote(t,e){const n=this.toSeconds(e),s=this.toFrequency(t instanceof Ji?t.toFrequency():t),i=s*this.octaves;return this.oscillator.frequency.setValueAtTime(i,n),this.oscillator.frequency.exponentialRampToValueAtTime(s,n+this.toSeconds(this.pitchDecay)),this}dispose(){return super.dispose(),this}}oi([co(0)],jo.prototype,"octaves",void 0),oi([ho(0)],jo.prototype,"pitchDecay",void 0);class Uo extends ko{constructor(){super(mi(Uo.getDefaults(),arguments)),this.name="NoiseSynth";const t=mi(Uo.getDefaults(),arguments);this.noise=new Br(Object.assign({context:this.context},t.noise)),this.envelope=new Oo(Object.assign({context:this.context},t.envelope)),this.noise.chain(this.envelope,this.output)}static getDefaults(){return Object.assign(ko.getDefaults(),{envelope:Object.assign(_i(To.getDefaults(),Object.keys(lr.getDefaults())),{decay:.1,sustain:0}),noise:Object.assign(_i(Br.getDefaults(),Object.keys(Ur.getDefaults())),{type:"white"})})}triggerAttack(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return t=this.toSeconds(t),this.envelope.triggerAttack(t,e),this.noise.start(t),0===this.envelope.sustain&&this.noise.stop(t+this.toSeconds(this.envelope.attack)+this.toSeconds(this.envelope.decay)),this}triggerRelease(t){return t=this.toSeconds(t),this.envelope.triggerRelease(t),this.noise.stop(t+this.toSeconds(this.envelope.release)),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",0),this._syncMethod("triggerRelease",0)),this}triggerAttackRelease(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return e=this.toSeconds(e),t=this.toSeconds(t),this.triggerAttack(e,n),this.triggerRelease(e+t),this}dispose(){return super.dispose(),this.noise.dispose(),this.envelope.dispose(),this}}const zo=new Set;function Bo(t){zo.add(t)}function Ho(t,e){const n='registerProcessor("'.concat(t,'", ').concat(e,")");zo.add(n)}class Go extends lr{constructor(t){super(t),this.name="ToneAudioWorklet",this.workletOptions={},this.onprocessorerror=Pi;const e=URL.createObjectURL(new Blob([Array.from(zo).join("\n")],{type:"text/javascript"})),n=this._audioWorkletName();this._dummyGain=this.context.createGain(),this._dummyParam=this._dummyGain.gain,this.context.addAudioWorkletModule(e).then((()=>{this.disposed||(this._worklet=this.context.createAudioWorkletNode(n,this.workletOptions),this._worklet.onprocessorerror=this.onprocessorerror.bind(this),this.onReady(this._worklet))}))}dispose(){return super.dispose(),this._dummyGain.disconnect(),this._worklet&&(this._worklet.port.postMessage("dispose"),this._worklet.disconnect()),this}}Bo('\n\t/**\n\t * The base AudioWorkletProcessor for use in Tone.js. Works with the {@link ToneAudioWorklet}. \n\t */\n\tclass ToneAudioWorkletProcessor extends AudioWorkletProcessor {\n\n\t\tconstructor(options) {\n\t\t\t\n\t\t\tsuper(options);\n\t\t\t/**\n\t\t\t * If the processor was disposed or not. Keep alive until it\'s disposed.\n\t\t\t */\n\t\t\tthis.disposed = false;\n\t\t   \t/** \n\t\t\t * The number of samples in the processing block\n\t\t\t */\n\t\t\tthis.blockSize = 128;\n\t\t\t/**\n\t\t\t * the sample rate\n\t\t\t */\n\t\t\tthis.sampleRate = sampleRate;\n\n\t\t\tthis.port.onmessage = (event) => {\n\t\t\t\t// when it receives a dispose \n\t\t\t\tif (event.data === "dispose") {\n\t\t\t\t\tthis.disposed = true;\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t}\n'),Bo("\n\t/**\n\t * Abstract class for a single input/output processor. \n\t * has a 'generate' function which processes one sample at a time\n\t */\n\tclass SingleIOProcessor extends ToneAudioWorkletProcessor {\n\n\t\tconstructor(options) {\n\t\t\tsuper(Object.assign(options, {\n\t\t\t\tnumberOfInputs: 1,\n\t\t\t\tnumberOfOutputs: 1\n\t\t\t}));\n\t\t\t/**\n\t\t\t * Holds the name of the parameter and a single value of that\n\t\t\t * parameter at the current sample\n\t\t\t * @type { [name: string]: number }\n\t\t\t */\n\t\t\tthis.params = {}\n\t\t}\n\n\t\t/**\n\t\t * Generate an output sample from the input sample and parameters\n\t\t * @abstract\n\t\t * @param input number\n\t\t * @param channel number\n\t\t * @param parameters { [name: string]: number }\n\t\t * @returns number\n\t\t */\n\t\tgenerate(){}\n\n\t\t/**\n\t\t * Update the private params object with the \n\t\t * values of the parameters at the given index\n\t\t * @param parameters { [name: string]: Float32Array },\n\t\t * @param index number\n\t\t */\n\t\tupdateParams(parameters, index) {\n\t\t\tfor (const paramName in parameters) {\n\t\t\t\tconst param = parameters[paramName];\n\t\t\t\tif (param.length > 1) {\n\t\t\t\t\tthis.params[paramName] = parameters[paramName][index];\n\t\t\t\t} else {\n\t\t\t\t\tthis.params[paramName] = parameters[paramName][0];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Process a single frame of the audio\n\t\t * @param inputs Float32Array[][]\n\t\t * @param outputs Float32Array[][]\n\t\t */\n\t\tprocess(inputs, outputs, parameters) {\n\t\t\tconst input = inputs[0];\n\t\t\tconst output = outputs[0];\n\t\t\t// get the parameter values\n\t\t\tconst channelCount = Math.max(input && input.length || 0, output.length);\n\t\t\tfor (let sample = 0; sample < this.blockSize; sample++) {\n\t\t\t\tthis.updateParams(parameters, sample);\n\t\t\t\tfor (let channel = 0; channel < channelCount; channel++) {\n\t\t\t\t\tconst inputSample = input && input.length ? input[channel][sample] : 0;\n\t\t\t\t\toutput[channel][sample] = this.generate(inputSample, channel, this.params);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn !this.disposed;\n\t\t}\n\t};\n"),Bo("\n\t/**\n\t * A multichannel buffer for use within an AudioWorkletProcessor as a delay line\n\t */\n\tclass DelayLine {\n\t\t\n\t\tconstructor(size, channels) {\n\t\t\tthis.buffer = [];\n\t\t\tthis.writeHead = []\n\t\t\tthis.size = size;\n\n\t\t\t// create the empty channels\n\t\t\tfor (let i = 0; i < channels; i++) {\n\t\t\t\tthis.buffer[i] = new Float32Array(this.size);\n\t\t\t\tthis.writeHead[i] = 0;\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Push a value onto the end\n\t\t * @param channel number\n\t\t * @param value number\n\t\t */\n\t\tpush(channel, value) {\n\t\t\tthis.writeHead[channel] += 1;\n\t\t\tif (this.writeHead[channel] > this.size) {\n\t\t\t\tthis.writeHead[channel] = 0;\n\t\t\t}\n\t\t\tthis.buffer[channel][this.writeHead[channel]] = value;\n\t\t}\n\n\t\t/**\n\t\t * Get the recorded value of the channel given the delay\n\t\t * @param channel number\n\t\t * @param delay number delay samples\n\t\t */\n\t\tget(channel, delay) {\n\t\t\tlet readHead = this.writeHead[channel] - Math.floor(delay);\n\t\t\tif (readHead < 0) {\n\t\t\t\treadHead += this.size;\n\t\t\t}\n\t\t\treturn this.buffer[channel][readHead];\n\t\t}\n\t}\n");const Wo="feedback-comb-filter";Ho(Wo,'\n\tclass FeedbackCombFilterWorklet extends SingleIOProcessor {\n\n\t\tconstructor(options) {\n\t\t\tsuper(options);\n\t\t\tthis.delayLine = new DelayLine(this.sampleRate, options.channelCount || 2);\n\t\t}\n\n\t\tstatic get parameterDescriptors() {\n\t\t\treturn [{\n\t\t\t\tname: "delayTime",\n\t\t\t\tdefaultValue: 0.1,\n\t\t\t\tminValue: 0,\n\t\t\t\tmaxValue: 1,\n\t\t\t\tautomationRate: "k-rate"\n\t\t\t}, {\n\t\t\t\tname: "feedback",\n\t\t\t\tdefaultValue: 0.5,\n\t\t\t\tminValue: 0,\n\t\t\t\tmaxValue: 0.9999,\n\t\t\t\tautomationRate: "k-rate"\n\t\t\t}];\n\t\t}\n\n\t\tgenerate(input, channel, parameters) {\n\t\t\tconst delayedSample = this.delayLine.get(channel, parameters.delayTime * this.sampleRate);\n\t\t\tthis.delayLine.push(channel, input + delayedSample * parameters.feedback);\n\t\t\treturn delayedSample;\n\t\t}\n\t}\n');class Qo extends Go{constructor(){super(mi(Qo.getDefaults(),arguments,["delayTime","resonance"])),this.name="FeedbackCombFilter";const t=mi(Qo.getDefaults(),arguments,["delayTime","resonance"]);this.input=new fr({context:this.context}),this.output=new fr({context:this.context}),this.delayTime=new ar({context:this.context,value:t.delayTime,units:"time",minValue:0,maxValue:1,param:this._dummyParam,swappable:!0}),this.resonance=new ar({context:this.context,value:t.resonance,units:"normalRange",param:this._dummyParam,swappable:!0}),Ri(this,["resonance","delayTime"])}_audioWorkletName(){return Wo}static getDefaults(){return Object.assign(lr.getDefaults(),{delayTime:.1,resonance:.5})}onReady(t){ur(this.input,t,this.output);const e=t.parameters.get("delayTime");this.delayTime.setParam(e);const n=t.parameters.get("feedback");this.resonance.setParam(n)}dispose(){return super.dispose(),this.input.dispose(),this.output.dispose(),this.delayTime.dispose(),this.resonance.dispose(),this}}class Yo extends lr{constructor(){super(mi(Yo.getDefaults(),arguments,["frequency","type"])),this.name="OnePoleFilter";const t=mi(Yo.getDefaults(),arguments,["frequency","type"]);this._frequency=t.frequency,this._type=t.type,this.input=new fr({context:this.context}),this.output=new fr({context:this.context}),this._createFilter()}static getDefaults(){return Object.assign(lr.getDefaults(),{frequency:880,type:"lowpass"})}_createFilter(){const t=this._filter,e=this.toFrequency(this._frequency),n=1/(2*Math.PI*e);if("lowpass"===this._type){const t=1/(n*this.context.sampleRate),e=t-1;this._filter=this.context.createIIRFilter([t,0],[1,e])}else{const t=1/(n*this.context.sampleRate)-1;this._filter=this.context.createIIRFilter([1,-1],[1,t])}this.input.chain(this._filter,this.output),t&&this.context.setTimeout((()=>{this.disposed||(this.input.disconnect(t),t.disconnect())}),this.blockTime)}get frequency(){return this._frequency}set frequency(t){this._frequency=t,this._createFilter()}get type(){return this._type}set type(t){this._type=t,this._createFilter()}getFrequencyResponse(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:128;const e=new Float32Array(t);for(let i=0;i<t;i++){const n=19980*Math.pow(i/t,2)+20;e[i]=n}const n=new Float32Array(t),s=new Float32Array(t);return this._filter.getFrequencyResponse(e,n,s),n}dispose(){return super.dispose(),this.input.dispose(),this.output.dispose(),this._filter.disconnect(),this}}class Xo extends lr{constructor(){super(mi(Xo.getDefaults(),arguments,["delayTime","resonance","dampening"])),this.name="LowpassCombFilter";const t=mi(Xo.getDefaults(),arguments,["delayTime","resonance","dampening"]);this._combFilter=this.output=new Qo({context:this.context,delayTime:t.delayTime,resonance:t.resonance}),this.delayTime=this._combFilter.delayTime,this.resonance=this._combFilter.resonance,this._lowpass=this.input=new Yo({context:this.context,frequency:t.dampening,type:"lowpass"}),this._lowpass.connect(this._combFilter)}static getDefaults(){return Object.assign(lr.getDefaults(),{dampening:3e3,delayTime:.1,resonance:.5})}get dampening(){return this._lowpass.frequency}set dampening(t){this._lowpass.frequency=t}dispose(){return super.dispose(),this._combFilter.dispose(),this._lowpass.dispose(),this}}class Zo extends ko{constructor(){super(mi(Zo.getDefaults(),arguments)),this.name="PluckSynth";const t=mi(Zo.getDefaults(),arguments);this._noise=new Br({context:this.context,type:"pink"}),this.attackNoise=t.attackNoise,this._lfcf=new Xo({context:this.context,dampening:t.dampening,resonance:t.resonance}),this.resonance=t.resonance,this.release=t.release,this._noise.connect(this._lfcf),this._lfcf.connect(this.output)}static getDefaults(){return pi(ko.getDefaults(),{attackNoise:1,dampening:4e3,resonance:.7,release:1})}get dampening(){return this._lfcf.dampening}set dampening(t){this._lfcf.dampening=t}triggerAttack(t,e){const n=this.toFrequency(t);e=this.toSeconds(e);const s=1/n;return this._lfcf.delayTime.setValueAtTime(s,e),this._noise.start(e),this._noise.stop(e+s*this.attackNoise),this._lfcf.resonance.cancelScheduledValues(e),this._lfcf.resonance.setValueAtTime(this.resonance,e),this}triggerRelease(t){return this._lfcf.resonance.linearRampTo(0,this.release,t),this}dispose(){return super.dispose(),this._noise.dispose(),this._lfcf.dispose(),this}}class Ko extends ko{constructor(){super(mi(Ko.getDefaults(),arguments,["voice","options"])),this.name="PolySynth",this._availableVoices=[],this._activeVoices=[],this._voices=[],this._gcTimeout=-1,this._averageActiveVoices=0,this._syncedRelease=t=>this.releaseAll(t);const t=mi(Ko.getDefaults(),arguments,["voice","options"]);Qs(!Us(t.voice),"DEPRECATED: The polyphony count is no longer the first argument.");const e=t.voice.getDefaults();this.options=Object.assign(e,t.options),this.voice=t.voice,this.maxPolyphony=t.maxPolyphony,this._dummyVoice=this._getNextAvailableVoice();const n=this._voices.indexOf(this._dummyVoice);this._voices.splice(n,1),this._gcTimeout=this.context.setInterval(this._collectGarbage.bind(this),1)}static getDefaults(){return Object.assign(ko.getDefaults(),{maxPolyphony:32,options:{},voice:Co})}get activeVoices(){return this._activeVoices.length}_makeVoiceAvailable(t){this._availableVoices.push(t);const e=this._activeVoices.findIndex((e=>e.voice===t));this._activeVoices.splice(e,1)}_getNextAvailableVoice(){if(this._availableVoices.length)return this._availableVoices.shift();if(this._voices.length<this.maxPolyphony){const t=new this.voice(Object.assign(this.options,{context:this.context,onsilence:this._makeVoiceAvailable.bind(this)}));return Qs(t instanceof Ao,"Voice must extend Monophonic class"),t.connect(this.output),this._voices.push(t),t}si("Max polyphony exceeded. Note dropped.")}_collectGarbage(){if(this._averageActiveVoices=Math.max(.95*this._averageActiveVoices,this.activeVoices),this._availableVoices.length&&this._voices.length>Math.ceil(this._averageActiveVoices+1)){const t=this._availableVoices.shift(),e=this._voices.indexOf(t);this._voices.splice(e,1),this.context.isOffline||t.dispose()}}_triggerAttack(t,e,n){t.forEach((t=>{const s=new Er(this.context,t).toMidi(),i=this._getNextAvailableVoice();i&&(i.triggerAttack(t,e,n),this._activeVoices.push({midi:s,voice:i,released:!1}),this.log("triggerAttack",t,e))}))}_triggerRelease(t,e){t.forEach((t=>{const n=new Er(this.context,t).toMidi(),s=this._activeVoices.find((t=>{let{midi:e,released:s}=t;return e===n&&!s}));s&&(s.voice.triggerRelease(e),s.released=!0,this.log("triggerRelease",t,e))}))}_scheduleEvent(t,e,n,s){Qs(!this.disposed,"Synth was already disposed"),n<=this.now()?"attack"===t?this._triggerAttack(e,n,s):this._triggerRelease(e,n):this.context.setTimeout((()=>{this.disposed||this._scheduleEvent(t,e,n,s)}),n-this.now())}triggerAttack(t,e,n){Array.isArray(t)||(t=[t]);const s=this.toSeconds(e);return this._scheduleEvent("attack",t,s,n),this}triggerRelease(t,e){Array.isArray(t)||(t=[t]);const n=this.toSeconds(e);return this._scheduleEvent("release",t,n),this}triggerAttackRelease(t,e,n,s){const i=this.toSeconds(n);if(this.triggerAttack(t,i,s),Hs(e)){Qs(Hs(t),"If the duration is an array, the notes must also be an array");for(let n=0;n<t.length;n++){const s=e[Math.min(n,e.length-1)],r=this.toSeconds(s);Qs(r>0,"The duration must be greater than 0"),this.triggerRelease(t[n],i+r)}}else{const n=this.toSeconds(e);Qs(n>0,"The duration must be greater than 0"),this.triggerRelease(t,i+n)}return this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1),this.context.transport.on("stop",this._syncedRelease),this.context.transport.on("pause",this._syncedRelease),this.context.transport.on("loopEnd",this._syncedRelease)),this}set(t){const e=_i(t,["onsilence","context"]);return this.options=pi(this.options,e),this._voices.forEach((t=>t.set(e))),this._dummyVoice.set(e),this}get(){return this._dummyVoice.get()}releaseAll(t){const e=this.toSeconds(t);return this._activeVoices.forEach((t=>{let{voice:n}=t;n.triggerRelease(e)})),this}dispose(){return super.dispose(),this._dummyVoice.dispose(),this._voices.forEach((t=>t.dispose())),this._activeVoices=[],this._availableVoices=[],this.context.clearInterval(this._gcTimeout),this}}class $o extends ko{constructor(){super(mi($o.getDefaults(),arguments,["urls","onload","baseUrl"],"urls")),this.name="Sampler",this._activeSources=new Map;const t=mi($o.getDefaults(),arguments,["urls","onload","baseUrl"],"urls"),e={};Object.keys(t.urls).forEach((n=>{const s=parseInt(n,10);if(Qs(Ws(n)||Us(s)&&isFinite(s),"url key is neither a note or midi pitch: ".concat(n)),Ws(n)){const s=new Ji(this.context,n).toMidi();e[s]=t.urls[n]}else Us(s)&&isFinite(s)&&(e[s]=t.urls[s])})),this._buffers=new Tr({urls:e,onload:t.onload,baseUrl:t.baseUrl,onerror:t.onerror}),this.attack=t.attack,this.release=t.release,this.curve=t.curve,this._buffers.loaded&&Promise.resolve().then(t.onload)}static getDefaults(){return Object.assign(ko.getDefaults(),{attack:0,baseUrl:"",curve:"exponential",onload:Pi,onerror:Pi,release:.1,urls:{}})}_findClosest(t){let e=0;for(;e<96;){if(this._buffers.has(t+e))return-e;if(this._buffers.has(t-e))return e;e++}throw new Error("No available buffers for note: ".concat(t))}triggerAttack(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return this.log("triggerAttack",t,e,n),Array.isArray(t)||(t=[t]),t.forEach((t=>{const s=Yi(new Ji(this.context,t).toFrequency()),i=Math.round(s),r=s-i,o=this._findClosest(i),a=i-o,l=this._buffers.get(a),u=Gi(o+r),c=new zr({url:l,context:this.context,curve:this.curve,fadeIn:this.attack,fadeOut:this.release,playbackRate:u}).connect(this.output);c.start(e,0,l.duration/u,n),Hs(this._activeSources.get(i))||this._activeSources.set(i,[]),this._activeSources.get(i).push(c),c.onended=()=>{if(this._activeSources&&this._activeSources.has(i)){const t=this._activeSources.get(i),e=t.indexOf(c);-1!==e&&t.splice(e,1)}}})),this}triggerRelease(t,e){return this.log("triggerRelease",t,e),Array.isArray(t)||(t=[t]),t.forEach((t=>{const n=new Ji(this.context,t).toMidi();if(this._activeSources.has(n)&&this._activeSources.get(n).length){const t=this._activeSources.get(n);e=this.toSeconds(e),t.forEach((t=>{t.stop(e)})),this._activeSources.set(n,[])}})),this}releaseAll(t){const e=this.toSeconds(t);return this._activeSources.forEach((t=>{for(;t.length;)t.shift().stop(e)})),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1)),this}triggerAttackRelease(t,e,n){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;const i=this.toSeconds(n);return this.triggerAttack(t,i,s),Hs(e)?(Qs(Hs(t),"notes must be an array when duration is array"),t.forEach(((t,n)=>{const s=e[Math.min(n,e.length-1)];this.triggerRelease(t,i+this.toSeconds(s))}))):this.triggerRelease(t,i+this.toSeconds(e)),this}add(t,e,n){if(Qs(Ws(t)||isFinite(t),"note must be a pitch or midi: ".concat(t)),Ws(t)){const s=new Ji(this.context,t).toMidi();this._buffers.add(s,e,n)}else this._buffers.add(t,e,n);return this}get loaded(){return this._buffers.loaded}dispose(){return super.dispose(),this._buffers.dispose(),this._activeSources.forEach((t=>{t.forEach((t=>t.dispose()))})),this._activeSources.clear(),this}}oi([ho(0)],$o.prototype,"attack",void 0),oi([ho(0)],$o.prototype,"release",void 0);class Jo extends rr{constructor(){super(mi(Jo.getDefaults(),arguments,["callback","value"])),this.name="ToneEvent",this._state=new or("stopped"),this._startOffset=0;const t=mi(Jo.getDefaults(),arguments,["callback","value"]);this._loop=t.loop,this.callback=t.callback,this.value=t.value,this._loopStart=this.toTicks(t.loopStart),this._loopEnd=this.toTicks(t.loopEnd),this._playbackRate=t.playbackRate,this._probability=t.probability,this._humanize=t.humanize,this.mute=t.mute,this._playbackRate=t.playbackRate,this._state.increasing=!0,this._rescheduleEvents()}static getDefaults(){return Object.assign(rr.getDefaults(),{callback:Pi,humanize:!1,loop:!1,loopEnd:"1m",loopStart:0,mute:!1,playbackRate:1,probability:1,value:null})}_rescheduleEvents(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;this._state.forEachFrom(t,(t=>{let e;if("started"===t.state){-1!==t.id&&this.context.transport.clear(t.id);const n=t.time+Math.round(this.startOffset/this._playbackRate);if(!0===this._loop||Us(this._loop)&&this._loop>1){e=1/0,Us(this._loop)&&(e=this._loop*this._getLoopDuration());const s=this._state.getAfter(n);null!==s&&(e=Math.min(e,s.time-n)),e!==1/0&&(e=new Ar(this.context,e));const i=new Ar(this.context,this._getLoopDuration());t.id=this.context.transport.scheduleRepeat(this._tick.bind(this),i,new Ar(this.context,n),e)}else t.id=this.context.transport.schedule(this._tick.bind(this),new Ar(this.context,n))}}))}get state(){return this._state.getValueAtTime(this.context.transport.ticks)}get startOffset(){return this._startOffset}set startOffset(t){this._startOffset=t}get probability(){return this._probability}set probability(t){this._probability=t}get humanize(){return this._humanize}set humanize(t){this._humanize=t}start(t){const e=this.toTicks(t);return"stopped"===this._state.getValueAtTime(e)&&(this._state.add({id:-1,state:"started",time:e}),this._rescheduleEvents(e)),this}stop(t){this.cancel(t);const e=this.toTicks(t);if("started"===this._state.getValueAtTime(e)){this._state.setStateAtTime("stopped",e,{id:-1});const t=this._state.getBefore(e);let n=e;null!==t&&(n=t.time),this._rescheduleEvents(n)}return this}cancel(t){t=gi(t,-1/0);const e=this.toTicks(t);return this._state.forEachFrom(e,(t=>{this.context.transport.clear(t.id)})),this._state.cancel(e),this}_tick(t){const e=this.context.transport.getTicksAtTime(t);if(!this.mute&&"started"===this._state.getValueAtTime(e)){if(this.probability<1&&Math.random()>this.probability)return;if(this.humanize){let e=.02;Bs(this.humanize)||(e=this.toSeconds(this.humanize)),t+=(2*Math.random()-1)*e}this.callback(t,this.value)}}_getLoopDuration(){return(this._loopEnd-this._loopStart)/this._playbackRate}get loop(){return this._loop}set loop(t){this._loop=t,this._rescheduleEvents()}get playbackRate(){return this._playbackRate}set playbackRate(t){this._playbackRate=t,this._rescheduleEvents()}get loopEnd(){return new Ar(this.context,this._loopEnd).toSeconds()}set loopEnd(t){this._loopEnd=this.toTicks(t),this._loop&&this._rescheduleEvents()}get loopStart(){return new Ar(this.context,this._loopStart).toSeconds()}set loopStart(t){this._loopStart=this.toTicks(t),this._loop&&this._rescheduleEvents()}get progress(){if(this._loop){const t=this.context.transport.ticks,e=this._state.get(t);if(null!==e&&"started"===e.state){const n=this._getLoopDuration();return(t-e.time)%n/n}return 0}return 0}dispose(){return super.dispose(),this.cancel(),this._state.dispose(),this}}class ta extends rr{constructor(){super(mi(ta.getDefaults(),arguments,["callback","interval"])),this.name="Loop";const t=mi(ta.getDefaults(),arguments,["callback","interval"]);this._event=new Jo({context:this.context,callback:this._tick.bind(this),loop:!0,loopEnd:t.interval,playbackRate:t.playbackRate,probability:t.probability,humanize:t.humanize}),this.callback=t.callback,this.iterations=t.iterations}static getDefaults(){return Object.assign(rr.getDefaults(),{interval:"4n",callback:Pi,playbackRate:1,iterations:1/0,probability:1,mute:!1,humanize:!1})}start(t){return this._event.start(t),this}stop(t){return this._event.stop(t),this}cancel(t){return this._event.cancel(t),this}_tick(t){this.callback(t)}get state(){return this._event.state}get progress(){return this._event.progress}get interval(){return this._event.loopEnd}set interval(t){this._event.loopEnd=t}get playbackRate(){return this._event.playbackRate}set playbackRate(t){this._event.playbackRate=t}get humanize(){return this._event.humanize}set humanize(t){this._event.humanize=t}get probability(){return this._event.probability}set probability(t){this._event.probability=t}get mute(){return this._event.mute}set mute(t){this._event.mute=t}get iterations(){return!0===this._event.loop?1/0:this._event.loop}set iterations(t){this._event.loop=t===1/0||t}dispose(){return super.dispose(),this._event.dispose(),this}}class ea extends Jo{constructor(){super(mi(ea.getDefaults(),arguments,["callback","events"])),this.name="Part",this._state=new or("stopped"),this._events=new Set;const t=mi(ea.getDefaults(),arguments,["callback","events"]);this._state.increasing=!0,t.events.forEach((t=>{Hs(t)?this.add(t[0],t[1]):this.add(t)}))}static getDefaults(){return Object.assign(Jo.getDefaults(),{events:[]})}start(t,e){const n=this.toTicks(t);if("started"!==this._state.getValueAtTime(n)){e=gi(e,this._loop?this._loopStart:0),e=this._loop?gi(e,this._loopStart):gi(e,0);const t=this.toTicks(e);this._state.add({id:-1,offset:t,state:"started",time:n}),this._forEach((e=>{this._startNote(e,n,t)}))}return this}_startNote(t,e,n){e-=n,this._loop?t.startOffset>=this._loopStart&&t.startOffset<this._loopEnd?(t.startOffset<n&&(e+=this._getLoopDuration()),t.start(new Ar(this.context,e))):t.startOffset<this._loopStart&&t.startOffset>=n&&(t.loop=!1,t.start(new Ar(this.context,e))):t.startOffset>=n&&t.start(new Ar(this.context,e))}get startOffset(){return this._startOffset}set startOffset(t){this._startOffset=t,this._forEach((t=>{t.startOffset+=this._startOffset}))}stop(t){const e=this.toTicks(t);return this._state.cancel(e),this._state.setStateAtTime("stopped",e),this._forEach((e=>{e.stop(t)})),this}at(t,e){const n=new sr(this.context,t).toTicks(),s=new Ar(this.context,1).toSeconds(),i=this._events.values();let r=i.next();for(;!r.done;){const t=r.value;if(Math.abs(n-t.startOffset)<s)return Vs(e)&&(t.value=e),t;r=i.next()}return Vs(e)?(this.add(t,e),this.at(t)):null}add(t,e){t instanceof Object&&Reflect.has(t,"time")&&(t=(e=t).time);const n=this.toTicks(t);let s;return e instanceof Jo?(s=e,s.callback=this._tick.bind(this)):s=new Jo({callback:this._tick.bind(this),context:this.context,value:e}),s.startOffset=n,s.set({humanize:this.humanize,loop:this.loop,loopEnd:this.loopEnd,loopStart:this.loopStart,playbackRate:this.playbackRate,probability:this.probability}),this._events.add(s),this._restartEvent(s),this}_restartEvent(t){this._state.forEach((e=>{"started"===e.state?this._startNote(t,e.time,e.offset):t.stop(new Ar(this.context,e.time))}))}remove(t,e){return zs(t)&&t.hasOwnProperty("time")&&(t=(e=t).time),t=this.toTicks(t),this._events.forEach((n=>{n.startOffset===t&&(qs(e)||Vs(e)&&n.value===e)&&(this._events.delete(n),n.dispose())})),this}clear(){return this._forEach((t=>t.dispose())),this._events.clear(),this}cancel(t){return this._forEach((e=>e.cancel(t))),this._state.cancel(this.toTicks(t)),this}_forEach(t){return this._events&&this._events.forEach((e=>{e instanceof ea?e._forEach(t):t(e)})),this}_setAll(t,e){this._forEach((n=>{n[t]=e}))}_tick(t,e){this.mute||this.callback(t,e)}_testLoopBoundries(t){this._loop&&(t.startOffset<this._loopStart||t.startOffset>=this._loopEnd)?t.cancel(0):"stopped"===t.state&&this._restartEvent(t)}get probability(){return this._probability}set probability(t){this._probability=t,this._setAll("probability",t)}get humanize(){return this._humanize}set humanize(t){this._humanize=t,this._setAll("humanize",t)}get loop(){return this._loop}set loop(t){this._loop=t,this._forEach((e=>{e.loopStart=this.loopStart,e.loopEnd=this.loopEnd,e.loop=t,this._testLoopBoundries(e)}))}get loopEnd(){return new Ar(this.context,this._loopEnd).toSeconds()}set loopEnd(t){this._loopEnd=this.toTicks(t),this._loop&&this._forEach((e=>{e.loopEnd=t,this._testLoopBoundries(e)}))}get loopStart(){return new Ar(this.context,this._loopStart).toSeconds()}set loopStart(t){this._loopStart=this.toTicks(t),this._loop&&this._forEach((t=>{t.loopStart=this.loopStart,this._testLoopBoundries(t)}))}get playbackRate(){return this._playbackRate}set playbackRate(t){this._playbackRate=t,this._setAll("playbackRate",t)}get length(){return this._events.size}dispose(){return super.dispose(),this.clear(),this}}function*na(t){let e=0;for(;e<t;)e=Ti(e,0,t-1),yield e,e++}function*sa(t){let e=t-1;for(;e>=0;)e=Ti(e,0,t-1),yield e,e--}function*ia(t,e){for(;;)yield*e(t)}function*ra(t,e){let n=e?0:t-1;for(;;)n=Ti(n,0,t-1),yield n,e?(n++,n>=t-1&&(e=!1)):(n--,n<=0&&(e=!0))}function*oa(t){let e=0,n=0;for(;e<t;)e=Ti(e,0,t-1),yield e,n++,e+=n%2?2:-1}function*aa(t){let e=t-1,n=0;for(;e>=0;)e=Ti(e,0,t-1),yield e,n++,e+=n%2?-2:1}function*la(t){const e=[];for(let n=0;n<t;n++)e.push(n);for(;e.length>0;){const n=Ti(e.splice(Math.floor(e.length*Math.random()),1)[0],0,t-1);yield n}}function ua(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"up";return function*(){switch(Qs(t>=1,"The number of values must be at least one"),e){case"up":yield*ia(t,na);case"down":yield*ia(t,sa);case"upDown":yield*ra(t,!0);case"downUp":yield*ra(t,!1);case"alternateUp":yield*ia(t,oa);case"alternateDown":yield*ia(t,aa);case"random":yield*function*(t){for(;;){const e=Math.floor(Math.random()*t);yield e}}(t);case"randomOnce":yield*ia(t,la);case"randomWalk":yield*function*(t){let e=Math.floor(Math.random()*t);for(;;)0===e?e++:e===t-1||Math.random()<.5?e--:e++,yield e}(t)}}()}class ca extends ta{constructor(){super(mi(ca.getDefaults(),arguments,["callback","values","pattern"])),this.name="Pattern";const t=mi(ca.getDefaults(),arguments,["callback","values","pattern"]);this.callback=t.callback,this._values=t.values,this._pattern=ua(t.values.length,t.pattern),this._type=t.pattern}static getDefaults(){return Object.assign(ta.getDefaults(),{pattern:"up",values:[],callback:Pi})}_tick(t){const e=this._pattern.next();this._index=e.value,this._value=this._values[e.value],this.callback(t,this._value)}get values(){return this._values}set values(t){this._values=t,this.pattern=this._type}get value(){return this._value}get index(){return this._index}get pattern(){return this._type}set pattern(t){this._type=t,this._pattern=ua(this._values.length,this._type)}}class ha extends Jo{constructor(){super(mi(ha.getDefaults(),arguments,["callback","events","subdivision"])),this.name="Sequence",this._part=new ea({callback:this._seqCallback.bind(this),context:this.context}),this._events=[],this._eventsArray=[];const t=mi(ha.getDefaults(),arguments,["callback","events","subdivision"]);this._subdivision=this.toTicks(t.subdivision),this.events=t.events,this.loop=t.loop,this.loopStart=t.loopStart,this.loopEnd=t.loopEnd,this.playbackRate=t.playbackRate,this.probability=t.probability,this.humanize=t.humanize,this.mute=t.mute,this.playbackRate=t.playbackRate}static getDefaults(){return Object.assign(_i(Jo.getDefaults(),["value"]),{events:[],loop:!0,loopEnd:0,loopStart:0,subdivision:"8n"})}_seqCallback(t,e){null===e||this.mute||this.callback(t,e)}get events(){return this._events}set events(t){this.clear(),this._eventsArray=t,this._events=this._createSequence(this._eventsArray),this._eventsUpdated()}start(t,e){return this._part.start(t,e?this._indexTime(e):e),this}stop(t){return this._part.stop(t),this}get subdivision(){return new Ar(this.context,this._subdivision).toSeconds()}_createSequence(t){return new Proxy(t,{get:(t,e)=>t[e],set:(t,e,n)=>(Gs(e)&&isFinite(parseInt(e,10))&&Hs(n)?t[e]=this._createSequence(n):t[e]=n,this._eventsUpdated(),!0)})}_eventsUpdated(){this._part.clear(),this._rescheduleSequence(this._eventsArray,this._subdivision,this.startOffset),this.loopEnd=this.loopEnd}_rescheduleSequence(t,e,n){t.forEach(((t,s)=>{const i=s*e+n;if(Hs(t))this._rescheduleSequence(t,e/t.length,i);else{const e=new Ar(this.context,i,"i").toSeconds();this._part.add(e,t)}}))}_indexTime(t){return new Ar(this.context,t*this._subdivision+this.startOffset).toSeconds()}clear(){return this._part.clear(),this}dispose(){return super.dispose(),this._part.dispose(),this}get loop(){return this._part.loop}set loop(t){this._part.loop=t}get loopStart(){return this._loopStart}set loopStart(t){this._loopStart=t,this._part.loopStart=this._indexTime(t)}get loopEnd(){return this._loopEnd}set loopEnd(t){this._loopEnd=t,this._part.loopEnd=0===t?this._indexTime(this._eventsArray.length):this._indexTime(t)}get startOffset(){return this._part.startOffset}set startOffset(t){this._part.startOffset=t}get playbackRate(){return this._part.playbackRate}set playbackRate(t){this._part.playbackRate=t}get probability(){return this._part.probability}set probability(t){this._part.probability=t}get progress(){return this._part.progress}get humanize(){return this._part.humanize}set humanize(t){this._part.humanize=t}get length(){return this._part.length}}class da extends lr{constructor(){super(Object.assign(mi(da.getDefaults(),arguments,["fade"]))),this.name="CrossFade",this._panner=this.context.createStereoPanner(),this._split=this.context.createChannelSplitter(2),this._g2a=new _o({context:this.context}),this.a=new fr({context:this.context,gain:0}),this.b=new fr({context:this.context,gain:0}),this.output=new fr({context:this.context}),this._internalChannels=[this.a,this.b];const t=mi(da.getDefaults(),arguments,["fade"]);this.fade=new gr({context:this.context,units:"normalRange",value:t.fade}),Ri(this,"fade"),this.context.getConstant(1).connect(this._panner),this._panner.connect(this._split),this._panner.channelCount=1,this._panner.channelCountMode="explicit",cr(this._split,this.a.gain,0),cr(this._split,this.b.gain,1),this.fade.chain(this._g2a,this._panner.pan),this.a.connect(this.output),this.b.connect(this.output)}static getDefaults(){return Object.assign(lr.getDefaults(),{fade:.5})}dispose(){return super.dispose(),this.a.dispose(),this.b.dispose(),this.output.dispose(),this.fade.dispose(),this._g2a.dispose(),this._panner.disconnect(),this._split.disconnect(),this}}class fa extends lr{constructor(t){super(t),this.name="Effect",this._dryWet=new da({context:this.context}),this.wet=this._dryWet.fade,this.effectSend=new fr({context:this.context}),this.effectReturn=new fr({context:this.context}),this.input=new fr({context:this.context}),this.output=this._dryWet,this.input.fan(this._dryWet.a,this.effectSend),this.effectReturn.connect(this._dryWet.b),this.wet.setValueAtTime(t.wet,0),this._internalChannels=[this.effectReturn,this.effectSend],Ri(this,"wet")}static getDefaults(){return Object.assign(lr.getDefaults(),{wet:1})}connectEffect(t){return this._internalChannels.push(t),this.effectSend.chain(t,this.effectReturn),this}dispose(){return super.dispose(),this._dryWet.dispose(),this.effectSend.dispose(),this.effectReturn.dispose(),this.wet.dispose(),this}}class pa extends fa{constructor(t){super(t),this.name="LFOEffect",this._lfo=new uo({context:this.context,frequency:t.frequency,amplitude:t.depth}),this.depth=this._lfo.amplitude,this.frequency=this._lfo.frequency,this.type=t.type,Ri(this,["frequency","depth"])}static getDefaults(){return Object.assign(fa.getDefaults(),{frequency:1,type:"sine",depth:1})}start(t){return this._lfo.start(t),this}stop(t){return this._lfo.stop(t),this}sync(){return this._lfo.sync(),this}unsync(){return this._lfo.unsync(),this}get type(){return this._lfo.type}set type(t){this._lfo.type=t}dispose(){return super.dispose(),this._lfo.dispose(),this.frequency.dispose(),this.depth.dispose(),this}}class ma extends pa{constructor(){super(mi(ma.getDefaults(),arguments,["frequency","baseFrequency","octaves"])),this.name="AutoFilter";const t=mi(ma.getDefaults(),arguments,["frequency","baseFrequency","octaves"]);this.filter=new Ro(Object.assign(t.filter,{context:this.context})),this.connectEffect(this.filter),this._lfo.connect(this.filter.frequency),this.octaves=t.octaves,this.baseFrequency=t.baseFrequency}static getDefaults(){return Object.assign(pa.getDefaults(),{baseFrequency:200,octaves:2.6,filter:{type:"lowpass",rolloff:-12,Q:1}})}get baseFrequency(){return this._lfo.min}set baseFrequency(t){this._lfo.min=this.toFrequency(t),this.octaves=this._octaves}get octaves(){return this._octaves}set octaves(t){this._octaves=t,this._lfo.max=this._lfo.min*Math.pow(2,t)}dispose(){return super.dispose(),this.filter.dispose(),this}}class ga extends lr{constructor(){super(Object.assign(mi(ga.getDefaults(),arguments,["pan"]))),this.name="Panner",this._panner=this.context.createStereoPanner(),this.input=this._panner,this.output=this._panner;const t=mi(ga.getDefaults(),arguments,["pan"]);this.pan=new ar({context:this.context,param:this._panner.pan,value:t.pan,minValue:-1,maxValue:1}),this._panner.channelCount=t.channelCount,this._panner.channelCountMode="explicit",Ri(this,"pan")}static getDefaults(){return Object.assign(lr.getDefaults(),{pan:0,channelCount:1})}dispose(){return super.dispose(),this._panner.disconnect(),this.pan.dispose(),this}}class _a extends pa{constructor(){super(mi(_a.getDefaults(),arguments,["frequency"])),this.name="AutoPanner";const t=mi(_a.getDefaults(),arguments,["frequency"]);this._panner=new ga({context:this.context,channelCount:t.channelCount}),this.connectEffect(this._panner),this._lfo.connect(this._panner.pan),this._lfo.min=-1,this._lfo.max=1}static getDefaults(){return Object.assign(pa.getDefaults(),{channelCount:1})}dispose(){return super.dispose(),this._panner.dispose(),this}}class va extends lr{constructor(){super(mi(va.getDefaults(),arguments,["smoothing"])),this.name="Follower";const t=mi(va.getDefaults(),arguments,["smoothing"]);this._abs=this.input=new go({context:this.context}),this._lowpass=this.output=new Yo({context:this.context,frequency:1/this.toSeconds(t.smoothing),type:"lowpass"}),this._abs.connect(this._lowpass),this._smoothing=t.smoothing}static getDefaults(){return Object.assign(lr.getDefaults(),{smoothing:.05})}get smoothing(){return this._smoothing}set smoothing(t){this._smoothing=t,this._lowpass.frequency=1/this.toSeconds(this.smoothing)}dispose(){return super.dispose(),this._abs.dispose(),this._lowpass.dispose(),this}}class ya extends fa{constructor(){super(mi(ya.getDefaults(),arguments,["baseFrequency","octaves","sensitivity"])),this.name="AutoWah";const t=mi(ya.getDefaults(),arguments,["baseFrequency","octaves","sensitivity"]);this._follower=new va({context:this.context,smoothing:t.follower}),this._sweepRange=new xo({context:this.context,min:0,max:1,exponent:.5}),this._baseFrequency=this.toFrequency(t.baseFrequency),this._octaves=t.octaves,this._inputBoost=new fr({context:this.context}),this._bandpass=new Ro({context:this.context,rolloff:-48,frequency:0,Q:t.Q}),this._peaking=new Ro({context:this.context,type:"peaking"}),this._peaking.gain.value=t.gain,this.gain=this._peaking.gain,this.Q=this._bandpass.Q,this.effectSend.chain(this._inputBoost,this._follower,this._sweepRange),this._sweepRange.connect(this._bandpass.frequency),this._sweepRange.connect(this._peaking.frequency),this.effectSend.chain(this._bandpass,this._peaking,this.effectReturn),this._setSweepRange(),this.sensitivity=t.sensitivity,Ri(this,["gain","Q"])}static getDefaults(){return Object.assign(fa.getDefaults(),{baseFrequency:100,octaves:6,sensitivity:0,Q:2,gain:2,follower:.2})}get octaves(){return this._octaves}set octaves(t){this._octaves=t,this._setSweepRange()}get follower(){return this._follower.smoothing}set follower(t){this._follower.smoothing=t}get baseFrequency(){return this._baseFrequency}set baseFrequency(t){this._baseFrequency=this.toFrequency(t),this._setSweepRange()}get sensitivity(){return Hi(1/this._inputBoost.gain.value)}set sensitivity(t){this._inputBoost.gain.value=1/Bi(t)}_setSweepRange(){this._sweepRange.min=this._baseFrequency,this._sweepRange.max=Math.min(this._baseFrequency*Math.pow(2,this._octaves),this.context.sampleRate/2)}dispose(){return super.dispose(),this._follower.dispose(),this._sweepRange.dispose(),this._bandpass.dispose(),this._peaking.dispose(),this._inputBoost.dispose(),this}}const ba="bit-crusher";Ho(ba,"\n\tclass BitCrusherWorklet extends SingleIOProcessor {\n\n\t\tstatic get parameterDescriptors() {\n\t\t\treturn [{\n\t\t\t\tname: \"bits\",\n\t\t\t\tdefaultValue: 12,\n\t\t\t\tminValue: 1,\n\t\t\t\tmaxValue: 16,\n\t\t\t\tautomationRate: 'k-rate'\n\t\t\t}];\n\t\t}\n\n\t\tgenerate(input, _channel, parameters) {\n\t\t\tconst step = Math.pow(0.5, parameters.bits - 1);\n\t\t\tconst val = step * Math.floor(input / step + 0.5);\n\t\t\treturn val;\n\t\t}\n\t}\n");class wa extends fa{constructor(){super(mi(wa.getDefaults(),arguments,["bits"])),this.name="BitCrusher";const t=mi(wa.getDefaults(),arguments,["bits"]);this._bitCrusherWorklet=new xa({context:this.context,bits:t.bits}),this.connectEffect(this._bitCrusherWorklet),this.bits=this._bitCrusherWorklet.bits}static getDefaults(){return Object.assign(fa.getDefaults(),{bits:4})}dispose(){return super.dispose(),this._bitCrusherWorklet.dispose(),this}}class xa extends Go{constructor(){super(mi(xa.getDefaults(),arguments)),this.name="BitCrusherWorklet";const t=mi(xa.getDefaults(),arguments);this.input=new fr({context:this.context}),this.output=new fr({context:this.context}),this.bits=new ar({context:this.context,value:t.bits,units:"positive",minValue:1,maxValue:16,param:this._dummyParam,swappable:!0})}static getDefaults(){return Object.assign(Go.getDefaults(),{bits:12})}_audioWorkletName(){return ba}onReady(t){ur(this.input,t,this.output);const e=t.parameters.get("bits");this.bits.setParam(e)}dispose(){return super.dispose(),this.input.dispose(),this.output.dispose(),this.bits.dispose(),this}}class Sa extends fa{constructor(){super(mi(Sa.getDefaults(),arguments,["order"])),this.name="Chebyshev";const t=mi(Sa.getDefaults(),arguments,["order"]);this._shaper=new Lr({context:this.context,length:4096}),this._order=t.order,this.connectEffect(this._shaper),this.order=t.order,this.oversample=t.oversample}static getDefaults(){return Object.assign(fa.getDefaults(),{order:1,oversample:"none"})}_getCoefficient(t,e,n){return n.has(e)||(0===e?n.set(e,0):1===e?n.set(e,t):n.set(e,2*t*this._getCoefficient(t,e-1,n)-this._getCoefficient(t,e-2,n))),n.get(e)}get order(){return this._order}set order(t){Qs(Number.isInteger(t),"'order' must be an integer"),this._order=t,this._shaper.setMap((e=>this._getCoefficient(e,t,new Map)))}get oversample(){return this._shaper.oversample}set oversample(t){this._shaper.oversample=t}dispose(){return super.dispose(),this._shaper.dispose(),this}}class Ta extends lr{constructor(){super(mi(Ta.getDefaults(),arguments,["channels"])),this.name="Split";const t=mi(Ta.getDefaults(),arguments,["channels"]);this._splitter=this.input=this.output=this.context.createChannelSplitter(t.channels),this._internalChannels=[this._splitter]}static getDefaults(){return Object.assign(lr.getDefaults(),{channels:2})}dispose(){return super.dispose(),this._splitter.disconnect(),this}}class Ea extends lr{constructor(){super(mi(Ea.getDefaults(),arguments,["channels"])),this.name="Merge";const t=mi(Ea.getDefaults(),arguments,["channels"]);this._merger=this.output=this.input=this.context.createChannelMerger(t.channels)}static getDefaults(){return Object.assign(lr.getDefaults(),{channels:2})}dispose(){return super.dispose(),this._merger.disconnect(),this}}class ka extends lr{constructor(t){super(t),this.name="StereoEffect",this.input=new fr({context:this.context}),this.input.channelCount=2,this.input.channelCountMode="explicit",this._dryWet=this.output=new da({context:this.context,fade:t.wet}),this.wet=this._dryWet.fade,this._split=new Ta({context:this.context,channels:2}),this._merge=new Ea({context:this.context,channels:2}),this.input.connect(this._split),this.input.connect(this._dryWet.a),this._merge.connect(this._dryWet.b),Ri(this,["wet"])}connectEffectLeft(){var t;this._split.connect(arguments.length<=0?void 0:arguments[0],0,0),ur(...arguments),cr((t=arguments.length-1)<0||arguments.length<=t?void 0:arguments[t],this._merge,0,0)}connectEffectRight(){var t;this._split.connect(arguments.length<=0?void 0:arguments[0],1,0),ur(...arguments),cr((t=arguments.length-1)<0||arguments.length<=t?void 0:arguments[t],this._merge,0,1)}static getDefaults(){return Object.assign(lr.getDefaults(),{wet:1})}dispose(){return super.dispose(),this._dryWet.dispose(),this._split.dispose(),this._merge.dispose(),this}}class Aa extends ka{constructor(t){super(t),this.feedback=new gr({context:this.context,value:t.feedback,units:"normalRange"}),this._feedbackL=new fr({context:this.context}),this._feedbackR=new fr({context:this.context}),this._feedbackSplit=new Ta({context:this.context,channels:2}),this._feedbackMerge=new Ea({context:this.context,channels:2}),this._merge.connect(this._feedbackSplit),this._feedbackMerge.connect(this._split),this._feedbackSplit.connect(this._feedbackL,0,0),this._feedbackL.connect(this._feedbackMerge,0,0),this._feedbackSplit.connect(this._feedbackR,1,0),this._feedbackR.connect(this._feedbackMerge,0,1),this.feedback.fan(this._feedbackL.gain,this._feedbackR.gain),Ri(this,["feedback"])}static getDefaults(){return Object.assign(ka.getDefaults(),{feedback:.5})}dispose(){return super.dispose(),this.feedback.dispose(),this._feedbackL.dispose(),this._feedbackR.dispose(),this._feedbackSplit.dispose(),this._feedbackMerge.dispose(),this}}class Oa extends Aa{constructor(){super(mi(Oa.getDefaults(),arguments,["frequency","delayTime","depth"])),this.name="Chorus";const t=mi(Oa.getDefaults(),arguments,["frequency","delayTime","depth"]);this._depth=t.depth,this._delayTime=t.delayTime/1e3,this._lfoL=new uo({context:this.context,frequency:t.frequency,min:0,max:1}),this._lfoR=new uo({context:this.context,frequency:t.frequency,min:0,max:1,phase:180}),this._delayNodeL=new xr({context:this.context}),this._delayNodeR=new xr({context:this.context}),this.frequency=this._lfoL.frequency,Ri(this,["frequency"]),this._lfoL.frequency.connect(this._lfoR.frequency),this.connectEffectLeft(this._delayNodeL),this.connectEffectRight(this._delayNodeR),this._lfoL.connect(this._delayNodeL.delayTime),this._lfoR.connect(this._delayNodeR.delayTime),this.depth=this._depth,this.type=t.type,this.spread=t.spread}static getDefaults(){return Object.assign(Aa.getDefaults(),{frequency:1.5,delayTime:3.5,depth:.7,type:"sine",spread:180,feedback:0,wet:.5})}get depth(){return this._depth}set depth(t){this._depth=t;const e=this._delayTime*t;this._lfoL.min=Math.max(this._delayTime-e,0),this._lfoL.max=this._delayTime+e,this._lfoR.min=Math.max(this._delayTime-e,0),this._lfoR.max=this._delayTime+e}get delayTime(){return 1e3*this._delayTime}set delayTime(t){this._delayTime=t/1e3,this.depth=this._depth}get type(){return this._lfoL.type}set type(t){this._lfoL.type=t,this._lfoR.type=t}get spread(){return this._lfoR.phase-this._lfoL.phase}set spread(t){this._lfoL.phase=90-t/2,this._lfoR.phase=t/2+90}start(t){return this._lfoL.start(t),this._lfoR.start(t),this}stop(t){return this._lfoL.stop(t),this._lfoR.stop(t),this}sync(){return this._lfoL.sync(),this._lfoR.sync(),this}unsync(){return this._lfoL.unsync(),this._lfoR.unsync(),this}dispose(){return super.dispose(),this._lfoL.dispose(),this._lfoR.dispose(),this._delayNodeL.dispose(),this._delayNodeR.dispose(),this.frequency.dispose(),this}}class Ca extends fa{constructor(){super(mi(Ca.getDefaults(),arguments,["distortion"])),this.name="Distortion";const t=mi(Ca.getDefaults(),arguments,["distortion"]);this._shaper=new Lr({context:this.context,length:4096}),this._distortion=t.distortion,this.connectEffect(this._shaper),this.distortion=t.distortion,this.oversample=t.oversample}static getDefaults(){return Object.assign(fa.getDefaults(),{distortion:.4,oversample:"none"})}get distortion(){return this._distortion}set distortion(t){this._distortion=t;const e=100*t,n=Math.PI/180;this._shaper.setMap((t=>Math.abs(t)<.001?0:(3+e)*t*20*n/(Math.PI+e*Math.abs(t))))}get oversample(){return this._shaper.oversample}set oversample(t){this._shaper.oversample=t}dispose(){return super.dispose(),this._shaper.dispose(),this}}class Ma extends fa{constructor(t){super(t),this.name="FeedbackEffect",this._feedbackGain=new fr({context:this.context,gain:t.feedback,units:"normalRange"}),this.feedback=this._feedbackGain.gain,Ri(this,"feedback"),this.effectReturn.chain(this._feedbackGain,this.effectSend)}static getDefaults(){return Object.assign(fa.getDefaults(),{feedback:.125})}dispose(){return super.dispose(),this._feedbackGain.dispose(),this.feedback.dispose(),this}}class Ia extends Ma{constructor(){super(mi(Ia.getDefaults(),arguments,["delayTime","feedback"])),this.name="FeedbackDelay";const t=mi(Ia.getDefaults(),arguments,["delayTime","feedback"]);this._delayNode=new xr({context:this.context,delayTime:t.delayTime,maxDelay:t.maxDelay}),this.delayTime=this._delayNode.delayTime,this.connectEffect(this._delayNode),Ri(this,"delayTime")}static getDefaults(){return Object.assign(Ma.getDefaults(),{delayTime:.25,maxDelay:1})}dispose(){return super.dispose(),this._delayNode.dispose(),this.delayTime.dispose(),this}}class Da extends lr{constructor(t){super(t),this.name="PhaseShiftAllpass",this.input=new fr({context:this.context}),this.output=new fr({context:this.context}),this.offset90=new fr({context:this.context}),this._bank0=this._createAllPassFilterBank([.6923878,.9360654322959,.988229522686,.9987488452737]),this._bank1=this._createAllPassFilterBank([.4021921162426,.856171088242,.9722909545651,.9952884791278]),this._oneSampleDelay=this.context.createIIRFilter([0,1],[1,0]),ur(this.input,...this._bank0,this._oneSampleDelay,this.output),ur(this.input,...this._bank1,this.offset90)}_createAllPassFilterBank(t){return t.map((t=>{const e=[[t*t,0,-1],[1,0,-t*t]];return this.context.createIIRFilter(e[0],e[1])}))}dispose(){return super.dispose(),this.input.dispose(),this.output.dispose(),this.offset90.dispose(),this._bank0.forEach((t=>t.disconnect())),this._bank1.forEach((t=>t.disconnect())),this._oneSampleDelay.disconnect(),this}}class Ra extends fa{constructor(){super(mi(Ra.getDefaults(),arguments,["frequency"])),this.name="FrequencyShifter";const t=mi(Ra.getDefaults(),arguments,["frequency"]);this.frequency=new gr({context:this.context,units:"frequency",value:t.frequency,minValue:-this.context.sampleRate/2,maxValue:this.context.sampleRate/2}),this._sine=new Xr({context:this.context,type:"sine"}),this._cosine=new Zr({context:this.context,phase:-90,type:"sine"}),this._sineMultiply=new $r({context:this.context}),this._cosineMultiply=new $r({context:this.context}),this._negate=new vo({context:this.context}),this._add=new oo({context:this.context}),this._phaseShifter=new Da({context:this.context}),this.effectSend.connect(this._phaseShifter),this.frequency.fan(this._sine.frequency,this._cosine.frequency),this._phaseShifter.offset90.connect(this._cosineMultiply),this._cosine.connect(this._cosineMultiply.factor),this._phaseShifter.connect(this._sineMultiply),this._sine.connect(this._sineMultiply.factor),this._sineMultiply.connect(this._negate),this._cosineMultiply.connect(this._add),this._negate.connect(this._add.addend),this._add.connect(this.effectReturn);const e=this.immediate();this._sine.start(e),this._cosine.start(e)}static getDefaults(){return Object.assign(fa.getDefaults(),{frequency:0})}dispose(){return super.dispose(),this.frequency.dispose(),this._add.dispose(),this._cosine.dispose(),this._cosineMultiply.dispose(),this._negate.dispose(),this._phaseShifter.dispose(),this._sine.dispose(),this._sineMultiply.dispose(),this}}const Na=[1557/44100,1617/44100,1491/44100,1422/44100,1277/44100,1356/44100,1188/44100,1116/44100],Pa=[225,556,441,341];class La extends ka{constructor(){super(mi(La.getDefaults(),arguments,["roomSize","dampening"])),this.name="Freeverb",this._combFilters=[],this._allpassFiltersL=[],this._allpassFiltersR=[];const t=mi(La.getDefaults(),arguments,["roomSize","dampening"]);this.roomSize=new gr({context:this.context,value:t.roomSize,units:"normalRange"}),this._allpassFiltersL=Pa.map((t=>{const e=this.context.createBiquadFilter();return e.type="allpass",e.frequency.value=t,e})),this._allpassFiltersR=Pa.map((t=>{const e=this.context.createBiquadFilter();return e.type="allpass",e.frequency.value=t,e})),this._combFilters=Na.map(((e,n)=>{const s=new Xo({context:this.context,dampening:t.dampening,delayTime:e});return n<Na.length/2?this.connectEffectLeft(s,...this._allpassFiltersL):this.connectEffectRight(s,...this._allpassFiltersR),this.roomSize.connect(s.resonance),s})),Ri(this,["roomSize"])}static getDefaults(){return Object.assign(ka.getDefaults(),{roomSize:.7,dampening:3e3})}get dampening(){return this._combFilters[0].dampening}set dampening(t){this._combFilters.forEach((e=>e.dampening=t))}dispose(){return super.dispose(),this._allpassFiltersL.forEach((t=>t.disconnect())),this._allpassFiltersR.forEach((t=>t.disconnect())),this._combFilters.forEach((t=>t.dispose())),this.roomSize.dispose(),this}}const Fa=[.06748,.06404,.08212,.09004],qa=[.773,.802,.753,.733],Va=[347,113,37];class ja extends ka{constructor(){super(mi(ja.getDefaults(),arguments,["roomSize"])),this.name="JCReverb",this._allpassFilters=[],this._feedbackCombFilters=[];const t=mi(ja.getDefaults(),arguments,["roomSize"]);this.roomSize=new gr({context:this.context,value:t.roomSize,units:"normalRange"}),this._scaleRoomSize=new ao({context:this.context,min:-.733,max:.197}),this._allpassFilters=Va.map((t=>{const e=this.context.createBiquadFilter();return e.type="allpass",e.frequency.value=t,e})),this._feedbackCombFilters=Fa.map(((t,e)=>{const n=new Qo({context:this.context,delayTime:t});return this._scaleRoomSize.connect(n.resonance),n.resonance.value=qa[e],e<Fa.length/2?this.connectEffectLeft(...this._allpassFilters,n):this.connectEffectRight(...this._allpassFilters,n),n})),this.roomSize.connect(this._scaleRoomSize),Ri(this,["roomSize"])}static getDefaults(){return Object.assign(ka.getDefaults(),{roomSize:.5})}dispose(){return super.dispose(),this._allpassFilters.forEach((t=>t.disconnect())),this._feedbackCombFilters.forEach((t=>t.dispose())),this.roomSize.dispose(),this._scaleRoomSize.dispose(),this}}class Ua extends Aa{constructor(t){super(t),this._feedbackL.disconnect(),this._feedbackL.connect(this._feedbackMerge,0,1),this._feedbackR.disconnect(),this._feedbackR.connect(this._feedbackMerge,0,0),Ri(this,["feedback"])}}class za extends Ua{constructor(){super(mi(za.getDefaults(),arguments,["delayTime","feedback"])),this.name="PingPongDelay";const t=mi(za.getDefaults(),arguments,["delayTime","feedback"]);this._leftDelay=new xr({context:this.context,maxDelay:t.maxDelay}),this._rightDelay=new xr({context:this.context,maxDelay:t.maxDelay}),this._rightPreDelay=new xr({context:this.context,maxDelay:t.maxDelay}),this.delayTime=new gr({context:this.context,units:"time",value:t.delayTime}),this.connectEffectLeft(this._leftDelay),this.connectEffectRight(this._rightPreDelay,this._rightDelay),this.delayTime.fan(this._leftDelay.delayTime,this._rightDelay.delayTime,this._rightPreDelay.delayTime),this._feedbackL.disconnect(),this._feedbackL.connect(this._rightDelay),Ri(this,["delayTime"])}static getDefaults(){return Object.assign(Ua.getDefaults(),{delayTime:.25,maxDelay:1})}dispose(){return super.dispose(),this._leftDelay.dispose(),this._rightDelay.dispose(),this._rightPreDelay.dispose(),this.delayTime.dispose(),this}}class Ba extends Ma{constructor(){super(mi(Ba.getDefaults(),arguments,["pitch"])),this.name="PitchShift";const t=mi(Ba.getDefaults(),arguments,["pitch"]);this._frequency=new gr({context:this.context}),this._delayA=new xr({maxDelay:1,context:this.context}),this._lfoA=new uo({context:this.context,min:0,max:.1,type:"sawtooth"}).connect(this._delayA.delayTime),this._delayB=new xr({maxDelay:1,context:this.context}),this._lfoB=new uo({context:this.context,min:0,max:.1,type:"sawtooth",phase:180}).connect(this._delayB.delayTime),this._crossFade=new da({context:this.context}),this._crossFadeLFO=new uo({context:this.context,min:0,max:1,type:"triangle",phase:90}).connect(this._crossFade.fade),this._feedbackDelay=new xr({delayTime:t.delayTime,context:this.context}),this.delayTime=this._feedbackDelay.delayTime,Ri(this,"delayTime"),this._pitch=t.pitch,this._windowSize=t.windowSize,this._delayA.connect(this._crossFade.a),this._delayB.connect(this._crossFade.b),this._frequency.fan(this._lfoA.frequency,this._lfoB.frequency,this._crossFadeLFO.frequency),this.effectSend.fan(this._delayA,this._delayB),this._crossFade.chain(this._feedbackDelay,this.effectReturn);const e=this.now();this._lfoA.start(e),this._lfoB.start(e),this._crossFadeLFO.start(e),this.windowSize=this._windowSize}static getDefaults(){return Object.assign(Ma.getDefaults(),{pitch:0,windowSize:.1,delayTime:0,feedback:0})}get pitch(){return this._pitch}set pitch(t){this._pitch=t;let e=0;t<0?(this._lfoA.min=0,this._lfoA.max=this._windowSize,this._lfoB.min=0,this._lfoB.max=this._windowSize,e=Gi(t-1)+1):(this._lfoA.min=this._windowSize,this._lfoA.max=0,this._lfoB.min=this._windowSize,this._lfoB.max=0,e=Gi(t)-1),this._frequency.value=e*(1.2/this._windowSize)}get windowSize(){return this._windowSize}set windowSize(t){this._windowSize=this.toSeconds(t),this.pitch=this._pitch}dispose(){return super.dispose(),this._frequency.dispose(),this._delayA.dispose(),this._delayB.dispose(),this._lfoA.dispose(),this._lfoB.dispose(),this._crossFade.dispose(),this._crossFadeLFO.dispose(),this._feedbackDelay.dispose(),this}}class Ha extends ka{constructor(){super(mi(Ha.getDefaults(),arguments,["frequency","octaves","baseFrequency"])),this.name="Phaser";const t=mi(Ha.getDefaults(),arguments,["frequency","octaves","baseFrequency"]);this._lfoL=new uo({context:this.context,frequency:t.frequency,min:0,max:1}),this._lfoR=new uo({context:this.context,frequency:t.frequency,min:0,max:1,phase:180}),this._baseFrequency=this.toFrequency(t.baseFrequency),this._octaves=t.octaves,this.Q=new gr({context:this.context,value:t.Q,units:"positive"}),this._filtersL=this._makeFilters(t.stages,this._lfoL),this._filtersR=this._makeFilters(t.stages,this._lfoR),this.frequency=this._lfoL.frequency,this.frequency.value=t.frequency,this.connectEffectLeft(...this._filtersL),this.connectEffectRight(...this._filtersR),this._lfoL.frequency.connect(this._lfoR.frequency),this.baseFrequency=t.baseFrequency,this.octaves=t.octaves,this._lfoL.start(),this._lfoR.start(),Ri(this,["frequency","Q"])}static getDefaults(){return Object.assign(ka.getDefaults(),{frequency:.5,octaves:3,stages:10,Q:10,baseFrequency:350})}_makeFilters(t,e){const n=[];for(let s=0;s<t;s++){const t=this.context.createBiquadFilter();t.type="allpass",this.Q.connect(t.Q),e.connect(t.frequency),n.push(t)}return n}get octaves(){return this._octaves}set octaves(t){this._octaves=t;const e=this._baseFrequency*Math.pow(2,t);this._lfoL.max=e,this._lfoR.max=e}get baseFrequency(){return this._baseFrequency}set baseFrequency(t){this._baseFrequency=this.toFrequency(t),this._lfoL.min=this._baseFrequency,this._lfoR.min=this._baseFrequency,this.octaves=this._octaves}dispose(){return super.dispose(),this.Q.dispose(),this._lfoL.dispose(),this._lfoR.dispose(),this._filtersL.forEach((t=>t.disconnect())),this._filtersR.forEach((t=>t.disconnect())),this.frequency.dispose(),this}}class Ga extends fa{constructor(){super(mi(Ga.getDefaults(),arguments,["decay"])),this.name="Reverb",this._convolver=this.context.createConvolver(),this.ready=Promise.resolve();const t=mi(Ga.getDefaults(),arguments,["decay"]);this._decay=t.decay,this._preDelay=t.preDelay,this.generate(),this.connectEffect(this._convolver)}static getDefaults(){return Object.assign(fa.getDefaults(),{decay:1.5,preDelay:.01})}get decay(){return this._decay}set decay(t){Ys(t=this.toSeconds(t),.001),this._decay=t,this.generate()}get preDelay(){return this._preDelay}set preDelay(t){Ys(t=this.toSeconds(t),0),this._preDelay=t,this.generate()}generate(){return ai(this,void 0,void 0,(function*(){const t=this.ready,e=new Fi(2,this._decay+this._preDelay,this.context.sampleRate),n=new Br({context:e}),s=new Br({context:e}),i=new Ea({context:e});n.connect(i,0,0),s.connect(i,0,1);const r=new fr({context:e}).toDestination();i.connect(r),n.start(0),s.start(0),r.gain.setValueAtTime(0,0),r.gain.setValueAtTime(1,this._preDelay),r.gain.exponentialApproachValueAtTime(0,this._preDelay,this.decay);const o=e.render();return this.ready=o.then(Pi),yield t,this._convolver.buffer=(yield o).get(),this}))}dispose(){return super.dispose(),this._convolver.disconnect(),this}}class Wa extends lr{constructor(){super(mi(Wa.getDefaults(),arguments)),this.name="MidSideSplit",this._split=this.input=new Ta({channels:2,context:this.context}),this._midAdd=new oo({context:this.context}),this.mid=new $r({context:this.context,value:Math.SQRT1_2}),this._sideSubtract=new yo({context:this.context}),this.side=new $r({context:this.context,value:Math.SQRT1_2}),this._split.connect(this._midAdd,0),this._split.connect(this._midAdd.addend,1),this._split.connect(this._sideSubtract,0),this._split.connect(this._sideSubtract.subtrahend,1),this._midAdd.connect(this.mid),this._sideSubtract.connect(this.side)}dispose(){return super.dispose(),this.mid.dispose(),this.side.dispose(),this._midAdd.dispose(),this._sideSubtract.dispose(),this._split.dispose(),this}}class Qa extends lr{constructor(){super(mi(Qa.getDefaults(),arguments)),this.name="MidSideMerge",this.mid=new fr({context:this.context}),this.side=new fr({context:this.context}),this._left=new oo({context:this.context}),this._leftMult=new $r({context:this.context,value:Math.SQRT1_2}),this._right=new yo({context:this.context}),this._rightMult=new $r({context:this.context,value:Math.SQRT1_2}),this._merge=this.output=new Ea({context:this.context}),this.mid.fan(this._left),this.side.connect(this._left.addend),this.mid.connect(this._right),this.side.connect(this._right.subtrahend),this._left.connect(this._leftMult),this._right.connect(this._rightMult),this._leftMult.connect(this._merge,0,0),this._rightMult.connect(this._merge,0,1)}dispose(){return super.dispose(),this.mid.dispose(),this.side.dispose(),this._leftMult.dispose(),this._rightMult.dispose(),this._left.dispose(),this._right.dispose(),this}}class Ya extends fa{constructor(t){super(t),this.name="MidSideEffect",this._midSideMerge=new Qa({context:this.context}),this._midSideSplit=new Wa({context:this.context}),this._midSend=this._midSideSplit.mid,this._sideSend=this._midSideSplit.side,this._midReturn=this._midSideMerge.mid,this._sideReturn=this._midSideMerge.side,this.effectSend.connect(this._midSideSplit),this._midSideMerge.connect(this.effectReturn)}connectEffectMid(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._midSend.chain(...e,this._midReturn)}connectEffectSide(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._sideSend.chain(...e,this._sideReturn)}dispose(){return super.dispose(),this._midSideSplit.dispose(),this._midSideMerge.dispose(),this._midSend.dispose(),this._sideSend.dispose(),this._midReturn.dispose(),this._sideReturn.dispose(),this}}class Xa extends Ya{constructor(){super(mi(Xa.getDefaults(),arguments,["width"])),this.name="StereoWidener";const t=mi(Xa.getDefaults(),arguments,["width"]);this.width=new gr({context:this.context,value:t.width,units:"normalRange"}),Ri(this,["width"]),this._twoTimesWidthMid=new $r({context:this.context,value:2}),this._twoTimesWidthSide=new $r({context:this.context,value:2}),this._midMult=new $r({context:this.context}),this._twoTimesWidthMid.connect(this._midMult.factor),this.connectEffectMid(this._midMult),this._oneMinusWidth=new yo({context:this.context}),this._oneMinusWidth.connect(this._twoTimesWidthMid),cr(this.context.getConstant(1),this._oneMinusWidth),this.width.connect(this._oneMinusWidth.subtrahend),this._sideMult=new $r({context:this.context}),this.width.connect(this._twoTimesWidthSide),this._twoTimesWidthSide.connect(this._sideMult.factor),this.connectEffectSide(this._sideMult)}static getDefaults(){return Object.assign(Ya.getDefaults(),{width:.5})}dispose(){return super.dispose(),this.width.dispose(),this._midMult.dispose(),this._sideMult.dispose(),this._twoTimesWidthMid.dispose(),this._twoTimesWidthSide.dispose(),this._oneMinusWidth.dispose(),this}}class Za extends ka{constructor(){super(mi(Za.getDefaults(),arguments,["frequency","depth"])),this.name="Tremolo";const t=mi(Za.getDefaults(),arguments,["frequency","depth"]);this._lfoL=new uo({context:this.context,type:t.type,min:1,max:0}),this._lfoR=new uo({context:this.context,type:t.type,min:1,max:0}),this._amplitudeL=new fr({context:this.context}),this._amplitudeR=new fr({context:this.context}),this.frequency=new gr({context:this.context,value:t.frequency,units:"frequency"}),this.depth=new gr({context:this.context,value:t.depth,units:"normalRange"}),Ri(this,["frequency","depth"]),this.connectEffectLeft(this._amplitudeL),this.connectEffectRight(this._amplitudeR),this._lfoL.connect(this._amplitudeL.gain),this._lfoR.connect(this._amplitudeR.gain),this.frequency.fan(this._lfoL.frequency,this._lfoR.frequency),this.depth.fan(this._lfoR.amplitude,this._lfoL.amplitude),this.spread=t.spread}static getDefaults(){return Object.assign(ka.getDefaults(),{frequency:10,type:"sine",depth:.5,spread:180})}start(t){return this._lfoL.start(t),this._lfoR.start(t),this}stop(t){return this._lfoL.stop(t),this._lfoR.stop(t),this}sync(){return this._lfoL.sync(),this._lfoR.sync(),this.context.transport.syncSignal(this.frequency),this}unsync(){return this._lfoL.unsync(),this._lfoR.unsync(),this.context.transport.unsyncSignal(this.frequency),this}get type(){return this._lfoL.type}set type(t){this._lfoL.type=t,this._lfoR.type=t}get spread(){return this._lfoR.phase-this._lfoL.phase}set spread(t){this._lfoL.phase=90-t/2,this._lfoR.phase=t/2+90}dispose(){return super.dispose(),this._lfoL.dispose(),this._lfoR.dispose(),this._amplitudeL.dispose(),this._amplitudeR.dispose(),this.frequency.dispose(),this.depth.dispose(),this}}class Ka extends fa{constructor(){super(mi(Ka.getDefaults(),arguments,["frequency","depth"])),this.name="Vibrato";const t=mi(Ka.getDefaults(),arguments,["frequency","depth"]);this._delayNode=new xr({context:this.context,delayTime:0,maxDelay:t.maxDelay}),this._lfo=new uo({context:this.context,type:t.type,min:0,max:t.maxDelay,frequency:t.frequency,phase:-90}).start().connect(this._delayNode.delayTime),this.frequency=this._lfo.frequency,this.depth=this._lfo.amplitude,this.depth.value=t.depth,Ri(this,["frequency","depth"]),this.effectSend.chain(this._delayNode,this.effectReturn)}static getDefaults(){return Object.assign(fa.getDefaults(),{maxDelay:.005,frequency:5,depth:.1,type:"sine"})}get type(){return this._lfo.type}set type(t){this._lfo.type=t}dispose(){return super.dispose(),this._delayNode.dispose(),this._lfo.dispose(),this.frequency.dispose(),this.depth.dispose(),this}}class $a extends lr{constructor(){super(mi($a.getDefaults(),arguments,["type","size"])),this.name="Analyser",this._analysers=[],this._buffers=[];const t=mi($a.getDefaults(),arguments,["type","size"]);this.input=this.output=this._gain=new fr({context:this.context}),this._split=new Ta({context:this.context,channels:t.channels}),this.input.connect(this._split),Ys(t.channels,1);for(let e=0;e<t.channels;e++)this._analysers[e]=this.context.createAnalyser(),this._split.connect(this._analysers[e],e,0);this.size=t.size,this.type=t.type,this.smoothing=t.smoothing}static getDefaults(){return Object.assign(lr.getDefaults(),{size:1024,smoothing:.8,type:"fft",channels:1})}getValue(){return this._analysers.forEach(((t,e)=>{const n=this._buffers[e];"fft"===this._type?t.getFloatFrequencyData(n):"waveform"===this._type&&t.getFloatTimeDomainData(n)})),1===this.channels?this._buffers[0]:this._buffers}get size(){return this._analysers[0].frequencyBinCount}set size(t){this._analysers.forEach(((e,n)=>{e.fftSize=2*t,this._buffers[n]=new Float32Array(t)}))}get channels(){return this._analysers.length}get type(){return this._type}set type(t){Qs("waveform"===t||"fft"===t,"Analyser: invalid type: ".concat(t)),this._type=t}get smoothing(){return this._analysers[0].smoothingTimeConstant}set smoothing(t){this._analysers.forEach((e=>e.smoothingTimeConstant=t))}dispose(){return super.dispose(),this._analysers.forEach((t=>t.disconnect())),this._split.dispose(),this._gain.dispose(),this}}class Ja extends lr{constructor(){super(mi(Ja.getDefaults(),arguments)),this.name="MeterBase",this.input=this.output=this._analyser=new $a({context:this.context,size:256,type:"waveform"})}dispose(){return super.dispose(),this._analyser.dispose(),this}}class tl extends Ja{constructor(){super(mi(tl.getDefaults(),arguments,["smoothing"])),this.name="Meter";const t=mi(tl.getDefaults(),arguments,["smoothing"]);this.input=this.output=this._analyser=new $a({context:this.context,size:256,type:"waveform",channels:t.channelCount}),this.smoothing=t.smoothing,this.normalRange=t.normalRange,this._rms=new Array(t.channelCount),this._rms.fill(0)}static getDefaults(){return Object.assign(Ja.getDefaults(),{smoothing:.8,normalRange:!1,channelCount:1})}getLevel(){return si("'getLevel' has been changed to 'getValue'"),this.getValue()}getValue(){const t=this._analyser.getValue(),e=(1===this.channels?[t]:t).map(((t,e)=>{const n=t.reduce(((t,e)=>t+e*e),0),s=Math.sqrt(n/t.length);return this._rms[e]=Math.max(s,this._rms[e]*this.smoothing),this.normalRange?this._rms[e]:Hi(this._rms[e])}));return 1===this.channels?e[0]:e}get channels(){return this._analyser.channels}dispose(){return super.dispose(),this._analyser.dispose(),this}}class el extends Ja{constructor(){super(mi(el.getDefaults(),arguments,["size"])),this.name="FFT";const t=mi(el.getDefaults(),arguments,["size"]);this.normalRange=t.normalRange,this._analyser.type="fft",this.size=t.size}static getDefaults(){return Object.assign(lr.getDefaults(),{normalRange:!1,size:1024,smoothing:.8})}getValue(){return this._analyser.getValue().map((t=>this.normalRange?Bi(t):t))}get size(){return this._analyser.size}set size(t){this._analyser.size=t}get smoothing(){return this._analyser.smoothing}set smoothing(t){this._analyser.smoothing=t}getFrequencyOfIndex(t){return Qs(0<=t&&t<this.size,"index must be greater than or equal to 0 and less than ".concat(this.size)),t*this.context.sampleRate/(2*this.size)}}class nl extends Ja{constructor(){super(mi(nl.getDefaults(),arguments)),this.name="DCMeter",this._analyser.type="waveform",this._analyser.size=256}getValue(){return this._analyser.getValue()[0]}}class sl extends Ja{constructor(){super(mi(sl.getDefaults(),arguments,["size"])),this.name="Waveform";const t=mi(sl.getDefaults(),arguments,["size"]);this._analyser.type="waveform",this.size=t.size}static getDefaults(){return Object.assign(Ja.getDefaults(),{size:1024})}getValue(){return this._analyser.getValue()}get size(){return this._analyser.size}set size(t){this._analyser.size=t}}class il extends lr{constructor(){super(mi(il.getDefaults(),arguments,["solo"])),this.name="Solo";const t=mi(il.getDefaults(),arguments,["solo"]);this.input=this.output=new fr({context:this.context}),il._allSolos.has(this.context)||il._allSolos.set(this.context,new Set),il._allSolos.get(this.context).add(this),this.solo=t.solo}static getDefaults(){return Object.assign(lr.getDefaults(),{solo:!1})}get solo(){return this._isSoloed()}set solo(t){t?this._addSolo():this._removeSolo(),il._allSolos.get(this.context).forEach((t=>t._updateSolo()))}get muted(){return 0===this.input.gain.value}_addSolo(){il._soloed.has(this.context)||il._soloed.set(this.context,new Set),il._soloed.get(this.context).add(this)}_removeSolo(){il._soloed.has(this.context)&&il._soloed.get(this.context).delete(this)}_isSoloed(){return il._soloed.has(this.context)&&il._soloed.get(this.context).has(this)}_noSolos(){return!il._soloed.has(this.context)||il._soloed.has(this.context)&&0===il._soloed.get(this.context).size}_updateSolo(){this._isSoloed()||this._noSolos()?this.input.gain.value=1:this.input.gain.value=0}dispose(){return super.dispose(),il._allSolos.get(this.context).delete(this),this._removeSolo(),this}}il._allSolos=new Map,il._soloed=new Map;class rl extends lr{constructor(){super(mi(rl.getDefaults(),arguments,["pan","volume"])),this.name="PanVol";const t=mi(rl.getDefaults(),arguments,["pan","volume"]);this._panner=this.input=new ga({context:this.context,pan:t.pan,channelCount:t.channelCount}),this.pan=this._panner.pan,this._volume=this.output=new Dr({context:this.context,volume:t.volume}),this.volume=this._volume.volume,this._panner.connect(this._volume),this.mute=t.mute,Ri(this,["pan","volume"])}static getDefaults(){return Object.assign(lr.getDefaults(),{mute:!1,pan:0,volume:0,channelCount:1})}get mute(){return this._volume.mute}set mute(t){this._volume.mute=t}dispose(){return super.dispose(),this._panner.dispose(),this.pan.dispose(),this._volume.dispose(),this.volume.dispose(),this}}class ol extends lr{constructor(){super(mi(ol.getDefaults(),arguments,["volume","pan"])),this.name="Channel";const t=mi(ol.getDefaults(),arguments,["volume","pan"]);this._solo=this.input=new il({solo:t.solo,context:this.context}),this._panVol=this.output=new rl({context:this.context,pan:t.pan,volume:t.volume,mute:t.mute,channelCount:t.channelCount}),this.pan=this._panVol.pan,this.volume=this._panVol.volume,this._solo.connect(this._panVol),Ri(this,["pan","volume"])}static getDefaults(){return Object.assign(lr.getDefaults(),{pan:0,volume:0,mute:!1,solo:!1,channelCount:1})}get solo(){return this._solo.solo}set solo(t){this._solo.solo=t}get muted(){return this._solo.muted||this.mute}get mute(){return this._panVol.mute}set mute(t){this._panVol.mute=t}_getBus(t){return ol.buses.has(t)||ol.buses.set(t,new fr({context:this.context})),ol.buses.get(t)}send(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=this._getBus(t),s=new fr({context:this.context,units:"decibels",gain:e});return this.connect(s),s.connect(n),s}receive(t){return this._getBus(t).connect(this),this}dispose(){return super.dispose(),this._panVol.dispose(),this.pan.dispose(),this.volume.dispose(),this._solo.dispose(),this}}ol.buses=new Map;class al extends lr{constructor(){super(mi(al.getDefaults(),arguments)),this.name="Mono",this.input=new fr({context:this.context}),this._merge=this.output=new Ea({channels:2,context:this.context}),this.input.connect(this._merge,0,0),this.input.connect(this._merge,0,1)}dispose(){return super.dispose(),this._merge.dispose(),this.input.dispose(),this}}class ll extends lr{constructor(){super(mi(ll.getDefaults(),arguments,["lowFrequency","highFrequency"])),this.name="MultibandSplit",this.input=new fr({context:this.context}),this.output=void 0,this.low=new Ro({context:this.context,frequency:0,type:"lowpass"}),this._lowMidFilter=new Ro({context:this.context,frequency:0,type:"highpass"}),this.mid=new Ro({context:this.context,frequency:0,type:"lowpass"}),this.high=new Ro({context:this.context,frequency:0,type:"highpass"}),this._internalChannels=[this.low,this.mid,this.high];const t=mi(ll.getDefaults(),arguments,["lowFrequency","highFrequency"]);this.lowFrequency=new gr({context:this.context,units:"frequency",value:t.lowFrequency}),this.highFrequency=new gr({context:this.context,units:"frequency",value:t.highFrequency}),this.Q=new gr({context:this.context,units:"positive",value:t.Q}),this.input.fan(this.low,this.high),this.input.chain(this._lowMidFilter,this.mid),this.lowFrequency.fan(this.low.frequency,this._lowMidFilter.frequency),this.highFrequency.fan(this.mid.frequency,this.high.frequency),this.Q.connect(this.low.Q),this.Q.connect(this._lowMidFilter.Q),this.Q.connect(this.mid.Q),this.Q.connect(this.high.Q),Ri(this,["high","mid","low","highFrequency","lowFrequency"])}static getDefaults(){return Object.assign(lr.getDefaults(),{Q:1,highFrequency:2500,lowFrequency:400})}dispose(){return super.dispose(),Ni(this,["high","mid","low","highFrequency","lowFrequency"]),this.low.dispose(),this._lowMidFilter.dispose(),this.mid.dispose(),this.high.dispose(),this.lowFrequency.dispose(),this.highFrequency.dispose(),this.Q.dispose(),this}}class ul extends lr{constructor(){super(...arguments),this.name="Listener",this.positionX=new ar({context:this.context,param:this.context.rawContext.listener.positionX}),this.positionY=new ar({context:this.context,param:this.context.rawContext.listener.positionY}),this.positionZ=new ar({context:this.context,param:this.context.rawContext.listener.positionZ}),this.forwardX=new ar({context:this.context,param:this.context.rawContext.listener.forwardX}),this.forwardY=new ar({context:this.context,param:this.context.rawContext.listener.forwardY}),this.forwardZ=new ar({context:this.context,param:this.context.rawContext.listener.forwardZ}),this.upX=new ar({context:this.context,param:this.context.rawContext.listener.upX}),this.upY=new ar({context:this.context,param:this.context.rawContext.listener.upY}),this.upZ=new ar({context:this.context,param:this.context.rawContext.listener.upZ})}static getDefaults(){return Object.assign(lr.getDefaults(),{positionX:0,positionY:0,positionZ:0,forwardX:0,forwardY:0,forwardZ:-1,upX:0,upY:1,upZ:0})}dispose(){return super.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this.forwardX.dispose(),this.forwardY.dispose(),this.forwardZ.dispose(),this.upX.dispose(),this.upY.dispose(),this.upZ.dispose(),this}}Ai((t=>{t.listener=new ul({context:t})})),Ci((t=>{t.listener.dispose()}));class cl extends lr{constructor(){super(mi(cl.getDefaults(),arguments,["positionX","positionY","positionZ"])),this.name="Panner3D";const t=mi(cl.getDefaults(),arguments,["positionX","positionY","positionZ"]);this._panner=this.input=this.output=this.context.createPanner(),this.panningModel=t.panningModel,this.maxDistance=t.maxDistance,this.distanceModel=t.distanceModel,this.coneOuterGain=t.coneOuterGain,this.coneOuterAngle=t.coneOuterAngle,this.coneInnerAngle=t.coneInnerAngle,this.refDistance=t.refDistance,this.rolloffFactor=t.rolloffFactor,this.positionX=new ar({context:this.context,param:this._panner.positionX,value:t.positionX}),this.positionY=new ar({context:this.context,param:this._panner.positionY,value:t.positionY}),this.positionZ=new ar({context:this.context,param:this._panner.positionZ,value:t.positionZ}),this.orientationX=new ar({context:this.context,param:this._panner.orientationX,value:t.orientationX}),this.orientationY=new ar({context:this.context,param:this._panner.orientationY,value:t.orientationY}),this.orientationZ=new ar({context:this.context,param:this._panner.orientationZ,value:t.orientationZ})}static getDefaults(){return Object.assign(lr.getDefaults(),{coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:0,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1})}setPosition(t,e,n){return this.positionX.value=t,this.positionY.value=e,this.positionZ.value=n,this}setOrientation(t,e,n){return this.orientationX.value=t,this.orientationY.value=e,this.orientationZ.value=n,this}get panningModel(){return this._panner.panningModel}set panningModel(t){this._panner.panningModel=t}get refDistance(){return this._panner.refDistance}set refDistance(t){this._panner.refDistance=t}get rolloffFactor(){return this._panner.rolloffFactor}set rolloffFactor(t){this._panner.rolloffFactor=t}get distanceModel(){return this._panner.distanceModel}set distanceModel(t){this._panner.distanceModel=t}get coneInnerAngle(){return this._panner.coneInnerAngle}set coneInnerAngle(t){this._panner.coneInnerAngle=t}get coneOuterAngle(){return this._panner.coneOuterAngle}set coneOuterAngle(t){this._panner.coneOuterAngle=t}get coneOuterGain(){return this._panner.coneOuterGain}set coneOuterGain(t){this._panner.coneOuterGain=t}get maxDistance(){return this._panner.maxDistance}set maxDistance(t){this._panner.maxDistance=t}dispose(){return super.dispose(),this._panner.disconnect(),this.orientationX.dispose(),this.orientationY.dispose(),this.orientationZ.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this}}class hl extends lr{constructor(){super(mi(hl.getDefaults(),arguments)),this.name="Recorder";const t=mi(hl.getDefaults(),arguments);this.input=new fr({context:this.context}),Qs(hl.supported,"Media Recorder API is not available"),this._stream=this.context.createMediaStreamDestination(),this.input.connect(this._stream),this._recorder=new MediaRecorder(this._stream.stream,{mimeType:t.mimeType})}static getDefaults(){return lr.getDefaults()}get mimeType(){return this._recorder.mimeType}static get supported(){return null!==ii&&Reflect.has(ii,"MediaRecorder")}get state(){return"inactive"===this._recorder.state?"stopped":"paused"===this._recorder.state?"paused":"started"}start(){return ai(this,void 0,void 0,(function*(){Qs("started"!==this.state,"Recorder is already started");const t=new Promise((t=>{const e=()=>{this._recorder.removeEventListener("start",e,!1),t()};this._recorder.addEventListener("start",e,!1)}));return this._recorder.start(),yield t}))}stop(){return ai(this,void 0,void 0,(function*(){Qs("stopped"!==this.state,"Recorder is not started");const t=new Promise((t=>{const e=n=>{this._recorder.removeEventListener("dataavailable",e,!1),t(n.data)};this._recorder.addEventListener("dataavailable",e,!1)}));return this._recorder.stop(),yield t}))}pause(){return Qs("started"===this.state,"Recorder must be started"),this._recorder.pause(),this}dispose(){return super.dispose(),this.input.dispose(),this._stream.disconnect(),this}}class dl extends lr{constructor(){super(mi(dl.getDefaults(),arguments,["threshold","ratio"])),this.name="Compressor",this._compressor=this.context.createDynamicsCompressor(),this.input=this._compressor,this.output=this._compressor;const t=mi(dl.getDefaults(),arguments,["threshold","ratio"]);this.threshold=new ar({minValue:this._compressor.threshold.minValue,maxValue:this._compressor.threshold.maxValue,context:this.context,convert:!1,param:this._compressor.threshold,units:"decibels",value:t.threshold}),this.attack=new ar({minValue:this._compressor.attack.minValue,maxValue:this._compressor.attack.maxValue,context:this.context,param:this._compressor.attack,units:"time",value:t.attack}),this.release=new ar({minValue:this._compressor.release.minValue,maxValue:this._compressor.release.maxValue,context:this.context,param:this._compressor.release,units:"time",value:t.release}),this.knee=new ar({minValue:this._compressor.knee.minValue,maxValue:this._compressor.knee.maxValue,context:this.context,convert:!1,param:this._compressor.knee,units:"decibels",value:t.knee}),this.ratio=new ar({minValue:this._compressor.ratio.minValue,maxValue:this._compressor.ratio.maxValue,context:this.context,convert:!1,param:this._compressor.ratio,units:"positive",value:t.ratio}),Ri(this,["knee","release","attack","ratio","threshold"])}static getDefaults(){return Object.assign(lr.getDefaults(),{attack:.003,knee:30,ratio:12,release:.25,threshold:-24})}get reduction(){return this._compressor.reduction}dispose(){return super.dispose(),this._compressor.disconnect(),this.attack.dispose(),this.release.dispose(),this.threshold.dispose(),this.ratio.dispose(),this.knee.dispose(),this}}class fl extends lr{constructor(){super(Object.assign(mi(fl.getDefaults(),arguments,["threshold","smoothing"]))),this.name="Gate";const t=mi(fl.getDefaults(),arguments,["threshold","smoothing"]);this._follower=new va({context:this.context,smoothing:t.smoothing}),this._gt=new wo({context:this.context,value:Bi(t.threshold)}),this.input=new fr({context:this.context}),this._gate=this.output=new fr({context:this.context}),this.input.connect(this._gate),this.input.chain(this._follower,this._gt,this._gate.gain)}static getDefaults(){return Object.assign(lr.getDefaults(),{smoothing:.1,threshold:-40})}get threshold(){return Hi(this._gt.value)}set threshold(t){this._gt.value=Bi(t)}get smoothing(){return this._follower.smoothing}set smoothing(t){this._follower.smoothing=t}dispose(){return super.dispose(),this.input.dispose(),this._follower.dispose(),this._gt.dispose(),this._gate.dispose(),this}}class pl extends lr{constructor(){super(Object.assign(mi(pl.getDefaults(),arguments,["threshold"]))),this.name="Limiter";const t=mi(pl.getDefaults(),arguments,["threshold"]);this._compressor=this.input=this.output=new dl({context:this.context,ratio:20,attack:.003,release:.01,threshold:t.threshold}),this.threshold=this._compressor.threshold,Ri(this,"threshold")}static getDefaults(){return Object.assign(lr.getDefaults(),{threshold:-12})}get reduction(){return this._compressor.reduction}dispose(){return super.dispose(),this._compressor.dispose(),this.threshold.dispose(),this}}class ml extends lr{constructor(){super(Object.assign(mi(ml.getDefaults(),arguments))),this.name="MidSideCompressor";const t=mi(ml.getDefaults(),arguments);this._midSideSplit=this.input=new Wa({context:this.context}),this._midSideMerge=this.output=new Qa({context:this.context}),this.mid=new dl(Object.assign(t.mid,{context:this.context})),this.side=new dl(Object.assign(t.side,{context:this.context})),this._midSideSplit.mid.chain(this.mid,this._midSideMerge.mid),this._midSideSplit.side.chain(this.side,this._midSideMerge.side),Ri(this,["mid","side"])}static getDefaults(){return Object.assign(lr.getDefaults(),{mid:{ratio:3,threshold:-24,release:.03,attack:.02,knee:16},side:{ratio:6,threshold:-30,release:.25,attack:.03,knee:10}})}dispose(){return super.dispose(),this.mid.dispose(),this.side.dispose(),this._midSideSplit.dispose(),this._midSideMerge.dispose(),this}}class gl extends lr{constructor(){super(Object.assign(mi(gl.getDefaults(),arguments))),this.name="MultibandCompressor";const t=mi(gl.getDefaults(),arguments);this._splitter=this.input=new ll({context:this.context,lowFrequency:t.lowFrequency,highFrequency:t.highFrequency}),this.lowFrequency=this._splitter.lowFrequency,this.highFrequency=this._splitter.highFrequency,this.output=new fr({context:this.context}),this.low=new dl(Object.assign(t.low,{context:this.context})),this.mid=new dl(Object.assign(t.mid,{context:this.context})),this.high=new dl(Object.assign(t.high,{context:this.context})),this._splitter.low.chain(this.low,this.output),this._splitter.mid.chain(this.mid,this.output),this._splitter.high.chain(this.high,this.output),Ri(this,["high","mid","low","highFrequency","lowFrequency"])}static getDefaults(){return Object.assign(lr.getDefaults(),{lowFrequency:250,highFrequency:2e3,low:{ratio:6,threshold:-30,release:.25,attack:.03,knee:10},mid:{ratio:3,threshold:-24,release:.03,attack:.02,knee:16},high:{ratio:3,threshold:-24,release:.03,attack:.02,knee:16}})}dispose(){return super.dispose(),this._splitter.dispose(),this.low.dispose(),this.mid.dispose(),this.high.dispose(),this.output.dispose(),this}}class _l extends lr{constructor(){super(mi(_l.getDefaults(),arguments,["low","mid","high"])),this.name="EQ3",this.output=new fr({context:this.context}),this._internalChannels=[];const t=mi(_l.getDefaults(),arguments,["low","mid","high"]);this.input=this._multibandSplit=new ll({context:this.context,highFrequency:t.highFrequency,lowFrequency:t.lowFrequency}),this._lowGain=new fr({context:this.context,gain:t.low,units:"decibels"}),this._midGain=new fr({context:this.context,gain:t.mid,units:"decibels"}),this._highGain=new fr({context:this.context,gain:t.high,units:"decibels"}),this.low=this._lowGain.gain,this.mid=this._midGain.gain,this.high=this._highGain.gain,this.Q=this._multibandSplit.Q,this.lowFrequency=this._multibandSplit.lowFrequency,this.highFrequency=this._multibandSplit.highFrequency,this._multibandSplit.low.chain(this._lowGain,this.output),this._multibandSplit.mid.chain(this._midGain,this.output),this._multibandSplit.high.chain(this._highGain,this.output),Ri(this,["low","mid","high","lowFrequency","highFrequency"]),this._internalChannels=[this._multibandSplit]}static getDefaults(){return Object.assign(lr.getDefaults(),{high:0,highFrequency:2500,low:0,lowFrequency:400,mid:0})}dispose(){return super.dispose(),Ni(this,["low","mid","high","lowFrequency","highFrequency"]),this._multibandSplit.dispose(),this.lowFrequency.dispose(),this.highFrequency.dispose(),this._lowGain.dispose(),this._midGain.dispose(),this._highGain.dispose(),this.low.dispose(),this.mid.dispose(),this.high.dispose(),this.Q.dispose(),this}}class vl extends lr{constructor(){super(mi(vl.getDefaults(),arguments,["url","onload"])),this.name="Convolver",this._convolver=this.context.createConvolver();const t=mi(vl.getDefaults(),arguments,["url","onload"]);this._buffer=new Li(t.url,(e=>{this.buffer=e,t.onload()})),this.input=new fr({context:this.context}),this.output=new fr({context:this.context}),this._buffer.loaded&&(this.buffer=this._buffer),this.normalize=t.normalize,this.input.chain(this._convolver,this.output)}static getDefaults(){return Object.assign(lr.getDefaults(),{normalize:!0,onload:Pi})}load(t){return ai(this,void 0,void 0,(function*(){this.buffer=yield this._buffer.load(t)}))}get buffer(){return this._buffer.length?this._buffer:null}set buffer(t){t&&this._buffer.set(t),this._convolver.buffer&&(this.input.disconnect(),this._convolver.disconnect(),this._convolver=this.context.createConvolver(),this.input.chain(this._convolver,this.output));const e=this._buffer.get();this._convolver.buffer=e||null}get normalize(){return this._convolver.normalize}set normalize(t){this._convolver.normalize=t}dispose(){return super.dispose(),this._buffer.dispose(),this._convolver.disconnect(),this}}function yl(){return ji().now()}function bl(){return ji().immediate()}const wl=ji().transport;function xl(){return ji().transport}const Sl=ji().destination,Tl=ji().destination;function El(){return ji().destination}const kl=ji().listener;function Al(){return ji().listener}const Ol=ji().draw;function Cl(){return ji().draw}const Ml=ji();function Il(){return Li.loaded()}const Dl=Li,Rl=Tr,Nl=zr})(),u})(),t.exports=u()},function(t,e,n){"use strict";t.exports=n(78)},function(t,e,n){"use strict";t.exports=n(46)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});class s extends Error{constructor(t){super(t)}static forNull(t){return new s("[".concat(t.name,"] Null value"))}static forIllegalState(t,e){return new s("[".concat(t.name,"] Illegal state: ").concat(e))}static forIllegalArgument(t,e,n){return new s("[".concat(t.name,"] Illegal argument: ").concat(e," (").concat(n,")"))}static forInvalid(t,e,n){return new s("[".concat(t.name,"] Invalid value: ").concat(e)+(null==n?"":"(".concat(n,")")))}}e.default=s},function(t,e,n){"use strict";function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}function i(t){var e=function(t,e){if("object"!=s(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=s(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==s(e)?e:e+""}function r(t,e,n){return(e=i(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,s)}return n}function a(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(Object(n),!0).forEach((function(e){r(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}n.d(e,"a",(function(){return a}))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=n(7);class i{constructor(t,e){if(this.value=t,this.exception=e,null==t==(null==e))throw new s.default("Value and exception cannot both be initialized or both be null.")}static getDefaultException(){return new Error}static empty(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.getDefaultException();return i.ofNullable(null,t)}filter(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t=>i.getDefaultException();return this.isPresent()?t(this.value)?this:i.ofNullable(null,e instanceof Error?e:e(this.value)):this}flatMap(t){return this.isPresent()?t(this.get()):i.empty()}get(){if(!this.isPresent())throw this.exception;return this.value}ifPresent(t){this.isPresent()&&t(this.value)}isPresent(){return null!=this.value}map(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t=>i.getDefaultException();if(!this.isPresent())return i.empty(e instanceof Error?e:e(this.value));const n=t(this.value);return i.ofNullable(n,null==n?e instanceof Error?e:e(this.value):null)}static of(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.getDefaultException();if(null==t)throw e;return new i(t,null)}static ofNullable(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.getDefaultException();return new i(t,null==t?e:null)}orElse(t){return this.isPresent()?this.value:t}orElseGet(t){return this.isPresent()?this.value:t()}orElseThrow(t){if(!this.isPresent())throw t();return this.value}getException(){return this.exception}withException(t){return this.isPresent()?this:i.empty(t)}}e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=class{static add(t,e){return t+e}static compare(t,e){return t<e?-1:t==e?0:1}static floorMod(t,e){return(t%e+e)%e}static rotate(t,e){for(;e-- >0;)t.push(t.shift())}static clamp(t,e,n){if(e<t)throw new Error("max should not be less than min");return Math.max(t,Math.min(e,n))}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});class s extends Error{constructor(t){super('This is an unexpected error. The likely causes are:\n  - passed in an unexpected type to a method call\n  - forgot to call Exceptional#get\nIf you are sure that the error is not on your side, please submit a bug report with the relevant code and the following message: "'.concat(t,'"'))}}e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=n(5);class i{constructor(t,e){this.t=t,this.exception=e,this.objects=[]}isInvalid(){return null!=this.exception}static of(t){return new i(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null)}map(t){return this.isInvalid()?i.of(null,this.exception):i.of(t(this.t))}filter(t,e){return this.isInvalid()||t(this.t)?this:i.of(this.t,e)}parse(t){if(this.isInvalid())return this;const e=t(this.t);return e.isPresent()?(this.objects.push(e.get()),this):i.of(this.t,e.getException())}get(t){return this.isInvalid()?s.default.empty(this.exception):s.default.of(t(this.objects))}}e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=n(3),i=n(12),r=n(34),o=n(5),a=n(6),l=n(13);class u{constructor(t){this.offset=t,++u.size,u._values.push(this)}static values(){return u._values.slice()}ordinal(){return u._values.indexOf(this)}static valueOf(t){const e=u[t];if(e instanceof u)return e;throw s.default.forInvalid(u,t)}getOffset(){return this.offset}static getLetters(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l.default.DEFAULT,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u.A;if(t instanceof u){if(1!==arguments.length)throw s.default.forIllegalArgument(u,t,"Invalid number of arguments");e=t,t=l.default.DEFAULT}const n=u._values.slice();return t===l.default.DESCENDING&&n.reverse(),a.default.rotate(n,n.indexOf(e)),n}static stream(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l.default.DEFAULT,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u.A;if(t instanceof u){if(1!==arguments.length)throw s.default.forIllegalArgument(u,t,"Invalid number of arguments");e=t,t=l.default.DEFAULT}return r.default.of(u.getLetters(t,e))}static iterator(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l.default.DEFAULT,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u.A;if(t instanceof u){if(1!==arguments.length)throw s.default.forIllegalArgument(u,t,"Invalid number of arguments");e=t,t=l.default.DEFAULT}return i.default.of(u.getLetters(t,e))}static isValid(t){const e=t.toUpperCase().charCodeAt(0);return e>="A".charCodeAt(0)&&e<="G".charCodeAt(0)}static fromChar(t){return o.default.of(t).filter(u.isValid,s.default.forInvalid(u,t)).map((t=>u._values[t.toUpperCase().charCodeAt(0)-"A".charCodeAt(0)]))}toString(){return Object.keys(u).find((t=>u[t]===this))}}u.size=0,u._values=[],u.A=new u(9),u.B=new u(11),u.C=new u(0),u.D=new u(2),u.E=new u(4),u.F=new u(5),u.G=new u(7),e.default=u},function(t,e,n){var s;!function(){"use strict";function n(){if(n.prototype._singleton)throw new Error("WebMidi is a singleton, it cannot be instantiated directly.");(n.prototype._singleton=this)._inputs=[],this._outputs=[],this._userHandlers={},this._stateChangeQueue=[],this._processingStateChange=!1,this._midiInterfaceEvents=["connected","disconnected"],this._nrpnBuffer=[[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]],this._nrpnEventsEnabled=!0,this._nrpnTypes=["entry","increment","decrement"],this._notes=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],this._semitones={C:0,D:2,E:4,F:5,G:7,A:9,B:11},Object.defineProperties(this,{MIDI_SYSTEM_MESSAGES:{value:{sysex:240,timecode:241,songposition:242,songselect:243,tuningrequest:246,sysexend:247,clock:248,start:250,continue:251,stop:252,activesensing:254,reset:255,midimessage:0,unknownsystemmessage:-1},writable:!1,enumerable:!0,configurable:!1},MIDI_CHANNEL_MESSAGES:{value:{noteoff:8,noteon:9,keyaftertouch:10,controlchange:11,channelmode:11,nrpn:11,programchange:12,channelaftertouch:13,pitchbend:14},writable:!1,enumerable:!0,configurable:!1},MIDI_REGISTERED_PARAMETER:{value:{pitchbendrange:[0,0],channelfinetuning:[0,1],channelcoarsetuning:[0,2],tuningprogram:[0,3],tuningbank:[0,4],modulationrange:[0,5],azimuthangle:[61,0],elevationangle:[61,1],gain:[61,2],distanceratio:[61,3],maximumdistance:[61,4],maximumdistancegain:[61,5],referencedistanceratio:[61,6],panspreadangle:[61,7],rollangle:[61,8]},writable:!1,enumerable:!0,configurable:!1},MIDI_CONTROL_CHANGE_MESSAGES:{value:{bankselectcoarse:0,modulationwheelcoarse:1,breathcontrollercoarse:2,footcontrollercoarse:4,portamentotimecoarse:5,dataentrycoarse:6,volumecoarse:7,balancecoarse:8,pancoarse:10,expressioncoarse:11,effectcontrol1coarse:12,effectcontrol2coarse:13,generalpurposeslider1:16,generalpurposeslider2:17,generalpurposeslider3:18,generalpurposeslider4:19,bankselectfine:32,modulationwheelfine:33,breathcontrollerfine:34,footcontrollerfine:36,portamentotimefine:37,dataentryfine:38,volumefine:39,balancefine:40,panfine:42,expressionfine:43,effectcontrol1fine:44,effectcontrol2fine:45,holdpedal:64,portamento:65,sustenutopedal:66,softpedal:67,legatopedal:68,hold2pedal:69,soundvariation:70,resonance:71,soundreleasetime:72,soundattacktime:73,brightness:74,soundcontrol6:75,soundcontrol7:76,soundcontrol8:77,soundcontrol9:78,soundcontrol10:79,generalpurposebutton1:80,generalpurposebutton2:81,generalpurposebutton3:82,generalpurposebutton4:83,reverblevel:91,tremololevel:92,choruslevel:93,celestelevel:94,phaserlevel:95,databuttonincrement:96,databuttondecrement:97,nonregisteredparametercoarse:98,nonregisteredparameterfine:99,registeredparametercoarse:100,registeredparameterfine:101},writable:!1,enumerable:!0,configurable:!1},MIDI_NRPN_MESSAGES:{value:{entrymsb:6,entrylsb:38,increment:96,decrement:97,paramlsb:98,parammsb:99,nullactiveparameter:127},writable:!1,enumerable:!0,configurable:!1},MIDI_CHANNEL_MODE_MESSAGES:{value:{allsoundoff:120,resetallcontrollers:121,localcontrol:122,allnotesoff:123,omnimodeoff:124,omnimodeon:125,monomodeon:126,polymodeon:127},writable:!1,enumerable:!0,configurable:!1},octaveOffset:{value:0,writable:!0,enumerable:!0,configurable:!1}}),Object.defineProperties(this,{supported:{enumerable:!0,get:function(){return"requestMIDIAccess"in navigator}},enabled:{enumerable:!0,get:function(){return void 0!==this.interface}.bind(this)},inputs:{enumerable:!0,get:function(){return this._inputs}.bind(this)},outputs:{enumerable:!0,get:function(){return this._outputs}.bind(this)},sysexEnabled:{enumerable:!0,get:function(){return!(!this.interface||!this.interface.sysexEnabled)}.bind(this)},nrpnEventsEnabled:{enumerable:!0,get:function(){return!!this._nrpnEventsEnabled}.bind(this),set:function(t){return this._nrpnEventsEnabled=t,this._nrpnEventsEnabled}},nrpnTypes:{enumerable:!0,get:function(){return this._nrpnTypes}.bind(this)},time:{enumerable:!0,get:function(){return performance.now()}}})}var i=new n;function r(t){var e=this;this._userHandlers={channel:{},system:{}},this._midiInput=t,Object.defineProperties(this,{connection:{enumerable:!0,get:function(){return e._midiInput.connection}},id:{enumerable:!0,get:function(){return e._midiInput.id}},manufacturer:{enumerable:!0,get:function(){return e._midiInput.manufacturer}},name:{enumerable:!0,get:function(){return e._midiInput.name}},state:{enumerable:!0,get:function(){return e._midiInput.state}},type:{enumerable:!0,get:function(){return e._midiInput.type}}}),this._initializeUserHandlers(),this._midiInput.onmidimessage=this._onMidiMessage.bind(this)}function o(t){var e=this;this._midiOutput=t,Object.defineProperties(this,{connection:{enumerable:!0,get:function(){return e._midiOutput.connection}},id:{enumerable:!0,get:function(){return e._midiOutput.id}},manufacturer:{enumerable:!0,get:function(){return e._midiOutput.manufacturer}},name:{enumerable:!0,get:function(){return e._midiOutput.name}},state:{enumerable:!0,get:function(){return e._midiOutput.state}},type:{enumerable:!0,get:function(){return e._midiOutput.type}}})}n.prototype.enable=function(t,e){this.enabled||(this.supported?navigator.requestMIDIAccess({sysex:e}).then(function(e){var n,s=[],i=[];this.interface=e,this._resetInterfaceUserHandlers(),this.interface.onstatechange=function(t){s.push(t)};for(var r=e.inputs.values(),o=r.next();o&&!o.done;o=r.next())i.push(o.value.open());for(var a=e.outputs.values(),l=a.next();l&&!l.done;l=a.next())i.push(l.value.open());function u(){clearTimeout(n),this._updateInputsAndOutputs(),this.interface.onstatechange=this._onInterfaceStateChange.bind(this),"function"==typeof t&&t.call(this),s.forEach(function(t){this._onInterfaceStateChange(t)}.bind(this))}n=setTimeout(u.bind(this),200),Promise&&Promise.all(i).catch((function(t){})).then(u.bind(this))}.bind(this),function(e){"function"==typeof t&&t.call(this,e)}.bind(this)):"function"==typeof t&&t(new Error("The Web MIDI API is not supported by your browser.")))},n.prototype.disable=function(){if(!this.supported)throw new Error("The Web MIDI API is not supported by your browser.");this.enabled&&(this.removeListener(),this.inputs.forEach((function(t){t.removeListener()}))),this.interface&&(this.interface.onstatechange=void 0),this.interface=void 0,this._inputs=[],this._outputs=[],this._nrpnEventsEnabled=!0,this._resetInterfaceUserHandlers()},n.prototype.addListener=function(t,e){if(!this.enabled)throw new Error("WebMidi must be enabled before adding event listeners.");if("function"!=typeof e)throw new TypeError("The 'listener' parameter must be a function.");if(!(0<=this._midiInterfaceEvents.indexOf(t)))throw new TypeError("The specified event type is not supported.");return this._userHandlers[t].push(e),this},n.prototype.hasListener=function(t,e){if(!this.enabled)throw new Error("WebMidi must be enabled before checking event listeners.");if("function"!=typeof e)throw new TypeError("The 'listener' parameter must be a function.");if(!(0<=this._midiInterfaceEvents.indexOf(t)))throw new TypeError("The specified event type is not supported.");for(var n=0;n<this._userHandlers[t].length;n++)if(this._userHandlers[t][n]===e)return!0;return!1},n.prototype.removeListener=function(t,e){if(!this.enabled)throw new Error("WebMidi must be enabled before removing event listeners.");if(void 0!==e&&"function"!=typeof e)throw new TypeError("The 'listener' parameter must be a function.");if(0<=this._midiInterfaceEvents.indexOf(t))if(e)for(var n=0;n<this._userHandlers[t].length;n++)this._userHandlers[t][n]===e&&this._userHandlers[t].splice(n,1);else this._userHandlers[t]=[];else{if(void 0!==t)throw new TypeError("The specified event type is not supported.");this._resetInterfaceUserHandlers()}return this},n.prototype.toMIDIChannels=function(t){var e;if("all"===t||void 0===t)e=["all"];else{if("none"===t)return[];e=Array.isArray(t)?t:[t]}return-1<e.indexOf("all")&&(e=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]),e.map((function(t){return parseInt(t)})).filter((function(t){return 1<=t&&t<=16}))},n.prototype.getInputById=function(t){if(!this.enabled)throw new Error("WebMidi is not enabled.");t=String(t);for(var e=0;e<this.inputs.length;e++)if(this.inputs[e].id===t)return this.inputs[e];return!1},n.prototype.getOutputById=function(t){if(!this.enabled)throw new Error("WebMidi is not enabled.");t=String(t);for(var e=0;e<this.outputs.length;e++)if(this.outputs[e].id===t)return this.outputs[e];return!1},n.prototype.getInputByName=function(t){if(!this.enabled)throw new Error("WebMidi is not enabled.");for(var e=0;e<this.inputs.length;e++)if(~this.inputs[e].name.indexOf(t))return this.inputs[e];return!1},n.prototype.getOctave=function(t){if(null!=t&&0<=t&&t<=127)return Math.floor(Math.floor(t)/12-1)+Math.floor(i.octaveOffset)},n.prototype.getOutputByName=function(t){if(!this.enabled)throw new Error("WebMidi is not enabled.");for(var e=0;e<this.outputs.length;e++)if(~this.outputs[e].name.indexOf(t))return this.outputs[e];return!1},n.prototype.guessNoteNumber=function(t){var e=!1;if(t&&t.toFixed&&0<=t&&t<=127?e=Math.round(t):0<=parseInt(t)&&parseInt(t)<=127?e=parseInt(t):("string"==typeof t||t instanceof String)&&(e=this.noteNameToNumber(t)),!1===e)throw new Error("Invalid input value ("+t+").");return e},n.prototype.noteNameToNumber=function(t){"string"!=typeof t&&(t="");var e=t.match(/([CDEFGAB])(#{0,2}|b{0,2})(-?\d+)/i);if(!e)throw new RangeError("Invalid note name.");var n=i._semitones[e[1].toUpperCase()],s=12*(parseInt(e[3])+1-Math.floor(i.octaveOffset))+n;if(-1<e[2].toLowerCase().indexOf("b")?s-=e[2].length:-1<e[2].toLowerCase().indexOf("#")&&(s+=e[2].length),s<0||127<s)throw new RangeError("Invalid note name or note outside valid range.");return s},n.prototype._updateInputsAndOutputs=function(){this._updateInputs(),this._updateOutputs()},n.prototype._updateInputs=function(){for(var t=0;t<this._inputs.length;t++){for(var e=!0,n=this.interface.inputs.values(),s=n.next();s&&!s.done;s=n.next())if(this._inputs[t]._midiInput===s.value){e=!1;break}e&&this._inputs.splice(t,1)}this.interface&&this.interface.inputs.forEach(function(t){for(var e=!0,n=0;n<this._inputs.length;n++)this._inputs[n]._midiInput===t&&(e=!1);e&&this._inputs.push(new r(t))}.bind(this))},n.prototype._updateOutputs=function(){for(var t=0;t<this._outputs.length;t++){for(var e=!0,n=this.interface.outputs.values(),s=n.next();s&&!s.done;s=n.next())if(this._outputs[t]._midiOutput===s.value){e=!1;break}e&&this._outputs.splice(t,1)}this.interface&&this.interface.outputs.forEach(function(t){for(var e=!0,n=0;n<this._outputs.length;n++)this._outputs[n]._midiOutput===t&&(e=!1);e&&this._outputs.push(new o(t))}.bind(this))},n.prototype._onInterfaceStateChange=function(t){this._updateInputsAndOutputs();var e={timestamp:t.timeStamp,type:t.port.state};this.interface&&"connected"===t.port.state?"output"===t.port.type?e.port=this.getOutputById(t.port.id):"input"===t.port.type&&(e.port=this.getInputById(t.port.id)):e.port={connection:"closed",id:t.port.id,manufacturer:t.port.manufacturer,name:t.port.name,state:t.port.state,type:t.port.type},this._userHandlers[t.port.state].forEach((function(t){t(e)}))},n.prototype._resetInterfaceUserHandlers=function(){for(var t=0;t<this._midiInterfaceEvents.length;t++)this._userHandlers[this._midiInterfaceEvents[t]]=[]},r.prototype.on=r.prototype.addListener=function(t,e,n){var s=this;if(void 0===e&&(e="all"),Array.isArray(e)||(e=[e]),e.forEach((function(t){if("all"!==t&&!(1<=t&&t<=16))throw new RangeError("The 'channel' parameter is invalid.")})),"function"!=typeof n)throw new TypeError("The 'listener' parameter must be a function.");if(void 0!==i.MIDI_SYSTEM_MESSAGES[t])this._userHandlers.system[t]||(this._userHandlers.system[t]=[]),this._userHandlers.system[t].push(n);else{if(void 0===i.MIDI_CHANNEL_MESSAGES[t])throw new TypeError("The specified event type is not supported.");if(-1<e.indexOf("all")){e=[];for(var r=1;r<=16;r++)e.push(r)}this._userHandlers.channel[t]||(this._userHandlers.channel[t]=[]),e.forEach((function(e){s._userHandlers.channel[t][e]||(s._userHandlers.channel[t][e]=[]),s._userHandlers.channel[t][e].push(n)}))}return this},r.prototype.hasListener=function(t,e,n){var s=this;if("function"!=typeof n)throw new TypeError("The 'listener' parameter must be a function.");if(void 0===e&&(e="all"),e.constructor!==Array&&(e=[e]),void 0!==i.MIDI_SYSTEM_MESSAGES[t]){for(var r=0;r<this._userHandlers.system[t].length;r++)if(this._userHandlers.system[t][r]===n)return!0}else if(void 0!==i.MIDI_CHANNEL_MESSAGES[t]){if(-1<e.indexOf("all")){e=[];for(var o=1;o<=16;o++)e.push(o)}return!!this._userHandlers.channel[t]&&e.every((function(e){var i=s._userHandlers.channel[t][e];return i&&-1<i.indexOf(n)}))}return!1},r.prototype.removeListener=function(t,e,n){var s=this;if(void 0!==n&&"function"!=typeof n)throw new TypeError("The 'listener' parameter must be a function.");if(void 0===e&&(e="all"),e.constructor!==Array&&(e=[e]),void 0!==i.MIDI_SYSTEM_MESSAGES[t])if(void 0===n)this._userHandlers.system[t]=[];else for(var r=0;r<this._userHandlers.system[t].length;r++)this._userHandlers.system[t][r]===n&&this._userHandlers.system[t].splice(r,1);else if(void 0!==i.MIDI_CHANNEL_MESSAGES[t]){if(-1<e.indexOf("all")){e=[];for(var o=1;o<=16;o++)e.push(o)}if(!this._userHandlers.channel[t])return this;e.forEach((function(e){var i=s._userHandlers.channel[t][e];if(i)if(void 0===n)s._userHandlers.channel[t][e]=[];else for(var r=0;r<i.length;r++)i[r]===n&&i.splice(r,1)}))}else{if(void 0!==t)throw new TypeError("The specified event type is not supported.");this._initializeUserHandlers()}return this},r.prototype._initializeUserHandlers=function(){for(var t in i.MIDI_CHANNEL_MESSAGES)Object.prototype.hasOwnProperty.call(i.MIDI_CHANNEL_MESSAGES,t)&&(this._userHandlers.channel[t]={});for(var e in i.MIDI_SYSTEM_MESSAGES)Object.prototype.hasOwnProperty.call(i.MIDI_SYSTEM_MESSAGES,e)&&(this._userHandlers.system[e]=[])},r.prototype._onMidiMessage=function(t){if(0<this._userHandlers.system.midimessage.length){var e={target:this,data:t.data,timestamp:t.timeStamp,type:"midimessage"};this._userHandlers.system.midimessage.forEach((function(t){t(e)}))}t.data[0]<240?(this._parseChannelEvent(t),this._parseNrpnEvent(t)):t.data[0]<=255&&this._parseSystemEvent(t)},r.prototype._parseNrpnEvent=function(t){var e,n,s=t.data[0]>>4,r=15&t.data[0],o=1+r;if(1<t.data.length&&(e=t.data[1],n=2<t.data.length?t.data[2]:void 0),i.nrpnEventsEnabled&&s===i.MIDI_CHANNEL_MESSAGES.controlchange&&(e>=i.MIDI_NRPN_MESSAGES.increment&&e<=i.MIDI_NRPN_MESSAGES.parammsb||e===i.MIDI_NRPN_MESSAGES.entrymsb||e===i.MIDI_NRPN_MESSAGES.entrylsb)){var a={target:this,type:"controlchange",data:t.data,timestamp:t.timeStamp,channel:o,controller:{number:e,name:this.getCcNameByNumber(e)},value:n};if(a.controller.number===i.MIDI_NRPN_MESSAGES.parammsb&&a.value!=i.MIDI_NRPN_MESSAGES.nullactiveparameter)i._nrpnBuffer[r]=[],i._nrpnBuffer[r][0]=a;else if(1===i._nrpnBuffer[r].length&&a.controller.number===i.MIDI_NRPN_MESSAGES.paramlsb)i._nrpnBuffer[r].push(a);else if(2!==i._nrpnBuffer[r].length||a.controller.number!==i.MIDI_NRPN_MESSAGES.increment&&a.controller.number!==i.MIDI_NRPN_MESSAGES.decrement&&a.controller.number!==i.MIDI_NRPN_MESSAGES.entrymsb)if(3===i._nrpnBuffer[r].length&&i._nrpnBuffer[r][2].number===i.MIDI_NRPN_MESSAGES.entrymsb&&a.controller.number===i.MIDI_NRPN_MESSAGES.entrylsb)i._nrpnBuffer[r].push(a);else if(3<=i._nrpnBuffer[r].length&&i._nrpnBuffer[r].length<=4&&a.controller.number===i.MIDI_NRPN_MESSAGES.parammsb&&a.value===i.MIDI_NRPN_MESSAGES.nullactiveparameter)i._nrpnBuffer[r].push(a);else if(4<=i._nrpnBuffer[r].length&&i._nrpnBuffer[r].length<=5&&a.controller.number===i.MIDI_NRPN_MESSAGES.paramlsb&&a.value===i.MIDI_NRPN_MESSAGES.nullactiveparameter){i._nrpnBuffer[r].push(a);var l=[];i._nrpnBuffer[r].forEach((function(t){l.push(t.data)}));var u=i._nrpnBuffer[r][0].value<<7|i._nrpnBuffer[r][1].value,c=i._nrpnBuffer[r][2].value;6===i._nrpnBuffer[r].length&&(c=i._nrpnBuffer[r][2].value<<7|i._nrpnBuffer[r][3].value);var h="";switch(i._nrpnBuffer[r][2].controller.number){case i.MIDI_NRPN_MESSAGES.entrymsb:h=i._nrpnTypes[0];break;case i.MIDI_NRPN_MESSAGES.increment:h=i._nrpnTypes[1];break;case i.MIDI_NRPN_MESSAGES.decrement:h=i._nrpnTypes[2];break;default:throw new Error("The NPRN type was unidentifiable.")}var d={timestamp:a.timestamp,channel:a.channel,type:"nrpn",data:l,controller:{number:u,type:h,name:"Non-Registered Parameter "+u},value:c};i._nrpnBuffer[r]=[],this._userHandlers.channel[d.type]&&this._userHandlers.channel[d.type][d.channel]&&this._userHandlers.channel[d.type][d.channel].forEach((function(t){t(d)}))}else i._nrpnBuffer[r]=[];else i._nrpnBuffer[r].push(a)}},r.prototype._parseChannelEvent=function(t){var e,n,s=t.data[0]>>4,r=1+(15&t.data[0]);1<t.data.length&&(e=t.data[1],n=2<t.data.length?t.data[2]:void 0);var o={target:this,data:t.data,timestamp:t.timeStamp,channel:r};s===i.MIDI_CHANNEL_MESSAGES.noteoff||s===i.MIDI_CHANNEL_MESSAGES.noteon&&0===n?(o.type="noteoff",o.note={number:e,name:i._notes[e%12],octave:i.getOctave(e)},o.velocity=n/127,o.rawVelocity=n):s===i.MIDI_CHANNEL_MESSAGES.noteon?(o.type="noteon",o.note={number:e,name:i._notes[e%12],octave:i.getOctave(e)},o.velocity=n/127,o.rawVelocity=n):s===i.MIDI_CHANNEL_MESSAGES.keyaftertouch?(o.type="keyaftertouch",o.note={number:e,name:i._notes[e%12],octave:i.getOctave(e)},o.value=n/127):s===i.MIDI_CHANNEL_MESSAGES.controlchange&&0<=e&&e<=119?(o.type="controlchange",o.controller={number:e,name:this.getCcNameByNumber(e)},o.value=n):s===i.MIDI_CHANNEL_MESSAGES.channelmode&&120<=e&&e<=127?(o.type="channelmode",o.controller={number:e,name:this.getChannelModeByNumber(e)},o.value=n):s===i.MIDI_CHANNEL_MESSAGES.programchange?(o.type="programchange",o.value=e):s===i.MIDI_CHANNEL_MESSAGES.channelaftertouch?(o.type="channelaftertouch",o.value=e/127):s===i.MIDI_CHANNEL_MESSAGES.pitchbend?(o.type="pitchbend",o.value=((n<<7)+e-8192)/8192):o.type="unknownchannelmessage",this._userHandlers.channel[o.type]&&this._userHandlers.channel[o.type][r]&&this._userHandlers.channel[o.type][r].forEach((function(t){t(o)}))},r.prototype.getCcNameByNumber=function(t){if(!(0<=(t=Math.floor(t))&&t<=119))throw new RangeError("The control change number must be between 0 and 119.");for(var e in i.MIDI_CONTROL_CHANGE_MESSAGES)if(Object.prototype.hasOwnProperty.call(i.MIDI_CONTROL_CHANGE_MESSAGES,e)&&t===i.MIDI_CONTROL_CHANGE_MESSAGES[e])return e},r.prototype.getChannelModeByNumber=function(t){if(!(120<=(t=Math.floor(t))&&status<=127))throw new RangeError("The control change number must be between 120 and 127.");for(var e in i.MIDI_CHANNEL_MODE_MESSAGES)if(Object.prototype.hasOwnProperty.call(i.MIDI_CHANNEL_MODE_MESSAGES,e)&&t===i.MIDI_CHANNEL_MODE_MESSAGES[e])return e},r.prototype._parseSystemEvent=function(t){var e=t.data[0],n={target:this,data:t.data,timestamp:t.timeStamp};e===i.MIDI_SYSTEM_MESSAGES.sysex?n.type="sysex":e===i.MIDI_SYSTEM_MESSAGES.timecode?n.type="timecode":e===i.MIDI_SYSTEM_MESSAGES.songposition?n.type="songposition":e===i.MIDI_SYSTEM_MESSAGES.songselect?(n.type="songselect",n.song=t.data[1]):e===i.MIDI_SYSTEM_MESSAGES.tuningrequest?n.type="tuningrequest":e===i.MIDI_SYSTEM_MESSAGES.clock?n.type="clock":e===i.MIDI_SYSTEM_MESSAGES.start?n.type="start":e===i.MIDI_SYSTEM_MESSAGES.continue?n.type="continue":e===i.MIDI_SYSTEM_MESSAGES.stop?n.type="stop":e===i.MIDI_SYSTEM_MESSAGES.activesensing?n.type="activesensing":e===i.MIDI_SYSTEM_MESSAGES.reset?n.type="reset":n.type="unknownsystemmessage",this._userHandlers.system[n.type]&&this._userHandlers.system[n.type].forEach((function(t){t(n)}))},o.prototype.send=function(t,e,n){if(!(128<=t&&t<=255))throw new RangeError("The status byte must be an integer between 128 (0x80) and 255 (0xFF).");void 0===e&&(e=[]),Array.isArray(e)||(e=[e]);var s=[];return e.forEach((function(t){var e=Math.floor(t);if(!(0<=e&&e<=255))throw new RangeError("Data bytes must be integers between 0 (0x00) and 255 (0xFF).");s.push(e)})),this._midiOutput.send([t].concat(s),parseFloat(n)||0),this},o.prototype.sendSysex=function(t,e,n){if(!i.sysexEnabled)throw new Error("Sysex message support must first be activated.");return n=n||{},t=[].concat(t),e.forEach((function(t){if(t<0||127<t)throw new RangeError("The data bytes of a sysex message must be integers between 0 (0x00) and 127 (0x7F).")})),e=t.concat(e,i.MIDI_SYSTEM_MESSAGES.sysexend),this.send(i.MIDI_SYSTEM_MESSAGES.sysex,e,this._parseTimeParameter(n.time)),this},o.prototype.sendTimecodeQuarterFrame=function(t,e){return e=e||{},this.send(i.MIDI_SYSTEM_MESSAGES.timecode,t,this._parseTimeParameter(e.time)),this},o.prototype.sendSongPosition=function(t,e){e=e||{};var n=(t=Math.floor(t)||0)>>7&127,s=127&t;return this.send(i.MIDI_SYSTEM_MESSAGES.songposition,[n,s],this._parseTimeParameter(e.time)),this},o.prototype.sendSongSelect=function(t,e){if(e=e||{},!(0<=(t=Math.floor(t))&&t<=127))throw new RangeError("The song number must be between 0 and 127.");return this.send(i.MIDI_SYSTEM_MESSAGES.songselect,[t],this._parseTimeParameter(e.time)),this},o.prototype.sendTuningRequest=function(t){return t=t||{},this.send(i.MIDI_SYSTEM_MESSAGES.tuningrequest,void 0,this._parseTimeParameter(t.time)),this},o.prototype.sendClock=function(t){return t=t||{},this.send(i.MIDI_SYSTEM_MESSAGES.clock,void 0,this._parseTimeParameter(t.time)),this},o.prototype.sendStart=function(t){return t=t||{},this.send(i.MIDI_SYSTEM_MESSAGES.start,void 0,this._parseTimeParameter(t.time)),this},o.prototype.sendContinue=function(t){return t=t||{},this.send(i.MIDI_SYSTEM_MESSAGES.continue,void 0,this._parseTimeParameter(t.time)),this},o.prototype.sendStop=function(t){return t=t||{},this.send(i.MIDI_SYSTEM_MESSAGES.stop,void 0,this._parseTimeParameter(t.time)),this},o.prototype.sendActiveSensing=function(t){return t=t||{},this.send(i.MIDI_SYSTEM_MESSAGES.activesensing,[],this._parseTimeParameter(t.time)),this},o.prototype.sendReset=function(t){return t=t||{},this.send(i.MIDI_SYSTEM_MESSAGES.reset,void 0,this._parseTimeParameter(t.time)),this},o.prototype.stopNote=function(t,e,n){if("all"===t)return this.sendChannelMode("allnotesoff",0,e,n);var s=64;return(n=n||{}).rawVelocity?!isNaN(n.velocity)&&0<=n.velocity&&n.velocity<=127&&(s=n.velocity):!isNaN(n.velocity)&&0<=n.velocity&&n.velocity<=1&&(s=127*n.velocity),this._convertNoteToArray(t).forEach(function(t){i.toMIDIChannels(e).forEach(function(e){this.send((i.MIDI_CHANNEL_MESSAGES.noteoff<<4)+(e-1),[t,Math.round(s)],this._parseTimeParameter(n.time))}.bind(this))}.bind(this)),this},o.prototype.playNote=function(t,e,n){var s,r=64;if((n=n||{}).rawVelocity?!isNaN(n.velocity)&&0<=n.velocity&&n.velocity<=127&&(r=n.velocity):!isNaN(n.velocity)&&0<=n.velocity&&n.velocity<=1&&(r=127*n.velocity),s=this._parseTimeParameter(n.time),this._convertNoteToArray(t).forEach(function(t){i.toMIDIChannels(e).forEach(function(e){this.send((i.MIDI_CHANNEL_MESSAGES.noteon<<4)+(e-1),[t,Math.round(r)],s)}.bind(this))}.bind(this)),!isNaN(n.duration)){n.duration<=0&&(n.duration=0);var o=64;n.rawVelocity?!isNaN(n.release)&&0<=n.release&&n.release<=127&&(o=n.release):!isNaN(n.release)&&0<=n.release&&n.release<=1&&(o=127*n.release),this._convertNoteToArray(t).forEach(function(t){i.toMIDIChannels(e).forEach(function(e){this.send((i.MIDI_CHANNEL_MESSAGES.noteoff<<4)+(e-1),[t,Math.round(o)],(s||i.time)+n.duration)}.bind(this))}.bind(this))}return this},o.prototype.sendKeyAftertouch=function(t,e,n,s){var r=this;if(s=s||{},e<1||16<e)throw new RangeError("The channel must be between 1 and 16.");(isNaN(n)||n<0||1<n)&&(n=.5);var o=Math.round(127*n);return this._convertNoteToArray(t).forEach((function(t){i.toMIDIChannels(e).forEach((function(e){r.send((i.MIDI_CHANNEL_MESSAGES.keyaftertouch<<4)+(e-1),[t,o],r._parseTimeParameter(s.time))}))})),this},o.prototype.sendControlChange=function(t,e,n,s){if(s=s||{},"string"==typeof t){if(void 0===(t=i.MIDI_CONTROL_CHANGE_MESSAGES[t]))throw new TypeError("Invalid controller name.")}else if(!(0<=(t=Math.floor(t))&&t<=119))throw new RangeError("Controller numbers must be between 0 and 119.");if(!(0<=(e=Math.floor(e)||0)&&e<=127))throw new RangeError("Controller value must be between 0 and 127.");return i.toMIDIChannels(n).forEach(function(n){this.send((i.MIDI_CHANNEL_MESSAGES.controlchange<<4)+(n-1),[t,e],this._parseTimeParameter(s.time))}.bind(this)),this},o.prototype._selectRegisteredParameter=function(t,e,n){var s=this;if(t[0]=Math.floor(t[0]),!(0<=t[0]&&t[0]<=127))throw new RangeError("The control65 value must be between 0 and 127");if(t[1]=Math.floor(t[1]),!(0<=t[1]&&t[1]<=127))throw new RangeError("The control64 value must be between 0 and 127");return i.toMIDIChannels(e).forEach((function(){s.sendControlChange(101,t[0],e,{time:n}),s.sendControlChange(100,t[1],e,{time:n})})),this},o.prototype._selectNonRegisteredParameter=function(t,e,n){var s=this;if(t[0]=Math.floor(t[0]),!(0<=t[0]&&t[0]<=127))throw new RangeError("The control63 value must be between 0 and 127");if(t[1]=Math.floor(t[1]),!(0<=t[1]&&t[1]<=127))throw new RangeError("The control62 value must be between 0 and 127");return i.toMIDIChannels(e).forEach((function(){s.sendControlChange(99,t[0],e,{time:n}),s.sendControlChange(98,t[1],e,{time:n})})),this},o.prototype._setCurrentRegisteredParameter=function(t,e,n){var s=this;if((t=[].concat(t))[0]=Math.floor(t[0]),!(0<=t[0]&&t[0]<=127))throw new RangeError("The msb value must be between 0 and 127");return i.toMIDIChannels(e).forEach((function(){s.sendControlChange(6,t[0],e,{time:n})})),t[1]=Math.floor(t[1]),0<=t[1]&&t[1]<=127&&i.toMIDIChannels(e).forEach((function(){s.sendControlChange(38,t[1],e,{time:n})})),this},o.prototype._deselectRegisteredParameter=function(t,e){var n=this;return i.toMIDIChannels(t).forEach((function(){n.sendControlChange(101,127,t,{time:e}),n.sendControlChange(100,127,t,{time:e})})),this},o.prototype.setRegisteredParameter=function(t,e,n,s){var r=this;if(s=s||{},!Array.isArray(t)){if(!i.MIDI_REGISTERED_PARAMETER[t])throw new Error("The specified parameter is not available.");t=i.MIDI_REGISTERED_PARAMETER[t]}return i.toMIDIChannels(n).forEach((function(){r._selectRegisteredParameter(t,n,s.time),r._setCurrentRegisteredParameter(e,n,s.time),r._deselectRegisteredParameter(n,s.time)})),this},o.prototype.setNonRegisteredParameter=function(t,e,n,s){var r=this;if(s=s||{},!(0<=t[0]&&t[0]<=127&&0<=t[1]&&t[1]<=127))throw new Error("Position 0 and 1 of the 2-position parameter array must both be between 0 and 127.");return e=[].concat(e),i.toMIDIChannels(n).forEach((function(){r._selectNonRegisteredParameter(t,n,s.time),r._setCurrentRegisteredParameter(e,n,s.time),r._deselectRegisteredParameter(n,s.time)})),this},o.prototype.incrementRegisteredParameter=function(t,e,n){var s=this;if(n=n||{},!Array.isArray(t)){if(!i.MIDI_REGISTERED_PARAMETER[t])throw new Error("The specified parameter is not available.");t=i.MIDI_REGISTERED_PARAMETER[t]}return i.toMIDIChannels(e).forEach((function(){s._selectRegisteredParameter(t,e,n.time),s.sendControlChange(96,0,e,{time:n.time}),s._deselectRegisteredParameter(e,n.time)})),this},o.prototype.decrementRegisteredParameter=function(t,e,n){if(n=n||{},!Array.isArray(t)){if(!i.MIDI_REGISTERED_PARAMETER[t])throw new TypeError("The specified parameter is not available.");t=i.MIDI_REGISTERED_PARAMETER[t]}return i.toMIDIChannels(e).forEach(function(){this._selectRegisteredParameter(t,e,n.time),this.sendControlChange(97,0,e,{time:n.time}),this._deselectRegisteredParameter(e,n.time)}.bind(this)),this},o.prototype.setPitchBendRange=function(t,e,n,s){var r=this;if(s=s||{},!(0<=(t=Math.floor(t)||0)&&t<=127))throw new RangeError("The semitones value must be between 0 and 127");if(!(0<=(e=Math.floor(e)||0)&&e<=127))throw new RangeError("The cents value must be between 0 and 127");return i.toMIDIChannels(n).forEach((function(){r.setRegisteredParameter("pitchbendrange",[t,e],n,{time:s.time})})),this},o.prototype.setModulationRange=function(t,e,n,s){var r=this;if(s=s||{},!(0<=(t=Math.floor(t)||0)&&t<=127))throw new RangeError("The semitones value must be between 0 and 127");if(!(0<=(e=Math.floor(e)||0)&&e<=127))throw new RangeError("The cents value must be between 0 and 127");return i.toMIDIChannels(n).forEach((function(){r.setRegisteredParameter("modulationrange",[t,e],n,{time:s.time})})),this},o.prototype.setMasterTuning=function(t,e,n){var s=this;if(n=n||{},(t=parseFloat(t)||0)<=-65||64<=t)throw new RangeError("The value must be a decimal number larger than -65 and smaller than 64.");var r=Math.floor(t)+64,o=t-Math.floor(t),a=(o=Math.round((o+1)/2*16383))>>7&127,l=127&o;return i.toMIDIChannels(e).forEach((function(){s.setRegisteredParameter("channelcoarsetuning",r,e,{time:n.time}),s.setRegisteredParameter("channelfinetuning",[a,l],e,{time:n.time})})),this},o.prototype.setTuningProgram=function(t,e,n){var s=this;if(n=n||{},!(0<=(t=Math.floor(t))&&t<=127))throw new RangeError("The program value must be between 0 and 127");return i.toMIDIChannels(e).forEach((function(){s.setRegisteredParameter("tuningprogram",t,e,{time:n.time})})),this},o.prototype.setTuningBank=function(t,e,n){var s=this;if(n=n||{},!(0<=(t=Math.floor(t)||0)&&t<=127))throw new RangeError("The bank value must be between 0 and 127");return i.toMIDIChannels(e).forEach((function(){s.setRegisteredParameter("tuningbank",t,e,{time:n.time})})),this},o.prototype.sendChannelMode=function(t,e,n,s){if(s=s||{},"string"==typeof t){if(!(t=i.MIDI_CHANNEL_MODE_MESSAGES[t]))throw new TypeError("Invalid channel mode message name.")}else if(!(120<=(t=Math.floor(t))&&t<=127))throw new RangeError("Channel mode numerical identifiers must be between 120 and 127.");if((e=Math.floor(e)||0)<0||127<e)throw new RangeError("Value must be an integer between 0 and 127.");return i.toMIDIChannels(n).forEach(function(n){this.send((i.MIDI_CHANNEL_MESSAGES.channelmode<<4)+(n-1),[t,e],this._parseTimeParameter(s.time))}.bind(this)),this},o.prototype.sendProgramChange=function(t,e,n){var s=this;if(n=n||{},t=Math.floor(t),isNaN(t)||t<0||127<t)throw new RangeError("Program numbers must be between 0 and 127.");return i.toMIDIChannels(e).forEach((function(e){s.send((i.MIDI_CHANNEL_MESSAGES.programchange<<4)+(e-1),[t],s._parseTimeParameter(n.time))})),this},o.prototype.sendChannelAftertouch=function(t,e,n){var s=this;n=n||{},t=parseFloat(t),(isNaN(t)||t<0||1<t)&&(t=.5);var r=Math.round(127*t);return i.toMIDIChannels(e).forEach((function(t){s.send((i.MIDI_CHANNEL_MESSAGES.channelaftertouch<<4)+(t-1),[r],s._parseTimeParameter(n.time))})),this},o.prototype.sendPitchBend=function(t,e,n){var s=this;if(n=n||{},isNaN(t)||t<-1||1<t)throw new RangeError("Pitch bend value must be between -1 and 1.");var r=Math.round((t+1)/2*16383),o=r>>7&127,a=127&r;return i.toMIDIChannels(e).forEach((function(t){s.send((i.MIDI_CHANNEL_MESSAGES.pitchbend<<4)+(t-1),[a,o],s._parseTimeParameter(n.time))})),this},o.prototype._parseTimeParameter=function(t){var e,n=parseFloat(t);return"string"==typeof t&&"+"===t.substring(0,1)?n&&0<n&&(e=i.time+n):n>i.time&&(e=n),e},o.prototype._convertNoteToArray=function(t){var e=[];return Array.isArray(t)||(t=[t]),t.forEach((function(t){e.push(i.guessNoteNumber(t))})),e},void 0===(s=function(){return i}.apply(e,[]))||(t.exports=s)}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=n(7),i=n(3),r=n(8),o=n(5);class a{constructor(t,e){this.symbol=t,this.offset=e,++a.size,a._values.push(this)}static values(){return a._values.slice()}ordinal(){return a._values.indexOf(this)}static valueOf(t){const e=a[t];if(e instanceof a)return e;throw i.default.forInvalid(a,t)}static isValid(t){if("number"===typeof t){const e=t;return a.TRIPLE_FLAT.getOffset()<=e&&e<=a.TRIPLE_SHARP.getOffset()}if("string"===typeof t){const e=t;return a.values().map((t=>t.toString())).some((t=>0===e.localeCompare(t)))}throw new s.default("Should not have reached else statement.")}static fromOffset(t){return o.default.of(t).filter((t=>a.isValid(t)),i.default.forInvalid(a,t,"out of range")).map((t=>a.values()[t-a.TRIPLE_FLAT.getOffset()]))}getOffset(){return this.offset}static fromString(t){return r.default.of(t).filter((t=>null!=t),i.default.forNull(a)).parse((t=>{const e=a.values().find((e=>0===t.localeCompare(e.toString())));return o.default.ofNullable(e).withException(i.default.forInvalid(a,t))})).get((t=>t[0]))}toString(){return this.symbol}}a.size=0,a._values=[],a.TRIPLE_FLAT=new a("bbb",-3),a.DOUBLE_FLAT=new a("bb",-2),a.FLAT=new a("b",-1),a.NATURAL=new a("n",0),a.SHARP=new a("#",1),a.DOUBLE_SHARP=new a("x",2),a.TRIPLE_SHARP=new a("#x",3),e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=n(6);class i{constructor(t,e){this.values=t,this.i=e-this.getIncrementAmount()}static of(t){return new i(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0)}reverse(){const t=this.getIncrementAmount(),e=new i(this.values,this.i+this.getIncrementAmount());return e.getIncrementAmount=()=>-t,e}[Symbol.iterator](){return this}getValues(){return this.values}getCycleLength(){return this.values.length}getIncrementAmount(){return i.DEFAULT_INCREMENT_AMOUNT}increment(){this.i=s.default.floorMod(this.i+this.getIncrementAmount(),this.getCycleLength())}getCurrentValue(){return this.getValues()[this.i]}next(){return this.increment(),{value:this.getCurrentValue(),done:!1}}}i.DEFAULT_INCREMENT_AMOUNT=1,e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=n(3);class i{constructor(){++i.size,i._values.push(this)}static values(){return i._values.slice()}ordinal(){return i._values.indexOf(this)}static valueOf(t){const e=i[t];if(e instanceof i)return e;throw s.default.forInvalid(i,t)}toString(){return Object.keys(i).find((t=>i[t]===this))}}i.size=0,i._values=[],i.ASCENDING=new i,i.DESCENDING=new i,i.DEFAULT=i.ASCENDING,e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});class s{}s.KEYS_IN_OCTAVE=12,s.SMALLEST_PROGRAM_NUMBER=0,s.LARGEST_PROGRAM_NUMBER=127,e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=n(3),i=n(8),r=n(5),o=n(6),a=n(11),l=n(26),u=n(21),c=n(9),h=n(35),d=n(14),f=n(16);class p{constructor(t,e){this.key=t,this.octave=e;const n=this.getProgramNumber();if(n<d.default.SMALLEST_PROGRAM_NUMBER||n>d.default.LARGEST_PROGRAM_NUMBER)throw s.default.forInvalid(p,n,"out of program number range")}apply(t){const e=this.key.apply(t);return this.key===e?this:new p(e,this.octave)}step(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f.default.DEFAULT_PRIORITY;if(t instanceof l.default){if(1!==arguments.length)throw s.default.forIllegalArgument(c.default,t,"Invalid number of arguments");const e=t,n=c.default.getLetters(this.key.getLetter())[o.default.floorMod(e.getDistance()-1,c.default.size)];let i=new u.default(n).apply(h.default.fromKey(this.key,h.default.Quality.MAJOR)).getAccidental();const d=i.map((t=>t.getOffset())).orElse(0);switch(e.getQuality()){case l.default.Quality.PERFECT:case l.default.Quality.MAJOR:break;case l.default.Quality.MINOR:i=a.default.fromOffset(d-1);break;case l.default.Quality.DIMINISHED:i=a.default.fromOffset(d-(l.default.isPerfect(e.getDistance())?1:2));break;case l.default.Quality.DOUBLY_DIMINISHED:i=a.default.fromOffset(d-(l.default.isPerfect(e.getDistance())?2:3));break;case l.default.Quality.AUGMENTED:i=a.default.fromOffset(d+1);break;case l.default.Quality.DOUBLY_AUGMENTED:i=a.default.fromOffset(d+2)}i=i.filter((t=>t!==a.default.NATURAL));const f=Math.trunc((e.getDistance()-1+(o.default.floorMod(this.getKey().getLetter().ordinal()-2,c.default.size)-o.default.floorMod(n.ordinal()-2,c.default.size)))/c.default.size);return r.default.of(new p(new u.default(n,i),this.octave+f))}if("number"===typeof t)return p.fromProgramNumber(this.getProgramNumber()+t,e)}halfStepUp(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f.default.DEFAULT_PRIORITY;return p.fromProgramNumber(this.getProgramNumber()+1,t)}halfStepDown(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f.default.DEFAULT_PRIORITY;return p.fromProgramNumber(this.getProgramNumber()-1,t)}getHigherPitch(t){try{let e=new p(t,this.octave);for(;!e.isHigherThan(this);)e=new p(t,e.getOctave()+1);return r.default.of(e)}catch(e){return r.default.empty()}}getLowerPitch(t){try{let e=new p(t,this.octave);for(;!e.isLowerThan(this);)e=new p(t,e.getOctave()-1);return r.default.of(e)}catch(e){return r.default.empty()}}isHigherThan(t){return this.getProgramNumber()>t.getProgramNumber()}isLowerThan(t){return this.getProgramNumber()<t.getProgramNumber()}compareTo(t){return o.default.compare(this.getProgramNumber(),t.getProgramNumber())}static isEnharmonic(t,e){return t.getProgramNumber()===e.getProgramNumber()}static fromProgramNumber(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f.default.DEFAULT_PRIORITY;return i.default.of(t).filter((t=>d.default.SMALLEST_PROGRAM_NUMBER<=t&&t<=d.default.LARGEST_PROGRAM_NUMBER),s.default.forInvalid(p,t,"out of range")).parse((t=>{const n=u.default.fromOffset(o.default.floorMod(t,d.default.KEYS_IN_OCTAVE),e);if(!n.isPresent())return r.default.empty(n.getException());const s=n.get();let i=Math.trunc(t/d.default.KEYS_IN_OCTAVE);return i+=(s.getOffset()-(s.getLetter().getOffset()+s.getAccidental().map((t=>t.getOffset())).orElse(0)))/d.default.KEYS_IN_OCTAVE,r.default.of(new p(s,i))})).get((t=>t[0]))}getProgramNumber(){return this.octave*d.default.KEYS_IN_OCTAVE+this.key.getLetter().getOffset()+this.key.getAccidental().map((t=>t.getOffset())).orElse(0)}static fromString(t){return i.default.of(t).filter((t=>null!=t),s.default.forNull(p)).parse((t=>{const e=t.match(/^[a-zA-Z#]*/g)[0];return u.default.fromString(e)})).parse((e=>r.default.of(e.match("\\d+(?![^(]*\\))")[0],s.default.forInvalid(p,t,"doesn't contain a valid octave")).map(parseInt))).get((t=>new p(t[0],t[1]))).filter((e=>{const n=t.match(/\((\d+)/g);return null==n||e.getProgramNumber()==parseInt(n[0].substring(0))}),s.default.forInvalid(p,t,"program number doesn't match key and octave")).filter((e=>{let n=e.toString();return null==t.match(/\((\d+)/g)&&(n=n.substring(0,n.indexOf("("))),0===n.localeCompare(t)}),s.default.forInvalid(p,t))}toString(){return this.key.toString()+this.octave+"("+this.getProgramNumber()+")"}equals(t){if(!(t instanceof p))return!1;if(t===this)return!0;let e=t;return this.key.equals(e.getKey())&&this.octave===e.getOctave()}getKey(){return this.key}getOctave(){return this.octave}}e.default=p},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=n(20),i=n(11),r=n(21),o=n(9);var a;!function(t){function e(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return s.default.of(e)}function n(t){return e=>e.getAccidental().orElse(null)===t}t.prioritize=e,t.matchLetter=function(t){return e=>e.getLetter()===t},t.matchAccidental=n,t.matchKeySignature=function(t){const e=o.default.values().map((t=>new r.default(t))).map((e=>e.apply(t)));return t=>e[t.getLetter().ordinal()].equals(t)},t.NONE=n(null),t.NATURAL=n(i.default.NATURAL),t.NONE_OR_NATURAL=e=>t.NONE(e)||t.NATURAL(e),t.SHARP=n(i.default.SHARP),t.DOUBLE_SHARP=n(i.default.DOUBLE_SHARP),t.TRIPLE_SHARP=n(i.default.TRIPLE_SHARP),t.SHARPS=e=>t.SHARP(e)||t.DOUBLE_SHARP(e)||t.TRIPLE_SHARP(e),t.FLAT=n(i.default.FLAT),t.DOUBLE_FLAT=n(i.default.DOUBLE_FLAT),t.TRIPLE_FLAT=n(i.default.TRIPLE_FLAT),t.FLATS=e=>t.FLAT(e)||t.DOUBLE_FLAT(e)||t.TRIPLE_FLAT(e),t.DEFAULT_PRIORITY=e(t.NONE_OR_NATURAL,t.SHARP,t.FLAT)}(a||(a={})),e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});class s{constructor(t,e){this.initial=t,this.func=e,this.current=null,this.nextElement=t}static of(t,e){return new s(t,e)}[Symbol.iterator](){return this}reset(){this.current=null,this.nextElement=this.initial}hasNext(){try{return null==this.nextElement&&(this.nextElement=this.func(this.current)),null!=this.nextElement}catch(t){return!1}}next(){if(null==this.nextElement)throw new Error("No more elements");return this.current=this.nextElement,this.nextElement=null,{value:this.current,done:this.hasNext()}}}e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=n(32);e.default=class{static fromIterator(t){return s.default.of(t.next().value,(e=>t.next().value))}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=n(7),i=n(3),r=n(12),o=n(20),a=n(17),l=n(6),u=n(18),c=n(13),h=n(9),d=n(14),f=n(15),p=n(16);class m{constructor(t,e,n){if(this.pitch=t,e instanceof m.Quality)this.quality=e;else{const t=e;this.quality=void 0===n?new m.Quality(t):new m.Quality(t,n)}}getDefaultPolicy(t){if(this.quality.isOctaveRepeating(t)&&this.quality.getStepPattern(t).length===h.default.size){const e=h.default.iterator(t,this.pitch.getKey().getLetter());let n=e.next().value;return p.default.prioritize((t=>{const s=t.getLetter()===n;return s&&(n=e.next().value),s}))}return p.default.DEFAULT_PRIORITY}stream(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c.default.DEFAULT,e=arguments.length>1?arguments[1]:void 0;if(t instanceof o.default){if(1!==arguments.length)throw i.default.forIllegalArgument(m,arguments,"Invalid number of arguments");e=t,t=c.default.DEFAULT}else t instanceof c.default&&null==e&&(e=this.getDefaultPolicy(t));return u.default.fromIterator(this.iterator(t,e))}iterator(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c.default.DEFAULT,e=arguments.length>1?arguments[1]:void 0;if(t instanceof o.default){if(1!==arguments.length)throw i.default.forIllegalArgument(m,arguments,"Invalid number of arguments");e=t,t=c.default.DEFAULT}else t instanceof c.default&&null==e&&(e=this.getDefaultPolicy(t));const n=r.default.of(this.quality.getStepPattern(t));return a.default.of(f.default.fromProgramNumber(this.pitch.getProgramNumber(),e).get(),(t=>t.step(n.next().value,e).get()))}getPitches(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c.default.DEFAULT,e=arguments.length>1?arguments[1]:void 0;if(t instanceof o.default){if(1!==arguments.length)throw i.default.forIllegalArgument(m,arguments,"Invalid number of arguments");e=t,t=c.default.DEFAULT}else t instanceof c.default&&null==e&&(e=this.getDefaultPolicy(t));return this.stream(t,e).limit(this.quality.getStepPattern(t).length)}toString(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c.default.DEFAULT;return"["+this.getPitches(t).join(", ")+"]"}getPitch(){return this.pitch}getQuality(){return this.quality}}!function(t){class e{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.slice().reverse().map((t=>-t));if(this.ascending=t,this.descending=n,0===t.length)throw i.default.forIllegalArgument(e,t,"step pattern array should not be empty")}getStepPattern(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c.default.DEFAULT;switch(t){case c.default.ASCENDING:return this.ascending.slice();case c.default.DESCENDING:return this.descending.slice();default:throw new s.default("Invalid direction: "+t)}}isOctaveRepeating(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c.default.DEFAULT;return Math.abs(this.getStepPattern(t).reduce(l.default.add,0))===d.default.KEYS_IN_OCTAVE}}e.MAJOR=new e([2,2,1,2,2,2,1]),e.NATURAL_MINOR=new e([2,1,2,2,1,2,2]),e.HARMONIC_MINOR=new e([2,1,2,2,1,3,1]),e.MELODIC_MINOR=new e([2,1,2,2,2,2,1],[-2,-2,-1,-2,-2,-1,-2]),e.CHROMATIC=new e([1]),e.WHOLE_TONE=new e([2]),t.Quality=e}(m||(m={})),e.default=m},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=n(6);class i extends Set{constructor(t){super(t),this._values=t}static of(t){return new i(t)}compare(t,e){if(!this.has(t)||!this.has(e))throw new Error("No such element");return s.default.compare(this._values.indexOf(t),this._values.indexOf(e))}iterator(){return this[Symbol.iterator]()}}e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=n(7),i=n(3),r=n(8),o=n(5),a=n(20),l=n(6),u=n(18),c=n(11),h=n(9),d=n(14),f=n(16);class p{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.default.empty();this.letter=t,e instanceof c.default?this.accidental=o.default.of(e):e instanceof o.default?this.accidental=e:this.accidental=o.default.empty()}step(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f.default.DEFAULT_PRIORITY;return p.fromOffset(l.default.floorMod(this.getOffset()+t,d.default.KEYS_IN_OCTAVE),e)}apply(t){const e=t.getAccidentalFor(this.letter);return this.accidental===e?this:new p(this.letter,e)}removeAccidental(){return this.hasAccidental()?new p(this.letter):this}natural(){return this.isNatural()?this:new p(this.letter,c.default.NATURAL)}sharp(){return this.isSharp()?this:new p(this.letter,c.default.SHARP)}doubleSharp(){return this.isDoubleSharp()?this:new p(this.letter,c.default.DOUBLE_SHARP)}tripleSharp(){return this.isTripleSharp()?this:new p(this.letter,c.default.TRIPLE_SHARP)}flat(){return this.isFlat()?this:new p(this.letter,c.default.FLAT)}doubleFlat(){return this.isDoubleFlat()?this:new p(this.letter,c.default.DOUBLE_FLAT)}tripleFlat(){return this.isTripleFlat()?this:new p(this.letter,c.default.TRIPLE_FLAT)}hasAccidental(){return this.accidental.isPresent()}isNatural(){return this.accidental.orElse(null)===c.default.NATURAL}isSharp(){return this.accidental.orElse(null)===c.default.SHARP}isDoubleSharp(){return this.accidental.orElse(null)===c.default.DOUBLE_SHARP}isTripleSharp(){return this.accidental.orElse(null)===c.default.TRIPLE_SHARP}isFlat(){return this.accidental.orElse(null)===c.default.FLAT}isDoubleFlat(){return this.accidental.orElse(null)===c.default.DOUBLE_FLAT}isTripleFlat(){return this.accidental.orElse(null)===c.default.TRIPLE_FLAT}getEnharmonicEquivalent(t){if(t instanceof h.default){const e=t;return o.default.ofNullable(e).flatMap((t=>{if(this.letter===t)return o.default.of(this);let n=this.getOffset()-e.getOffset();if(n>c.default.TRIPLE_SHARP.getOffset()){if(n-=d.default.KEYS_IN_OCTAVE,n<c.default.TRIPLE_FLAT.getOffset())return o.default.empty(i.default.forInvalid(p,n))}else if(n<c.default.TRIPLE_FLAT.getOffset()&&(n+=d.default.KEYS_IN_OCTAVE,n>c.default.TRIPLE_SHARP.getOffset()))return o.default.empty(i.default.forInvalid(p,n));const s=c.default.fromOffset(n);return o.default.of(new p(e,s))}))}if(t instanceof a.default){const e=t,n=h.default.stream().limit(h.default.size).map((t=>this.getEnharmonicEquivalent(t))).filter((t=>t.isPresent())).map((t=>t.get())),s=u.default.fromIterator(e.iterator()).map((t=>{const e=n.find((e=>t(e)));return o.default.ofNullable(e)})).filter((t=>t.isPresent())).map((t=>t.get())).limit(1)[0];return o.default.ofNullable(s).withException(i.default.forInvalid(p,"unable to find an enharmonic equivalent for the given policies"))}}static isEnharmonic(t,e){return t.getOffset()===e.getOffset()}static fromOffset(t){let e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f.default.DEFAULT_PRIORITY;if(0===n.size)throw i.default.forIllegalArgument(p,n,"should not be empty");let r=null;switch(l.default.floorMod(t,d.default.KEYS_IN_OCTAVE)){case 11:e=h.default.B;break;case 10:r=c.default.SHARP;case 9:e=h.default.A;break;case 8:r=c.default.SHARP;case 7:e=h.default.G;break;case 6:r=c.default.SHARP;case 5:e=h.default.F;break;case 4:e=h.default.E;break;case 3:r=c.default.SHARP;case 2:e=h.default.D;break;case 1:r=c.default.SHARP;case 0:e=h.default.C;break;default:throw new s.default("Invalid offset: "+t)}return new p(e,r).getEnharmonicEquivalent(n)}getOffset(){return l.default.floorMod(this.letter.getOffset()+this.accidental.map((t=>t.getOffset())).orElse(0),d.default.KEYS_IN_OCTAVE)}static fromString(t){return r.default.of(t).filter((t=>null!=t),i.default.forNull(p)).filter((t=>0!==t.trim().length),i.default.forInvalid(p,t,"empty string")).parse((t=>h.default.fromChar(t.charAt(0)))).parse((t=>o.default.of(c.default.fromString(1===t.length?null:t.substring(1))))).get((t=>new p(t[0],t[1])))}toString(){return this.letter.toString()+this.accidental.map((t=>t.toString())).orElse("")}equals(t){if(!(t instanceof p))return!1;if(t===this)return!0;let e=t;return this.letter===e.getLetter()&&this.accidental===e.getAccidental()}getLetter(){return this.letter}getAccidental(){return this.accidental}}e.default=p},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=n(3),i=n(8),r=n(5);class o{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.getBaseDuration()*Math.pow(1.5,e);this.type=t,this.dotCount=e,this.duration=n}dotted(){return new o(this.type,this.dotCount+1,1.5*this.duration)}undotted(){return new o(this.type,this.dotCount-1,this.duration/1.5)}tuplet(t){if(this.type===o.Type.TWO_HUNDRED_FIFTY_SIXTH)throw s.default.forIllegalState(o,"etude does not support value types smaller than "+this.type);return new o(o.Type.values()[this.type.ordinal()+1],0,this.duration/t)}triplet(){return this.tuplet(3)}static fromString(t){return i.default.of(t).filter((t=>null!=t),s.default.forNull(o)).parse((e=>{const n=t.match("^[a-zA-Z.]+")[0],s=n.indexOf(".");let i,a;-1===s?(i=n,a=0):(i=n.substring(0,s),a=n.length-s);const l=o.Type.fromString(i);if(!l.isPresent())return r.default.empty();const u=t.match(/\([0-9.]+/g)[0],c=null!=u?parseFloat(u.substring(1)):l.get().getBaseDuration()*Math.pow(1.5,a);return r.default.of(new o(l.get(),a,c))})).get((t=>t[0]))}toString(){return"".concat(this.type).concat(".".repeat(this.dotCount),"(").concat(this.duration,")")}getType(){return this.type}getDotCount(){return this.dotCount}getDuration(){return this.duration}}!function(t){class e{constructor(){++e.size,e._values.push(this)}static values(){return e._values.slice()}ordinal(){return e._values.indexOf(this)}static valueOf(t){const n=e[t];if(n instanceof e)return n;throw s.default.forInvalid(e,t)}toString(){return Object.keys(e).find((t=>e[t]===this))}static fromBaseDuration(t){const n=1-Math.log(t)/Math.log(2);if(n%1!==0)throw s.default.forInvalid(e,t,"should be a power of 2");return e.values()[0|n]}static fromString(t){return i.default.of(t).filter((t=>null!=t),s.default.forNull(e)).parse((t=>{const n=e.values().find((e=>0===t.localeCompare(e.toString())));return r.default.ofNullable(n).withException(s.default.forInvalid(e,t))})).get((t=>t[0]))}getBaseDuration(){return Math.pow(2,1-this.ordinal())}}e.size=0,e._values=[],e.DOUBLE_WHOLE=new e,e.WHOLE=new e,e.HALF=new e,e.QUARTER=new e,e.EIGHTH=new e,e.SIXTEENTH=new e,e.THIRTY_SECOND=new e,e.SIXTY_FOURTH=new e,e.HUNDRED_TWENTY_EIGHTH=new e,e.TWO_HUNDRED_FIFTY_SIXTH=new e,t.Type=e,t.DOUBLE_WHOLE=new t(e.DOUBLE_WHOLE),t.WHOLE=new t(e.WHOLE),t.HALF=new t(e.HALF),t.QUARTER=new t(e.QUARTER),t.EIGHTH=new t(e.EIGHTH),t.SIXTEENTH=new t(e.SIXTEENTH),t.THIRTY_SECOND=new t(e.THIRTY_SECOND),t.SIXTY_FOURTH=new t(e.SIXTY_FOURTH),t.HUNDRED_TWENTY_EIGHTH=new t(e.HUNDRED_TWENTY_EIGHTH),t.TWO_HUNDRED_FIFTY_SIXTH=new t(e.TWO_HUNDRED_FIFTY_SIXTH)}(o||(o={})),e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=n(67);e.error=s;const i=n(68);e.theory=i;const r=n(75);e.util=r},function(t,e,n){"use strict";var s=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map((function(t){return e[t]})).join(""))return!1;var s={};return"abcdefghijklmnopqrst".split("").forEach((function(t){s[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},s)).join("")}catch(i){return!1}}()?Object.assign:function(t,e){for(var n,o,a=function(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}(t),l=1;l<arguments.length;l++){for(var u in n=Object(arguments[l]))i.call(n,u)&&(a[u]=n[u]);if(s){o=s(n);for(var c=0;c<o.length;c++)r.call(n,o[c])&&(a[o[c]]=n[o[c]])}}return a}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Header=e.keySignatureKeys=void 0;var s=n(28),i=new WeakMap;e.keySignatureKeys=["Cb","Gb","Db","Ab","Eb","Bb","F","C","G","D","A","E","B","F#","C#"];var r=function(){function t(t){var n=this;if(this.tempos=[],this.timeSignatures=[],this.keySignatures=[],this.meta=[],this.name="",i.set(this,480),t){i.set(this,t.header.ticksPerBeat),t.tracks.forEach((function(t){t.forEach((function(t){t.meta&&("timeSignature"===t.type?n.timeSignatures.push({ticks:t.absoluteTime,timeSignature:[t.numerator,t.denominator]}):"setTempo"===t.type?n.tempos.push({bpm:6e7/t.microsecondsPerBeat,ticks:t.absoluteTime}):"keySignature"===t.type&&n.keySignatures.push({key:e.keySignatureKeys[t.key+7],scale:0===t.scale?"major":"minor",ticks:t.absoluteTime}))}))}));var s=0;t.tracks[0].forEach((function(t){s+=t.deltaTime,t.meta&&("trackName"===t.type?n.name=t.text:"text"!==t.type&&"cuePoint"!==t.type&&"marker"!==t.type&&"lyrics"!==t.type||n.meta.push({text:t.text,ticks:s,type:t.type}))})),this.update()}}return t.prototype.update=function(){var t=this,e=0,n=0;this.tempos.sort((function(t,e){return t.ticks-e.ticks})),this.tempos.forEach((function(s,i){var r=i>0?t.tempos[i-1].bpm:t.tempos[0].bpm,o=s.ticks/t.ppq-n,a=60/r*o;s.time=a+e,e=s.time,n+=o})),this.timeSignatures.sort((function(t,e){return t.ticks-e.ticks})),this.timeSignatures.forEach((function(e,n){var s=n>0?t.timeSignatures[n-1]:t.timeSignatures[0],i=(e.ticks-s.ticks)/t.ppq/s.timeSignature[0]/(s.timeSignature[1]/4);s.measures=s.measures||0,e.measures=i+s.measures}))},t.prototype.ticksToSeconds=function(t){var e=(0,s.search)(this.tempos,t);if(-1!==e){var n=this.tempos[e],i=n.time,r=(t-n.ticks)/this.ppq;return i+60/n.bpm*r}return.5*(t/this.ppq)},t.prototype.ticksToMeasures=function(t){var e=(0,s.search)(this.timeSignatures,t);if(-1!==e){var n=this.timeSignatures[e],i=(t-n.ticks)/this.ppq;return n.measures+i/(n.timeSignature[0]/n.timeSignature[1])/4}return t/this.ppq/4},Object.defineProperty(t.prototype,"ppq",{get:function(){return i.get(this)},enumerable:!1,configurable:!0}),t.prototype.secondsToTicks=function(t){var e=(0,s.search)(this.tempos,t,"time");if(-1!==e){var n=this.tempos[e],i=(t-n.time)/(60/n.bpm);return Math.round(n.ticks+i*this.ppq)}var r=t/.5;return Math.round(r*this.ppq)},t.prototype.toJSON=function(){return{keySignatures:this.keySignatures,meta:this.meta,name:this.name,ppq:this.ppq,tempos:this.tempos.map((function(t){return{bpm:t.bpm,ticks:t.ticks}})),timeSignatures:this.timeSignatures}},t.prototype.fromJSON=function(t){this.name=t.name,this.tempos=t.tempos.map((function(t){return Object.assign({},t)})),this.timeSignatures=t.timeSignatures.map((function(t){return Object.assign({},t)})),this.keySignatures=t.keySignatures.map((function(t){return Object.assign({},t)})),this.meta=t.meta.map((function(t){return Object.assign({},t)})),i.set(this,t.ppq),this.update()},t.prototype.setTempo=function(t){this.tempos=[{bpm:t,ticks:0}],this.update()},t}();e.Header=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=n(7),i=n(3),r=n(8),o=n(5),a=n(6),l=n(9),u=n(14),c=n(19);class h{constructor(t,e){if(this.quality=t,this.distance=e,e<=0)throw i.default.forInvalid(h,e,"should be a positive integer");switch(t){case h.Quality.PERFECT:if(!h.isPerfect(e))throw i.default.forInvalid(h,t.toString()+e,e+" cannot have a perfect quality");break;case h.Quality.MAJOR:case h.Quality.MINOR:if(h.isPerfect(e))throw i.default.forInvalid(h,t.toString()+e,e+" cannot have major or minor quality");case h.Quality.DIMINISHED:case h.Quality.DOUBLY_DIMINISHED:case h.Quality.AUGMENTED:case h.Quality.DOUBLY_AUGMENTED:}}static isEnharmonic(t,e){return t.getOffset()===e.getOffset()}static between(t,e){const n=t.getKey().getLetter(),s=e.getKey().getLetter(),r=a.default.floorMod(s.ordinal()-2,l.default.size)-a.default.floorMod(n.ordinal()-2,l.default.size)+1+(e.getOctave()-t.getOctave())*l.default.size;if(r<=0)return o.default.empty(i.default.forInvalid(h,r,"cannot create an interval with a nonpositive number"));let d,f=(e.getProgramNumber()-t.getProgramNumber())%u.default.KEYS_IN_OCTAVE;switch(f-=c.default.Quality.MAJOR.getStepPattern().slice(0,(r-1)%l.default.size).reduce(a.default.add,0),f){case-3:if(h.isPerfect(r))return o.default.empty(i.default.forInvalid(h,r,"cannot create a perfect interval with an offset of -3"));d=h.Quality.DOUBLY_DIMINISHED;break;case-2:d=h.isPerfect(r)?h.Quality.DOUBLY_DIMINISHED:h.Quality.DIMINISHED;break;case-1:d=h.isPerfect(r)?h.Quality.DIMINISHED:h.Quality.MINOR;break;case 0:d=h.isPerfect(r)?h.Quality.PERFECT:h.Quality.MAJOR;break;case 1:d=h.Quality.AUGMENTED;break;case 2:d=h.Quality.DOUBLY_AUGMENTED;break;default:return o.default.empty(i.default.forInvalid(h,f,"offset is too large"))}return o.default.of(new h(d,r))}isSimple(){return this.distance<=l.default.size+1}isCompound(){return this.distance>l.default.size+1}inverse(){let t;switch(this.quality){case h.Quality.PERFECT:t=h.Quality.PERFECT;break;case h.Quality.MAJOR:t=h.Quality.MINOR;break;case h.Quality.MINOR:t=h.Quality.MAJOR;break;case h.Quality.DIMINISHED:t=h.Quality.AUGMENTED;break;case h.Quality.DOUBLY_DIMINISHED:t=h.Quality.DOUBLY_AUGMENTED;break;case h.Quality.AUGMENTED:t=h.Quality.DIMINISHED;break;case h.Quality.DOUBLY_AUGMENTED:t=h.Quality.DOUBLY_DIMINISHED;break;default:throw new s.default("Interval switch case")}const e=1!=this.distance&&this.distance%l.default.size==1?1:9-this.distance%l.default.size;return new h(t,e)}getOffset(){let t=Math.trunc((this.distance-1)/l.default.size)*u.default.KEYS_IN_OCTAVE;switch(t+=c.default.Quality.MAJOR.getStepPattern().slice(0,this.distance-1).reduce(a.default.add,0),this.quality){case h.Quality.PERFECT:case h.Quality.MAJOR:break;case h.Quality.MINOR:--t;break;case h.Quality.DIMINISHED:t-=h.isPerfect(this.distance)?1:2;break;case h.Quality.DOUBLY_DIMINISHED:t-=h.isPerfect(this.distance)?2:3;break;case h.Quality.AUGMENTED:++t;break;case h.Quality.DOUBLY_AUGMENTED:t+=2}return t}static isPerfect(t){let e=t%7;return 1===e||4===e||5===e}static fromString(t){return r.default.of(t).filter((t=>null!=t),i.default.forNull(h)).map((t=>t.match(/\D+|\d+/g))).filter((t=>t.length>=2),i.default.forInvalid(h,t,"missing information")).filter((t=>t.length<=2),i.default.forInvalid(h,t,"contains extra information")).parse((t=>h.Quality.fromString(t[0]))).parse((e=>o.default.of(e[1]).map((t=>t.match("\\d+")),i.default.forInvalid(h,t,"doesn't contain a valid number")).map(parseInt))).get((t=>new h(t[0],t[1])))}toString(){return this.quality.toString()+this.distance}getQuality(){return this.quality}getDistance(){return this.distance}}!function(t){class e{constructor(t){this.symbol=t,++e.size,e._values.push(this)}static values(){return e._values.slice()}ordinal(){return e._values.indexOf(this)}static valueOf(t){const n=e[t];if(n instanceof e)return n;throw i.default.forInvalid(e,t)}static fromString(t){return r.default.of(t).filter((t=>null!=t),i.default.forNull(e)).parse((t=>{const n=e.values().find((e=>0===t.localeCompare(e)));return o.default.ofNullable(n).withException(i.default.forInvalid(e,t))})).get((t=>t[0]))}toString(){return this.symbol}}e.size=0,e._values=[],e.PERFECT=new e("P"),e.MAJOR=new e("M"),e.MINOR=new e("m"),e.DIMINISHED=new e("d"),e.DOUBLY_DIMINISHED=new e("dd"),e.AUGMENTED=new e("A"),e.DOUBLY_AUGMENTED=new e("AA"),t.Quality=e}(h||(h={})),e.default=h},function(t,e,n){e.parseMidi=n(51),e.writeMidi=n(52)},function(t,e,n){"use strict";function s(t,e,n){void 0===n&&(n="ticks");var s=0,i=t.length,r=i;if(i>0&&t[i-1][n]<=e)return i-1;for(;s<r;){var o=Math.floor(s+(r-s)/2),a=t[o],l=t[o+1];if(a[n]===e){for(var u=o;u<t.length;u++){t[u][n]===e&&(o=u)}return o}if(a[n]<e&&l[n]>e)return o;a[n]>e?r=o:a[n]<e&&(s=o+1)}return-1}Object.defineProperty(e,"__esModule",{value:!0}),e.insert=e.search=void 0,e.search=s,e.insert=function(t,e,n){if(void 0===n&&(n="ticks"),t.length){var i=s(t,e[n],n);t.splice(i+1,0,e)}else t.push(e)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Track=void 0;var s=n(28),i=n(30),r=n(53),o=n(54),a=n(55),l=n(57),u=new WeakMap,c=function(){function t(t,e){var n=this;if(this.name="",this.notes=[],this.controlChanges=(0,r.createControlChanges)(),this.pitchBends=[],u.set(this,e),t){var s=t.find((function(t){return"trackName"===t.type}));this.name=s?s.text:""}if(this.instrument=new a.Instrument(t,this),this.channel=0,t){for(var i=t.filter((function(t){return"noteOn"===t.type})),o=t.filter((function(t){return"noteOff"===t.type})),l=function(){var t=i.shift();c.channel=t.channel;var e=o.findIndex((function(e){return e.noteNumber===t.noteNumber&&e.absoluteTime>=t.absoluteTime}));if(-1!==e){var n=o.splice(e,1)[0];c.addNote({durationTicks:n.absoluteTime-t.absoluteTime,midi:t.noteNumber,noteOffVelocity:n.velocity/127,ticks:t.absoluteTime,velocity:t.velocity/127})}},c=this;i.length;)l();t.filter((function(t){return"controller"===t.type})).forEach((function(t){n.addCC({number:t.controllerType,ticks:t.absoluteTime,value:t.value/127})})),t.filter((function(t){return"pitchBend"===t.type})).forEach((function(t){n.addPitchBend({ticks:t.absoluteTime,value:t.value/Math.pow(2,13)})}));var h=t.find((function(t){return"endOfTrack"===t.type}));this.endOfTrackTicks=void 0!==h?h.absoluteTime:void 0}}return t.prototype.addNote=function(t){var e=u.get(this),n=new l.Note({midi:0,ticks:0,velocity:1},{ticks:0,velocity:0},e);return Object.assign(n,t),(0,s.insert)(this.notes,n,"ticks"),this},t.prototype.addCC=function(t){var e=u.get(this),n=new i.ControlChange({controllerType:t.number},e);return delete t.number,Object.assign(n,t),Array.isArray(this.controlChanges[n.number])||(this.controlChanges[n.number]=[]),(0,s.insert)(this.controlChanges[n.number],n,"ticks"),this},t.prototype.addPitchBend=function(t){var e=u.get(this),n=new o.PitchBend({},e);return Object.assign(n,t),(0,s.insert)(this.pitchBends,n,"ticks"),this},Object.defineProperty(t.prototype,"duration",{get:function(){if(!this.notes.length)return 0;for(var t=this.notes[this.notes.length-1].time+this.notes[this.notes.length-1].duration,e=0;e<this.notes.length-1;e++){var n=this.notes[e].time+this.notes[e].duration;t<n&&(t=n)}return t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"durationTicks",{get:function(){if(!this.notes.length)return 0;for(var t=this.notes[this.notes.length-1].ticks+this.notes[this.notes.length-1].durationTicks,e=0;e<this.notes.length-1;e++){var n=this.notes[e].ticks+this.notes[e].durationTicks;t<n&&(t=n)}return t},enumerable:!1,configurable:!0}),t.prototype.fromJSON=function(t){var e=this;for(var n in this.name=t.name,this.channel=t.channel,this.instrument=new a.Instrument(void 0,this),this.instrument.fromJSON(t.instrument),void 0!==t.endOfTrackTicks&&(this.endOfTrackTicks=t.endOfTrackTicks),t.controlChanges)t.controlChanges[n]&&t.controlChanges[n].forEach((function(t){e.addCC({number:t.number,ticks:t.ticks,value:t.value})}));t.notes.forEach((function(t){e.addNote({durationTicks:t.durationTicks,midi:t.midi,ticks:t.ticks,velocity:t.velocity})}))},t.prototype.toJSON=function(){for(var t={},e=0;e<127;e++)this.controlChanges.hasOwnProperty(e)&&(t[e]=this.controlChanges[e].map((function(t){return t.toJSON()})));var n={channel:this.channel,controlChanges:t,pitchBends:this.pitchBends.map((function(t){return t.toJSON()})),instrument:this.instrument.toJSON(),name:this.name,notes:this.notes.map((function(t){return t.toJSON()}))};return void 0!==this.endOfTrackTicks&&(n.endOfTrackTicks=this.endOfTrackTicks),n},t}();e.Track=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ControlChange=e.controlChangeIds=e.controlChangeNames=void 0,e.controlChangeNames={1:"modulationWheel",2:"breath",4:"footController",5:"portamentoTime",7:"volume",8:"balance",10:"pan",64:"sustain",65:"portamentoTime",66:"sostenuto",67:"softPedal",68:"legatoFootswitch",84:"portamentoControl"},e.controlChangeIds=Object.keys(e.controlChangeNames).reduce((function(t,n){return t[e.controlChangeNames[n]]=n,t}),{});var s=new WeakMap,i=new WeakMap,r=function(){function t(t,e){s.set(this,e),i.set(this,t.controllerType),this.ticks=t.absoluteTime,this.value=t.value}return Object.defineProperty(t.prototype,"number",{get:function(){return i.get(this)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return e.controlChangeNames[this.number]?e.controlChangeNames[this.number]:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"time",{get:function(){return s.get(this).ticksToSeconds(this.ticks)},set:function(t){var e=s.get(this);this.ticks=e.secondsToTicks(t)},enumerable:!1,configurable:!0}),t.prototype.toJSON=function(){return{number:this.number,ticks:this.ticks,time:this.time,value:this.value}},t}();e.ControlChange=r},function(t,e){function n(e){return t.exports=n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.__esModule=!0,t.exports.default=t.exports,n(e)}t.exports=n,t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=n(17);class i{constructor(t,e){this.initial=t,this.func=e,this.it=s.default.of(t,e)}static of(t,e){return new i(t,e)}filter(t){let e,n=this.it;do{e=n.next().value}while(!t(e));return i.of(e,(e=>{let s;do{s=n.next().value}while(!t(s));return s}))}map(t){let e=this.it;return i.of(t(e.next().value),(n=>t(e.next().value)))}limit(t){let e=[];for(;t-- >0;)e.push(this.it.next().value);return e}skip(t){for(;t-- >0;)this.it.next();return this}}e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=n(3),i=n(5),r=n(6);class o{constructor(){++o.size,o._values.push(this)}static values(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o.TONIC,e=o._values.slice();return r.default.rotate(e,t.getValue()-1),e}ordinal(){return o._values.indexOf(this)}static valueOf(t){let e=o[t];if(e instanceof o)return e;throw s.default.forInvalid(o,t)}static isValid(t){return 1<=t&&t<=o.size}static fromValue(t){return i.default.of(t).filter(o.isValid,s.default.forInvalid(o,t,"out of range")).map((t=>o.values()[t-1]))}getValue(){return this.ordinal()+1}toString(){return Object.keys(o).find((t=>o[t]===this))}}o.size=0,o._values=[],o.TONIC=new o,o.SUPERTONIC=new o,o.MEDIANT=new o,o.SUBDOMINANT=new o,o.DOMINANT=new o,o.SUBMEDIANT=new o,o.LEADING_TONE=new o,e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=n(12);class i{constructor(t){this.values=t,this.it=s.default.of(t)}static of(t){return new i(t)}filter(t){return this.it=s.default.of(this.it.getValues().filter(t)),this}map(t){return i.of(this.it.getValues().map(t))}limit(t){let e=[];for(;t-- >0;)e.push(this.it.next().value);return e}skip(t){for(;t-- >0;)this.it.next();return this}}e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=n(7),i=n(3),r=n(5),o=n(6),a=n(11),l=n(21),u=n(9),c=n(15),h=n(16),d=n(19);class f{constructor(t){if(this.accidentals=t,t.map((t=>t.getAccidental())).some((t=>0==t.map((t=>t.getOffset())).orElse(0))))throw i.default.forInvalid(f,t,"null or Accidental.NATURAL");if(t.length!=new Set(t.map((t=>t.getLetter()))).size)throw i.default.forInvalid(f,t,"all letters should be distinct")}getAccidentalCount(){return this.accidentals.length}getAccidentalFor(t){const e=this.accidentals.filter((e=>e.getLetter()===t)).map((t=>t.getAccidental()))[0];return null==e?r.default.empty():e}static getOrderOfFlats(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u.default.size;return f.ORDER_OF_FLATS.slice(0,t)}static getOrderOfSharps(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u.default.size;return f.ORDER_OF_SHARPS.slice(0,t)}static getKeyFor(t,e,n){if(e<0||e>u.default.size)return r.default.empty(i.default.forInvalid(f,e,"out of range"));if(0===e!=(null==t||t==a.default.NATURAL))return r.default.empty(i.default.forIllegalArgument(f,t,"key signature with 0 accidentals should have null or Accidental.NATURAL"));let c,d;switch(null==t?a.default.NATURAL:t){case a.default.FLAT:d=f.ORDER_OF_FLATS[o.default.floorMod(e-2,u.default.size)],c=new l.default(d,f.getOrderOfFlats(e).some((t=>t===d))?a.default.FLAT:null);break;case a.default.SHARP:d=f.ORDER_OF_SHARPS[o.default.floorMod(e+1,u.default.size)],c=new l.default(d,f.getOrderOfSharps(e).some((t=>t===d))?a.default.SHARP:null);break;case a.default.NATURAL:d=u.default.C,c=new l.default(d);break;default:return r.default.empty(i.default.forIllegalArgument(f,t,"should use null, Accidental.NATURAL, Accidental.FLAT, or Accidental.SHARP for key signatures"))}if(n===f.Quality.MINOR){const n=0===e?h.default.prioritize(h.default.NONE_OR_NATURAL):h.default.prioritize(h.default.NONE_OR_NATURAL,t==a.default.FLAT?h.default.FLAT:h.default.SHARP),i=c.step(f.RELATIVE_MAJOR_TO_MINOR_DISTANCE,n);if(!i.isPresent())throw new s.default("Failed to get relative minor key");c=i.get()}return r.default.of(c)}static fromAccidentals(t,e){if(e<0||e>u.default.size)return r.default.empty(i.default.forInvalid(f,e,"out of range"));if(0===e!=(null==t||t==a.default.NATURAL))return r.default.empty(i.default.forIllegalArgument(f,t,"key signature with 0 accidentals should have null or Accidental.NATURAL"));let n;switch(null==t?a.default.NATURAL:t){case a.default.FLAT:n=f.getOrderOfFlats(e);break;case a.default.SHARP:n=f.getOrderOfSharps(e);break;case a.default.NATURAL:n=new u.default[0];break;default:return r.default.empty(i.default.forIllegalArgument(f,t,"should use null, Accidental.NATURAL, Accidental.FLAT, or Accidental.SHARP for key signatures"))}const s=n.map((e=>new l.default(e,t)));return r.default.of(new f(s))}static fromKey(t,e){const n=new d.default(new c.default(t,4),e===f.Quality.MAJOR?d.default.Quality.MAJOR:d.default.Quality.NATURAL_MINOR).stream().limit(u.default.size).map((t=>t.getKey())).filter((t=>t.hasAccidental()&&!t.isNatural()));return 0!==n.length&&n[0].getAccidental().filter((t=>t===a.default.FLAT||t===a.default.SHARP)).map((t=>{switch(t){case a.default.FLAT:return f.ORDER_OF_FLATS;case a.default.SHARP:return f.ORDER_OF_SHARPS;default:throw new s.default("Filter failed.")}})).ifPresent((t=>n.sort(((e,n)=>o.default.compare(t.indexOf(e.getLetter()),t.indexOf(n.getLetter())))))),new f(n)}toString(){return this.accidentals.toString()}getAccidentals(){return this.accidentals}}f.RELATIVE_MAJOR_TO_MINOR_DISTANCE=-3,f.ORDER_OF_FLATS="BEADGCF".split("").map(u.default.fromChar).map((t=>t.get())),f.ORDER_OF_SHARPS="FCGDAEB".split("").map(u.default.fromChar).map((t=>t.get())),function(t){class e{constructor(){++e.size,e._values.push(this)}static values(){return e._values.slice()}ordinal(){return e._values.indexOf(this)}static valueOf(t){const n=e[t];if(n instanceof e)return n;throw i.default.forInvalid(e,t)}toString(){return Object.keys(e).find((t=>e[t]===this))}}e.size=0,e._values=[],e.MAJOR=new e,e.MINOR=new e,t.Quality=e}(f||(f={})),e.default=f},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isBlackKey=function(t){if(null==t)throw new Error("Invalid pitch: ".concat(t));return 0!==s.fromProgramNumber(t.getProgramNumber()).orElseThrow((function(){return new Error("Invalid pitch: ".concat(t))})).getKey().getAccidental().map((function(t){return t.getOffset()})).orElse(0)};var s=n(23).theory.Pitch},function(t,e,n){"use strict";function s(t){return s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==s(t)&&"function"!==typeof t)return{default:t};var e=o();if(e&&e.has(t))return e.get(t);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var a=i?Object.getOwnPropertyDescriptor(t,r):null;a&&(a.get||a.set)?Object.defineProperty(n,r,a):n[r]=t[r]}n.default=t,e&&e.set(t,n);return n}(n(2)),r=n(36);function o(){if("function"!==typeof WeakMap)return null;var t=new WeakMap;return o=function(){return t},t}var a=function(){};function l(t){var e=t.pitch,n=t.onKeyPress,s=void 0===n?a:n,o=t.onKeyRelease,l=void 0===o?a:o,u=t.isHighlight,c=void 0!==u&&u,h=t.showLabel,d=void 0!==h&&h,f=null==e,p=f||(0,r.isBlackKey)(e),m=i.default.createElement("button",{className:"".concat(p?"black-key":"white-key"," key ").concat(c?"highlight-key":""),type:"button",onMouseDown:function(t){return s(e)},onMouseUp:function(t){return l(e)},onMouseEnter:function(t){1&t.buttons&&s(e)},onMouseLeave:function(t){1&t.buttons&&l(e)}},i.default.createElement("div",{className:"key-text"},f||!d?"":e.getKey().toString()+e.getOctave()));return p?i.default.createElement("div",{className:"black-key-container ".concat(f?"invisible":"")},m):m}function u(t,e){var n=t.pitch,s=t.onKeyPress,i=t.onKeyRelease,r=t.isHighlight,o=t.showLabel,a=e.pitch,l=e.onKeyPress,u=e.onKeyRelease,c=e.isHighlight,h=e.showLabel;return null==n&&null==a||r===c&&(o===h&&(n.toString()===a.toString()&&(s===l&&i===u)))}var c=(0,i.memo)(l,u);e.default=c},function(t,e,n){"use strict";n.r(e),n.d(e,"IconsManifest",(function(){return s})),n.d(e,"GenIcon",(function(){return h})),n.d(e,"IconBase",(function(){return d})),n.d(e,"DefaultContext",(function(){return o})),n.d(e,"IconContext",(function(){return a}));var s=[{id:"fa",name:"Font Awesome",projectUrl:"https://fontawesome.com/",license:"CC BY 4.0 License",licenseUrl:"https://creativecommons.org/licenses/by/4.0/"},{id:"io",name:"Ionicons 4",projectUrl:"https://ionicons.com/",license:"MIT",licenseUrl:"https://github.com/ionic-team/ionicons/blob/master/LICENSE"},{id:"io5",name:"Ionicons 5",projectUrl:"https://ionicons.com/",license:"MIT",licenseUrl:"https://github.com/ionic-team/ionicons/blob/master/LICENSE"},{id:"md",name:"Material Design icons",projectUrl:"http://google.github.io/material-design-icons/",license:"Apache License Version 2.0",licenseUrl:"https://github.com/google/material-design-icons/blob/master/LICENSE"},{id:"ti",name:"Typicons",projectUrl:"http://s-ings.com/typicons/",license:"CC BY-SA 3.0",licenseUrl:"https://creativecommons.org/licenses/by-sa/3.0/"},{id:"go",name:"Github Octicons icons",projectUrl:"https://octicons.github.com/",license:"MIT",licenseUrl:"https://github.com/primer/octicons/blob/master/LICENSE"},{id:"fi",name:"Feather",projectUrl:"https://feathericons.com/",license:"MIT",licenseUrl:"https://github.com/feathericons/feather/blob/master/LICENSE"},{id:"gi",name:"Game Icons",projectUrl:"https://game-icons.net/",license:"CC BY 3.0",licenseUrl:"https://creativecommons.org/licenses/by/3.0/"},{id:"wi",name:"Weather Icons",projectUrl:"https://erikflowers.github.io/weather-icons/",license:"SIL OFL 1.1",licenseUrl:"http://scripts.sil.org/OFL"},{id:"di",name:"Devicons",projectUrl:"https://vorillaz.github.io/devicons/",license:"MIT",licenseUrl:"https://opensource.org/licenses/MIT"},{id:"ai",name:"Ant Design Icons",projectUrl:"https://github.com/ant-design/ant-design-icons",license:"MIT",licenseUrl:"https://opensource.org/licenses/MIT"},{id:"bs",name:"Bootstrap Icons",projectUrl:"https://github.com/twbs/icons",license:"MIT",licenseUrl:"https://opensource.org/licenses/MIT"},{id:"ri",name:"Remix Icon",projectUrl:"https://github.com/Remix-Design/RemixIcon",license:"Apache License Version 2.0",licenseUrl:"http://www.apache.org/licenses/"},{id:"fc",name:"Flat Color Icons",projectUrl:"https://github.com/icons8/flat-color-icons",license:"MIT",licenseUrl:"https://opensource.org/licenses/MIT"},{id:"gr",name:"Grommet-Icons",projectUrl:"https://github.com/grommet/grommet-icons",license:"Apache License Version 2.0",licenseUrl:"http://www.apache.org/licenses/"},{id:"hi",name:"Heroicons",projectUrl:"https://github.com/refactoringui/heroicons",license:"MIT",licenseUrl:"https://opensource.org/licenses/MIT"},{id:"si",name:"Simple Icons",projectUrl:"https://simpleicons.org/",license:"CC0 1.0 Universal",licenseUrl:"https://creativecommons.org/publicdomain/zero/1.0/"},{id:"im",name:"IcoMoon Free",projectUrl:"https://github.com/Keyamoon/IcoMoon-Free",license:"CC BY 4.0 License"},{id:"bi",name:"BoxIcons",projectUrl:"https://github.com/atisawd/boxicons",license:"CC BY 4.0 License"},{id:"cg",name:"css.gg",projectUrl:"https://github.com/astrit/css.gg",license:"MIT",licenseUrl:"https://opensource.org/licenses/MIT"},{id:"vsc",name:"VS Code Icons",projectUrl:"https://github.com/microsoft/vscode-codicons",license:"CC BY 4.0",licenseUrl:"https://creativecommons.org/licenses/by/4.0/"}],i=n(2),r=n.n(i),o={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},a=r.a.createContext&&r.a.createContext(o),l=function(){return l=Object.assign||function(t){for(var e,n=1,s=arguments.length;n<s;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},l.apply(this,arguments)},u=function(t,e){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(s=Object.getOwnPropertySymbols(t);i<s.length;i++)e.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(t,s[i])&&(n[s[i]]=t[s[i]])}return n};function c(t){return t&&t.map((function(t,e){return r.a.createElement(t.tag,l({key:e},t.attr),c(t.child))}))}function h(t){return function(e){return r.a.createElement(d,l({attr:l({},t.attr)},e),c(t.child))}}function d(t){var e=function(e){var n,s=t.attr,i=t.size,o=t.title,a=u(t,["attr","size","title"]),c=i||e.size||"1em";return e.className&&(n=e.className),t.className&&(n=(n?n+" ":"")+t.className),r.a.createElement("svg",l({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},e.attr,s,a,{className:n,style:l(l({color:t.color||e.color},e.style),t.style),height:c,width:c,xmlns:"http://www.w3.org/2000/svg"}),o&&r.a.createElement("title",null,o),t.children)};return void 0!==a?r.a.createElement(a.Consumer,null,(function(t){return e(t)})):e(o)}},function(t,e,n){"use strict";!function t(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}(),t.exports=n(47)},function(t,e,n){"use strict";var s=this&&this.__awaiter||function(t,e,n,s){return new(n||(n=Promise))((function(i,r){function o(t){try{l(s.next(t))}catch(e){r(e)}}function a(t){try{l(s.throw(t))}catch(e){r(e)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}l((s=s.apply(t,e||[])).next())}))},i=this&&this.__generator||function(t,e){var n,s,i,r,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,s&&(i=2&r[0]?s.return:r[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,r[1])).done)return i;switch(s=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,s=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){o=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){o.label=r[1];break}if(6===r[0]&&o.label<i[1]){o.label=i[1],i=r;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(r);break}i[2]&&o.ops.pop(),o.trys.pop();continue}r=e.call(t,o)}catch(a){r=[6,a],s=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.Header=e.Track=e.Midi=void 0;var r=n(27),o=n(25),a=n(29),l=n(58),u=function(){function t(t){var e=this,n=null;if(t){var s=t instanceof ArrayBuffer?new Uint8Array(t):t;(n=(0,r.parseMidi)(s)).tracks.forEach((function(t){var e=0;t.forEach((function(t){e+=t.deltaTime,t.absoluteTime=e}))})),n.tracks=function(t){for(var e=[],n=0;n<t.length;n++)for(var s=e.length,i=new Map,r=Array(16).fill(0),o=0,a=t[n];o<a.length;o++){var l=a[o],u=s,c=l.channel;if(void 0!==c){"programChange"===l.type&&(r[c]=l.programNumber);var h=r[c],d="".concat(h," ").concat(c);i.has(d)?u=i.get(d):(u=s+i.size,i.set(d,u))}e[u]||e.push([]),e[u].push(l)}return e}(n.tracks)}this.header=new o.Header(n),this.tracks=[],t&&(this.tracks=n.tracks.map((function(t){return new a.Track(t,e.header)})),1===n.header.format&&0===this.tracks[0].duration&&this.tracks.shift())}return t.fromUrl=function(e){return s(this,void 0,void 0,(function(){var n;return i(this,(function(s){switch(s.label){case 0:return[4,fetch(e)];case 1:return(n=s.sent()).ok?[4,n.arrayBuffer()]:[3,3];case 2:return[2,new t(s.sent())];case 3:throw new Error("Could not load '".concat(e,"'"))}}))}))},Object.defineProperty(t.prototype,"name",{get:function(){return this.header.name},set:function(t){this.header.name=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"duration",{get:function(){var t=this.tracks.map((function(t){return t.duration}));return Math.max.apply(Math,t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"durationTicks",{get:function(){var t=this.tracks.map((function(t){return t.durationTicks}));return Math.max.apply(Math,t)},enumerable:!1,configurable:!0}),t.prototype.addTrack=function(){var t=new a.Track(void 0,this.header);return this.tracks.push(t),t},t.prototype.toArray=function(){return(0,l.encode)(this)},t.prototype.toJSON=function(){return{header:this.header.toJSON(),tracks:this.tracks.map((function(t){return t.toJSON()}))}},t.prototype.fromJSON=function(t){var e=this;this.header=new o.Header,this.header.fromJSON(t.header),this.tracks=t.tracks.map((function(t){var n=new a.Track(void 0,e.header);return n.fromJSON(t),n}))},t.prototype.clone=function(){var e=new t;return e.fromJSON(this.toJSON()),e},t}();e.Midi=u;var c=n(29);Object.defineProperty(e,"Track",{enumerable:!0,get:function(){return c.Track}});var h=n(25);Object.defineProperty(e,"Header",{enumerable:!0,get:function(){return h.Header}})},function(t,e,n){"use strict";var s,i="object"===typeof Reflect?Reflect:null,r=i&&"function"===typeof i.apply?i.apply:function(t,e,n){return Function.prototype.apply.call(t,e,n)};s=i&&"function"===typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var o=Number.isNaN||function(t){return t!==t};function a(){a.init.call(this)}t.exports=a,t.exports.once=function(t,e){return new Promise((function(n,s){function i(n){t.removeListener(e,r),s(n)}function r(){"function"===typeof t.removeListener&&t.removeListener("error",i),n([].slice.call(arguments))}_(t,e,r,{once:!0}),"error"!==e&&function(t,e,n){"function"===typeof t.on&&_(t,"error",e,n)}(t,i,{once:!0})}))},a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var l=10;function u(t){if("function"!==typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function c(t){return void 0===t._maxListeners?a.defaultMaxListeners:t._maxListeners}function h(t,e,n,s){var i,r,o,a;if(u(n),void 0===(r=t._events)?(r=t._events=Object.create(null),t._eventsCount=0):(void 0!==r.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),r=t._events),o=r[e]),void 0===o)o=r[e]=n,++t._eventsCount;else if("function"===typeof o?o=r[e]=s?[n,o]:[o,n]:s?o.unshift(n):o.push(n),(i=c(t))>0&&o.length>i&&!o.warned){o.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=t,l.type=e,l.count=o.length,a=l,console&&console.warn&&console.warn(a)}return t}function d(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function f(t,e,n){var s={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},i=d.bind(s);return i.listener=n,s.wrapFn=i,i}function p(t,e,n){var s=t._events;if(void 0===s)return[];var i=s[e];return void 0===i?[]:"function"===typeof i?n?[i.listener||i]:[i]:n?function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(i):g(i,i.length)}function m(t){var e=this._events;if(void 0!==e){var n=e[t];if("function"===typeof n)return 1;if(void 0!==n)return n.length}return 0}function g(t,e){for(var n=new Array(e),s=0;s<e;++s)n[s]=t[s];return n}function _(t,e,n,s){if("function"===typeof t.on)s.once?t.once(e,n):t.on(e,n);else{if("function"!==typeof t.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(e,(function i(r){s.once&&t.removeEventListener(e,i),n(r)}))}}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return l},set:function(t){if("number"!==typeof t||t<0||o(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");l=t}}),a.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(t){if("number"!==typeof t||t<0||o(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},a.prototype.getMaxListeners=function(){return c(this)},a.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);var s="error"===t,i=this._events;if(void 0!==i)s=s&&void 0===i.error;else if(!s)return!1;if(s){var o;if(e.length>0&&(o=e[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var l=i[t];if(void 0===l)return!1;if("function"===typeof l)r(l,this,e);else{var u=l.length,c=g(l,u);for(n=0;n<u;++n)r(c[n],this,e)}return!0},a.prototype.addListener=function(t,e){return h(this,t,e,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(t,e){return h(this,t,e,!0)},a.prototype.once=function(t,e){return u(e),this.on(t,f(this,t,e)),this},a.prototype.prependOnceListener=function(t,e){return u(e),this.prependListener(t,f(this,t,e)),this},a.prototype.removeListener=function(t,e){var n,s,i,r,o;if(u(e),void 0===(s=this._events))return this;if(void 0===(n=s[t]))return this;if(n===e||n.listener===e)0===--this._eventsCount?this._events=Object.create(null):(delete s[t],s.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!==typeof n){for(i=-1,r=n.length-1;r>=0;r--)if(n[r]===e||n[r].listener===e){o=n[r].listener,i=r;break}if(i<0)return this;0===i?n.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(n,i),1===n.length&&(s[t]=n[0]),void 0!==s.removeListener&&this.emit("removeListener",t,o||e)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(t){var e,n,s;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[t]&&(0===--this._eventsCount?this._events=Object.create(null):delete n[t]),this;if(0===arguments.length){var i,r=Object.keys(n);for(s=0;s<r.length;++s)"removeListener"!==(i=r[s])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"===typeof(e=n[t]))this.removeListener(t,e);else if(void 0!==e)for(s=e.length-1;s>=0;s--)this.removeListener(t,e[s]);return this},a.prototype.listeners=function(t){return p(this,t,!0)},a.prototype.rawListeners=function(t){return p(this,t,!1)},a.listenerCount=function(t,e){return"function"===typeof t.listenerCount?t.listenerCount(e):m.call(t,e)},a.prototype.listenerCount=m,a.prototype.eventNames=function(){return this._eventsCount>0?s(this._events):[]}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"Piano",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(e,"PianoKey",{enumerable:!0,get:function(){return i.default}});var s=r(n(66)),i=r(n(37));function r(t){return t&&t.__esModule?t:{default:t}}},function(t,e,n){var s=n(38).GenIcon;t.exports.FaPlay=function(t){return s({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M424.4 214.7L72.4 6.6C43.8-10.3 0 6.1 0 47.9V464c0 37.5 40.7 60.1 72.4 41.3l352-208c31.4-18.5 31.5-64.1 0-82.6z"}}]})(t)}},function(t,e,n){var s=n(38).GenIcon;t.exports.FaPause=function(t){return s({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M144 479H48c-26.5 0-48-21.5-48-48V79c0-26.5 21.5-48 48-48h96c26.5 0 48 21.5 48 48v352c0 26.5-21.5 48-48 48zm304-48V79c0-26.5-21.5-48-48-48h-96c-26.5 0-48 21.5-48 48v352c0 26.5 21.5 48 48 48h96c26.5 0 48-21.5 48-48z"}}]})(t)}},function(t,e,n){"use strict";n.d(e,"a",(function(){return v}));var s=n(0),i=function(t,e,n,s){return new(n||(n=Promise))((function(i,r){function o(t){try{l(s.next(t))}catch(e){r(e)}}function a(t){try{l(s.throw(t))}catch(e){r(e)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}l((s=s.apply(t,e||[])).next())}))};class r extends s.ToneAudioNode{constructor(t){super(t),this.name="PianoComponent",this.input=void 0,this.output=new s.Volume({context:this.context}),this._enabled=!1,this.volume=this.output.volume,this._loaded=!1,this.volume.value=t.volume,this._enabled=t.enabled,this.samples=t.samples}get loaded(){return this._loaded}load(){return i(this,void 0,void 0,(function*(){if(!this._enabled)return Promise.resolve();yield this._internalLoad(),this._loaded=!0}))}}function o(t){return Object(s.Frequency)(t,"midi").toNote()}function a(t,e){return Math.random()*(e-t)+t}const l={1:[8],2:[6,12],3:[1,7,15],4:[1,5,10,15],5:[1,4,8,12,16],6:[1,3,7,10,13,16],7:[1,3,6,9,11,13,16],8:[1,3,5,7,9,11,13,16],9:[1,3,5,7,9,11,13,15,16],10:[1,2,3,5,7,9,11,13,15,16],11:[1,2,3,5,7,9,11,13,14,15,16],12:[1,2,3,4,5,7,9,11,13,14,15,16],13:[1,2,3,4,5,7,9,11,12,13,14,15,16],14:[1,2,3,4,5,6,7,9,11,12,13,14,15,16],15:[1,2,3,4,5,6,7,9,10,11,12,13,14,15,16],16:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]},u=[21,24,27,30,33,36,39,42,45,48,51,54,57,60,63,66,69,72,75,78,81,84,87,90,93,96,99,102,105,108];const c=[21,24,27,30,33,36,39,42,45,48,51,54,57,60,63,66,69,72,75,78,81,84,87];class h extends r{constructor(t){super(t),this._urls={};const e=(n=t.minNote,s=t.maxNote,c.filter((t=>n<=t&&t<=s)));var n,s;for(const i of e)this._urls[i]="harmS".concat(o(i).replace("#","s"),".[mp3|ogg]")}triggerAttack(t,e,n){this._enabled&&function(t){return c[0]<=t&&t<=c[c.length-1]}(t)&&this._sampler.triggerAttack(Object(s.Midi)(t).toNote(),e,n*a(.5,1))}_internalLoad(){return new Promise((t=>{this._sampler=new s.Sampler({baseUrl:this.samples,onload:t,urls:this._urls}).connect(this.output)}))}}class d extends r{constructor(t){super(t),this._urls={};for(let e=t.minNote;e<=t.maxNote;e++)this._urls[e]="rel".concat(e-20,".[mp3|ogg]")}_internalLoad(){return new Promise((t=>{this._buffers=new s.ToneAudioBuffers(this._urls,t,this.samples)}))}start(t,e,n){if(this._enabled&&this._buffers.has(t)){new s.ToneBufferSource({url:this._buffers.get(t),context:this.context}).connect(this.output).start(e,0,void 0,.015*n*a(.5,1))}}}class f extends r{constructor(t){super(t),this._downTime=1/0,this._currentSound=null,this._downTime=1/0}_internalLoad(){return new Promise((t=>{this._buffers=new s.ToneAudioBuffers({down1:"pedalD1.mp3",down2:"pedalD2.mp3",up1:"pedalU1.mp3",up2:"pedalU2.mp3"},t,this.samples)}))}_squash(t){this._currentSound&&"stopped"!==this._currentSound.state&&this._currentSound.stop(t),this._currentSound=null}_playSample(t,e){this._enabled&&(this._currentSound=new s.ToneBufferSource({url:this._buffers.get("".concat(e).concat(Math.random()>.5?1:2)),context:this.context,curve:"exponential",fadeIn:.05,fadeOut:.1}).connect(this.output),this._currentSound.start(t,a(0,.01),void 0,.1*a(.5,1)))}down(t){this._squash(t),this._downTime=t,this._playSample(t,"down")}up(t){this._squash(t),this._downTime=1/0,this._playSample(t,"up")}isDown(t){return t>this._downTime}}class p extends s.ToneAudioNode{constructor(t){super(t),this.name="PianoString",this._urls={},t.notes.forEach((e=>{return this._urls[e]=(n=e,s=t.velocity,"".concat(o(n).replace("#","s"),"v").concat(s,".[mp3|ogg]"));var n,s})),this.samples=t.samples}load(){return new Promise((t=>{this._sampler=this.output=new s.Sampler({attack:0,baseUrl:this.samples,curve:"exponential",onload:t,release:.4,urls:this._urls,volume:3})}))}triggerAttack(t,e,n){this._sampler.triggerAttack(t,e,n)}triggerRelease(t,e){this._sampler.triggerRelease(t,e)}}var m=function(t,e,n,s){return new(n||(n=Promise))((function(i,r){function o(t){try{l(s.next(t))}catch(e){r(e)}}function a(t){try{l(s.throw(t))}catch(e){r(e)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}l((s=s.apply(t,e||[])).next())}))};class g extends r{constructor(t){super(t);const e=(n=t.minNote,s=t.maxNote,u.filter((t=>n<=t&&t<=s)));var n,s;const i=l[t.velocities].slice();this._strings=i.map((n=>new p(Object.assign(t,{notes:e,velocity:n})))),this._activeNotes=new Map}scale(t,e,n,s,i){return(t-e)/(n-e)*(i-s)+s}triggerAttack(t,e,n){const i=this.scale(n,0,1,-.5,this._strings.length-.51),r=Math.max(Math.round(i),0);let o=1+i-r;1===this._strings.length&&(o=n);const a=this._strings[r];this._activeNotes.has(t)&&this.triggerRelease(t,e),this._activeNotes.set(t,a),a.triggerAttack(Object(s.Midi)(t).toNote(),e,o)}triggerRelease(t,e){this._activeNotes.has(t)&&(this._activeNotes.get(t).triggerRelease(Object(s.Midi)(t).toNote(),e),this._activeNotes.delete(t))}_internalLoad(){return m(this,void 0,void 0,(function*(){yield Promise.all(this._strings.map((t=>m(this,void 0,void 0,(function*(){yield t.load(),t.connect(this.output)})))))}))}}var _=function(t,e,n,s){return new(n||(n=Promise))((function(i,r){function o(t){try{l(s.next(t))}catch(e){r(e)}}function a(t){try{l(s.throw(t))}catch(e){r(e)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}l((s=s.apply(t,e||[])).next())}))};class v extends s.ToneAudioNode{constructor(){super(Object(s.optionsFromArguments)(v.getDefaults(),arguments)),this.name="Piano",this.input=void 0,this.output=new s.Gain({context:this.context}),this._heldNotes=new Map,this._loaded=!1;const t=Object(s.optionsFromArguments)(v.getDefaults(),arguments);t.url.endsWith("/")||(t.url+="/"),this.maxPolyphony=t.maxPolyphony,this._heldNotes=new Map,this._sustainedNotes=new Map,this._strings=new g(Object.assign({},t,{enabled:!0,samples:t.url,volume:t.volume.strings})).connect(this.output),this.strings=this._strings.volume,this._pedal=new f(Object.assign({},t,{enabled:t.pedal,samples:t.url,volume:t.volume.pedal})).connect(this.output),this.pedal=this._pedal.volume,this._keybed=new d(Object.assign({},t,{enabled:t.release,samples:t.url,volume:t.volume.keybed})).connect(this.output),this.keybed=this._keybed.volume,this._harmonics=new h(Object.assign({},t,{enabled:t.release,samples:t.url,volume:t.volume.harmonics})).connect(this.output),this.harmonics=this._harmonics.volume}static getDefaults(){return Object.assign(s.ToneAudioNode.getDefaults(),{maxNote:108,minNote:21,pedal:!0,release:!1,url:"https://tambien.github.io/Piano/audio/",velocities:1,maxPolyphony:32,volume:{harmonics:0,keybed:0,pedal:0,strings:0}})}load(){return _(this,void 0,void 0,(function*(){yield Promise.all([this._strings.load(),this._pedal.load(),this._keybed.load(),this._harmonics.load()]),this._loaded=!0}))}get loaded(){return this._loaded}pedalDown(){let{time:t=this.immediate()}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.loaded&&(t=this.toSeconds(t),this._pedal.isDown(t)||this._pedal.down(t)),this}pedalUp(){let{time:t=this.immediate()}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this.loaded){const e=this.toSeconds(t);this._pedal.isDown(e)&&(this._pedal.up(e),this._sustainedNotes.forEach(((t,n)=>{this._heldNotes.has(n)||this._strings.triggerRelease(n,e)})),this._sustainedNotes.clear())}return this}keyDown(t){let{note:e,midi:n,time:i=this.immediate(),velocity:r=.8}=t;return this.loaded&&this.maxPolyphony>this._heldNotes.size+this._sustainedNotes.size?(i=this.toSeconds(i),Object(s.isString)(e)&&(n=Math.round(Object(s.Midi)(e).toMidi())),this._heldNotes.has(n)||(this._heldNotes.set(n,{time:i,velocity:r}),this._strings.triggerAttack(n,i,r))):console.warn("samples not loaded"),this}keyUp(t){let{note:e,midi:n,time:i=this.immediate(),velocity:r=.8}=t;if(this.loaded&&(i=this.toSeconds(i),Object(s.isString)(e)&&(n=Math.round(Object(s.Midi)(e).toMidi())),this._heldNotes.has(n))){const t=this._heldNotes.get(n);this._heldNotes.delete(n);let e=3/Math.pow(Math.max(i-t.time,.1),.7)*t.velocity*r;e=Math.max(e,.4),e=Math.min(e,4),this._pedal.isDown(i)?this._sustainedNotes.has(n)||this._sustainedNotes.set(n,i):(this._strings.triggerRelease(n,i),this._harmonics.triggerAttack(n,i,e)),this._keybed.start(n,i,r)}return this}stopAll(){return this.pedalUp(),this._heldNotes.forEach(((t,e)=>{this.keyUp({midi:e})})),this}}var y=n(41),b=n(10),w=n.n(b),x=function(t,e,n,s){return new(n||(n=Promise))((function(i,r){function o(t){try{l(s.next(t))}catch(e){r(e)}}function a(t){try{l(s.throw(t))}catch(e){r(e)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}l((s=s.apply(t,e||[])).next())}))};class S extends y.EventEmitter{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all";super(),this.deviceId=t,S.enabled().then((()=>{w.a.addListener("connected",(t=>{"input"===t.port.type&&this._addListeners(t.port)})),w.a.addListener("disconnected",(t=>{this._removeListeners(t.port)})),w.a.inputs.forEach((t=>this._addListeners(t)))}))}_addListeners(t){S.connectedDevices.has(t.id)||(S.connectedDevices.set(t.id,t),this.emit("connect",this._inputToDevice(t)),t.addListener("noteon","all",(e=>{"all"!==this.deviceId&&this.deviceId!==t.id||this.emit("keyDown",{note:"".concat(e.note.name).concat(e.note.octave),midi:e.note.number,velocity:e.velocity,device:this._inputToDevice(t)})})),t.addListener("noteoff","all",(e=>{"all"!==this.deviceId&&this.deviceId!==t.id||this.emit("keyUp",{note:"".concat(e.note.name).concat(e.note.octave),midi:e.note.number,velocity:e.velocity,device:this._inputToDevice(t)})})),t.addListener("controlchange","all",(e=>{"all"!==this.deviceId&&this.deviceId!==t.id||"holdpedal"===e.controller.name&&this.emit(e.value?"pedalDown":"pedalUp",{device:this._inputToDevice(t)})})))}_inputToDevice(t){return{name:t.name,id:t.id,manufacturer:t.manufacturer}}_removeListeners(t){if(S.connectedDevices.has(t.id)){const e=S.connectedDevices.get(t.id);this.emit("disconnect",this._inputToDevice(e)),S.connectedDevices.delete(t.id),e.removeListener("noteon"),e.removeListener("noteoff"),e.removeListener("controlchange")}}emit(t,e){return super.emit(t,e)}on(t,e){return super.on(t,e),this}once(t,e){return super.once(t,e),this}off(t,e){return super.off(t,e),this}static enabled(){return x(this,void 0,void 0,(function*(){S._isEnabled||(yield new Promise(((t,e)=>{w.a.enable((n=>{n?e(n):(S._isEnabled=!0,t())}))})))}))}static getDevices(){return x(this,void 0,void 0,(function*(){return yield S.enabled(),w.a.inputs}))}}S.connectedDevices=new Map,S._isEnabled=!1},function(t,e,n){"use strict";var s=n(24),i=60103,r=60106;e.Fragment=60107,e.StrictMode=60108,e.Profiler=60114;var o=60109,a=60110,l=60112;e.Suspense=60113;var u=60115,c=60116;if("function"===typeof Symbol&&Symbol.for){var h=Symbol.for;i=h("react.element"),r=h("react.portal"),e.Fragment=h("react.fragment"),e.StrictMode=h("react.strict_mode"),e.Profiler=h("react.profiler"),o=h("react.provider"),a=h("react.context"),l=h("react.forward_ref"),e.Suspense=h("react.suspense"),u=h("react.memo"),c=h("react.lazy")}var d="function"===typeof Symbol&&Symbol.iterator;function f(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m={};function g(t,e,n){this.props=t,this.context=e,this.refs=m,this.updater=n||p}function _(){}function v(t,e,n){this.props=t,this.context=e,this.refs=m,this.updater=n||p}g.prototype.isReactComponent={},g.prototype.setState=function(t,e){if("object"!==typeof t&&"function"!==typeof t&&null!=t)throw Error(f(85));this.updater.enqueueSetState(this,t,e,"setState")},g.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},_.prototype=g.prototype;var y=v.prototype=new _;y.constructor=v,s(y,g.prototype),y.isPureReactComponent=!0;var b={current:null},w=Object.prototype.hasOwnProperty,x={key:!0,ref:!0,__self:!0,__source:!0};function S(t,e,n){var s,r={},o=null,a=null;if(null!=e)for(s in void 0!==e.ref&&(a=e.ref),void 0!==e.key&&(o=""+e.key),e)w.call(e,s)&&!x.hasOwnProperty(s)&&(r[s]=e[s]);var l=arguments.length-2;if(1===l)r.children=n;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];r.children=u}if(t&&t.defaultProps)for(s in l=t.defaultProps)void 0===r[s]&&(r[s]=l[s]);return{$$typeof:i,type:t,key:o,ref:a,props:r,_owner:b.current}}function T(t){return"object"===typeof t&&null!==t&&t.$$typeof===i}var E=/\/+/g;function k(t,e){return"object"===typeof t&&null!==t&&null!=t.key?function(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,(function(t){return e[t]}))}(""+t.key):e.toString(36)}function A(t,e,n,s,o){var a=typeof t;"undefined"!==a&&"boolean"!==a||(t=null);var l=!1;if(null===t)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case i:case r:l=!0}}if(l)return o=o(l=t),t=""===s?"."+k(l,0):s,Array.isArray(o)?(n="",null!=t&&(n=t.replace(E,"$&/")+"/"),A(o,e,n,"",(function(t){return t}))):null!=o&&(T(o)&&(o=function(t,e){return{$$typeof:i,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}(o,n+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(E,"$&/")+"/")+t)),e.push(o)),1;if(l=0,s=""===s?".":s+":",Array.isArray(t))for(var u=0;u<t.length;u++){var c=s+k(a=t[u],u);l+=A(a,e,n,c,o)}else if(c=function(t){return null===t||"object"!==typeof t?null:"function"===typeof(t=d&&t[d]||t["@@iterator"])?t:null}(t),"function"===typeof c)for(t=c.call(t),u=0;!(a=t.next()).done;)l+=A(a=a.value,e,n,c=s+k(a,u++),o);else if("object"===a)throw e=""+t,Error(f(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e));return l}function O(t,e,n){if(null==t)return t;var s=[],i=0;return A(t,s,"","",(function(t){return e.call(n,t,i++)})),s}function C(t){if(-1===t._status){var e=t._result;e=e(),t._status=0,t._result=e,e.then((function(e){0===t._status&&(e=e.default,t._status=1,t._result=e)}),(function(e){0===t._status&&(t._status=2,t._result=e)}))}if(1===t._status)return t._result;throw t._result}var M={current:null};function I(){var t=M.current;if(null===t)throw Error(f(321));return t}var D={ReactCurrentDispatcher:M,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:b,IsSomeRendererActing:{current:!1},assign:s};e.Children={map:O,forEach:function(t,e,n){O(t,(function(){e.apply(this,arguments)}),n)},count:function(t){var e=0;return O(t,(function(){e++})),e},toArray:function(t){return O(t,(function(t){return t}))||[]},only:function(t){if(!T(t))throw Error(f(143));return t}},e.Component=g,e.PureComponent=v,e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D,e.cloneElement=function(t,e,n){if(null===t||void 0===t)throw Error(f(267,t));var r=s({},t.props),o=t.key,a=t.ref,l=t._owner;if(null!=e){if(void 0!==e.ref&&(a=e.ref,l=b.current),void 0!==e.key&&(o=""+e.key),t.type&&t.type.defaultProps)var u=t.type.defaultProps;for(c in e)w.call(e,c)&&!x.hasOwnProperty(c)&&(r[c]=void 0===e[c]&&void 0!==u?u[c]:e[c])}var c=arguments.length-2;if(1===c)r.children=n;else if(1<c){u=Array(c);for(var h=0;h<c;h++)u[h]=arguments[h+2];r.children=u}return{$$typeof:i,type:t.type,key:o,ref:a,props:r,_owner:l}},e.createContext=function(t,e){return void 0===e&&(e=null),(t={$$typeof:a,_calculateChangedBits:e,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:o,_context:t},t.Consumer=t},e.createElement=S,e.createFactory=function(t){var e=S.bind(null,t);return e.type=t,e},e.createRef=function(){return{current:null}},e.forwardRef=function(t){return{$$typeof:l,render:t}},e.isValidElement=T,e.lazy=function(t){return{$$typeof:c,_payload:{_status:-1,_result:t},_init:C}},e.memo=function(t,e){return{$$typeof:u,type:t,compare:void 0===e?null:e}},e.useCallback=function(t,e){return I().useCallback(t,e)},e.useContext=function(t,e){return I().useContext(t,e)},e.useDebugValue=function(){},e.useEffect=function(t,e){return I().useEffect(t,e)},e.useImperativeHandle=function(t,e,n){return I().useImperativeHandle(t,e,n)},e.useLayoutEffect=function(t,e){return I().useLayoutEffect(t,e)},e.useMemo=function(t,e){return I().useMemo(t,e)},e.useReducer=function(t,e,n){return I().useReducer(t,e,n)},e.useRef=function(t){return I().useRef(t)},e.useState=function(t){return I().useState(t)},e.version="17.0.2"},function(t,e,n){"use strict";var s=n(2),i=n(24),r=n(48);function o(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!s)throw Error(o(227));var a=new Set,l={};function u(t,e){c(t,e),c(t+"Capture",e)}function c(t,e){for(l[t]=e,t=0;t<e.length;t++)a.add(e[t])}var h=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f=Object.prototype.hasOwnProperty,p={},m={};function g(t,e,n,s,i,r,o){this.acceptsBooleans=2===e||3===e||4===e,this.attributeName=s,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=r,this.removeEmptyString=o}var _={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(t){_[t]=new g(t,0,!1,t,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(t){var e=t[0];_[e]=new g(e,1,!1,t[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(t){_[t]=new g(t,2,!1,t.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(t){_[t]=new g(t,2,!1,t,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(t){_[t]=new g(t,3,!1,t.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(t){_[t]=new g(t,3,!0,t,null,!1,!1)})),["capture","download"].forEach((function(t){_[t]=new g(t,4,!1,t,null,!1,!1)})),["cols","rows","size","span"].forEach((function(t){_[t]=new g(t,6,!1,t,null,!1,!1)})),["rowSpan","start"].forEach((function(t){_[t]=new g(t,5,!1,t.toLowerCase(),null,!1,!1)}));var v=/[\-:]([a-z])/g;function y(t){return t[1].toUpperCase()}function b(t,e,n,s){var i=_.hasOwnProperty(e)?_[e]:null;(null!==i?0===i.type:!s&&(2<e.length&&("o"===e[0]||"O"===e[0])&&("n"===e[1]||"N"===e[1])))||(function(t,e,n,s){if(null===e||"undefined"===typeof e||function(t,e,n,s){if(null!==n&&0===n.type)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return!s&&(null!==n?!n.acceptsBooleans:"data-"!==(t=t.toLowerCase().slice(0,5))&&"aria-"!==t);default:return!1}}(t,e,n,s))return!0;if(s)return!1;if(null!==n)switch(n.type){case 3:return!e;case 4:return!1===e;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}(e,n,i,s)&&(n=null),s||null===i?function(t){return!!f.call(m,t)||!f.call(p,t)&&(d.test(t)?m[t]=!0:(p[t]=!0,!1))}(e)&&(null===n?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=null===n?3!==i.type&&"":n:(e=i.attributeName,s=i.attributeNamespace,null===n?t.removeAttribute(e):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,s?t.setAttributeNS(s,e,n):t.setAttribute(e,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(t){var e=t.replace(v,y);_[e]=new g(e,1,!1,t,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(t){var e=t.replace(v,y);_[e]=new g(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(t){var e=t.replace(v,y);_[e]=new g(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(t){_[t]=new g(t,1,!1,t.toLowerCase(),null,!1,!1)})),_.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(t){_[t]=new g(t,1,!1,t.toLowerCase(),null,!0,!0)}));var w=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,x=60103,S=60106,T=60107,E=60108,k=60114,A=60109,O=60110,C=60112,M=60113,I=60120,D=60115,R=60116,N=60121,P=60128,L=60129,F=60130,q=60131;if("function"===typeof Symbol&&Symbol.for){var V=Symbol.for;x=V("react.element"),S=V("react.portal"),T=V("react.fragment"),E=V("react.strict_mode"),k=V("react.profiler"),A=V("react.provider"),O=V("react.context"),C=V("react.forward_ref"),M=V("react.suspense"),I=V("react.suspense_list"),D=V("react.memo"),R=V("react.lazy"),N=V("react.block"),V("react.scope"),P=V("react.opaque.id"),L=V("react.debug_trace_mode"),F=V("react.offscreen"),q=V("react.legacy_hidden")}var j,U="function"===typeof Symbol&&Symbol.iterator;function z(t){return null===t||"object"!==typeof t?null:"function"===typeof(t=U&&t[U]||t["@@iterator"])?t:null}function B(t){if(void 0===j)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);j=e&&e[1]||""}return"\n"+j+t}var H=!1;function G(t,e){if(!t||H)return"";H=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(e,[])}catch(l){var s=l}Reflect.construct(t,[],e)}else{try{e.call()}catch(l){s=l}t.call(e.prototype)}else{try{throw Error()}catch(l){s=l}t()}}catch(l){if(l&&s&&"string"===typeof l.stack){for(var i=l.stack.split("\n"),r=s.stack.split("\n"),o=i.length-1,a=r.length-1;1<=o&&0<=a&&i[o]!==r[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==r[a]){if(1!==o||1!==a)do{if(o--,0>--a||i[o]!==r[a])return"\n"+i[o].replace(" at new "," at ")}while(1<=o&&0<=a);break}}}finally{H=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?B(t):""}function W(t){switch(t.tag){case 5:return B(t.type);case 16:return B("Lazy");case 13:return B("Suspense");case 19:return B("SuspenseList");case 0:case 2:case 15:return t=G(t.type,!1);case 11:return t=G(t.type.render,!1);case 22:return t=G(t.type._render,!1);case 1:return t=G(t.type,!0);default:return""}}function Q(t){if(null==t)return null;if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t;switch(t){case T:return"Fragment";case S:return"Portal";case k:return"Profiler";case E:return"StrictMode";case M:return"Suspense";case I:return"SuspenseList"}if("object"===typeof t)switch(t.$$typeof){case O:return(t.displayName||"Context")+".Consumer";case A:return(t._context.displayName||"Context")+".Provider";case C:var e=t.render;return e=e.displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case D:return Q(t.type);case N:return Q(t._render);case R:e=t._payload,t=t._init;try{return Q(t(e))}catch(n){}}return null}function Y(t){switch(typeof t){case"boolean":case"number":case"object":case"string":case"undefined":return t;default:return""}}function X(t){var e=t.type;return(t=t.nodeName)&&"input"===t.toLowerCase()&&("checkbox"===e||"radio"===e)}function Z(t){t._valueTracker||(t._valueTracker=function(t){var e=X(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),s=""+t[e];if(!t.hasOwnProperty(e)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,r=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(t){s=""+t,r.call(this,t)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return s},setValue:function(t){s=""+t},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}(t))}function K(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),s="";return t&&(s=X(t)?t.checked?"true":"false":t.value),(t=s)!==n&&(e.setValue(t),!0)}function $(t){if("undefined"===typeof(t=t||("undefined"!==typeof document?document:void 0)))return null;try{return t.activeElement||t.body}catch(e){return t.body}}function J(t,e){var n=e.checked;return i({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:t._wrapperState.initialChecked})}function tt(t,e){var n=null==e.defaultValue?"":e.defaultValue,s=null!=e.checked?e.checked:e.defaultChecked;n=Y(null!=e.value?e.value:n),t._wrapperState={initialChecked:s,initialValue:n,controlled:"checkbox"===e.type||"radio"===e.type?null!=e.checked:null!=e.value}}function et(t,e){null!=(e=e.checked)&&b(t,"checked",e,!1)}function nt(t,e){et(t,e);var n=Y(e.value),s=e.type;if(null!=n)"number"===s?(0===n&&""===t.value||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if("submit"===s||"reset"===s)return void t.removeAttribute("value");e.hasOwnProperty("value")?it(t,e.type,n):e.hasOwnProperty("defaultValue")&&it(t,e.type,Y(e.defaultValue)),null==e.checked&&null!=e.defaultChecked&&(t.defaultChecked=!!e.defaultChecked)}function st(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var s=e.type;if(!("submit"!==s&&"reset"!==s||void 0!==e.value&&null!==e.value))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}""!==(n=t.name)&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,""!==n&&(t.name=n)}function it(t,e,n){"number"===e&&$(t.ownerDocument)===t||(null==n?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}function rt(t,e){return t=i({children:void 0},e),(e=function(t){var e="";return s.Children.forEach(t,(function(t){null!=t&&(e+=t)})),e}(e.children))&&(t.children=e),t}function ot(t,e,n,s){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&s&&(t[n].defaultSelected=!0)}else{for(n=""+Y(n),e=null,i=0;i<t.length;i++){if(t[i].value===n)return t[i].selected=!0,void(s&&(t[i].defaultSelected=!0));null!==e||t[i].disabled||(e=t[i])}null!==e&&(e.selected=!0)}}function at(t,e){if(null!=e.dangerouslySetInnerHTML)throw Error(o(91));return i({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function lt(t,e){var n=e.value;if(null==n){if(n=e.children,e=e.defaultValue,null!=n){if(null!=e)throw Error(o(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(o(93));n=n[0]}e=n}null==e&&(e=""),n=e}t._wrapperState={initialValue:Y(n)}}function ut(t,e){var n=Y(e.value),s=Y(e.defaultValue);null!=n&&((n=""+n)!==t.value&&(t.value=n),null==e.defaultValue&&t.defaultValue!==n&&(t.defaultValue=n)),null!=s&&(t.defaultValue=""+s)}function ct(t){var e=t.textContent;e===t._wrapperState.initialValue&&""!==e&&null!==e&&(t.value=e)}var ht="http://www.w3.org/1999/xhtml",dt="http://www.w3.org/2000/svg";function ft(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function pt(t,e){return null==t||"http://www.w3.org/1999/xhtml"===t?ft(e):"http://www.w3.org/2000/svg"===t&&"foreignObject"===e?"http://www.w3.org/1999/xhtml":t}var mt,gt,_t=(gt=function(t,e){if(t.namespaceURI!==dt||"innerHTML"in t)t.innerHTML=e;else{for((mt=mt||document.createElement("div")).innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=mt.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,e,n,s){MSApp.execUnsafeLocalFunction((function(){return gt(t,e)}))}:gt);function vt(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&3===n.nodeType)return void(n.nodeValue=e)}t.textContent=e}var yt={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},bt=["Webkit","ms","Moz","O"];function wt(t,e,n){return null==e||"boolean"===typeof e||""===e?"":n||"number"!==typeof e||0===e||yt.hasOwnProperty(t)&&yt[t]?(""+e).trim():e+"px"}function xt(t,e){for(var n in t=t.style,e)if(e.hasOwnProperty(n)){var s=0===n.indexOf("--"),i=wt(n,e[n],s);"float"===n&&(n="cssFloat"),s?t.setProperty(n,i):t[n]=i}}Object.keys(yt).forEach((function(t){bt.forEach((function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),yt[e]=yt[t]}))}));var St=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Tt(t,e){if(e){if(St[t]&&(null!=e.children||null!=e.dangerouslySetInnerHTML))throw Error(o(137,t));if(null!=e.dangerouslySetInnerHTML){if(null!=e.children)throw Error(o(60));if("object"!==typeof e.dangerouslySetInnerHTML||!("__html"in e.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=e.style&&"object"!==typeof e.style)throw Error(o(62))}}function Et(t,e){if(-1===t.indexOf("-"))return"string"===typeof e.is;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function kt(t){return(t=t.target||t.srcElement||window).correspondingUseElement&&(t=t.correspondingUseElement),3===t.nodeType?t.parentNode:t}var At=null,Ot=null,Ct=null;function Mt(t){if(t=si(t)){if("function"!==typeof At)throw Error(o(280));var e=t.stateNode;e&&(e=ri(e),At(t.stateNode,t.type,e))}}function It(t){Ot?Ct?Ct.push(t):Ct=[t]:Ot=t}function Dt(){if(Ot){var t=Ot,e=Ct;if(Ct=Ot=null,Mt(t),e)for(t=0;t<e.length;t++)Mt(e[t])}}function Rt(t,e){return t(e)}function Nt(t,e,n,s,i){return t(e,n,s,i)}function Pt(){}var Lt=Rt,Ft=!1,qt=!1;function Vt(){null===Ot&&null===Ct||(Pt(),Dt())}function jt(t,e){var n=t.stateNode;if(null===n)return null;var s=ri(n);if(null===s)return null;n=s[e];t:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(s=!("button"===(t=t.type)||"input"===t||"select"===t||"textarea"===t)),t=!s;break t;default:t=!1}if(t)return null;if(n&&"function"!==typeof n)throw Error(o(231,e,typeof n));return n}var Ut=!1;if(h)try{var zt={};Object.defineProperty(zt,"passive",{get:function(){Ut=!0}}),window.addEventListener("test",zt,zt),window.removeEventListener("test",zt,zt)}catch(gt){Ut=!1}function Bt(t,e,n,s,i,r,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(c){this.onError(c)}}var Ht=!1,Gt=null,Wt=!1,Qt=null,Yt={onError:function(t){Ht=!0,Gt=t}};function Xt(t,e,n,s,i,r,o,a,l){Ht=!1,Gt=null,Bt.apply(Yt,arguments)}function Zt(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do{0!==(1026&(e=t).flags)&&(n=e.return),t=e.return}while(t)}return 3===e.tag?n:null}function Kt(t){if(13===t.tag){var e=t.memoizedState;if(null===e&&(null!==(t=t.alternate)&&(e=t.memoizedState)),null!==e)return e.dehydrated}return null}function $t(t){if(Zt(t)!==t)throw Error(o(188))}function Jt(t){if(t=function(t){var e=t.alternate;if(!e){if(null===(e=Zt(t)))throw Error(o(188));return e!==t?null:t}for(var n=t,s=e;;){var i=n.return;if(null===i)break;var r=i.alternate;if(null===r){if(null!==(s=i.return)){n=s;continue}break}if(i.child===r.child){for(r=i.child;r;){if(r===n)return $t(i),t;if(r===s)return $t(i),e;r=r.sibling}throw Error(o(188))}if(n.return!==s.return)n=i,s=r;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,s=r;break}if(l===s){a=!0,s=i,n=r;break}l=l.sibling}if(!a){for(l=r.child;l;){if(l===n){a=!0,n=r,s=i;break}if(l===s){a=!0,s=r,n=i;break}l=l.sibling}if(!a)throw Error(o(189))}}if(n.alternate!==s)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?t:e}(t),!t)return null;for(var e=t;;){if(5===e.tag||6===e.tag)return e;if(e.child)e.child.return=e,e=e.child;else{if(e===t)break;for(;!e.sibling;){if(!e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}}return null}function te(t,e){for(var n=t.alternate;null!==e;){if(e===t||e===n)return!0;e=e.return}return!1}var ee,ne,se,ie,re=!1,oe=[],ae=null,le=null,ue=null,ce=new Map,he=new Map,de=[],fe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function pe(t,e,n,s,i){return{blockedOn:t,domEventName:e,eventSystemFlags:16|n,nativeEvent:i,targetContainers:[s]}}function me(t,e){switch(t){case"focusin":case"focusout":ae=null;break;case"dragenter":case"dragleave":le=null;break;case"mouseover":case"mouseout":ue=null;break;case"pointerover":case"pointerout":ce.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":he.delete(e.pointerId)}}function ge(t,e,n,s,i,r){return null===t||t.nativeEvent!==r?(t=pe(e,n,s,i,r),null!==e&&(null!==(e=si(e))&&ne(e)),t):(t.eventSystemFlags|=s,e=t.targetContainers,null!==i&&-1===e.indexOf(i)&&e.push(i),t)}function _e(t){var e=ni(t.target);if(null!==e){var n=Zt(e);if(null!==n)if(13===(e=n.tag)){if(null!==(e=Kt(n)))return t.blockedOn=e,void ie(t.lanePriority,(function(){r.unstable_runWithPriority(t.priority,(function(){se(n)}))}))}else if(3===e&&n.stateNode.hydrate)return void(t.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}t.blockedOn=null}function ve(t){if(null!==t.blockedOn)return!1;for(var e=t.targetContainers;0<e.length;){var n=Je(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(null!==n)return null!==(e=si(n))&&ne(e),t.blockedOn=n,!1;e.shift()}return!0}function ye(t,e,n){ve(t)&&n.delete(e)}function be(){for(re=!1;0<oe.length;){var t=oe[0];if(null!==t.blockedOn){null!==(t=si(t.blockedOn))&&ee(t);break}for(var e=t.targetContainers;0<e.length;){var n=Je(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(null!==n){t.blockedOn=n;break}e.shift()}null===t.blockedOn&&oe.shift()}null!==ae&&ve(ae)&&(ae=null),null!==le&&ve(le)&&(le=null),null!==ue&&ve(ue)&&(ue=null),ce.forEach(ye),he.forEach(ye)}function we(t,e){t.blockedOn===e&&(t.blockedOn=null,re||(re=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,be)))}function xe(t){function e(e){return we(e,t)}if(0<oe.length){we(oe[0],t);for(var n=1;n<oe.length;n++){var s=oe[n];s.blockedOn===t&&(s.blockedOn=null)}}for(null!==ae&&we(ae,t),null!==le&&we(le,t),null!==ue&&we(ue,t),ce.forEach(e),he.forEach(e),n=0;n<de.length;n++)(s=de[n]).blockedOn===t&&(s.blockedOn=null);for(;0<de.length&&null===(n=de[0]).blockedOn;)_e(n),null===n.blockedOn&&de.shift()}function Se(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Te={animationend:Se("Animation","AnimationEnd"),animationiteration:Se("Animation","AnimationIteration"),animationstart:Se("Animation","AnimationStart"),transitionend:Se("Transition","TransitionEnd")},Ee={},ke={};function Ae(t){if(Ee[t])return Ee[t];if(!Te[t])return t;var e,n=Te[t];for(e in n)if(n.hasOwnProperty(e)&&e in ke)return Ee[t]=n[e];return t}h&&(ke=document.createElement("div").style,"AnimationEvent"in window||(delete Te.animationend.animation,delete Te.animationiteration.animation,delete Te.animationstart.animation),"TransitionEvent"in window||delete Te.transitionend.transition);var Oe=Ae("animationend"),Ce=Ae("animationiteration"),Me=Ae("animationstart"),Ie=Ae("transitionend"),De=new Map,Re=new Map,Ne=["abort","abort",Oe,"animationEnd",Ce,"animationIteration",Me,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Ie,"transitionEnd","waiting","waiting"];function Pe(t,e){for(var n=0;n<t.length;n+=2){var s=t[n],i=t[n+1];i="on"+(i[0].toUpperCase()+i.slice(1)),Re.set(s,e),De.set(s,i),u(i,[s])}}(0,r.unstable_now)();var Le=8;function Fe(t){if(0!==(1&t))return Le=15,1;if(0!==(2&t))return Le=14,2;if(0!==(4&t))return Le=13,4;var e=24&t;return 0!==e?(Le=12,e):0!==(32&t)?(Le=11,32):0!==(e=192&t)?(Le=10,e):0!==(256&t)?(Le=9,256):0!==(e=3584&t)?(Le=8,e):0!==(4096&t)?(Le=7,4096):0!==(e=4186112&t)?(Le=6,e):0!==(e=62914560&t)?(Le=5,e):67108864&t?(Le=4,67108864):0!==(134217728&t)?(Le=3,134217728):0!==(e=805306368&t)?(Le=2,e):0!==(1073741824&t)?(Le=1,1073741824):(Le=8,t)}function qe(t,e){var n=t.pendingLanes;if(0===n)return Le=0;var s=0,i=0,r=t.expiredLanes,o=t.suspendedLanes,a=t.pingedLanes;if(0!==r)s=r,i=Le=15;else if(0!==(r=134217727&n)){var l=r&~o;0!==l?(s=Fe(l),i=Le):0!==(a&=r)&&(s=Fe(a),i=Le)}else 0!==(r=n&~o)?(s=Fe(r),i=Le):0!==a&&(s=Fe(a),i=Le);if(0===s)return 0;if(s=n&((0>(s=31-He(s))?0:1<<s)<<1)-1,0!==e&&e!==s&&0===(e&o)){if(Fe(e),i<=Le)return e;Le=i}if(0!==(e=t.entangledLanes))for(t=t.entanglements,e&=s;0<e;)i=1<<(n=31-He(e)),s|=t[n],e&=~i;return s}function Ve(t){return 0!==(t=-1073741825&t.pendingLanes)?t:1073741824&t?1073741824:0}function je(t,e){switch(t){case 15:return 1;case 14:return 2;case 12:return 0===(t=Ue(24&~e))?je(10,e):t;case 10:return 0===(t=Ue(192&~e))?je(8,e):t;case 8:return 0===(t=Ue(3584&~e))&&(0===(t=Ue(4186112&~e))&&(t=512)),t;case 2:return 0===(e=Ue(805306368&~e))&&(e=268435456),e}throw Error(o(358,t))}function Ue(t){return t&-t}function ze(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Be(t,e,n){t.pendingLanes|=e;var s=e-1;t.suspendedLanes&=s,t.pingedLanes&=s,(t=t.eventTimes)[e=31-He(e)]=n}var He=Math.clz32?Math.clz32:function(t){return 0===t?32:31-(Ge(t)/We|0)|0},Ge=Math.log,We=Math.LN2;var Qe=r.unstable_UserBlockingPriority,Ye=r.unstable_runWithPriority,Xe=!0;function Ze(t,e,n,s){Ft||Pt();var i=$e,r=Ft;Ft=!0;try{Nt(i,t,e,n,s)}finally{(Ft=r)||Vt()}}function Ke(t,e,n,s){Ye(Qe,$e.bind(null,t,e,n,s))}function $e(t,e,n,s){var i;if(Xe)if((i=0===(4&e))&&0<oe.length&&-1<fe.indexOf(t))t=pe(null,t,e,n,s),oe.push(t);else{var r=Je(t,e,n,s);if(null===r)i&&me(t,s);else{if(i){if(-1<fe.indexOf(t))return t=pe(r,t,e,n,s),void oe.push(t);if(function(t,e,n,s,i){switch(e){case"focusin":return ae=ge(ae,t,e,n,s,i),!0;case"dragenter":return le=ge(le,t,e,n,s,i),!0;case"mouseover":return ue=ge(ue,t,e,n,s,i),!0;case"pointerover":var r=i.pointerId;return ce.set(r,ge(ce.get(r)||null,t,e,n,s,i)),!0;case"gotpointercapture":return r=i.pointerId,he.set(r,ge(he.get(r)||null,t,e,n,s,i)),!0}return!1}(r,t,e,n,s))return;me(t,s)}Ps(t,e,s,null,n)}}}function Je(t,e,n,s){var i=kt(s);if(null!==(i=ni(i))){var r=Zt(i);if(null===r)i=null;else{var o=r.tag;if(13===o){if(null!==(i=Kt(r)))return i;i=null}else if(3===o){if(r.stateNode.hydrate)return 3===r.tag?r.stateNode.containerInfo:null;i=null}else r!==i&&(i=null)}}return Ps(t,e,s,i,n),null}var tn=null,en=null,nn=null;function sn(){if(nn)return nn;var t,e,n=en,s=n.length,i="value"in tn?tn.value:tn.textContent,r=i.length;for(t=0;t<s&&n[t]===i[t];t++);var o=s-t;for(e=1;e<=o&&n[s-e]===i[r-e];e++);return nn=i.slice(t,1<e?1-e:void 0)}function rn(t){var e=t.keyCode;return"charCode"in t?0===(t=t.charCode)&&13===e&&(t=13):t=e,10===t&&(t=13),32<=t||13===t?t:0}function on(){return!0}function an(){return!1}function ln(t){function e(e,n,s,i,r){for(var o in this._reactName=e,this._targetInst=s,this.type=n,this.nativeEvent=i,this.target=r,this.currentTarget=null,t)t.hasOwnProperty(o)&&(e=t[o],this[o]=e?e(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?on:an,this.isPropagationStopped=an,this}return i(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():"unknown"!==typeof t.returnValue&&(t.returnValue=!1),this.isDefaultPrevented=on)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():"unknown"!==typeof t.cancelBubble&&(t.cancelBubble=!0),this.isPropagationStopped=on)},persist:function(){},isPersistent:on}),e}var un,cn,hn,dn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},fn=ln(dn),pn=i({},dn,{view:0,detail:0}),mn=ln(pn),gn=i({},pn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:On,button:0,buttons:0,relatedTarget:function(t){return void 0===t.relatedTarget?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==hn&&(hn&&"mousemove"===t.type?(un=t.screenX-hn.screenX,cn=t.screenY-hn.screenY):cn=un=0,hn=t),un)},movementY:function(t){return"movementY"in t?t.movementY:cn}}),_n=ln(gn),vn=ln(i({},gn,{dataTransfer:0})),yn=ln(i({},pn,{relatedTarget:0})),bn=ln(i({},dn,{animationName:0,elapsedTime:0,pseudoElement:0})),wn=i({},dn,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),xn=ln(wn),Sn=ln(i({},dn,{data:0})),Tn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},En={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function An(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):!!(t=kn[t])&&!!e[t]}function On(){return An}var Cn=i({},pn,{key:function(t){if(t.key){var e=Tn[t.key]||t.key;if("Unidentified"!==e)return e}return"keypress"===t.type?13===(t=rn(t))?"Enter":String.fromCharCode(t):"keydown"===t.type||"keyup"===t.type?En[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:On,charCode:function(t){return"keypress"===t.type?rn(t):0},keyCode:function(t){return"keydown"===t.type||"keyup"===t.type?t.keyCode:0},which:function(t){return"keypress"===t.type?rn(t):"keydown"===t.type||"keyup"===t.type?t.keyCode:0}}),Mn=ln(Cn),In=ln(i({},gn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Dn=ln(i({},pn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:On})),Rn=ln(i({},dn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Nn=i({},gn,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Pn=ln(Nn),Ln=[9,13,27,32],Fn=h&&"CompositionEvent"in window,qn=null;h&&"documentMode"in document&&(qn=document.documentMode);var Vn=h&&"TextEvent"in window&&!qn,jn=h&&(!Fn||qn&&8<qn&&11>=qn),Un=String.fromCharCode(32),zn=!1;function Bn(t,e){switch(t){case"keyup":return-1!==Ln.indexOf(e.keyCode);case"keydown":return 229!==e.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Hn(t){return"object"===typeof(t=t.detail)&&"data"in t?t.data:null}var Gn=!1;var Wn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Qn(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return"input"===e?!!Wn[t.type]:"textarea"===e}function Yn(t,e,n,s){It(s),0<(e=Fs(e,"onChange")).length&&(n=new fn("onChange","change",null,n,s),t.push({event:n,listeners:e}))}var Xn=null,Zn=null;function Kn(t){Cs(t,0)}function $n(t){if(K(ii(t)))return t}function Jn(t,e){if("change"===t)return e}var ts=!1;if(h){var es;if(h){var ns="oninput"in document;if(!ns){var ss=document.createElement("div");ss.setAttribute("oninput","return;"),ns="function"===typeof ss.oninput}es=ns}else es=!1;ts=es&&(!document.documentMode||9<document.documentMode)}function is(){Xn&&(Xn.detachEvent("onpropertychange",rs),Zn=Xn=null)}function rs(t){if("value"===t.propertyName&&$n(Zn)){var e=[];if(Yn(e,Zn,t,kt(t)),t=Kn,Ft)t(e);else{Ft=!0;try{Rt(t,e)}finally{Ft=!1,Vt()}}}}function os(t,e,n){"focusin"===t?(is(),Zn=n,(Xn=e).attachEvent("onpropertychange",rs)):"focusout"===t&&is()}function as(t){if("selectionchange"===t||"keyup"===t||"keydown"===t)return $n(Zn)}function ls(t,e){if("click"===t)return $n(e)}function us(t,e){if("input"===t||"change"===t)return $n(e)}var cs="function"===typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t===1/e)||t!==t&&e!==e},hs=Object.prototype.hasOwnProperty;function ds(t,e){if(cs(t,e))return!0;if("object"!==typeof t||null===t||"object"!==typeof e||null===e)return!1;var n=Object.keys(t),s=Object.keys(e);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++)if(!hs.call(e,n[s])||!cs(t[n[s]],e[n[s]]))return!1;return!0}function fs(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function ps(t,e){var n,s=fs(t);for(t=0;s;){if(3===s.nodeType){if(n=t+s.textContent.length,t<=e&&n>=e)return{node:s,offset:e-t};t=n}t:{for(;s;){if(s.nextSibling){s=s.nextSibling;break t}s=s.parentNode}s=void 0}s=fs(s)}}function ms(t,e){return!(!t||!e)&&(t===e||(!t||3!==t.nodeType)&&(e&&3===e.nodeType?ms(t,e.parentNode):"contains"in t?t.contains(e):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(e))))}function gs(){for(var t=window,e=$();e instanceof t.HTMLIFrameElement;){try{var n="string"===typeof e.contentWindow.location.href}catch(s){n=!1}if(!n)break;e=$((t=e.contentWindow).document)}return e}function _s(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&("input"===e&&("text"===t.type||"search"===t.type||"tel"===t.type||"url"===t.type||"password"===t.type)||"textarea"===e||"true"===t.contentEditable)}var vs=h&&"documentMode"in document&&11>=document.documentMode,ys=null,bs=null,ws=null,xs=!1;function Ss(t,e,n){var s=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;xs||null==ys||ys!==$(s)||("selectionStart"in(s=ys)&&_s(s)?s={start:s.selectionStart,end:s.selectionEnd}:s={anchorNode:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset},ws&&ds(ws,s)||(ws=s,0<(s=Fs(bs,"onSelect")).length&&(e=new fn("onSelect","select",null,e,n),t.push({event:e,listeners:s}),e.target=ys)))}Pe("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Pe("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Pe(Ne,2);for(var Ts="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Es=0;Es<Ts.length;Es++)Re.set(Ts[Es],0);c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ks="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),As=new Set("cancel close invalid load scroll toggle".split(" ").concat(ks));function Os(t,e,n){var s=t.type||"unknown-event";t.currentTarget=n,function(t,e,n,s,i,r,a,l,u){if(Xt.apply(this,arguments),Ht){if(!Ht)throw Error(o(198));var c=Gt;Ht=!1,Gt=null,Wt||(Wt=!0,Qt=c)}}(s,e,void 0,t),t.currentTarget=null}function Cs(t,e){e=0!==(4&e);for(var n=0;n<t.length;n++){var s=t[n],i=s.event;s=s.listeners;t:{var r=void 0;if(e)for(var o=s.length-1;0<=o;o--){var a=s[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==r&&i.isPropagationStopped())break t;Os(i,a,u),r=l}else for(o=0;o<s.length;o++){if(l=(a=s[o]).instance,u=a.currentTarget,a=a.listener,l!==r&&i.isPropagationStopped())break t;Os(i,a,u),r=l}}}if(Wt)throw t=Qt,Wt=!1,Qt=null,t}function Ms(t,e){var n=oi(e),s=t+"__bubble";n.has(s)||(Ns(e,t,2,!1),n.add(s))}var Is="_reactListening"+Math.random().toString(36).slice(2);function Ds(t){t[Is]||(t[Is]=!0,a.forEach((function(e){As.has(e)||Rs(e,!1,t,null),Rs(e,!0,t,null)})))}function Rs(t,e,n,s){var i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,r=n;if("selectionchange"===t&&9!==n.nodeType&&(r=n.ownerDocument),null!==s&&!e&&As.has(t)){if("scroll"!==t)return;i|=2,r=s}var o=oi(r),a=t+"__"+(e?"capture":"bubble");o.has(a)||(e&&(i|=4),Ns(r,t,i,e),o.add(a))}function Ns(t,e,n,s){var i=Re.get(e);switch(void 0===i?2:i){case 0:i=Ze;break;case 1:i=Ke;break;default:i=$e}n=i.bind(null,e,n,t),i=void 0,!Ut||"touchstart"!==e&&"touchmove"!==e&&"wheel"!==e||(i=!0),s?void 0!==i?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):void 0!==i?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Ps(t,e,n,s,i){var r=s;if(0===(1&e)&&0===(2&e)&&null!==s)t:for(;;){if(null===s)return;var o=s.tag;if(3===o||4===o){var a=s.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===o)for(o=s.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;o=o.return}for(;null!==a;){if(null===(o=ni(a)))return;if(5===(l=o.tag)||6===l){s=r=o;continue t}a=a.parentNode}}s=s.return}!function(t,e,n){if(qt)return t(e,n);qt=!0;try{return Lt(t,e,n)}finally{qt=!1,Vt()}}((function(){var s=r,i=kt(n),o=[];t:{var a=De.get(t);if(void 0!==a){var l=fn,u=t;switch(t){case"keypress":if(0===rn(n))break t;case"keydown":case"keyup":l=Mn;break;case"focusin":u="focus",l=yn;break;case"focusout":u="blur",l=yn;break;case"beforeblur":case"afterblur":l=yn;break;case"click":if(2===n.button)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=_n;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=vn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Dn;break;case Oe:case Ce:case Me:l=bn;break;case Ie:l=Rn;break;case"scroll":l=mn;break;case"wheel":l=Pn;break;case"copy":case"cut":case"paste":l=xn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=In}var c=0!==(4&e),h=!c&&"scroll"===t,d=c?null!==a?a+"Capture":null:a;c=[];for(var f,p=s;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==d&&(null!=(m=jt(p,d))&&c.push(Ls(p,m,f)))),h)break;p=p.return}0<c.length&&(a=new l(a,u,null,n,i),o.push({event:a,listeners:c}))}}if(0===(7&e)){if(l="mouseout"===t||"pointerout"===t,(!(a="mouseover"===t||"pointerover"===t)||0!==(16&e)||!(u=n.relatedTarget||n.fromElement)||!ni(u)&&!u[ti])&&(l||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=s,null!==(u=(u=n.relatedTarget||n.toElement)?ni(u):null)&&(u!==(h=Zt(u))||5!==u.tag&&6!==u.tag)&&(u=null)):(l=null,u=s),l!==u)){if(c=_n,m="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==t&&"pointerover"!==t||(c=In,m="onPointerLeave",d="onPointerEnter",p="pointer"),h=null==l?a:ii(l),f=null==u?a:ii(u),(a=new c(m,p+"leave",l,n,i)).target=h,a.relatedTarget=f,m=null,ni(i)===s&&((c=new c(d,p+"enter",u,n,i)).target=f,c.relatedTarget=h,m=c),h=m,l&&u)t:{for(d=u,p=0,f=c=l;f;f=qs(f))p++;for(f=0,m=d;m;m=qs(m))f++;for(;0<p-f;)c=qs(c),p--;for(;0<f-p;)d=qs(d),f--;for(;p--;){if(c===d||null!==d&&c===d.alternate)break t;c=qs(c),d=qs(d)}c=null}else c=null;null!==l&&Vs(o,a,l,c,!1),null!==u&&null!==h&&Vs(o,h,u,c,!0)}if("select"===(l=(a=s?ii(s):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var g=Jn;else if(Qn(a))if(ts)g=us;else{g=as;var _=os}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(g=ls);switch(g&&(g=g(t,s))?Yn(o,g,n,i):(_&&_(t,a,s),"focusout"===t&&(_=a._wrapperState)&&_.controlled&&"number"===a.type&&it(a,"number",a.value)),_=s?ii(s):window,t){case"focusin":(Qn(_)||"true"===_.contentEditable)&&(ys=_,bs=s,ws=null);break;case"focusout":ws=bs=ys=null;break;case"mousedown":xs=!0;break;case"contextmenu":case"mouseup":case"dragend":xs=!1,Ss(o,n,i);break;case"selectionchange":if(vs)break;case"keydown":case"keyup":Ss(o,n,i)}var v;if(Fn)t:{switch(t){case"compositionstart":var y="onCompositionStart";break t;case"compositionend":y="onCompositionEnd";break t;case"compositionupdate":y="onCompositionUpdate";break t}y=void 0}else Gn?Bn(t,n)&&(y="onCompositionEnd"):"keydown"===t&&229===n.keyCode&&(y="onCompositionStart");y&&(jn&&"ko"!==n.locale&&(Gn||"onCompositionStart"!==y?"onCompositionEnd"===y&&Gn&&(v=sn()):(en="value"in(tn=i)?tn.value:tn.textContent,Gn=!0)),0<(_=Fs(s,y)).length&&(y=new Sn(y,t,null,n,i),o.push({event:y,listeners:_}),v?y.data=v:null!==(v=Hn(n))&&(y.data=v))),(v=Vn?function(t,e){switch(t){case"compositionend":return Hn(e);case"keypress":return 32!==e.which?null:(zn=!0,Un);case"textInput":return(t=e.data)===Un&&zn?null:t;default:return null}}(t,n):function(t,e){if(Gn)return"compositionend"===t||!Fn&&Bn(t,e)?(t=sn(),nn=en=tn=null,Gn=!1,t):null;switch(t){case"paste":default:return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return jn&&"ko"!==e.locale?null:e.data}}(t,n))&&(0<(s=Fs(s,"onBeforeInput")).length&&(i=new Sn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:s}),i.data=v))}Cs(o,e)}))}function Ls(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Fs(t,e){for(var n=e+"Capture",s=[];null!==t;){var i=t,r=i.stateNode;5===i.tag&&null!==r&&(i=r,null!=(r=jt(t,n))&&s.unshift(Ls(t,r,i)),null!=(r=jt(t,e))&&s.push(Ls(t,r,i))),t=t.return}return s}function qs(t){if(null===t)return null;do{t=t.return}while(t&&5!==t.tag);return t||null}function Vs(t,e,n,s,i){for(var r=e._reactName,o=[];null!==n&&n!==s;){var a=n,l=a.alternate,u=a.stateNode;if(null!==l&&l===s)break;5===a.tag&&null!==u&&(a=u,i?null!=(l=jt(n,r))&&o.unshift(Ls(n,l,a)):i||null!=(l=jt(n,r))&&o.push(Ls(n,l,a))),n=n.return}0!==o.length&&t.push({event:e,listeners:o})}function js(){}var Us=null,zs=null;function Bs(t,e){switch(t){case"button":case"input":case"select":case"textarea":return!!e.autoFocus}return!1}function Hs(t,e){return"textarea"===t||"option"===t||"noscript"===t||"string"===typeof e.children||"number"===typeof e.children||"object"===typeof e.dangerouslySetInnerHTML&&null!==e.dangerouslySetInnerHTML&&null!=e.dangerouslySetInnerHTML.__html}var Gs="function"===typeof setTimeout?setTimeout:void 0,Ws="function"===typeof clearTimeout?clearTimeout:void 0;function Qs(t){1===t.nodeType?t.textContent="":9===t.nodeType&&(null!=(t=t.body)&&(t.textContent=""))}function Ys(t){for(;null!=t;t=t.nextSibling){var e=t.nodeType;if(1===e||3===e)break}return t}function Xs(t){t=t.previousSibling;for(var e=0;t;){if(8===t.nodeType){var n=t.data;if("$"===n||"$!"===n||"$?"===n){if(0===e)return t;e--}else"/$"===n&&e++}t=t.previousSibling}return null}var Zs=0;var Ks=Math.random().toString(36).slice(2),$s="__reactFiber$"+Ks,Js="__reactProps$"+Ks,ti="__reactContainer$"+Ks,ei="__reactEvents$"+Ks;function ni(t){var e=t[$s];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ti]||n[$s]){if(n=e.alternate,null!==e.child||null!==n&&null!==n.child)for(t=Xs(t);null!==t;){if(n=t[$s])return n;t=Xs(t)}return e}n=(t=n).parentNode}return null}function si(t){return!(t=t[$s]||t[ti])||5!==t.tag&&6!==t.tag&&13!==t.tag&&3!==t.tag?null:t}function ii(t){if(5===t.tag||6===t.tag)return t.stateNode;throw Error(o(33))}function ri(t){return t[Js]||null}function oi(t){var e=t[ei];return void 0===e&&(e=t[ei]=new Set),e}var ai=[],li=-1;function ui(t){return{current:t}}function ci(t){0>li||(t.current=ai[li],ai[li]=null,li--)}function hi(t,e){li++,ai[li]=t.current,t.current=e}var di={},fi=ui(di),pi=ui(!1),mi=di;function gi(t,e){var n=t.type.contextTypes;if(!n)return di;var s=t.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===e)return s.__reactInternalMemoizedMaskedChildContext;var i,r={};for(i in n)r[i]=e[i];return s&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function _i(t){return null!==(t=t.childContextTypes)&&void 0!==t}function vi(){ci(pi),ci(fi)}function yi(t,e,n){if(fi.current!==di)throw Error(o(168));hi(fi,e),hi(pi,n)}function bi(t,e,n){var s=t.stateNode;if(t=e.childContextTypes,"function"!==typeof s.getChildContext)return n;for(var r in s=s.getChildContext())if(!(r in t))throw Error(o(108,Q(e)||"Unknown",r));return i({},n,s)}function wi(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||di,mi=fi.current,hi(fi,t),hi(pi,pi.current),!0}function xi(t,e,n){var s=t.stateNode;if(!s)throw Error(o(169));n?(t=bi(t,e,mi),s.__reactInternalMemoizedMergedChildContext=t,ci(pi),ci(fi),hi(fi,t)):ci(pi),hi(pi,n)}var Si=null,Ti=null,Ei=r.unstable_runWithPriority,ki=r.unstable_scheduleCallback,Ai=r.unstable_cancelCallback,Oi=r.unstable_shouldYield,Ci=r.unstable_requestPaint,Mi=r.unstable_now,Ii=r.unstable_getCurrentPriorityLevel,Di=r.unstable_ImmediatePriority,Ri=r.unstable_UserBlockingPriority,Ni=r.unstable_NormalPriority,Pi=r.unstable_LowPriority,Li=r.unstable_IdlePriority,Fi={},qi=void 0!==Ci?Ci:function(){},Vi=null,ji=null,Ui=!1,zi=Mi(),Bi=1e4>zi?Mi:function(){return Mi()-zi};function Hi(){switch(Ii()){case Di:return 99;case Ri:return 98;case Ni:return 97;case Pi:return 96;case Li:return 95;default:throw Error(o(332))}}function Gi(t){switch(t){case 99:return Di;case 98:return Ri;case 97:return Ni;case 96:return Pi;case 95:return Li;default:throw Error(o(332))}}function Wi(t,e){return t=Gi(t),Ei(t,e)}function Qi(t,e,n){return t=Gi(t),ki(t,e,n)}function Yi(){if(null!==ji){var t=ji;ji=null,Ai(t)}Xi()}function Xi(){if(!Ui&&null!==Vi){Ui=!0;var t=0;try{var e=Vi;Wi(99,(function(){for(;t<e.length;t++){var n=e[t];do{n=n(!0)}while(null!==n)}})),Vi=null}catch(n){throw null!==Vi&&(Vi=Vi.slice(t+1)),ki(Di,Yi),n}finally{Ui=!1}}}var Zi=w.ReactCurrentBatchConfig;function Ki(t,e){if(t&&t.defaultProps){for(var n in e=i({},e),t=t.defaultProps)void 0===e[n]&&(e[n]=t[n]);return e}return e}var $i=ui(null),Ji=null,tr=null,er=null;function nr(){er=tr=Ji=null}function sr(t){var e=$i.current;ci($i),t.type._context._currentValue=e}function ir(t,e){for(;null!==t;){var n=t.alternate;if((t.childLanes&e)===e){if(null===n||(n.childLanes&e)===e)break;n.childLanes|=e}else t.childLanes|=e,null!==n&&(n.childLanes|=e);t=t.return}}function rr(t,e){Ji=t,er=tr=null,null!==(t=t.dependencies)&&null!==t.firstContext&&(0!==(t.lanes&e)&&(Fo=!0),t.firstContext=null)}function or(t,e){if(er!==t&&!1!==e&&0!==e)if("number"===typeof e&&1073741823!==e||(er=t,e=1073741823),e={context:t,observedBits:e,next:null},null===tr){if(null===Ji)throw Error(o(308));tr=e,Ji.dependencies={lanes:0,firstContext:e,responders:null}}else tr=tr.next=e;return t._currentValue}var ar=!1;function lr(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function ur(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function cr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function hr(t,e){if(null!==(t=t.updateQueue)){var n=(t=t.shared).pending;null===n?e.next=e:(e.next=n.next,n.next=e),t.pending=e}}function dr(t,e){var n=t.updateQueue,s=t.alternate;if(null!==s&&n===(s=s.updateQueue)){var i=null,r=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===r?i=r=o:r=r.next=o,n=n.next}while(null!==n);null===r?i=r=e:r=r.next=e}else i=r=e;return n={baseState:s.baseState,firstBaseUpdate:i,lastBaseUpdate:r,shared:s.shared,effects:s.effects},void(t.updateQueue=n)}null===(t=n.lastBaseUpdate)?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function fr(t,e,n,s){var r=t.updateQueue;ar=!1;var o=r.firstBaseUpdate,a=r.lastBaseUpdate,l=r.shared.pending;if(null!==l){r.shared.pending=null;var u=l,c=u.next;u.next=null,null===a?o=c:a.next=c,a=u;var h=t.alternate;if(null!==h){var d=(h=h.updateQueue).lastBaseUpdate;d!==a&&(null===d?h.firstBaseUpdate=c:d.next=c,h.lastBaseUpdate=u)}}if(null!==o){for(d=r.baseState,a=0,h=c=u=null;;){l=o.lane;var f=o.eventTime;if((s&l)===l){null!==h&&(h=h.next={eventTime:f,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});t:{var p=t,m=o;switch(l=e,f=n,m.tag){case 1:if("function"===typeof(p=m.payload)){d=p.call(f,d,l);break t}d=p;break t;case 3:p.flags=-4097&p.flags|64;case 0:if(null===(l="function"===typeof(p=m.payload)?p.call(f,d,l):p)||void 0===l)break t;d=i({},d,l);break t;case 2:ar=!0}}null!==o.callback&&(t.flags|=32,null===(l=r.effects)?r.effects=[o]:l.push(o))}else f={eventTime:f,lane:l,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===h?(c=h=f,u=d):h=h.next=f,a|=l;if(null===(o=o.next)){if(null===(l=r.shared.pending))break;o=l.next,l.next=null,r.lastBaseUpdate=l,r.shared.pending=null}}null===h&&(u=d),r.baseState=u,r.firstBaseUpdate=c,r.lastBaseUpdate=h,za|=a,t.lanes=a,t.memoizedState=d}}function pr(t,e,n){if(t=e.effects,e.effects=null,null!==t)for(e=0;e<t.length;e++){var s=t[e],i=s.callback;if(null!==i){if(s.callback=null,s=n,"function"!==typeof i)throw Error(o(191,i));i.call(s)}}}var mr=(new s.Component).refs;function gr(t,e,n,s){n=null===(n=n(s,e=t.memoizedState))||void 0===n?e:i({},e,n),t.memoizedState=n,0===t.lanes&&(t.updateQueue.baseState=n)}var _r={isMounted:function(t){return!!(t=t._reactInternals)&&Zt(t)===t},enqueueSetState:function(t,e,n){t=t._reactInternals;var s=fl(),i=pl(t),r=cr(s,i);r.payload=e,void 0!==n&&null!==n&&(r.callback=n),hr(t,r),ml(t,i,s)},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var s=fl(),i=pl(t),r=cr(s,i);r.tag=1,r.payload=e,void 0!==n&&null!==n&&(r.callback=n),hr(t,r),ml(t,i,s)},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=fl(),s=pl(t),i=cr(n,s);i.tag=2,void 0!==e&&null!==e&&(i.callback=e),hr(t,i),ml(t,s,n)}};function vr(t,e,n,s,i,r,o){return"function"===typeof(t=t.stateNode).shouldComponentUpdate?t.shouldComponentUpdate(s,r,o):!e.prototype||!e.prototype.isPureReactComponent||(!ds(n,s)||!ds(i,r))}function yr(t,e,n){var s=!1,i=di,r=e.contextType;return"object"===typeof r&&null!==r?r=or(r):(i=_i(e)?mi:fi.current,r=(s=null!==(s=e.contextTypes)&&void 0!==s)?gi(t,i):di),e=new e(n,r),t.memoizedState=null!==e.state&&void 0!==e.state?e.state:null,e.updater=_r,t.stateNode=e,e._reactInternals=t,s&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=r),e}function br(t,e,n,s){t=e.state,"function"===typeof e.componentWillReceiveProps&&e.componentWillReceiveProps(n,s),"function"===typeof e.UNSAFE_componentWillReceiveProps&&e.UNSAFE_componentWillReceiveProps(n,s),e.state!==t&&_r.enqueueReplaceState(e,e.state,null)}function wr(t,e,n,s){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=mr,lr(t);var r=e.contextType;"object"===typeof r&&null!==r?i.context=or(r):(r=_i(e)?mi:fi.current,i.context=gi(t,r)),fr(t,n,i,s),i.state=t.memoizedState,"function"===typeof(r=e.getDerivedStateFromProps)&&(gr(t,e,r,n),i.state=t.memoizedState),"function"===typeof e.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(e=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),e!==i.state&&_r.enqueueReplaceState(i,i.state,null),fr(t,n,i,s),i.state=t.memoizedState),"function"===typeof i.componentDidMount&&(t.flags|=4)}var xr=Array.isArray;function Sr(t,e,n){if(null!==(t=n.ref)&&"function"!==typeof t&&"object"!==typeof t){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var s=n.stateNode}if(!s)throw Error(o(147,t));var i=""+t;return null!==e&&null!==e.ref&&"function"===typeof e.ref&&e.ref._stringRef===i?e.ref:(e=function(t){var e=s.refs;e===mr&&(e=s.refs={}),null===t?delete e[i]:e[i]=t},e._stringRef=i,e)}if("string"!==typeof t)throw Error(o(284));if(!n._owner)throw Error(o(290,t))}return t}function Tr(t,e){if("textarea"!==t.type)throw Error(o(31,"[object Object]"===Object.prototype.toString.call(e)?"object with keys {"+Object.keys(e).join(", ")+"}":e))}function Er(t){function e(e,n){if(t){var s=e.lastEffect;null!==s?(s.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n,n.nextEffect=null,n.flags=8}}function n(n,s){if(!t)return null;for(;null!==s;)e(n,s),s=s.sibling;return null}function s(t,e){for(t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function i(t,e){return(t=Ql(t,e)).index=0,t.sibling=null,t}function r(e,n,s){return e.index=s,t?null!==(s=e.alternate)?(s=s.index)<n?(e.flags=2,n):s:(e.flags=2,n):n}function a(e){return t&&null===e.alternate&&(e.flags=2),e}function l(t,e,n,s){return null===e||6!==e.tag?((e=Kl(n,t.mode,s)).return=t,e):((e=i(e,n)).return=t,e)}function u(t,e,n,s){return null!==e&&e.elementType===n.type?((s=i(e,n.props)).ref=Sr(t,e,n),s.return=t,s):((s=Yl(n.type,n.key,n.props,null,t.mode,s)).ref=Sr(t,e,n),s.return=t,s)}function c(t,e,n,s){return null===e||4!==e.tag||e.stateNode.containerInfo!==n.containerInfo||e.stateNode.implementation!==n.implementation?((e=$l(n,t.mode,s)).return=t,e):((e=i(e,n.children||[])).return=t,e)}function h(t,e,n,s,r){return null===e||7!==e.tag?((e=Xl(n,t.mode,s,r)).return=t,e):((e=i(e,n)).return=t,e)}function d(t,e,n){if("string"===typeof e||"number"===typeof e)return(e=Kl(""+e,t.mode,n)).return=t,e;if("object"===typeof e&&null!==e){switch(e.$$typeof){case x:return(n=Yl(e.type,e.key,e.props,null,t.mode,n)).ref=Sr(t,null,e),n.return=t,n;case S:return(e=$l(e,t.mode,n)).return=t,e}if(xr(e)||z(e))return(e=Xl(e,t.mode,n,null)).return=t,e;Tr(t,e)}return null}function f(t,e,n,s){var i=null!==e?e.key:null;if("string"===typeof n||"number"===typeof n)return null!==i?null:l(t,e,""+n,s);if("object"===typeof n&&null!==n){switch(n.$$typeof){case x:return n.key===i?n.type===T?h(t,e,n.props.children,s,i):u(t,e,n,s):null;case S:return n.key===i?c(t,e,n,s):null}if(xr(n)||z(n))return null!==i?null:h(t,e,n,s,null);Tr(t,n)}return null}function p(t,e,n,s,i){if("string"===typeof s||"number"===typeof s)return l(e,t=t.get(n)||null,""+s,i);if("object"===typeof s&&null!==s){switch(s.$$typeof){case x:return t=t.get(null===s.key?n:s.key)||null,s.type===T?h(e,t,s.props.children,i,s.key):u(e,t,s,i);case S:return c(e,t=t.get(null===s.key?n:s.key)||null,s,i)}if(xr(s)||z(s))return h(e,t=t.get(n)||null,s,i,null);Tr(e,s)}return null}function m(i,o,a,l){for(var u=null,c=null,h=o,m=o=0,g=null;null!==h&&m<a.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var _=f(i,h,a[m],l);if(null===_){null===h&&(h=g);break}t&&h&&null===_.alternate&&e(i,h),o=r(_,o,m),null===c?u=_:c.sibling=_,c=_,h=g}if(m===a.length)return n(i,h),u;if(null===h){for(;m<a.length;m++)null!==(h=d(i,a[m],l))&&(o=r(h,o,m),null===c?u=h:c.sibling=h,c=h);return u}for(h=s(i,h);m<a.length;m++)null!==(g=p(h,i,m,a[m],l))&&(t&&null!==g.alternate&&h.delete(null===g.key?m:g.key),o=r(g,o,m),null===c?u=g:c.sibling=g,c=g);return t&&h.forEach((function(t){return e(i,t)})),u}function g(i,a,l,u){var c=z(l);if("function"!==typeof c)throw Error(o(150));if(null==(l=c.call(l)))throw Error(o(151));for(var h=c=null,m=a,g=a=0,_=null,v=l.next();null!==m&&!v.done;g++,v=l.next()){m.index>g?(_=m,m=null):_=m.sibling;var y=f(i,m,v.value,u);if(null===y){null===m&&(m=_);break}t&&m&&null===y.alternate&&e(i,m),a=r(y,a,g),null===h?c=y:h.sibling=y,h=y,m=_}if(v.done)return n(i,m),c;if(null===m){for(;!v.done;g++,v=l.next())null!==(v=d(i,v.value,u))&&(a=r(v,a,g),null===h?c=v:h.sibling=v,h=v);return c}for(m=s(i,m);!v.done;g++,v=l.next())null!==(v=p(m,i,g,v.value,u))&&(t&&null!==v.alternate&&m.delete(null===v.key?g:v.key),a=r(v,a,g),null===h?c=v:h.sibling=v,h=v);return t&&m.forEach((function(t){return e(i,t)})),c}return function(t,s,r,l){var u="object"===typeof r&&null!==r&&r.type===T&&null===r.key;u&&(r=r.props.children);var c="object"===typeof r&&null!==r;if(c)switch(r.$$typeof){case x:t:{for(c=r.key,u=s;null!==u;){if(u.key===c){if(7===u.tag){if(r.type===T){n(t,u.sibling),(s=i(u,r.props.children)).return=t,t=s;break t}}else if(u.elementType===r.type){n(t,u.sibling),(s=i(u,r.props)).ref=Sr(t,u,r),s.return=t,t=s;break t}n(t,u);break}e(t,u),u=u.sibling}r.type===T?((s=Xl(r.props.children,t.mode,l,r.key)).return=t,t=s):((l=Yl(r.type,r.key,r.props,null,t.mode,l)).ref=Sr(t,s,r),l.return=t,t=l)}return a(t);case S:t:{for(u=r.key;null!==s;){if(s.key===u){if(4===s.tag&&s.stateNode.containerInfo===r.containerInfo&&s.stateNode.implementation===r.implementation){n(t,s.sibling),(s=i(s,r.children||[])).return=t,t=s;break t}n(t,s);break}e(t,s),s=s.sibling}(s=$l(r,t.mode,l)).return=t,t=s}return a(t)}if("string"===typeof r||"number"===typeof r)return r=""+r,null!==s&&6===s.tag?(n(t,s.sibling),(s=i(s,r)).return=t,t=s):(n(t,s),(s=Kl(r,t.mode,l)).return=t,t=s),a(t);if(xr(r))return m(t,s,r,l);if(z(r))return g(t,s,r,l);if(c&&Tr(t,r),"undefined"===typeof r&&!u)switch(t.tag){case 1:case 22:case 0:case 11:case 15:throw Error(o(152,Q(t.type)||"Component"))}return n(t,s)}}var kr=Er(!0),Ar=Er(!1),Or={},Cr=ui(Or),Mr=ui(Or),Ir=ui(Or);function Dr(t){if(t===Or)throw Error(o(174));return t}function Rr(t,e){switch(hi(Ir,e),hi(Mr,t),hi(Cr,Or),t=e.nodeType){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:pt(null,"");break;default:e=pt(e=(t=8===t?e.parentNode:e).namespaceURI||null,t=t.tagName)}ci(Cr),hi(Cr,e)}function Nr(){ci(Cr),ci(Mr),ci(Ir)}function Pr(t){Dr(Ir.current);var e=Dr(Cr.current),n=pt(e,t.type);e!==n&&(hi(Mr,t),hi(Cr,n))}function Lr(t){Mr.current===t&&(ci(Cr),ci(Mr))}var Fr=ui(0);function qr(t){for(var e=t;null!==e;){if(13===e.tag){var n=e.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return e}else if(19===e.tag&&void 0!==e.memoizedProps.revealOrder){if(0!==(64&e.flags))return e}else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Vr=null,jr=null,Ur=!1;function zr(t,e){var n=Gl(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=e,n.return=t,n.flags=8,null!==t.lastEffect?(t.lastEffect.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n}function Br(t,e){switch(t.tag){case 5:var n=t.type;return null!==(e=1!==e.nodeType||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e)&&(t.stateNode=e,!0);case 6:return null!==(e=""===t.pendingProps||3!==e.nodeType?null:e)&&(t.stateNode=e,!0);default:return!1}}function Hr(t){if(Ur){var e=jr;if(e){var n=e;if(!Br(t,e)){if(!(e=Ys(n.nextSibling))||!Br(t,e))return t.flags=-1025&t.flags|2,Ur=!1,void(Vr=t);zr(Vr,n)}Vr=t,jr=Ys(e.firstChild)}else t.flags=-1025&t.flags|2,Ur=!1,Vr=t}}function Gr(t){for(t=t.return;null!==t&&5!==t.tag&&3!==t.tag&&13!==t.tag;)t=t.return;Vr=t}function Wr(t){if(t!==Vr)return!1;if(!Ur)return Gr(t),Ur=!0,!1;var e=t.type;if(5!==t.tag||"head"!==e&&"body"!==e&&!Hs(e,t.memoizedProps))for(e=jr;e;)zr(t,e),e=Ys(e.nextSibling);if(Gr(t),13===t.tag){if(!(t=null!==(t=t.memoizedState)?t.dehydrated:null))throw Error(o(317));t:{for(t=t.nextSibling,e=0;t;){if(8===t.nodeType){var n=t.data;if("/$"===n){if(0===e){jr=Ys(t.nextSibling);break t}e--}else"$"!==n&&"$!"!==n&&"$?"!==n||e++}t=t.nextSibling}jr=null}}else jr=Vr?Ys(t.stateNode.nextSibling):null;return!0}function Qr(){jr=Vr=null,Ur=!1}var Yr=[];function Xr(){for(var t=0;t<Yr.length;t++)Yr[t]._workInProgressVersionPrimary=null;Yr.length=0}var Zr=w.ReactCurrentDispatcher,Kr=w.ReactCurrentBatchConfig,$r=0,Jr=null,to=null,eo=null,no=!1,so=!1;function io(){throw Error(o(321))}function ro(t,e){if(null===e)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!cs(t[n],e[n]))return!1;return!0}function oo(t,e,n,s,i,r){if($r=r,Jr=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Zr.current=null===t||null===t.memoizedState?Ro:No,t=n(s,i),so){r=0;do{if(so=!1,!(25>r))throw Error(o(301));r+=1,eo=to=null,e.updateQueue=null,Zr.current=Po,t=n(s,i)}while(so)}if(Zr.current=Do,e=null!==to&&null!==to.next,$r=0,eo=to=Jr=null,no=!1,e)throw Error(o(300));return t}function ao(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===eo?Jr.memoizedState=eo=t:eo=eo.next=t,eo}function lo(){if(null===to){var t=Jr.alternate;t=null!==t?t.memoizedState:null}else t=to.next;var e=null===eo?Jr.memoizedState:eo.next;if(null!==e)eo=e,to=t;else{if(null===t)throw Error(o(310));t={memoizedState:(to=t).memoizedState,baseState:to.baseState,baseQueue:to.baseQueue,queue:to.queue,next:null},null===eo?Jr.memoizedState=eo=t:eo=eo.next=t}return eo}function uo(t,e){return"function"===typeof e?e(t):e}function co(t){var e=lo(),n=e.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=t;var s=to,i=s.baseQueue,r=n.pending;if(null!==r){if(null!==i){var a=i.next;i.next=r.next,r.next=a}s.baseQueue=i=r,n.pending=null}if(null!==i){i=i.next,s=s.baseState;var l=a=r=null,u=i;do{var c=u.lane;if(($r&c)===c)null!==l&&(l=l.next={lane:0,action:u.action,eagerReducer:u.eagerReducer,eagerState:u.eagerState,next:null}),s=u.eagerReducer===t?u.eagerState:t(s,u.action);else{var h={lane:c,action:u.action,eagerReducer:u.eagerReducer,eagerState:u.eagerState,next:null};null===l?(a=l=h,r=s):l=l.next=h,Jr.lanes|=c,za|=c}u=u.next}while(null!==u&&u!==i);null===l?r=s:l.next=a,cs(s,e.memoizedState)||(Fo=!0),e.memoizedState=s,e.baseState=r,e.baseQueue=l,n.lastRenderedState=s}return[e.memoizedState,n.dispatch]}function ho(t){var e=lo(),n=e.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=t;var s=n.dispatch,i=n.pending,r=e.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{r=t(r,a.action),a=a.next}while(a!==i);cs(r,e.memoizedState)||(Fo=!0),e.memoizedState=r,null===e.baseQueue&&(e.baseState=r),n.lastRenderedState=r}return[r,s]}function fo(t,e,n){var s=e._getVersion;s=s(e._source);var i=e._workInProgressVersionPrimary;if(null!==i?t=i===s:(t=t.mutableReadLanes,(t=($r&t)===t)&&(e._workInProgressVersionPrimary=s,Yr.push(e))),t)return n(e._source);throw Yr.push(e),Error(o(350))}function po(t,e,n,s){var i=Na;if(null===i)throw Error(o(349));var r=e._getVersion,a=r(e._source),l=Zr.current,u=l.useState((function(){return fo(i,e,n)})),c=u[1],h=u[0];u=eo;var d=t.memoizedState,f=d.refs,p=f.getSnapshot,m=d.source;d=d.subscribe;var g=Jr;return t.memoizedState={refs:f,source:e,subscribe:s},l.useEffect((function(){f.getSnapshot=n,f.setSnapshot=c;var t=r(e._source);if(!cs(a,t)){t=n(e._source),cs(h,t)||(c(t),t=pl(g),i.mutableReadLanes|=t&i.pendingLanes),t=i.mutableReadLanes,i.entangledLanes|=t;for(var s=i.entanglements,o=t;0<o;){var l=31-He(o),u=1<<l;s[l]|=t,o&=~u}}}),[n,e,s]),l.useEffect((function(){return s(e._source,(function(){var t=f.getSnapshot,n=f.setSnapshot;try{n(t(e._source));var s=pl(g);i.mutableReadLanes|=s&i.pendingLanes}catch(r){n((function(){throw r}))}}))}),[e,s]),cs(p,n)&&cs(m,e)&&cs(d,s)||((t={pending:null,dispatch:null,lastRenderedReducer:uo,lastRenderedState:h}).dispatch=c=Io.bind(null,Jr,t),u.queue=t,u.baseQueue=null,h=fo(i,e,n),u.memoizedState=u.baseState=h),h}function mo(t,e,n){return po(lo(),t,e,n)}function go(t){var e=ao();return"function"===typeof t&&(t=t()),e.memoizedState=e.baseState=t,t=(t=e.queue={pending:null,dispatch:null,lastRenderedReducer:uo,lastRenderedState:t}).dispatch=Io.bind(null,Jr,t),[e.memoizedState,t]}function _o(t,e,n,s){return t={tag:t,create:e,destroy:n,deps:s,next:null},null===(e=Jr.updateQueue)?(e={lastEffect:null},Jr.updateQueue=e,e.lastEffect=t.next=t):null===(n=e.lastEffect)?e.lastEffect=t.next=t:(s=n.next,n.next=t,t.next=s,e.lastEffect=t),t}function vo(t){return t={current:t},ao().memoizedState=t}function yo(){return lo().memoizedState}function bo(t,e,n,s){var i=ao();Jr.flags|=t,i.memoizedState=_o(1|e,n,void 0,void 0===s?null:s)}function wo(t,e,n,s){var i=lo();s=void 0===s?null:s;var r=void 0;if(null!==to){var o=to.memoizedState;if(r=o.destroy,null!==s&&ro(s,o.deps))return void _o(e,n,r,s)}Jr.flags|=t,i.memoizedState=_o(1|e,n,r,s)}function xo(t,e){return bo(516,4,t,e)}function So(t,e){return wo(516,4,t,e)}function To(t,e){return wo(4,2,t,e)}function Eo(t,e){return"function"===typeof e?(t=t(),e(t),function(){e(null)}):null!==e&&void 0!==e?(t=t(),e.current=t,function(){e.current=null}):void 0}function ko(t,e,n){return n=null!==n&&void 0!==n?n.concat([t]):null,wo(4,2,Eo.bind(null,e,t),n)}function Ao(){}function Oo(t,e){var n=lo();e=void 0===e?null:e;var s=n.memoizedState;return null!==s&&null!==e&&ro(e,s[1])?s[0]:(n.memoizedState=[t,e],t)}function Co(t,e){var n=lo();e=void 0===e?null:e;var s=n.memoizedState;return null!==s&&null!==e&&ro(e,s[1])?s[0]:(t=t(),n.memoizedState=[t,e],t)}function Mo(t,e){var n=Hi();Wi(98>n?98:n,(function(){t(!0)})),Wi(97<n?97:n,(function(){var n=Kr.transition;Kr.transition=1;try{t(!1),e()}finally{Kr.transition=n}}))}function Io(t,e,n){var s=fl(),i=pl(t),r={lane:i,action:n,eagerReducer:null,eagerState:null,next:null},o=e.pending;if(null===o?r.next=r:(r.next=o.next,o.next=r),e.pending=r,o=t.alternate,t===Jr||null!==o&&o===Jr)so=no=!0;else{if(0===t.lanes&&(null===o||0===o.lanes)&&null!==(o=e.lastRenderedReducer))try{var a=e.lastRenderedState,l=o(a,n);if(r.eagerReducer=o,r.eagerState=l,cs(l,a))return}catch(u){}ml(t,i,s)}}var Do={readContext:or,useCallback:io,useContext:io,useEffect:io,useImperativeHandle:io,useLayoutEffect:io,useMemo:io,useReducer:io,useRef:io,useState:io,useDebugValue:io,useDeferredValue:io,useTransition:io,useMutableSource:io,useOpaqueIdentifier:io,unstable_isNewReconciler:!1},Ro={readContext:or,useCallback:function(t,e){return ao().memoizedState=[t,void 0===e?null:e],t},useContext:or,useEffect:xo,useImperativeHandle:function(t,e,n){return n=null!==n&&void 0!==n?n.concat([t]):null,bo(4,2,Eo.bind(null,e,t),n)},useLayoutEffect:function(t,e){return bo(4,2,t,e)},useMemo:function(t,e){var n=ao();return e=void 0===e?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var s=ao();return e=void 0!==n?n(e):e,s.memoizedState=s.baseState=e,t=(t=s.queue={pending:null,dispatch:null,lastRenderedReducer:t,lastRenderedState:e}).dispatch=Io.bind(null,Jr,t),[s.memoizedState,t]},useRef:vo,useState:go,useDebugValue:Ao,useDeferredValue:function(t){var e=go(t),n=e[0],s=e[1];return xo((function(){var e=Kr.transition;Kr.transition=1;try{s(t)}finally{Kr.transition=e}}),[t]),n},useTransition:function(){var t=go(!1),e=t[0];return vo(t=Mo.bind(null,t[1])),[t,e]},useMutableSource:function(t,e,n){var s=ao();return s.memoizedState={refs:{getSnapshot:e,setSnapshot:null},source:t,subscribe:n},po(s,t,e,n)},useOpaqueIdentifier:function(){if(Ur){var t=!1,e=function(t){return{$$typeof:P,toString:t,valueOf:t}}((function(){throw t||(t=!0,n("r:"+(Zs++).toString(36))),Error(o(355))})),n=go(e)[1];return 0===(2&Jr.mode)&&(Jr.flags|=516,_o(5,(function(){n("r:"+(Zs++).toString(36))}),void 0,null)),e}return go(e="r:"+(Zs++).toString(36)),e},unstable_isNewReconciler:!1},No={readContext:or,useCallback:Oo,useContext:or,useEffect:So,useImperativeHandle:ko,useLayoutEffect:To,useMemo:Co,useReducer:co,useRef:yo,useState:function(){return co(uo)},useDebugValue:Ao,useDeferredValue:function(t){var e=co(uo),n=e[0],s=e[1];return So((function(){var e=Kr.transition;Kr.transition=1;try{s(t)}finally{Kr.transition=e}}),[t]),n},useTransition:function(){var t=co(uo)[0];return[yo().current,t]},useMutableSource:mo,useOpaqueIdentifier:function(){return co(uo)[0]},unstable_isNewReconciler:!1},Po={readContext:or,useCallback:Oo,useContext:or,useEffect:So,useImperativeHandle:ko,useLayoutEffect:To,useMemo:Co,useReducer:ho,useRef:yo,useState:function(){return ho(uo)},useDebugValue:Ao,useDeferredValue:function(t){var e=ho(uo),n=e[0],s=e[1];return So((function(){var e=Kr.transition;Kr.transition=1;try{s(t)}finally{Kr.transition=e}}),[t]),n},useTransition:function(){var t=ho(uo)[0];return[yo().current,t]},useMutableSource:mo,useOpaqueIdentifier:function(){return ho(uo)[0]},unstable_isNewReconciler:!1},Lo=w.ReactCurrentOwner,Fo=!1;function qo(t,e,n,s){e.child=null===t?Ar(e,null,n,s):kr(e,t.child,n,s)}function Vo(t,e,n,s,i){n=n.render;var r=e.ref;return rr(e,i),s=oo(t,e,n,s,r,i),null===t||Fo?(e.flags|=1,qo(t,e,s,i),e.child):(e.updateQueue=t.updateQueue,e.flags&=-517,t.lanes&=~i,oa(t,e,i))}function jo(t,e,n,s,i,r){if(null===t){var o=n.type;return"function"!==typeof o||Wl(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((t=Yl(n.type,null,s,e,e.mode,r)).ref=e.ref,t.return=e,e.child=t):(e.tag=15,e.type=o,Uo(t,e,o,s,i,r))}return o=t.child,0===(i&r)&&(i=o.memoizedProps,(n=null!==(n=n.compare)?n:ds)(i,s)&&t.ref===e.ref)?oa(t,e,r):(e.flags|=1,(t=Ql(o,s)).ref=e.ref,t.return=e,e.child=t)}function Uo(t,e,n,s,i,r){if(null!==t&&ds(t.memoizedProps,s)&&t.ref===e.ref){if(Fo=!1,0===(r&i))return e.lanes=t.lanes,oa(t,e,r);0!==(16384&t.flags)&&(Fo=!0)}return Ho(t,e,n,s,r)}function zo(t,e,n){var s=e.pendingProps,i=s.children,r=null!==t?t.memoizedState:null;if("hidden"===s.mode||"unstable-defer-without-hiding"===s.mode)if(0===(4&e.mode))e.memoizedState={baseLanes:0},Sl(e,n);else{if(0===(1073741824&n))return t=null!==r?r.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t},Sl(e,t),null;e.memoizedState={baseLanes:0},Sl(e,null!==r?r.baseLanes:n)}else null!==r?(s=r.baseLanes|n,e.memoizedState=null):s=n,Sl(e,s);return qo(t,e,i,n),e.child}function Bo(t,e){var n=e.ref;(null===t&&null!==n||null!==t&&t.ref!==n)&&(e.flags|=128)}function Ho(t,e,n,s,i){var r=_i(n)?mi:fi.current;return r=gi(e,r),rr(e,i),n=oo(t,e,n,s,r,i),null===t||Fo?(e.flags|=1,qo(t,e,n,i),e.child):(e.updateQueue=t.updateQueue,e.flags&=-517,t.lanes&=~i,oa(t,e,i))}function Go(t,e,n,s,i){if(_i(n)){var r=!0;wi(e)}else r=!1;if(rr(e,i),null===e.stateNode)null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2),yr(e,n,s),wr(e,n,s,i),s=!0;else if(null===t){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;"object"===typeof u&&null!==u?u=or(u):u=gi(e,u=_i(n)?mi:fi.current);var c=n.getDerivedStateFromProps,h="function"===typeof c||"function"===typeof o.getSnapshotBeforeUpdate;h||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==s||l!==u)&&br(e,o,s,u),ar=!1;var d=e.memoizedState;o.state=d,fr(e,s,o,i),l=e.memoizedState,a!==s||d!==l||pi.current||ar?("function"===typeof c&&(gr(e,n,c,s),l=e.memoizedState),(a=ar||vr(e,n,a,s,d,l,u))?(h||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(e.flags|=4)):("function"===typeof o.componentDidMount&&(e.flags|=4),e.memoizedProps=s,e.memoizedState=l),o.props=s,o.state=l,o.context=u,s=a):("function"===typeof o.componentDidMount&&(e.flags|=4),s=!1)}else{o=e.stateNode,ur(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:Ki(e.type,a),o.props=u,h=e.pendingProps,d=o.context,"object"===typeof(l=n.contextType)&&null!==l?l=or(l):l=gi(e,l=_i(n)?mi:fi.current);var f=n.getDerivedStateFromProps;(c="function"===typeof f||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==h||d!==l)&&br(e,o,s,l),ar=!1,d=e.memoizedState,o.state=d,fr(e,s,o,i);var p=e.memoizedState;a!==h||d!==p||pi.current||ar?("function"===typeof f&&(gr(e,n,f,s),p=e.memoizedState),(u=ar||vr(e,n,u,s,d,p,l))?(c||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(s,p,l),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(s,p,l)),"function"===typeof o.componentDidUpdate&&(e.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(e.flags|=256)):("function"!==typeof o.componentDidUpdate||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=256),e.memoizedProps=s,e.memoizedState=p),o.props=s,o.state=p,o.context=l,s=u):("function"!==typeof o.componentDidUpdate||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=256),s=!1)}return Wo(t,e,n,s,r,i)}function Wo(t,e,n,s,i,r){Bo(t,e);var o=0!==(64&e.flags);if(!s&&!o)return i&&xi(e,n,!1),oa(t,e,r);s=e.stateNode,Lo.current=e;var a=o&&"function"!==typeof n.getDerivedStateFromError?null:s.render();return e.flags|=1,null!==t&&o?(e.child=kr(e,t.child,null,r),e.child=kr(e,null,a,r)):qo(t,e,a,r),e.memoizedState=s.state,i&&xi(e,n,!0),e.child}function Qo(t){var e=t.stateNode;e.pendingContext?yi(0,e.pendingContext,e.pendingContext!==e.context):e.context&&yi(0,e.context,!1),Rr(t,e.containerInfo)}var Yo,Xo,Zo,Ko,$o={dehydrated:null,retryLane:0};function Jo(t,e,n){var s,i=e.pendingProps,r=Fr.current,o=!1;return(s=0!==(64&e.flags))||(s=(null===t||null!==t.memoizedState)&&0!==(2&r)),s?(o=!0,e.flags&=-65):null!==t&&null===t.memoizedState||void 0===i.fallback||!0===i.unstable_avoidThisFallback||(r|=1),hi(Fr,1&r),null===t?(void 0!==i.fallback&&Hr(e),t=i.children,r=i.fallback,o?(t=ta(e,t,r,n),e.child.memoizedState={baseLanes:n},e.memoizedState=$o,t):"number"===typeof i.unstable_expectedLoadTime?(t=ta(e,t,r,n),e.child.memoizedState={baseLanes:n},e.memoizedState=$o,e.lanes=33554432,t):((n=Zl({mode:"visible",children:t},e.mode,n,null)).return=e,e.child=n)):(t.memoizedState,o?(i=na(t,e,i.children,i.fallback,n),o=e.child,r=t.child.memoizedState,o.memoizedState=null===r?{baseLanes:n}:{baseLanes:r.baseLanes|n},o.childLanes=t.childLanes&~n,e.memoizedState=$o,i):(n=ea(t,e,i.children,n),e.memoizedState=null,n))}function ta(t,e,n,s){var i=t.mode,r=t.child;return e={mode:"hidden",children:e},0===(2&i)&&null!==r?(r.childLanes=0,r.pendingProps=e):r=Zl(e,i,0,null),n=Xl(n,i,s,null),r.return=t,n.return=t,r.sibling=n,t.child=r,n}function ea(t,e,n,s){var i=t.child;return t=i.sibling,n=Ql(i,{mode:"visible",children:n}),0===(2&e.mode)&&(n.lanes=s),n.return=e,n.sibling=null,null!==t&&(t.nextEffect=null,t.flags=8,e.firstEffect=e.lastEffect=t),e.child=n}function na(t,e,n,s,i){var r=e.mode,o=t.child;t=o.sibling;var a={mode:"hidden",children:n};return 0===(2&r)&&e.child!==o?((n=e.child).childLanes=0,n.pendingProps=a,null!==(o=n.lastEffect)?(e.firstEffect=n.firstEffect,e.lastEffect=o,o.nextEffect=null):e.firstEffect=e.lastEffect=null):n=Ql(o,a),null!==t?s=Ql(t,s):(s=Xl(s,r,i,null)).flags|=2,s.return=e,n.return=e,n.sibling=s,e.child=n,s}function sa(t,e){t.lanes|=e;var n=t.alternate;null!==n&&(n.lanes|=e),ir(t.return,e)}function ia(t,e,n,s,i,r){var o=t.memoizedState;null===o?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:i,lastEffect:r}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=s,o.tail=n,o.tailMode=i,o.lastEffect=r)}function ra(t,e,n){var s=e.pendingProps,i=s.revealOrder,r=s.tail;if(qo(t,e,s.children,n),0!==(2&(s=Fr.current)))s=1&s|2,e.flags|=64;else{if(null!==t&&0!==(64&t.flags))t:for(t=e.child;null!==t;){if(13===t.tag)null!==t.memoizedState&&sa(t,n);else if(19===t.tag)sa(t,n);else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;null===t.sibling;){if(null===t.return||t.return===e)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}s&=1}if(hi(Fr,s),0===(2&e.mode))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;null!==n;)null!==(t=n.alternate)&&null===qr(t)&&(i=n),n=n.sibling;null===(n=i)?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),ia(e,!1,i,n,r,e.lastEffect);break;case"backwards":for(n=null,i=e.child,e.child=null;null!==i;){if(null!==(t=i.alternate)&&null===qr(t)){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}ia(e,!0,n,null,r,e.lastEffect);break;case"together":ia(e,!1,null,null,void 0,e.lastEffect);break;default:e.memoizedState=null}return e.child}function oa(t,e,n){if(null!==t&&(e.dependencies=t.dependencies),za|=e.lanes,0!==(n&e.childLanes)){if(null!==t&&e.child!==t.child)throw Error(o(153));if(null!==e.child){for(n=Ql(t=e.child,t.pendingProps),e.child=n,n.return=e;null!==t.sibling;)t=t.sibling,(n=n.sibling=Ql(t,t.pendingProps)).return=e;n.sibling=null}return e.child}return null}function aa(t,e){if(!Ur)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;null!==e;)null!==e.alternate&&(n=e),e=e.sibling;null===n?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var s=null;null!==n;)null!==n.alternate&&(s=n),n=n.sibling;null===s?e||null===t.tail?t.tail=null:t.tail.sibling=null:s.sibling=null}}function la(t,e,n){var s=e.pendingProps;switch(e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:case 17:return _i(e.type)&&vi(),null;case 3:return Nr(),ci(pi),ci(fi),Xr(),(s=e.stateNode).pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),null!==t&&null!==t.child||(Wr(e)?e.flags|=4:s.hydrate||(e.flags|=256)),Xo(e),null;case 5:Lr(e);var r=Dr(Ir.current);if(n=e.type,null!==t&&null!=e.stateNode)Zo(t,e,n,s,r),t.ref!==e.ref&&(e.flags|=128);else{if(!s){if(null===e.stateNode)throw Error(o(166));return null}if(t=Dr(Cr.current),Wr(e)){s=e.stateNode,n=e.type;var a=e.memoizedProps;switch(s[$s]=e,s[Js]=a,n){case"dialog":Ms("cancel",s),Ms("close",s);break;case"iframe":case"object":case"embed":Ms("load",s);break;case"video":case"audio":for(t=0;t<ks.length;t++)Ms(ks[t],s);break;case"source":Ms("error",s);break;case"img":case"image":case"link":Ms("error",s),Ms("load",s);break;case"details":Ms("toggle",s);break;case"input":tt(s,a),Ms("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!a.multiple},Ms("invalid",s);break;case"textarea":lt(s,a),Ms("invalid",s)}for(var u in Tt(n,a),t=null,a)a.hasOwnProperty(u)&&(r=a[u],"children"===u?"string"===typeof r?s.textContent!==r&&(t=["children",r]):"number"===typeof r&&s.textContent!==""+r&&(t=["children",""+r]):l.hasOwnProperty(u)&&null!=r&&"onScroll"===u&&Ms("scroll",s));switch(n){case"input":Z(s),st(s,a,!0);break;case"textarea":Z(s),ct(s);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(s.onclick=js)}s=t,e.updateQueue=s,null!==s&&(e.flags|=4)}else{switch(u=9===r.nodeType?r:r.ownerDocument,t===ht&&(t=ft(n)),t===ht?"script"===n?((t=u.createElement("div")).innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):"string"===typeof s.is?t=u.createElement(n,{is:s.is}):(t=u.createElement(n),"select"===n&&(u=t,s.multiple?u.multiple=!0:s.size&&(u.size=s.size))):t=u.createElementNS(t,n),t[$s]=e,t[Js]=s,Yo(t,e,!1,!1),e.stateNode=t,u=Et(n,s),n){case"dialog":Ms("cancel",t),Ms("close",t),r=s;break;case"iframe":case"object":case"embed":Ms("load",t),r=s;break;case"video":case"audio":for(r=0;r<ks.length;r++)Ms(ks[r],t);r=s;break;case"source":Ms("error",t),r=s;break;case"img":case"image":case"link":Ms("error",t),Ms("load",t),r=s;break;case"details":Ms("toggle",t),r=s;break;case"input":tt(t,s),r=J(t,s),Ms("invalid",t);break;case"option":r=rt(t,s);break;case"select":t._wrapperState={wasMultiple:!!s.multiple},r=i({},s,{value:void 0}),Ms("invalid",t);break;case"textarea":lt(t,s),r=at(t,s),Ms("invalid",t);break;default:r=s}Tt(n,r);var c=r;for(a in c)if(c.hasOwnProperty(a)){var h=c[a];"style"===a?xt(t,h):"dangerouslySetInnerHTML"===a?null!=(h=h?h.__html:void 0)&&_t(t,h):"children"===a?"string"===typeof h?("textarea"!==n||""!==h)&&vt(t,h):"number"===typeof h&&vt(t,""+h):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(l.hasOwnProperty(a)?null!=h&&"onScroll"===a&&Ms("scroll",t):null!=h&&b(t,a,h,u))}switch(n){case"input":Z(t),st(t,s,!1);break;case"textarea":Z(t),ct(t);break;case"option":null!=s.value&&t.setAttribute("value",""+Y(s.value));break;case"select":t.multiple=!!s.multiple,null!=(a=s.value)?ot(t,!!s.multiple,a,!1):null!=s.defaultValue&&ot(t,!!s.multiple,s.defaultValue,!0);break;default:"function"===typeof r.onClick&&(t.onclick=js)}Bs(n,s)&&(e.flags|=4)}null!==e.ref&&(e.flags|=128)}return null;case 6:if(t&&null!=e.stateNode)Ko(t,e,t.memoizedProps,s);else{if("string"!==typeof s&&null===e.stateNode)throw Error(o(166));n=Dr(Ir.current),Dr(Cr.current),Wr(e)?(s=e.stateNode,n=e.memoizedProps,s[$s]=e,s.nodeValue!==n&&(e.flags|=4)):((s=(9===n.nodeType?n:n.ownerDocument).createTextNode(s))[$s]=e,e.stateNode=s)}return null;case 13:return ci(Fr),s=e.memoizedState,0!==(64&e.flags)?(e.lanes=n,e):(s=null!==s,n=!1,null===t?void 0!==e.memoizedProps.fallback&&Wr(e):n=null!==t.memoizedState,s&&!n&&0!==(2&e.mode)&&(null===t&&!0!==e.memoizedProps.unstable_avoidThisFallback||0!==(1&Fr.current)?0===Va&&(Va=3):(0!==Va&&3!==Va||(Va=4),null===Na||0===(134217727&za)&&0===(134217727&Ba)||yl(Na,La))),(s||n)&&(e.flags|=4),null);case 4:return Nr(),Xo(e),null===t&&Ds(e.stateNode.containerInfo),null;case 10:return sr(e),null;case 19:if(ci(Fr),null===(s=e.memoizedState))return null;if(a=0!==(64&e.flags),null===(u=s.rendering))if(a)aa(s,!1);else{if(0!==Va||null!==t&&0!==(64&t.flags))for(t=e.child;null!==t;){if(null!==(u=qr(t))){for(e.flags|=64,aa(s,!1),null!==(a=u.updateQueue)&&(e.updateQueue=a,e.flags|=4),null===s.lastEffect&&(e.firstEffect=null),e.lastEffect=s.lastEffect,s=n,n=e.child;null!==n;)t=s,(a=n).flags&=2,a.nextEffect=null,a.firstEffect=null,a.lastEffect=null,null===(u=a.alternate)?(a.childLanes=0,a.lanes=t,a.child=null,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=u.childLanes,a.lanes=u.lanes,a.child=u.child,a.memoizedProps=u.memoizedProps,a.memoizedState=u.memoizedState,a.updateQueue=u.updateQueue,a.type=u.type,t=u.dependencies,a.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return hi(Fr,1&Fr.current|2),e.child}t=t.sibling}null!==s.tail&&Bi()>Qa&&(e.flags|=64,a=!0,aa(s,!1),e.lanes=33554432)}else{if(!a)if(null!==(t=qr(u))){if(e.flags|=64,a=!0,null!==(n=t.updateQueue)&&(e.updateQueue=n,e.flags|=4),aa(s,!0),null===s.tail&&"hidden"===s.tailMode&&!u.alternate&&!Ur)return null!==(e=e.lastEffect=s.lastEffect)&&(e.nextEffect=null),null}else 2*Bi()-s.renderingStartTime>Qa&&1073741824!==n&&(e.flags|=64,a=!0,aa(s,!1),e.lanes=33554432);s.isBackwards?(u.sibling=e.child,e.child=u):(null!==(n=s.last)?n.sibling=u:e.child=u,s.last=u)}return null!==s.tail?(n=s.tail,s.rendering=n,s.tail=n.sibling,s.lastEffect=e.lastEffect,s.renderingStartTime=Bi(),n.sibling=null,e=Fr.current,hi(Fr,a?1&e|2:1&e),n):null;case 23:case 24:return Tl(),null!==t&&null!==t.memoizedState!==(null!==e.memoizedState)&&"unstable-defer-without-hiding"!==s.mode&&(e.flags|=4),null}throw Error(o(156,e.tag))}function ua(t){switch(t.tag){case 1:_i(t.type)&&vi();var e=t.flags;return 4096&e?(t.flags=-4097&e|64,t):null;case 3:if(Nr(),ci(pi),ci(fi),Xr(),0!==(64&(e=t.flags)))throw Error(o(285));return t.flags=-4097&e|64,t;case 5:return Lr(t),null;case 13:return ci(Fr),4096&(e=t.flags)?(t.flags=-4097&e|64,t):null;case 19:return ci(Fr),null;case 4:return Nr(),null;case 10:return sr(t),null;case 23:case 24:return Tl(),null;default:return null}}function ca(t,e){try{var n="",s=e;do{n+=W(s),s=s.return}while(s);var i=n}catch(r){i="\nError generating stack: "+r.message+"\n"+r.stack}return{value:t,source:e,stack:i}}function ha(t,e){try{console.error(e.value)}catch(n){setTimeout((function(){throw n}))}}Yo=function(t,e){for(var n=e.child;null!==n;){if(5===n.tag||6===n.tag)t.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Xo=function(){},Zo=function(t,e,n,s){var r=t.memoizedProps;if(r!==s){t=e.stateNode,Dr(Cr.current);var o,a=null;switch(n){case"input":r=J(t,r),s=J(t,s),a=[];break;case"option":r=rt(t,r),s=rt(t,s),a=[];break;case"select":r=i({},r,{value:void 0}),s=i({},s,{value:void 0}),a=[];break;case"textarea":r=at(t,r),s=at(t,s),a=[];break;default:"function"!==typeof r.onClick&&"function"===typeof s.onClick&&(t.onclick=js)}for(h in Tt(n,s),n=null,r)if(!s.hasOwnProperty(h)&&r.hasOwnProperty(h)&&null!=r[h])if("style"===h){var u=r[h];for(o in u)u.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==h&&"children"!==h&&"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&"autoFocus"!==h&&(l.hasOwnProperty(h)?a||(a=[]):(a=a||[]).push(h,null));for(h in s){var c=s[h];if(u=null!=r?r[h]:void 0,s.hasOwnProperty(h)&&c!==u&&(null!=c||null!=u))if("style"===h)if(u){for(o in u)!u.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&u[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(a||(a=[]),a.push(h,n)),n=c;else"dangerouslySetInnerHTML"===h?(c=c?c.__html:void 0,u=u?u.__html:void 0,null!=c&&u!==c&&(a=a||[]).push(h,c)):"children"===h?"string"!==typeof c&&"number"!==typeof c||(a=a||[]).push(h,""+c):"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&(l.hasOwnProperty(h)?(null!=c&&"onScroll"===h&&Ms("scroll",t),a||u===c||(a=[])):"object"===typeof c&&null!==c&&c.$$typeof===P?c.toString():(a=a||[]).push(h,c))}n&&(a=a||[]).push("style",n);var h=a;(e.updateQueue=h)&&(e.flags|=4)}},Ko=function(t,e,n,s){n!==s&&(e.flags|=4)};var da="function"===typeof WeakMap?WeakMap:Map;function fa(t,e,n){(n=cr(-1,n)).tag=3,n.payload={element:null};var s=e.value;return n.callback=function(){Ka||(Ka=!0,$a=s),ha(0,e)},n}function pa(t,e,n){(n=cr(-1,n)).tag=3;var s=t.type.getDerivedStateFromError;if("function"===typeof s){var i=e.value;n.payload=function(){return ha(0,e),s(i)}}var r=t.stateNode;return null!==r&&"function"===typeof r.componentDidCatch&&(n.callback=function(){"function"!==typeof s&&(null===Ja?Ja=new Set([this]):Ja.add(this),ha(0,e));var t=e.stack;this.componentDidCatch(e.value,{componentStack:null!==t?t:""})}),n}var ma="function"===typeof WeakSet?WeakSet:Set;function ga(t){var e=t.ref;if(null!==e)if("function"===typeof e)try{e(null)}catch(n){Ul(t,n)}else e.current=null}function _a(t,e){switch(e.tag){case 0:case 11:case 15:case 22:case 5:case 6:case 4:case 17:return;case 1:if(256&e.flags&&null!==t){var n=t.memoizedProps,s=t.memoizedState;e=(t=e.stateNode).getSnapshotBeforeUpdate(e.elementType===e.type?n:Ki(e.type,n),s),t.__reactInternalSnapshotBeforeUpdate=e}return;case 3:return void(256&e.flags&&Qs(e.stateNode.containerInfo))}throw Error(o(163))}function va(t,e,n){switch(n.tag){case 0:case 11:case 15:case 22:if(null!==(e=null!==(e=n.updateQueue)?e.lastEffect:null)){t=e=e.next;do{if(3===(3&t.tag)){var s=t.create;t.destroy=s()}t=t.next}while(t!==e)}if(null!==(e=null!==(e=n.updateQueue)?e.lastEffect:null)){t=e=e.next;do{var i=t;s=i.next,0!==(4&(i=i.tag))&&0!==(1&i)&&(ql(n,t),Fl(n,t)),t=s}while(t!==e)}return;case 1:return t=n.stateNode,4&n.flags&&(null===e?t.componentDidMount():(s=n.elementType===n.type?e.memoizedProps:Ki(n.type,e.memoizedProps),t.componentDidUpdate(s,e.memoizedState,t.__reactInternalSnapshotBeforeUpdate))),void(null!==(e=n.updateQueue)&&pr(n,e,t));case 3:if(null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 5:case 1:t=n.child.stateNode}pr(n,e,t)}return;case 5:return t=n.stateNode,void(null===e&&4&n.flags&&Bs(n.type,n.memoizedProps)&&t.focus());case 6:case 4:case 12:case 19:case 17:case 20:case 21:case 23:case 24:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&xe(n)))))}throw Error(o(163))}function ya(t,e){for(var n=t;;){if(5===n.tag){var s=n.stateNode;if(e)"function"===typeof(s=s.style).setProperty?s.setProperty("display","none","important"):s.display="none";else{s=n.stateNode;var i=n.memoizedProps.style;i=void 0!==i&&null!==i&&i.hasOwnProperty("display")?i.display:null,s.style.display=wt("display",i)}}else if(6===n.tag)n.stateNode.nodeValue=e?"":n.memoizedProps;else if((23!==n.tag&&24!==n.tag||null===n.memoizedState||n===t)&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function ba(t,e){if(Ti&&"function"===typeof Ti.onCommitFiberUnmount)try{Ti.onCommitFiberUnmount(Si,e)}catch(r){}switch(e.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(t=e.updateQueue)&&null!==(t=t.lastEffect)){var n=t=t.next;do{var s=n,i=s.destroy;if(s=s.tag,void 0!==i)if(0!==(4&s))ql(e,n);else{s=e;try{i()}catch(r){Ul(s,r)}}n=n.next}while(n!==t)}break;case 1:if(ga(e),"function"===typeof(t=e.stateNode).componentWillUnmount)try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(r){Ul(e,r)}break;case 5:ga(e);break;case 4:ka(t,e)}}function wa(t){t.alternate=null,t.child=null,t.dependencies=null,t.firstEffect=null,t.lastEffect=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.return=null,t.updateQueue=null}function xa(t){return 5===t.tag||3===t.tag||4===t.tag}function Sa(t){t:{for(var e=t.return;null!==e;){if(xa(e))break t;e=e.return}throw Error(o(160))}var n=e;switch(e=n.stateNode,n.tag){case 5:var s=!1;break;case 3:case 4:e=e.containerInfo,s=!0;break;default:throw Error(o(161))}16&n.flags&&(vt(e,""),n.flags&=-17);t:e:for(n=t;;){for(;null===n.sibling;){if(null===n.return||xa(n.return)){n=null;break t}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.flags)continue e;if(null===n.child||4===n.tag)continue e;n.child.return=n,n=n.child}if(!(2&n.flags)){n=n.stateNode;break t}}s?Ta(t,n,e):Ea(t,n,e)}function Ta(t,e,n){var s=t.tag,i=5===s||6===s;if(i)t=i?t.stateNode:t.stateNode.instance,e?8===n.nodeType?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(8===n.nodeType?(e=n.parentNode).insertBefore(t,n):(e=n).appendChild(t),null!==(n=n._reactRootContainer)&&void 0!==n||null!==e.onclick||(e.onclick=js));else if(4!==s&&null!==(t=t.child))for(Ta(t,e,n),t=t.sibling;null!==t;)Ta(t,e,n),t=t.sibling}function Ea(t,e,n){var s=t.tag,i=5===s||6===s;if(i)t=i?t.stateNode:t.stateNode.instance,e?n.insertBefore(t,e):n.appendChild(t);else if(4!==s&&null!==(t=t.child))for(Ea(t,e,n),t=t.sibling;null!==t;)Ea(t,e,n),t=t.sibling}function ka(t,e){for(var n,s,i=e,r=!1;;){if(!r){r=i.return;t:for(;;){if(null===r)throw Error(o(160));switch(n=r.stateNode,r.tag){case 5:s=!1;break t;case 3:case 4:n=n.containerInfo,s=!0;break t}r=r.return}r=!0}if(5===i.tag||6===i.tag){t:for(var a=t,l=i,u=l;;)if(ba(a,u),null!==u.child&&4!==u.tag)u.child.return=u,u=u.child;else{if(u===l)break t;for(;null===u.sibling;){if(null===u.return||u.return===l)break t;u=u.return}u.sibling.return=u.return,u=u.sibling}s?(a=n,l=i.stateNode,8===a.nodeType?a.parentNode.removeChild(l):a.removeChild(l)):n.removeChild(i.stateNode)}else if(4===i.tag){if(null!==i.child){n=i.stateNode.containerInfo,s=!0,i.child.return=i,i=i.child;continue}}else if(ba(t,i),null!==i.child){i.child.return=i,i=i.child;continue}if(i===e)break;for(;null===i.sibling;){if(null===i.return||i.return===e)return;4===(i=i.return).tag&&(r=!1)}i.sibling.return=i.return,i=i.sibling}}function Aa(t,e){switch(e.tag){case 0:case 11:case 14:case 15:case 22:var n=e.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var s=n=n.next;do{3===(3&s.tag)&&(t=s.destroy,s.destroy=void 0,void 0!==t&&t()),s=s.next}while(s!==n)}return;case 1:case 12:case 17:return;case 5:if(null!=(n=e.stateNode)){s=e.memoizedProps;var i=null!==t?t.memoizedProps:s;t=e.type;var r=e.updateQueue;if(e.updateQueue=null,null!==r){for(n[Js]=s,"input"===t&&"radio"===s.type&&null!=s.name&&et(n,s),Et(t,i),e=Et(t,s),i=0;i<r.length;i+=2){var a=r[i],l=r[i+1];"style"===a?xt(n,l):"dangerouslySetInnerHTML"===a?_t(n,l):"children"===a?vt(n,l):b(n,a,l,e)}switch(t){case"input":nt(n,s);break;case"textarea":ut(n,s);break;case"select":t=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!s.multiple,null!=(r=s.value)?ot(n,!!s.multiple,r,!1):t!==!!s.multiple&&(null!=s.defaultValue?ot(n,!!s.multiple,s.defaultValue,!0):ot(n,!!s.multiple,s.multiple?[]:"",!1))}}}return;case 6:if(null===e.stateNode)throw Error(o(162));return void(e.stateNode.nodeValue=e.memoizedProps);case 3:return void((n=e.stateNode).hydrate&&(n.hydrate=!1,xe(n.containerInfo)));case 13:return null!==e.memoizedState&&(Wa=Bi(),ya(e.child,!0)),void Oa(e);case 19:return void Oa(e);case 23:case 24:return void ya(e,null!==e.memoizedState)}throw Error(o(163))}function Oa(t){var e=t.updateQueue;if(null!==e){t.updateQueue=null;var n=t.stateNode;null===n&&(n=t.stateNode=new ma),e.forEach((function(e){var s=Bl.bind(null,t,e);n.has(e)||(n.add(e),e.then(s,s))}))}}function Ca(t,e){return null!==t&&(null===(t=t.memoizedState)||null!==t.dehydrated)&&(null!==(e=e.memoizedState)&&null===e.dehydrated)}var Ma=Math.ceil,Ia=w.ReactCurrentDispatcher,Da=w.ReactCurrentOwner,Ra=0,Na=null,Pa=null,La=0,Fa=0,qa=ui(0),Va=0,ja=null,Ua=0,za=0,Ba=0,Ha=0,Ga=null,Wa=0,Qa=1/0;function Ya(){Qa=Bi()+500}var Xa,Za=null,Ka=!1,$a=null,Ja=null,tl=!1,el=null,nl=90,sl=[],il=[],rl=null,ol=0,al=null,ll=-1,ul=0,cl=0,hl=null,dl=!1;function fl(){return 0!==(48&Ra)?Bi():-1!==ll?ll:ll=Bi()}function pl(t){if(0===(2&(t=t.mode)))return 1;if(0===(4&t))return 99===Hi()?1:2;if(0===ul&&(ul=Ua),0!==Zi.transition){0!==cl&&(cl=null!==Ga?Ga.pendingLanes:0),t=ul;var e=4186112&~cl;return 0===(e&=-e)&&(0===(e=(t=4186112&~t)&-t)&&(e=8192)),e}return t=Hi(),0!==(4&Ra)&&98===t?t=je(12,ul):t=je(t=function(t){switch(t){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(t),ul),t}function ml(t,e,n){if(50<ol)throw ol=0,al=null,Error(o(185));if(null===(t=gl(t,e)))return null;Be(t,e,n),t===Na&&(Ba|=e,4===Va&&yl(t,La));var s=Hi();1===e?0!==(8&Ra)&&0===(48&Ra)?bl(t):(_l(t,n),0===Ra&&(Ya(),Yi())):(0===(4&Ra)||98!==s&&99!==s||(null===rl?rl=new Set([t]):rl.add(t)),_l(t,n)),Ga=t}function gl(t,e){t.lanes|=e;var n=t.alternate;for(null!==n&&(n.lanes|=e),n=t,t=t.return;null!==t;)t.childLanes|=e,null!==(n=t.alternate)&&(n.childLanes|=e),n=t,t=t.return;return 3===n.tag?n.stateNode:null}function _l(t,e){for(var n=t.callbackNode,s=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,a=t.pendingLanes;0<a;){var l=31-He(a),u=1<<l,c=r[l];if(-1===c){if(0===(u&s)||0!==(u&i)){c=e,Fe(u);var h=Le;r[l]=10<=h?c+250:6<=h?c+5e3:-1}}else c<=e&&(t.expiredLanes|=u);a&=~u}if(s=qe(t,t===Na?La:0),e=Le,0===s)null!==n&&(n!==Fi&&Ai(n),t.callbackNode=null,t.callbackPriority=0);else{if(null!==n){if(t.callbackPriority===e)return;n!==Fi&&Ai(n)}15===e?(n=bl.bind(null,t),null===Vi?(Vi=[n],ji=ki(Di,Xi)):Vi.push(n),n=Fi):14===e?n=Qi(99,bl.bind(null,t)):(n=function(t){switch(t){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(o(358,t))}}(e),n=Qi(n,vl.bind(null,t))),t.callbackPriority=e,t.callbackNode=n}}function vl(t){if(ll=-1,cl=ul=0,0!==(48&Ra))throw Error(o(327));var e=t.callbackNode;if(Ll()&&t.callbackNode!==e)return null;var n=qe(t,t===Na?La:0);if(0===n)return null;var s=n,i=Ra;Ra|=16;var r=Al();for(Na===t&&La===s||(Ya(),El(t,s));;)try{Ml();break}catch(l){kl(t,l)}if(nr(),Ia.current=r,Ra=i,null!==Pa?s=0:(Na=null,La=0,s=Va),0!==(Ua&Ba))El(t,0);else if(0!==s){if(2===s&&(Ra|=64,t.hydrate&&(t.hydrate=!1,Qs(t.containerInfo)),0!==(n=Ve(t))&&(s=Ol(t,n))),1===s)throw e=ja,El(t,0),yl(t,n),_l(t,Bi()),e;switch(t.finishedWork=t.current.alternate,t.finishedLanes=n,s){case 0:case 1:throw Error(o(345));case 2:case 5:Rl(t);break;case 3:if(yl(t,n),(62914560&n)===n&&10<(s=Wa+500-Bi())){if(0!==qe(t,0))break;if(((i=t.suspendedLanes)&n)!==n){fl(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Gs(Rl.bind(null,t),s);break}Rl(t);break;case 4:if(yl(t,n),(4186112&n)===n)break;for(s=t.eventTimes,i=-1;0<n;){var a=31-He(n);r=1<<a,(a=s[a])>i&&(i=a),n&=~r}if(n=i,10<(n=(120>(n=Bi()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Ma(n/1960))-n)){t.timeoutHandle=Gs(Rl.bind(null,t),n);break}Rl(t);break;default:throw Error(o(329))}}return _l(t,Bi()),t.callbackNode===e?vl.bind(null,t):null}function yl(t,e){for(e&=~Ha,e&=~Ba,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-He(e),s=1<<n;t[n]=-1,e&=~s}}function bl(t){if(0!==(48&Ra))throw Error(o(327));if(Ll(),t===Na&&0!==(t.expiredLanes&La)){var e=La,n=Ol(t,e);0!==(Ua&Ba)&&(n=Ol(t,e=qe(t,e)))}else n=Ol(t,e=qe(t,0));if(0!==t.tag&&2===n&&(Ra|=64,t.hydrate&&(t.hydrate=!1,Qs(t.containerInfo)),0!==(e=Ve(t))&&(n=Ol(t,e))),1===n)throw n=ja,El(t,0),yl(t,e),_l(t,Bi()),n;return t.finishedWork=t.current.alternate,t.finishedLanes=e,Rl(t),_l(t,Bi()),null}function wl(t,e){var n=Ra;Ra|=1;try{return t(e)}finally{0===(Ra=n)&&(Ya(),Yi())}}function xl(t,e){var n=Ra;Ra&=-2,Ra|=8;try{return t(e)}finally{0===(Ra=n)&&(Ya(),Yi())}}function Sl(t,e){hi(qa,Fa),Fa|=e,Ua|=e}function Tl(){Fa=qa.current,ci(qa)}function El(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(-1!==n&&(t.timeoutHandle=-1,Ws(n)),null!==Pa)for(n=Pa.return;null!==n;){var s=n;switch(s.tag){case 1:null!==(s=s.type.childContextTypes)&&void 0!==s&&vi();break;case 3:Nr(),ci(pi),ci(fi),Xr();break;case 5:Lr(s);break;case 4:Nr();break;case 13:case 19:ci(Fr);break;case 10:sr(s);break;case 23:case 24:Tl()}n=n.return}Na=t,Pa=Ql(t.current,null),La=Fa=Ua=e,Va=0,ja=null,Ha=Ba=za=0}function kl(t,e){for(;;){var n=Pa;try{if(nr(),Zr.current=Do,no){for(var s=Jr.memoizedState;null!==s;){var i=s.queue;null!==i&&(i.pending=null),s=s.next}no=!1}if($r=0,eo=to=Jr=null,so=!1,Da.current=null,null===n||null===n.return){Va=1,ja=e,Pa=null;break}t:{var r=t,o=n.return,a=n,l=e;if(e=La,a.flags|=2048,a.firstEffect=a.lastEffect=null,null!==l&&"object"===typeof l&&"function"===typeof l.then){var u=l;if(0===(2&a.mode)){var c=a.alternate;c?(a.updateQueue=c.updateQueue,a.memoizedState=c.memoizedState,a.lanes=c.lanes):(a.updateQueue=null,a.memoizedState=null)}var h=0!==(1&Fr.current),d=o;do{var f;if(f=13===d.tag){var p=d.memoizedState;if(null!==p)f=null!==p.dehydrated;else{var m=d.memoizedProps;f=void 0!==m.fallback&&(!0!==m.unstable_avoidThisFallback||!h)}}if(f){var g=d.updateQueue;if(null===g){var _=new Set;_.add(u),d.updateQueue=_}else g.add(u);if(0===(2&d.mode)){if(d.flags|=64,a.flags|=16384,a.flags&=-2981,1===a.tag)if(null===a.alternate)a.tag=17;else{var v=cr(-1,1);v.tag=2,hr(a,v)}a.lanes|=1;break t}l=void 0,a=e;var y=r.pingCache;if(null===y?(y=r.pingCache=new da,l=new Set,y.set(u,l)):void 0===(l=y.get(u))&&(l=new Set,y.set(u,l)),!l.has(a)){l.add(a);var b=zl.bind(null,r,u,a);u.then(b,b)}d.flags|=4096,d.lanes=e;break t}d=d.return}while(null!==d);l=Error((Q(a.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==Va&&(Va=2),l=ca(l,a),d=o;do{switch(d.tag){case 3:r=l,d.flags|=4096,e&=-e,d.lanes|=e,dr(d,fa(0,r,e));break t;case 1:r=l;var w=d.type,x=d.stateNode;if(0===(64&d.flags)&&("function"===typeof w.getDerivedStateFromError||null!==x&&"function"===typeof x.componentDidCatch&&(null===Ja||!Ja.has(x)))){d.flags|=4096,e&=-e,d.lanes|=e,dr(d,pa(d,r,e));break t}}d=d.return}while(null!==d)}Dl(n)}catch(S){e=S,Pa===n&&null!==n&&(Pa=n=n.return);continue}break}}function Al(){var t=Ia.current;return Ia.current=Do,null===t?Do:t}function Ol(t,e){var n=Ra;Ra|=16;var s=Al();for(Na===t&&La===e||El(t,e);;)try{Cl();break}catch(i){kl(t,i)}if(nr(),Ra=n,Ia.current=s,null!==Pa)throw Error(o(261));return Na=null,La=0,Va}function Cl(){for(;null!==Pa;)Il(Pa)}function Ml(){for(;null!==Pa&&!Oi();)Il(Pa)}function Il(t){var e=Xa(t.alternate,t,Fa);t.memoizedProps=t.pendingProps,null===e?Dl(t):Pa=e,Da.current=null}function Dl(t){var e=t;do{var n=e.alternate;if(t=e.return,0===(2048&e.flags)){if(null!==(n=la(n,e,Fa)))return void(Pa=n);if(24!==(n=e).tag&&23!==n.tag||null===n.memoizedState||0!==(1073741824&Fa)||0===(4&n.mode)){for(var s=0,i=n.child;null!==i;)s|=i.lanes|i.childLanes,i=i.sibling;n.childLanes=s}null!==t&&0===(2048&t.flags)&&(null===t.firstEffect&&(t.firstEffect=e.firstEffect),null!==e.lastEffect&&(null!==t.lastEffect&&(t.lastEffect.nextEffect=e.firstEffect),t.lastEffect=e.lastEffect),1<e.flags&&(null!==t.lastEffect?t.lastEffect.nextEffect=e:t.firstEffect=e,t.lastEffect=e))}else{if(null!==(n=ua(e)))return n.flags&=2047,void(Pa=n);null!==t&&(t.firstEffect=t.lastEffect=null,t.flags|=2048)}if(null!==(e=e.sibling))return void(Pa=e);Pa=e=t}while(null!==e);0===Va&&(Va=5)}function Rl(t){var e=Hi();return Wi(99,Nl.bind(null,t,e)),null}function Nl(t,e){do{Ll()}while(null!==el);if(0!==(48&Ra))throw Error(o(327));var n=t.finishedWork;if(null===n)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(o(177));t.callbackNode=null;var s=n.lanes|n.childLanes,i=s,r=t.pendingLanes&~i;t.pendingLanes=i,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=i,t.mutableReadLanes&=i,t.entangledLanes&=i,i=t.entanglements;for(var a=t.eventTimes,l=t.expirationTimes;0<r;){var u=31-He(r),c=1<<u;i[u]=0,a[u]=-1,l[u]=-1,r&=~c}if(null!==rl&&0===(24&s)&&rl.has(t)&&rl.delete(t),t===Na&&(Pa=Na=null,La=0),1<n.flags?null!==n.lastEffect?(n.lastEffect.nextEffect=n,s=n.firstEffect):s=n:s=n.firstEffect,null!==s){if(i=Ra,Ra|=32,Da.current=null,Us=Xe,_s(a=gs())){if("selectionStart"in a)l={start:a.selectionStart,end:a.selectionEnd};else t:if(l=(l=a.ownerDocument)&&l.defaultView||window,(c=l.getSelection&&l.getSelection())&&0!==c.rangeCount){l=c.anchorNode,r=c.anchorOffset,u=c.focusNode,c=c.focusOffset;try{l.nodeType,u.nodeType}catch(k){l=null;break t}var h=0,d=-1,f=-1,p=0,m=0,g=a,_=null;e:for(;;){for(var v;g!==l||0!==r&&3!==g.nodeType||(d=h+r),g!==u||0!==c&&3!==g.nodeType||(f=h+c),3===g.nodeType&&(h+=g.nodeValue.length),null!==(v=g.firstChild);)_=g,g=v;for(;;){if(g===a)break e;if(_===l&&++p===r&&(d=h),_===u&&++m===c&&(f=h),null!==(v=g.nextSibling))break;_=(g=_).parentNode}g=v}l=-1===d||-1===f?null:{start:d,end:f}}else l=null;l=l||{start:0,end:0}}else l=null;zs={focusedElem:a,selectionRange:l},Xe=!1,hl=null,dl=!1,Za=s;do{try{Pl()}catch(k){if(null===Za)throw Error(o(330));Ul(Za,k),Za=Za.nextEffect}}while(null!==Za);hl=null,Za=s;do{try{for(a=t;null!==Za;){var y=Za.flags;if(16&y&&vt(Za.stateNode,""),128&y){var b=Za.alternate;if(null!==b){var w=b.ref;null!==w&&("function"===typeof w?w(null):w.current=null)}}switch(1038&y){case 2:Sa(Za),Za.flags&=-3;break;case 6:Sa(Za),Za.flags&=-3,Aa(Za.alternate,Za);break;case 1024:Za.flags&=-1025;break;case 1028:Za.flags&=-1025,Aa(Za.alternate,Za);break;case 4:Aa(Za.alternate,Za);break;case 8:ka(a,l=Za);var x=l.alternate;wa(l),null!==x&&wa(x)}Za=Za.nextEffect}}catch(k){if(null===Za)throw Error(o(330));Ul(Za,k),Za=Za.nextEffect}}while(null!==Za);if(w=zs,b=gs(),y=w.focusedElem,a=w.selectionRange,b!==y&&y&&y.ownerDocument&&ms(y.ownerDocument.documentElement,y)){null!==a&&_s(y)&&(b=a.start,void 0===(w=a.end)&&(w=b),"selectionStart"in y?(y.selectionStart=b,y.selectionEnd=Math.min(w,y.value.length)):(w=(b=y.ownerDocument||document)&&b.defaultView||window).getSelection&&(w=w.getSelection(),l=y.textContent.length,x=Math.min(a.start,l),a=void 0===a.end?x:Math.min(a.end,l),!w.extend&&x>a&&(l=a,a=x,x=l),l=ps(y,x),r=ps(y,a),l&&r&&(1!==w.rangeCount||w.anchorNode!==l.node||w.anchorOffset!==l.offset||w.focusNode!==r.node||w.focusOffset!==r.offset)&&((b=b.createRange()).setStart(l.node,l.offset),w.removeAllRanges(),x>a?(w.addRange(b),w.extend(r.node,r.offset)):(b.setEnd(r.node,r.offset),w.addRange(b))))),b=[];for(w=y;w=w.parentNode;)1===w.nodeType&&b.push({element:w,left:w.scrollLeft,top:w.scrollTop});for("function"===typeof y.focus&&y.focus(),y=0;y<b.length;y++)(w=b[y]).element.scrollLeft=w.left,w.element.scrollTop=w.top}Xe=!!Us,zs=Us=null,t.current=n,Za=s;do{try{for(y=t;null!==Za;){var S=Za.flags;if(36&S&&va(y,Za.alternate,Za),128&S){b=void 0;var T=Za.ref;if(null!==T){var E=Za.stateNode;Za.tag,b=E,"function"===typeof T?T(b):T.current=b}}Za=Za.nextEffect}}catch(k){if(null===Za)throw Error(o(330));Ul(Za,k),Za=Za.nextEffect}}while(null!==Za);Za=null,qi(),Ra=i}else t.current=n;if(tl)tl=!1,el=t,nl=e;else for(Za=s;null!==Za;)e=Za.nextEffect,Za.nextEffect=null,8&Za.flags&&((S=Za).sibling=null,S.stateNode=null),Za=e;if(0===(s=t.pendingLanes)&&(Ja=null),1===s?t===al?ol++:(ol=0,al=t):ol=0,n=n.stateNode,Ti&&"function"===typeof Ti.onCommitFiberRoot)try{Ti.onCommitFiberRoot(Si,n,void 0,64===(64&n.current.flags))}catch(k){}if(_l(t,Bi()),Ka)throw Ka=!1,t=$a,$a=null,t;return 0!==(8&Ra)||Yi(),null}function Pl(){for(;null!==Za;){var t=Za.alternate;dl||null===hl||(0!==(8&Za.flags)?te(Za,hl)&&(dl=!0):13===Za.tag&&Ca(t,Za)&&te(Za,hl)&&(dl=!0));var e=Za.flags;0!==(256&e)&&_a(t,Za),0===(512&e)||tl||(tl=!0,Qi(97,(function(){return Ll(),null}))),Za=Za.nextEffect}}function Ll(){if(90!==nl){var t=97<nl?97:nl;return nl=90,Wi(t,Vl)}return!1}function Fl(t,e){sl.push(e,t),tl||(tl=!0,Qi(97,(function(){return Ll(),null})))}function ql(t,e){il.push(e,t),tl||(tl=!0,Qi(97,(function(){return Ll(),null})))}function Vl(){if(null===el)return!1;var t=el;if(el=null,0!==(48&Ra))throw Error(o(331));var e=Ra;Ra|=32;var n=il;il=[];for(var s=0;s<n.length;s+=2){var i=n[s],r=n[s+1],a=i.destroy;if(i.destroy=void 0,"function"===typeof a)try{a()}catch(u){if(null===r)throw Error(o(330));Ul(r,u)}}for(n=sl,sl=[],s=0;s<n.length;s+=2){i=n[s],r=n[s+1];try{var l=i.create;i.destroy=l()}catch(u){if(null===r)throw Error(o(330));Ul(r,u)}}for(l=t.current.firstEffect;null!==l;)t=l.nextEffect,l.nextEffect=null,8&l.flags&&(l.sibling=null,l.stateNode=null),l=t;return Ra=e,Yi(),!0}function jl(t,e,n){hr(t,e=fa(0,e=ca(n,e),1)),e=fl(),null!==(t=gl(t,1))&&(Be(t,1,e),_l(t,e))}function Ul(t,e){if(3===t.tag)jl(t,t,e);else for(var n=t.return;null!==n;){if(3===n.tag){jl(n,t,e);break}if(1===n.tag){var s=n.stateNode;if("function"===typeof n.type.getDerivedStateFromError||"function"===typeof s.componentDidCatch&&(null===Ja||!Ja.has(s))){var i=pa(n,t=ca(e,t),1);if(hr(n,i),i=fl(),null!==(n=gl(n,1)))Be(n,1,i),_l(n,i);else if("function"===typeof s.componentDidCatch&&(null===Ja||!Ja.has(s)))try{s.componentDidCatch(e,t)}catch(r){}break}}n=n.return}}function zl(t,e,n){var s=t.pingCache;null!==s&&s.delete(e),e=fl(),t.pingedLanes|=t.suspendedLanes&n,Na===t&&(La&n)===n&&(4===Va||3===Va&&(62914560&La)===La&&500>Bi()-Wa?El(t,0):Ha|=n),_l(t,e)}function Bl(t,e){var n=t.stateNode;null!==n&&n.delete(e),0===(e=0)&&(0===(2&(e=t.mode))?e=1:0===(4&e)?e=99===Hi()?1:2:(0===ul&&(ul=Ua),0===(e=Ue(62914560&~ul))&&(e=4194304))),n=fl(),null!==(t=gl(t,e))&&(Be(t,e,n),_l(t,n))}function Hl(t,e,n,s){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Gl(t,e,n,s){return new Hl(t,e,n,s)}function Wl(t){return!(!(t=t.prototype)||!t.isReactComponent)}function Ql(t,e){var n=t.alternate;return null===n?((n=Gl(t.tag,e,t.key,t.mode)).elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Yl(t,e,n,s,i,r){var a=2;if(s=t,"function"===typeof t)Wl(t)&&(a=1);else if("string"===typeof t)a=5;else t:switch(t){case T:return Xl(n.children,i,r,e);case L:a=8,i|=16;break;case E:a=8,i|=1;break;case k:return(t=Gl(12,n,e,8|i)).elementType=k,t.type=k,t.lanes=r,t;case M:return(t=Gl(13,n,e,i)).type=M,t.elementType=M,t.lanes=r,t;case I:return(t=Gl(19,n,e,i)).elementType=I,t.lanes=r,t;case F:return Zl(n,i,r,e);case q:return(t=Gl(24,n,e,i)).elementType=q,t.lanes=r,t;default:if("object"===typeof t&&null!==t)switch(t.$$typeof){case A:a=10;break t;case O:a=9;break t;case C:a=11;break t;case D:a=14;break t;case R:a=16,s=null;break t;case N:a=22;break t}throw Error(o(130,null==t?t:typeof t,""))}return(e=Gl(a,n,e,i)).elementType=t,e.type=s,e.lanes=r,e}function Xl(t,e,n,s){return(t=Gl(7,t,s,e)).lanes=n,t}function Zl(t,e,n,s){return(t=Gl(23,t,s,e)).elementType=F,t.lanes=n,t}function Kl(t,e,n){return(t=Gl(6,t,null,e)).lanes=n,t}function $l(t,e,n){return(e=Gl(4,null!==t.children?t.children:[],t.key,e)).lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Jl(t,e,n){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=ze(0),this.expirationTimes=ze(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ze(0),this.mutableSourceEagerHydrationData=null}function tu(t,e,n,s){var i=e.current,r=fl(),a=pl(i);t:if(n){e:{if(Zt(n=n._reactInternals)!==n||1!==n.tag)throw Error(o(170));var l=n;do{switch(l.tag){case 3:l=l.stateNode.context;break e;case 1:if(_i(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break e}}l=l.return}while(null!==l);throw Error(o(171))}if(1===n.tag){var u=n.type;if(_i(u)){n=bi(n,u,l);break t}}n=l}else n=di;return null===e.context?e.context=n:e.pendingContext=n,(e=cr(r,a)).payload={element:t},null!==(s=void 0===s?null:s)&&(e.callback=s),hr(i,e),ml(i,a,r),a}function eu(t){return(t=t.current).child?(t.child.tag,t.child.stateNode):null}function nu(t,e){if(null!==(t=t.memoizedState)&&null!==t.dehydrated){var n=t.retryLane;t.retryLane=0!==n&&n<e?n:e}}function su(t,e){nu(t,e),(t=t.alternate)&&nu(t,e)}function iu(t,e,n){var s=null!=n&&null!=n.hydrationOptions&&n.hydrationOptions.mutableSources||null;if(n=new Jl(t,e,null!=n&&!0===n.hydrate),e=Gl(3,null,null,2===e?7:1===e?3:0),n.current=e,e.stateNode=n,lr(e),t[ti]=n.current,Ds(8===t.nodeType?t.parentNode:t),s)for(t=0;t<s.length;t++){var i=(e=s[t])._getVersion;i=i(e._source),null==n.mutableSourceEagerHydrationData?n.mutableSourceEagerHydrationData=[e,i]:n.mutableSourceEagerHydrationData.push(e,i)}this._internalRoot=n}function ru(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType&&(8!==t.nodeType||" react-mount-point-unstable "!==t.nodeValue))}function ou(t,e,n,s,i){var r=n._reactRootContainer;if(r){var o=r._internalRoot;if("function"===typeof i){var a=i;i=function(){var t=eu(o);a.call(t)}}tu(e,o,t,i)}else{if(r=n._reactRootContainer=function(t,e){if(e||(e=!(!(e=t?9===t.nodeType?t.documentElement:t.firstChild:null)||1!==e.nodeType||!e.hasAttribute("data-reactroot"))),!e)for(var n;n=t.lastChild;)t.removeChild(n);return new iu(t,0,e?{hydrate:!0}:void 0)}(n,s),o=r._internalRoot,"function"===typeof i){var l=i;i=function(){var t=eu(o);l.call(t)}}xl((function(){tu(e,o,t,i)}))}return eu(o)}function au(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!ru(e))throw Error(o(200));return function(t,e,n){var s=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:S,key:null==s?null:""+s,children:t,containerInfo:e,implementation:n}}(t,e,null,n)}Xa=function(t,e,n){var s=e.lanes;if(null!==t)if(t.memoizedProps!==e.pendingProps||pi.current)Fo=!0;else{if(0===(n&s)){switch(Fo=!1,e.tag){case 3:Qo(e),Qr();break;case 5:Pr(e);break;case 1:_i(e.type)&&wi(e);break;case 4:Rr(e,e.stateNode.containerInfo);break;case 10:s=e.memoizedProps.value;var i=e.type._context;hi($i,i._currentValue),i._currentValue=s;break;case 13:if(null!==e.memoizedState)return 0!==(n&e.child.childLanes)?Jo(t,e,n):(hi(Fr,1&Fr.current),null!==(e=oa(t,e,n))?e.sibling:null);hi(Fr,1&Fr.current);break;case 19:if(s=0!==(n&e.childLanes),0!==(64&t.flags)){if(s)return ra(t,e,n);e.flags|=64}if(null!==(i=e.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),hi(Fr,Fr.current),s)break;return null;case 23:case 24:return e.lanes=0,zo(t,e,n)}return oa(t,e,n)}Fo=0!==(16384&t.flags)}else Fo=!1;switch(e.lanes=0,e.tag){case 2:if(s=e.type,null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2),t=e.pendingProps,i=gi(e,fi.current),rr(e,n),i=oo(null,e,s,t,i,n),e.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof){if(e.tag=1,e.memoizedState=null,e.updateQueue=null,_i(s)){var r=!0;wi(e)}else r=!1;e.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,lr(e);var a=s.getDerivedStateFromProps;"function"===typeof a&&gr(e,s,a,t),i.updater=_r,e.stateNode=i,i._reactInternals=e,wr(e,s,t,n),e=Wo(null,e,s,!0,r,n)}else e.tag=0,qo(null,e,i,n),e=e.child;return e;case 16:i=e.elementType;t:{switch(null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2),t=e.pendingProps,i=(r=i._init)(i._payload),e.type=i,r=e.tag=function(t){if("function"===typeof t)return Wl(t)?1:0;if(void 0!==t&&null!==t){if((t=t.$$typeof)===C)return 11;if(t===D)return 14}return 2}(i),t=Ki(i,t),r){case 0:e=Ho(null,e,i,t,n);break t;case 1:e=Go(null,e,i,t,n);break t;case 11:e=Vo(null,e,i,t,n);break t;case 14:e=jo(null,e,i,Ki(i.type,t),s,n);break t}throw Error(o(306,i,""))}return e;case 0:return s=e.type,i=e.pendingProps,Ho(t,e,s,i=e.elementType===s?i:Ki(s,i),n);case 1:return s=e.type,i=e.pendingProps,Go(t,e,s,i=e.elementType===s?i:Ki(s,i),n);case 3:if(Qo(e),s=e.updateQueue,null===t||null===s)throw Error(o(282));if(s=e.pendingProps,i=null!==(i=e.memoizedState)?i.element:null,ur(t,e),fr(e,s,null,n),(s=e.memoizedState.element)===i)Qr(),e=oa(t,e,n);else{if((r=(i=e.stateNode).hydrate)&&(jr=Ys(e.stateNode.containerInfo.firstChild),Vr=e,r=Ur=!0),r){if(null!=(t=i.mutableSourceEagerHydrationData))for(i=0;i<t.length;i+=2)(r=t[i])._workInProgressVersionPrimary=t[i+1],Yr.push(r);for(n=Ar(e,null,s,n),e.child=n;n;)n.flags=-3&n.flags|1024,n=n.sibling}else qo(t,e,s,n),Qr();e=e.child}return e;case 5:return Pr(e),null===t&&Hr(e),s=e.type,i=e.pendingProps,r=null!==t?t.memoizedProps:null,a=i.children,Hs(s,i)?a=null:null!==r&&Hs(s,r)&&(e.flags|=16),Bo(t,e),qo(t,e,a,n),e.child;case 6:return null===t&&Hr(e),null;case 13:return Jo(t,e,n);case 4:return Rr(e,e.stateNode.containerInfo),s=e.pendingProps,null===t?e.child=kr(e,null,s,n):qo(t,e,s,n),e.child;case 11:return s=e.type,i=e.pendingProps,Vo(t,e,s,i=e.elementType===s?i:Ki(s,i),n);case 7:return qo(t,e,e.pendingProps,n),e.child;case 8:case 12:return qo(t,e,e.pendingProps.children,n),e.child;case 10:t:{s=e.type._context,i=e.pendingProps,a=e.memoizedProps,r=i.value;var l=e.type._context;if(hi($i,l._currentValue),l._currentValue=r,null!==a)if(l=a.value,0===(r=cs(l,r)?0:0|("function"===typeof s._calculateChangedBits?s._calculateChangedBits(l,r):1073741823))){if(a.children===i.children&&!pi.current){e=oa(t,e,n);break t}}else for(null!==(l=e.child)&&(l.return=e);null!==l;){var u=l.dependencies;if(null!==u){a=l.child;for(var c=u.firstContext;null!==c;){if(c.context===s&&0!==(c.observedBits&r)){1===l.tag&&((c=cr(-1,n&-n)).tag=2,hr(l,c)),l.lanes|=n,null!==(c=l.alternate)&&(c.lanes|=n),ir(l.return,n),u.lanes|=n;break}c=c.next}}else a=10===l.tag&&l.type===e.type?null:l.child;if(null!==a)a.return=l;else for(a=l;null!==a;){if(a===e){a=null;break}if(null!==(l=a.sibling)){l.return=a.return,a=l;break}a=a.return}l=a}qo(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,s=(r=e.pendingProps).children,rr(e,n),s=s(i=or(i,r.unstable_observedBits)),e.flags|=1,qo(t,e,s,n),e.child;case 14:return r=Ki(i=e.type,e.pendingProps),jo(t,e,i,r=Ki(i.type,r),s,n);case 15:return Uo(t,e,e.type,e.pendingProps,s,n);case 17:return s=e.type,i=e.pendingProps,i=e.elementType===s?i:Ki(s,i),null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2),e.tag=1,_i(s)?(t=!0,wi(e)):t=!1,rr(e,n),yr(e,s,i),wr(e,s,i,n),Wo(null,e,s,!0,t,n);case 19:return ra(t,e,n);case 23:case 24:return zo(t,e,n)}throw Error(o(156,e.tag))},iu.prototype.render=function(t){tu(t,this._internalRoot,null,null)},iu.prototype.unmount=function(){var t=this._internalRoot,e=t.containerInfo;tu(null,t,null,(function(){e[ti]=null}))},ee=function(t){13===t.tag&&(ml(t,4,fl()),su(t,4))},ne=function(t){13===t.tag&&(ml(t,67108864,fl()),su(t,67108864))},se=function(t){if(13===t.tag){var e=fl(),n=pl(t);ml(t,n,e),su(t,n)}},ie=function(t,e){return e()},At=function(t,e,n){switch(e){case"input":if(nt(t,n),e=n.name,"radio"===n.type&&null!=e){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var s=n[e];if(s!==t&&s.form===t.form){var i=ri(s);if(!i)throw Error(o(90));K(s),nt(s,i)}}}break;case"textarea":ut(t,n);break;case"select":null!=(e=n.value)&&ot(t,!!n.multiple,e,!1)}},Rt=wl,Nt=function(t,e,n,s,i){var r=Ra;Ra|=4;try{return Wi(98,t.bind(null,e,n,s,i))}finally{0===(Ra=r)&&(Ya(),Yi())}},Pt=function(){0===(49&Ra)&&(function(){if(null!==rl){var t=rl;rl=null,t.forEach((function(t){t.expiredLanes|=24&t.pendingLanes,_l(t,Bi())}))}Yi()}(),Ll())},Lt=function(t,e){var n=Ra;Ra|=2;try{return t(e)}finally{0===(Ra=n)&&(Ya(),Yi())}};var lu={Events:[si,ii,ri,It,Dt,Ll,{current:!1}]},uu={findFiberByHostInstance:ni,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},cu={bundleType:uu.bundleType,version:uu.version,rendererPackageName:uu.rendererPackageName,rendererConfig:uu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return null===(t=Jt(t))?null:t.stateNode},findFiberByHostInstance:uu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var hu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!hu.isDisabled&&hu.supportsFiber)try{Si=hu.inject(cu),Ti=hu}catch(gt){}}e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=lu,e.createPortal=au,e.findDOMNode=function(t){if(null==t)return null;if(1===t.nodeType)return t;var e=t._reactInternals;if(void 0===e){if("function"===typeof t.render)throw Error(o(188));throw Error(o(268,Object.keys(t)))}return t=null===(t=Jt(e))?null:t.stateNode},e.flushSync=function(t,e){var n=Ra;if(0!==(48&n))return t(e);Ra|=1;try{if(t)return Wi(99,t.bind(null,e))}finally{Ra=n,Yi()}},e.hydrate=function(t,e,n){if(!ru(e))throw Error(o(200));return ou(null,t,e,!0,n)},e.render=function(t,e,n){if(!ru(e))throw Error(o(200));return ou(null,t,e,!1,n)},e.unmountComponentAtNode=function(t){if(!ru(t))throw Error(o(40));return!!t._reactRootContainer&&(xl((function(){ou(null,null,t,!1,(function(){t._reactRootContainer=null,t[ti]=null}))})),!0)},e.unstable_batchedUpdates=wl,e.unstable_createPortal=function(t,e){return au(t,e,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},e.unstable_renderSubtreeIntoContainer=function(t,e,n,s){if(!ru(n))throw Error(o(200));if(null==t||void 0===t._reactInternals)throw Error(o(38));return ou(t,e,n,!1,s)},e.version="17.0.2"},function(t,e,n){"use strict";t.exports=n(49)},function(t,e,n){"use strict";var s,i,r,o;if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;e.unstable_now=function(){return a.now()}}else{var l=Date,u=l.now();e.unstable_now=function(){return l.now()-u}}if("undefined"===typeof window||"function"!==typeof MessageChannel){var c=null,h=null,d=function(){if(null!==c)try{var t=e.unstable_now();c(!0,t),c=null}catch(n){throw setTimeout(d,0),n}};s=function(t){null!==c?setTimeout(s,0,t):(c=t,setTimeout(d,0))},i=function(t,e){h=setTimeout(t,e)},r=function(){clearTimeout(h)},e.unstable_shouldYield=function(){return!1},o=e.unstable_forceFrameRate=function(){}}else{var f=window.setTimeout,p=window.clearTimeout;if("undefined"!==typeof console){var m=window.cancelAnimationFrame;"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!==typeof m&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var g=!1,_=null,v=-1,y=5,b=0;e.unstable_shouldYield=function(){return e.unstable_now()>=b},o=function(){},e.unstable_forceFrameRate=function(t){0>t||125<t?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):y=0<t?Math.floor(1e3/t):5};var w=new MessageChannel,x=w.port2;w.port1.onmessage=function(){if(null!==_){var t=e.unstable_now();b=t+y;try{_(!0,t)?x.postMessage(null):(g=!1,_=null)}catch(n){throw x.postMessage(null),n}}else g=!1},s=function(t){_=t,g||(g=!0,x.postMessage(null))},i=function(t,n){v=f((function(){t(e.unstable_now())}),n)},r=function(){p(v),v=-1}}function S(t,e){var n=t.length;t.push(e);t:for(;;){var s=n-1>>>1,i=t[s];if(!(void 0!==i&&0<k(i,e)))break t;t[s]=e,t[n]=i,n=s}}function T(t){return void 0===(t=t[0])?null:t}function E(t){var e=t[0];if(void 0!==e){var n=t.pop();if(n!==e){t[0]=n;t:for(var s=0,i=t.length;s<i;){var r=2*(s+1)-1,o=t[r],a=r+1,l=t[a];if(void 0!==o&&0>k(o,n))void 0!==l&&0>k(l,o)?(t[s]=l,t[a]=n,s=a):(t[s]=o,t[r]=n,s=r);else{if(!(void 0!==l&&0>k(l,n)))break t;t[s]=l,t[a]=n,s=a}}}return e}return null}function k(t,e){var n=t.sortIndex-e.sortIndex;return 0!==n?n:t.id-e.id}var A=[],O=[],C=1,M=null,I=3,D=!1,R=!1,N=!1;function P(t){for(var e=T(O);null!==e;){if(null===e.callback)E(O);else{if(!(e.startTime<=t))break;E(O),e.sortIndex=e.expirationTime,S(A,e)}e=T(O)}}function L(t){if(N=!1,P(t),!R)if(null!==T(A))R=!0,s(F);else{var e=T(O);null!==e&&i(L,e.startTime-t)}}function F(t,n){R=!1,N&&(N=!1,r()),D=!0;var s=I;try{for(P(n),M=T(A);null!==M&&(!(M.expirationTime>n)||t&&!e.unstable_shouldYield());){var o=M.callback;if("function"===typeof o){M.callback=null,I=M.priorityLevel;var a=o(M.expirationTime<=n);n=e.unstable_now(),"function"===typeof a?M.callback=a:M===T(A)&&E(A),P(n)}else E(A);M=T(A)}if(null!==M)var l=!0;else{var u=T(O);null!==u&&i(L,u.startTime-n),l=!1}return l}finally{M=null,I=s,D=!1}}var q=o;e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(t){t.callback=null},e.unstable_continueExecution=function(){R||D||(R=!0,s(F))},e.unstable_getCurrentPriorityLevel=function(){return I},e.unstable_getFirstCallbackNode=function(){return T(A)},e.unstable_next=function(t){switch(I){case 1:case 2:case 3:var e=3;break;default:e=I}var n=I;I=e;try{return t()}finally{I=n}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=q,e.unstable_runWithPriority=function(t,e){switch(t){case 1:case 2:case 3:case 4:case 5:break;default:t=3}var n=I;I=t;try{return e()}finally{I=n}},e.unstable_scheduleCallback=function(t,n,o){var a=e.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?a+o:a:o=a,t){case 1:var l=-1;break;case 2:l=250;break;case 5:l=1073741823;break;case 4:l=1e4;break;default:l=5e3}return t={id:C++,callback:n,priorityLevel:t,startTime:o,expirationTime:l=o+l,sortIndex:-1},o>a?(t.sortIndex=o,S(O,t),null===T(A)&&t===T(O)&&(N?r():N=!0,i(L,o-a))):(t.sortIndex=l,S(A,t),R||D||(R=!0,s(F))),t},e.unstable_wrapCallback=function(t){var e=I;return function(){var n=I;I=e;try{return t.apply(this,arguments)}finally{I=n}}}},,function(t,e){function n(t){for(var e,n=new s(t),i=[];!n.eof();){var r=o();i.push(r)}return i;function o(){var t={};t.deltaTime=n.readVarInt();var s=n.readUInt8();if(240===(240&s)){if(255!==s){if(240==s){t.type="sysEx";r=n.readVarInt();return t.data=n.readBytes(r),t}if(247==s){t.type="endSysEx";r=n.readVarInt();return t.data=n.readBytes(r),t}throw"Unrecognised MIDI event type byte: "+s}t.meta=!0;var i=n.readUInt8(),r=n.readVarInt();switch(i){case 0:if(t.type="sequenceNumber",2!==r)throw"Expected length for sequenceNumber event is 2, got "+r;return t.number=n.readUInt16(),t;case 1:return t.type="text",t.text=n.readString(r),t;case 2:return t.type="copyrightNotice",t.text=n.readString(r),t;case 3:return t.type="trackName",t.text=n.readString(r),t;case 4:return t.type="instrumentName",t.text=n.readString(r),t;case 5:return t.type="lyrics",t.text=n.readString(r),t;case 6:return t.type="marker",t.text=n.readString(r),t;case 7:return t.type="cuePoint",t.text=n.readString(r),t;case 32:if(t.type="channelPrefix",1!=r)throw"Expected length for channelPrefix event is 1, got "+r;return t.channel=n.readUInt8(),t;case 33:if(t.type="portPrefix",1!=r)throw"Expected length for portPrefix event is 1, got "+r;return t.port=n.readUInt8(),t;case 47:if(t.type="endOfTrack",0!=r)throw"Expected length for endOfTrack event is 0, got "+r;return t;case 81:if(t.type="setTempo",3!=r)throw"Expected length for setTempo event is 3, got "+r;return t.microsecondsPerBeat=n.readUInt24(),t;case 84:if(t.type="smpteOffset",5!=r)throw"Expected length for smpteOffset event is 5, got "+r;var o=n.readUInt8();return t.frameRate={0:24,32:25,64:29,96:30}[96&o],t.hour=31&o,t.min=n.readUInt8(),t.sec=n.readUInt8(),t.frame=n.readUInt8(),t.subFrame=n.readUInt8(),t;case 88:if(t.type="timeSignature",2!=r&&4!=r)throw"Expected length for timeSignature event is 4 or 2, got "+r;return t.numerator=n.readUInt8(),t.denominator=1<<n.readUInt8(),4===r?(t.metronome=n.readUInt8(),t.thirtyseconds=n.readUInt8()):(t.metronome=36,t.thirtyseconds=8),t;case 89:if(t.type="keySignature",2!=r)throw"Expected length for keySignature event is 2, got "+r;return t.key=n.readInt8(),t.scale=n.readUInt8(),t;case 127:return t.type="sequencerSpecific",t.data=n.readBytes(r),t;default:return t.type="unknownMeta",t.data=n.readBytes(r),t.metatypeByte=i,t}}else{var a;if(0===(128&s)){if(null===e)throw"Running status byte encountered before status byte";a=s,s=e,t.running=!0}else a=n.readUInt8(),e=s;var l=s>>4;switch(t.channel=15&s,l){case 8:return t.type="noteOff",t.noteNumber=a,t.velocity=n.readUInt8(),t;case 9:var u=n.readUInt8();return t.type=0===u?"noteOff":"noteOn",t.noteNumber=a,t.velocity=u,0===u&&(t.byte9=!0),t;case 10:return t.type="noteAftertouch",t.noteNumber=a,t.amount=n.readUInt8(),t;case 11:return t.type="controller",t.controllerType=a,t.value=n.readUInt8(),t;case 12:return t.type="programChange",t.programNumber=a,t;case 13:return t.type="channelAftertouch",t.amount=a,t;case 14:return t.type="pitchBend",t.value=a+(n.readUInt8()<<7)-8192,t;default:throw"Unrecognised MIDI event type: "+l}}}}function s(t){this.buffer=t,this.bufferLen=this.buffer.length,this.pos=0}s.prototype.eof=function(){return this.pos>=this.bufferLen},s.prototype.readUInt8=function(){var t=this.buffer[this.pos];return this.pos+=1,t},s.prototype.readInt8=function(){var t=this.readUInt8();return 128&t?t-256:t},s.prototype.readUInt16=function(){return(this.readUInt8()<<8)+this.readUInt8()},s.prototype.readInt16=function(){var t=this.readUInt16();return 32768&t?t-65536:t},s.prototype.readUInt24=function(){return(this.readUInt8()<<16)+(this.readUInt8()<<8)+this.readUInt8()},s.prototype.readInt24=function(){var t=this.readUInt24();return 8388608&t?t-16777216:t},s.prototype.readUInt32=function(){return(this.readUInt8()<<24)+(this.readUInt8()<<16)+(this.readUInt8()<<8)+this.readUInt8()},s.prototype.readBytes=function(t){var e=this.buffer.slice(this.pos,this.pos+t);return this.pos+=t,e},s.prototype.readString=function(t){var e=this.readBytes(t);return String.fromCharCode.apply(null,e)},s.prototype.readVarInt=function(){for(var t=0;!this.eof();){var e=this.readUInt8();if(!(128&e))return t+e;t+=127&e,t<<=7}return t},s.prototype.readChunk=function(){var t=this.readString(4),e=this.readUInt32();return{id:t,length:e,data:this.readBytes(e)}},t.exports=function(t){var e=new s(t),i=e.readChunk();if("MThd"!=i.id)throw"Bad MIDI file.  Expected 'MHdr', got: '"+i.id+"'";for(var r=function(t){var e=new s(t),n=e.readUInt16(),i=e.readUInt16(),r={format:n,numTracks:i},o=e.readUInt16();32768&o?(r.framesPerSecond=256-(o>>8),r.ticksPerFrame=255&o):r.ticksPerBeat=o;return r}(i.data),o=[],a=0;!e.eof()&&a<r.numTracks;a++){var l=e.readChunk();if("MTrk"!=l.id)throw"Bad MIDI file.  Expected 'MTrk', got: '"+l.id+"'";var u=n(l.data);o.push(u)}return{header:r,tracks:o}}},function(t,e){function n(t,e,n){var r,o=new i,a=e.length,l=null;for(r=0;r<a;r++)!1!==n.running&&(n.running||e[r].running)||(l=null),l=s(o,e[r],l,n.useByte9ForNoteOff);t.writeChunk("MTrk",o.buffer)}function s(t,e,n,s){var i=e.type,r=e.deltaTime,o=e.text||"",a=e.data||[],l=null;switch(t.writeVarInt(r),i){case"sequenceNumber":t.writeUInt8(255),t.writeUInt8(0),t.writeVarInt(2),t.writeUInt16(e.number);break;case"text":t.writeUInt8(255),t.writeUInt8(1),t.writeVarInt(o.length),t.writeString(o);break;case"copyrightNotice":t.writeUInt8(255),t.writeUInt8(2),t.writeVarInt(o.length),t.writeString(o);break;case"trackName":t.writeUInt8(255),t.writeUInt8(3),t.writeVarInt(o.length),t.writeString(o);break;case"instrumentName":t.writeUInt8(255),t.writeUInt8(4),t.writeVarInt(o.length),t.writeString(o);break;case"lyrics":t.writeUInt8(255),t.writeUInt8(5),t.writeVarInt(o.length),t.writeString(o);break;case"marker":t.writeUInt8(255),t.writeUInt8(6),t.writeVarInt(o.length),t.writeString(o);break;case"cuePoint":t.writeUInt8(255),t.writeUInt8(7),t.writeVarInt(o.length),t.writeString(o);break;case"channelPrefix":t.writeUInt8(255),t.writeUInt8(32),t.writeVarInt(1),t.writeUInt8(e.channel);break;case"portPrefix":t.writeUInt8(255),t.writeUInt8(33),t.writeVarInt(1),t.writeUInt8(e.port);break;case"endOfTrack":t.writeUInt8(255),t.writeUInt8(47),t.writeVarInt(0);break;case"setTempo":t.writeUInt8(255),t.writeUInt8(81),t.writeVarInt(3),t.writeUInt24(e.microsecondsPerBeat);break;case"smpteOffset":t.writeUInt8(255),t.writeUInt8(84),t.writeVarInt(5);var u=31&e.hour|{24:0,25:32,29:64,30:96}[e.frameRate];t.writeUInt8(u),t.writeUInt8(e.min),t.writeUInt8(e.sec),t.writeUInt8(e.frame),t.writeUInt8(e.subFrame);break;case"timeSignature":t.writeUInt8(255),t.writeUInt8(88),t.writeVarInt(4),t.writeUInt8(e.numerator);var c=255&Math.floor(Math.log(e.denominator)/Math.LN2);t.writeUInt8(c),t.writeUInt8(e.metronome),t.writeUInt8(e.thirtyseconds||8);break;case"keySignature":t.writeUInt8(255),t.writeUInt8(89),t.writeVarInt(2),t.writeInt8(e.key),t.writeUInt8(e.scale);break;case"sequencerSpecific":t.writeUInt8(255),t.writeUInt8(127),t.writeVarInt(a.length),t.writeBytes(a);break;case"unknownMeta":null!=e.metatypeByte&&(t.writeUInt8(255),t.writeUInt8(e.metatypeByte),t.writeVarInt(a.length),t.writeBytes(a));break;case"sysEx":t.writeUInt8(240),t.writeVarInt(a.length),t.writeBytes(a);break;case"endSysEx":t.writeUInt8(247),t.writeVarInt(a.length),t.writeBytes(a);break;case"noteOff":(l=(!1!==s&&e.byte9||s&&0==e.velocity?144:128)|e.channel)!==n&&t.writeUInt8(l),t.writeUInt8(e.noteNumber),t.writeUInt8(e.velocity);break;case"noteOn":(l=144|e.channel)!==n&&t.writeUInt8(l),t.writeUInt8(e.noteNumber),t.writeUInt8(e.velocity);break;case"noteAftertouch":(l=160|e.channel)!==n&&t.writeUInt8(l),t.writeUInt8(e.noteNumber),t.writeUInt8(e.amount);break;case"controller":(l=176|e.channel)!==n&&t.writeUInt8(l),t.writeUInt8(e.controllerType),t.writeUInt8(e.value);break;case"programChange":(l=192|e.channel)!==n&&t.writeUInt8(l),t.writeUInt8(e.programNumber);break;case"channelAftertouch":(l=208|e.channel)!==n&&t.writeUInt8(l),t.writeUInt8(e.amount);break;case"pitchBend":(l=224|e.channel)!==n&&t.writeUInt8(l);var h=8192+e.value,d=127&h,f=h>>7&127;t.writeUInt8(d),t.writeUInt8(f);break;default:throw"Unrecognized event type: "+i}return l}function i(){this.buffer=[]}i.prototype.writeUInt8=function(t){this.buffer.push(255&t)},i.prototype.writeInt8=i.prototype.writeUInt8,i.prototype.writeUInt16=function(t){var e=t>>8&255,n=255&t;this.writeUInt8(e),this.writeUInt8(n)},i.prototype.writeInt16=i.prototype.writeUInt16,i.prototype.writeUInt24=function(t){var e=t>>16&255,n=t>>8&255,s=255&t;this.writeUInt8(e),this.writeUInt8(n),this.writeUInt8(s)},i.prototype.writeInt24=i.prototype.writeUInt24,i.prototype.writeUInt32=function(t){var e=t>>24&255,n=t>>16&255,s=t>>8&255,i=255&t;this.writeUInt8(e),this.writeUInt8(n),this.writeUInt8(s),this.writeUInt8(i)},i.prototype.writeInt32=i.prototype.writeUInt32,i.prototype.writeBytes=function(t){this.buffer=this.buffer.concat(Array.prototype.slice.call(t,0))},i.prototype.writeString=function(t){var e,n=t.length,s=[];for(e=0;e<n;e++)s.push(t.codePointAt(e));this.writeBytes(s)},i.prototype.writeVarInt=function(t){if(t<0)throw"Cannot write negative variable-length integer";if(t<=127)this.writeUInt8(t);else{var e=t,n=[];for(n.push(127&e),e>>=7;e;){var s=127&e|128;n.push(s),e>>=7}this.writeBytes(n.reverse())}},i.prototype.writeChunk=function(t,e){this.writeString(t),this.writeUInt32(e.length),this.writeBytes(e)},t.exports=function(t,e){if("object"!==typeof t)throw"Invalid MIDI data";e=e||{};var s,r=t.header||{},o=t.tracks||[],a=o.length,l=new i;for(function(t,e,n){var s=null==e.format?1:e.format,r=128;e.timeDivision?r=e.timeDivision:e.ticksPerFrame&&e.framesPerSecond?r=-(255&e.framesPerSecond)<<8|255&e.ticksPerFrame:e.ticksPerBeat&&(r=32767&e.ticksPerBeat);var o=new i;o.writeUInt16(s),o.writeUInt16(n),o.writeUInt16(r),t.writeChunk("MThd",o.buffer)}(l,r,a),s=0;s<a;s++)n(l,o[s],e);return l.buffer}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createControlChanges=void 0;var s=n(30);e.createControlChanges=function(){return new Proxy({},{get:function(t,e){return t[e]?t[e]:s.controlChangeIds.hasOwnProperty(e)?t[s.controlChangeIds[e]]:void 0},set:function(t,e,n){return s.controlChangeIds.hasOwnProperty(e)?t[s.controlChangeIds[e]]=n:t[e]=n,!0}})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PitchBend=void 0;var s=new WeakMap,i=function(){function t(t,e){s.set(this,e),this.ticks=t.absoluteTime,this.value=t.value}return Object.defineProperty(t.prototype,"time",{get:function(){return s.get(this).ticksToSeconds(this.ticks)},set:function(t){var e=s.get(this);this.ticks=e.secondsToTicks(t)},enumerable:!1,configurable:!0}),t.prototype.toJSON=function(){return{ticks:this.ticks,time:this.time,value:this.value}},t}();e.PitchBend=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Instrument=void 0;var s=n(56),i=new WeakMap,r=function(){function t(t,e){if(this.number=0,i.set(this,e),this.number=0,t){var n=t.find((function(t){return"programChange"===t.type}));n&&(this.number=n.programNumber)}}return Object.defineProperty(t.prototype,"name",{get:function(){return this.percussion?s.DrumKitByPatchID[this.number]:s.instrumentByPatchID[this.number]},set:function(t){var e=s.instrumentByPatchID.indexOf(t);-1!==e&&(this.number=e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"family",{get:function(){return this.percussion?"drums":s.InstrumentFamilyByID[Math.floor(this.number/8)]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"percussion",{get:function(){return 9===i.get(this).channel},enumerable:!1,configurable:!0}),t.prototype.toJSON=function(){return{family:this.family,number:this.number,name:this.name}},t.prototype.fromJSON=function(t){this.number=t.number},t}();e.Instrument=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DrumKitByPatchID=e.InstrumentFamilyByID=e.instrumentByPatchID=void 0,e.instrumentByPatchID=["acoustic grand piano","bright acoustic piano","electric grand piano","honky-tonk piano","electric piano 1","electric piano 2","harpsichord","clavi","celesta","glockenspiel","music box","vibraphone","marimba","xylophone","tubular bells","dulcimer","drawbar organ","percussive organ","rock organ","church organ","reed organ","accordion","harmonica","tango accordion","acoustic guitar (nylon)","acoustic guitar (steel)","electric guitar (jazz)","electric guitar (clean)","electric guitar (muted)","overdriven guitar","distortion guitar","guitar harmonics","acoustic bass","electric bass (finger)","electric bass (pick)","fretless bass","slap bass 1","slap bass 2","synth bass 1","synth bass 2","violin","viola","cello","contrabass","tremolo strings","pizzicato strings","orchestral harp","timpani","string ensemble 1","string ensemble 2","synthstrings 1","synthstrings 2","choir aahs","voice oohs","synth voice","orchestra hit","trumpet","trombone","tuba","muted trumpet","french horn","brass section","synthbrass 1","synthbrass 2","soprano sax","alto sax","tenor sax","baritone sax","oboe","english horn","bassoon","clarinet","piccolo","flute","recorder","pan flute","blown bottle","shakuhachi","whistle","ocarina","lead 1 (square)","lead 2 (sawtooth)","lead 3 (calliope)","lead 4 (chiff)","lead 5 (charang)","lead 6 (voice)","lead 7 (fifths)","lead 8 (bass + lead)","pad 1 (new age)","pad 2 (warm)","pad 3 (polysynth)","pad 4 (choir)","pad 5 (bowed)","pad 6 (metallic)","pad 7 (halo)","pad 8 (sweep)","fx 1 (rain)","fx 2 (soundtrack)","fx 3 (crystal)","fx 4 (atmosphere)","fx 5 (brightness)","fx 6 (goblins)","fx 7 (echoes)","fx 8 (sci-fi)","sitar","banjo","shamisen","koto","kalimba","bag pipe","fiddle","shanai","tinkle bell","agogo","steel drums","woodblock","taiko drum","melodic tom","synth drum","reverse cymbal","guitar fret noise","breath noise","seashore","bird tweet","telephone ring","helicopter","applause","gunshot"],e.InstrumentFamilyByID=["piano","chromatic percussion","organ","guitar","bass","strings","ensemble","brass","reed","pipe","synth lead","synth pad","synth effects","world","percussive","sound effects"],e.DrumKitByPatchID={0:"standard kit",8:"room kit",16:"power kit",24:"electronic kit",25:"tr-808 kit",32:"jazz kit",40:"brush kit",48:"orchestra kit",56:"sound fx kit"}},function(t,e,n){"use strict";function s(t){return["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"][t%12]}Object.defineProperty(e,"__esModule",{value:!0}),e.Note=void 0;var i=function(){var t=/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i,e={cbb:-2,cb:-1,c:0,"c#":1,cx:2,dbb:0,db:1,d:2,"d#":3,dx:4,ebb:2,eb:3,e:4,"e#":5,ex:6,fbb:3,fb:4,f:5,"f#":6,fx:7,gbb:5,gb:6,g:7,"g#":8,gx:9,abb:7,ab:8,a:9,"a#":10,ax:11,bbb:9,bb:10,b:11,"b#":12,bx:13};return function(n){var s=t.exec(n),i=s[1],r=s[2];return e[i.toLowerCase()]+12*(parseInt(r,10)+1)}}(),r=new WeakMap,o=function(){function t(t,e,n){r.set(this,n),this.midi=t.midi,this.velocity=t.velocity,this.noteOffVelocity=e.velocity,this.ticks=t.ticks,this.durationTicks=e.ticks-t.ticks}return Object.defineProperty(t.prototype,"name",{get:function(){return function(t){var e=Math.floor(t/12)-1;return s(t)+e.toString()}(this.midi)},set:function(t){this.midi=i(t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"octave",{get:function(){return Math.floor(this.midi/12)-1},set:function(t){var e=t-this.octave;this.midi+=12*e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pitch",{get:function(){return s(this.midi)},set:function(t){this.midi=12*(this.octave+1)+["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"].indexOf(t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"duration",{get:function(){var t=r.get(this);return t.ticksToSeconds(this.ticks+this.durationTicks)-t.ticksToSeconds(this.ticks)},set:function(t){var e=r.get(this).secondsToTicks(this.time+t);this.durationTicks=e-this.ticks},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"time",{get:function(){return r.get(this).ticksToSeconds(this.ticks)},set:function(t){var e=r.get(this);this.ticks=e.secondsToTicks(t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bars",{get:function(){return r.get(this).ticksToMeasures(this.ticks)},enumerable:!1,configurable:!0}),t.prototype.toJSON=function(){return{duration:this.duration,durationTicks:this.durationTicks,midi:this.midi,name:this.name,ticks:this.ticks,time:this.time,velocity:this.velocity}},t}();e.Note=o},function(t,e,n){"use strict";var s=this&&this.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var s,i=0,r=e.length;i<r;i++)!s&&i in e||(s||(s=Array.prototype.slice.call(e,0,i)),s[i]=e[i]);return t.concat(s||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.encode=void 0;var i=n(27),r=n(25),o=n(59);function a(t){return(0,o.flatten)(t.notes.map((function(e){return function(t,e){return[{absoluteTime:t.ticks,channel:e,deltaTime:0,noteNumber:t.midi,type:"noteOn",velocity:Math.floor(127*t.velocity)},{absoluteTime:t.ticks+t.durationTicks,channel:e,deltaTime:0,noteNumber:t.midi,type:"noteOff",velocity:Math.floor(127*t.noteOffVelocity)}]}(e,t.channel)})))}function l(t,e){return{absoluteTime:t.ticks,channel:e,controllerType:t.number,deltaTime:0,type:"controller",value:Math.floor(127*t.value)}}function u(t){return{absoluteTime:0,channel:t.channel,deltaTime:0,programNumber:t.instrument.number,type:"programChange"}}e.encode=function(t){var e={header:{format:1,numTracks:t.tracks.length+1,ticksPerBeat:t.header.ppq},tracks:s([s(s(s(s([{absoluteTime:0,deltaTime:0,meta:!0,text:t.header.name,type:"trackName"}],t.header.keySignatures.map((function(t){return function(t){var e=r.keySignatureKeys.indexOf(t.key);return{absoluteTime:t.ticks,deltaTime:0,key:e+7,meta:!0,scale:"major"===t.scale?0:1,type:"keySignature"}}(t)})),!0),t.header.meta.map((function(t){return{absoluteTime:(e=t).ticks,deltaTime:0,meta:!0,text:e.text,type:e.type};var e})),!0),t.header.tempos.map((function(t){return function(t){return{absoluteTime:t.ticks,deltaTime:0,meta:!0,microsecondsPerBeat:Math.floor(6e7/t.bpm),type:"setTempo"}}(t)})),!0),t.header.timeSignatures.map((function(t){return function(t){return{absoluteTime:t.ticks,deltaTime:0,denominator:t.timeSignature[1],meta:!0,metronome:24,numerator:t.timeSignature[0],thirtyseconds:8,type:"timeSignature"}}(t)})),!0)],t.tracks.map((function(t){return s(s(s([(e=t.name,{absoluteTime:0,deltaTime:0,meta:!0,text:e,type:"trackName"}),u(t)],a(t),!0),function(t){for(var e=[],n=0;n<127;n++)t.controlChanges.hasOwnProperty(n)&&t.controlChanges[n].forEach((function(n){e.push(l(n,t.channel))}));return e}(t),!0),function(t){var e=[];return t.pitchBends.forEach((function(n){e.push(function(t,e){return{absoluteTime:t.ticks,channel:e,deltaTime:0,type:"pitchBend",value:t.value}}(n,t.channel))})),e}(t),!0);var e})),!0)};return e.tracks=e.tracks.map((function(t){t=t.sort((function(t,e){return t.absoluteTime-e.absoluteTime}));var e=0;return t.forEach((function(t){t.deltaTime=t.absoluteTime-e,e=t.absoluteTime,delete t.absoluteTime})),t.push({deltaTime:0,meta:!0,type:"endOfTrack"}),t})),new Uint8Array((0,i.writeMidi)(e))}},function(t,e,n){"use strict";function s(t){var e=[];return i(t,e),e}function i(t,e){for(var n=0;n<t.length;n++){var s=t[n];Array.isArray(s)?i(s,e):e.push(s)}}n.r(e),n.d(e,"flatten",(function(){return s}))},function(t,e,n){var s=n(61);t.exports=function(t,e){if(null==t)return{};var n,i,r=s(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],e.includes(n)||{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e){t.exports=function(t,e){if(null==t)return{};var n={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(e.includes(s))continue;n[s]=t[s]}return n},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){var s=n(63);function i(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,s)}return n}t.exports=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(Object(n),!0).forEach((function(e){s(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){var s=n(64);t.exports=function(t,e,n){return(e=s(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){var s=n(31).default,i=n(65);t.exports=function(t){var e=i(t,"string");return"symbol"==s(e)?e:e+""},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){var s=n(31).default;t.exports=function(t,e){if("object"!=s(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=s(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){"use strict";function s(t){return s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=n(23),r=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==s(t)&&"function"!==typeof t)return{default:t};var e=u();if(e&&e.has(t))return e.get(t);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var o=i?Object.getOwnPropertyDescriptor(t,r):null;o&&(o.get||o.set)?Object.defineProperty(n,r,o):n[r]=t[r]}n.default=t,e&&e.set(t,n);return n}(n(2)),o=n(36);n(76);var a,l=(a=n(37))&&a.__esModule?a:{default:a};function u(){if("function"!==typeof WeakMap)return null;var t=new WeakMap;return u=function(){return t},t}var c=i.theory.Letter,h=i.theory.Pitch,d=i.theory.Policy,f=i.theory.Scale,p=function(){};var m=function(t){var e=t.start,n=t.end,s=t.accidentalPolicy,i=void 0===s?d.DEFAULT_PRIORITY:s,a=t.onKeyPress,u=void 0===a?p:a,m=t.onKeyRelease,g=void 0===m?p:m,_=t.highlight,v=void 0===_?[]:_,y=t.showLabel,b=void 0!==y&&y,w=(0,r.useMemo)((function(){return function(t,e,n){var s=h.fromString(t).orElseThrow((function(){return new Error("Invalid start pitch.")})),i=h.fromString(e).orElseThrow((function(){return new Error("Invalid end pitch.")}));if((0,o.isBlackKey)(s)||(0,o.isBlackKey)(i))throw new Error("Start and end of piano should be a white key.");var r=i.getProgramNumber()-s.getProgramNumber()+1;if(r<=0)throw new Error("End pitch should be the same as or after the start pitch.");var a=[],l=[];return new f(s,f.Quality.CHROMATIC).stream(n).limit(r).forEach((function(t){if((0,o.isBlackKey)(t))l.push(t);else{a.push(t);var e=h.fromProgramNumber(t.getProgramNumber()).get();e.getKey().getLetter()!==c.E&&e.getKey().getLetter()!==c.B||l.push(null)}})),{whitePitches:a,blackPitches:l}}(e,n,i)}),[e,n,i]),x=w.whitePitches,S=w.blackPitches,T=(0,r.useMemo)((function(){return function(t){return null==t?[]:t.length>0&&"string"===typeof t[0]?t.map((function(t){return h.fromString(t).orElseThrow((function(){return new Error("Invalid highlight pitch.")}))})):t}(v)}),[v]),E="".concat(30*x.length,"px");function k(t,e){var n=null==t?null:T.find((function(e){return h.isEnharmonic(e,t)})),s=null!=t&&null!=n;return r.default.createElement(l.default,{key:e,pitch:s?n:t,isHighlight:s,onKeyPress:u,onKeyRelease:g,showLabel:b})}return r.default.createElement("div",{className:"piano",style:{width:E}},r.default.createElement("div",{className:"keys white-keys"},x.map(k)),r.default.createElement("div",{className:"keys black-keys"},S.map(k)))};e.default=m},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n(7);e.AssertionError=s.default;var i=n(3);e.EtudeError=i.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n(11);e.Accidental=s.default;var i=n(69);e.Chord=i.default;var r=n(33);e.Degree=r.default;var o=n(13);e.Direction=o.default;var a=n(70);e.Dynamic=a.default;var l=n(26);e.Interval=l.default;var u=n(21);e.Key=u.default;var c=n(35);e.KeySignature=c.default;var h=n(9);e.Letter=h.default;var d=n(71);e.Mode=d.default;var f=n(14);e.MusicConstants=f.default;var p=n(72);e.Note=p.default;var m=n(15);e.Pitch=m.default;var g=n(16);e.Policy=g.default;var _=n(19);e.Scale=_.default;var v=n(73);e.Tempo=v.default;var y=n(74);e.TimeSignature=y.default;var b=n(22);e.Value=b.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=n(7),i=n(3),r=n(12),o=n(5),a=n(8),l=n(17),u=n(18),c=n(33),h=n(13),d=n(26),f=n(15),p=n(19);class m{constructor(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:m.Inversion.ROOT;if(t instanceof f.default){if(arguments.length<2||arguments.length>3)throw new Error("Invalid number of arguments for chord constructor");this.pitches=m.builder().setRoot(t).add(e).setInversion(n).build().pitches}else t instanceof Array&&(this.pitches=t)}static fromString(t){return a.default.of(t).filter((t=>null!=t),i.default.forNull(m)).parse((t=>{if(!t.includes("[")||!t.includes("]"))return o.default.empty(i.default.forInvalid(m,t,"missing brackets that enclose pitches"));if(!t.startsWith("[")||!t.endsWith("]"))return o.default.empty(i.default.forInvalid(m,t,"contains extra information"));const e=t.substring(1,t.length-1);if(e.includes("[")||e.includes("]"))return o.default.empty(i.default.forInvalid(m,t,"contains extra brackets"));const n=e.split(","),s=new f.default[n.length];for(let r=0;r<n.length;++r){const e=f.default.fromString(n[r]);if(!e.isPresent())return o.default.empty(i.default.forInvalid(m,t,e.getException().message));s[r]=e.get()}return o.default.of(s)})).get((t=>new m(t[0])))}toString(){return"["+this.pitches.join(", ")+"]"}stream(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h.default.DEFAULT;return u.default.fromIterator(this.iterator(t))}iterator(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h.default.DEFAULT;const e=this.pitches.map((t=>t.getKey())),n=t==h.default.ASCENDING?r.default.of(e):r.default.of(e).reverse();return n.next(),l.default.of(this.pitches[0],t==h.default.ASCENDING?t=>t.getHigherPitch(n.next().value).get():t=>t.getLowerPitch(n.next().value).get())}getPitches(){return this.pitches.slice()}static builder(){return new m.Builder}}!function(t){class e{constructor(){++e.size,e._values.push(this)}static values(){return e._values.slice()}ordinal(){return e._values.indexOf(this)}static valueOf(t){let n=e[t];if(n instanceof e)return n;throw i.default.forInvalid(e,t)}getValue(){return this.ordinal()}toString(){return Object.keys(e).find((t=>e[t]===this))}}e.size=0,e._values=[],e.ROOT=new e,e.FIRST=new e,e.SECOND=new e,e.THIRD=new e,t.Inversion=e;class n{constructor(t){this.intervalPattern=t}getIntervalPattern(){return this.intervalPattern.slice()}}n.MAJOR=new n([new d.default(d.default.Quality.PERFECT,1),new d.default(d.default.Quality.MAJOR,3),new d.default(d.default.Quality.PERFECT,5)]),n.MINOR=new n([new d.default(d.default.Quality.PERFECT,1),new d.default(d.default.Quality.MINOR,3),new d.default(d.default.Quality.PERFECT,5)]),n.DIMINISHED=new n([new d.default(d.default.Quality.PERFECT,1),new d.default(d.default.Quality.MINOR,3),new d.default(d.default.Quality.DIMINISHED,5)]),n.AUGMENTED=new n([new d.default(d.default.Quality.PERFECT,1),new d.default(d.default.Quality.MAJOR,3),new d.default(d.default.Quality.AUGMENTED,5)]),n.MAJOR_SEVENTH=new n([new d.default(d.default.Quality.PERFECT,1),new d.default(d.default.Quality.MAJOR,3),new d.default(d.default.Quality.PERFECT,5),new d.default(d.default.Quality.MAJOR,7)]),n.MINOR_SEVENTH=new n([new d.default(d.default.Quality.PERFECT,1),new d.default(d.default.Quality.MINOR,3),new d.default(d.default.Quality.PERFECT,5),new d.default(d.default.Quality.MINOR,7)]),n.DOMINANT_SEVENTH=new n([new d.default(d.default.Quality.PERFECT,1),new d.default(d.default.Quality.MAJOR,3),new d.default(d.default.Quality.PERFECT,5),new d.default(d.default.Quality.MINOR,7)]),n.DIMINISHED_SEVENTH=new n([new d.default(d.default.Quality.PERFECT,1),new d.default(d.default.Quality.MINOR,3),new d.default(d.default.Quality.DIMINISHED,5),new d.default(d.default.Quality.DIMINISHED,7)]),n.HALF_DIMINISHED_SEVENTH=new n([new d.default(d.default.Quality.PERFECT,1),new d.default(d.default.Quality.MINOR,3),new d.default(d.default.Quality.DIMINISHED,5),new d.default(d.default.Quality.MINOR,7)]),n.MINOR_MAJOR_SEVENTH=new n([new d.default(d.default.Quality.PERFECT,1),new d.default(d.default.Quality.MINOR,3),new d.default(d.default.Quality.PERFECT,5),new d.default(d.default.Quality.MAJOR,7)]),n.AUGMENTED_MAJOR_SEVENTH=new n([new d.default(d.default.Quality.PERFECT,1),new d.default(d.default.Quality.MAJOR,3),new d.default(d.default.Quality.AUGMENTED,5),new d.default(d.default.Quality.MAJOR,7)]),t.Quality=n;t.Builder=class{constructor(){this.pitches=[],this.bottomDegree=c.default.TONIC}setRoot(t){return this.root=t,this}add(t){return t instanceof d.default?this.pitches.push(this.root.step(t).get()):t instanceof n&&t.getIntervalPattern().forEach((t=>this.add(t))),this}setInversion(t){switch(t){case e.ROOT:return this.setBottomDegree(c.default.TONIC);case e.FIRST:return this.setBottomDegree(c.default.MEDIANT);case e.SECOND:return this.setBottomDegree(c.default.DOMINANT);case e.THIRD:return this.setBottomDegree(c.default.LEADING_TONE);default:throw new s.default("Invalid inversion: "+t)}}setBottomDegree(t){return this.bottomDegree=t,this}build(){const e=this.pitches.slice(),n=new p.default(new f.default(this.root.getKey(),4),p.default.Quality.MAJOR).getPitches()[this.bottomDegree.getValue()-1].getKey().getLetter(),s=e.find((t=>t.getKey().getLetter()==n)),r=o.default.ofNullable(s);if(!r.isPresent())throw i.default.forIllegalState(t,"Unable to invert chord: missing "+this.bottomDegree+" pitch");const a=r.get();for(;a!=e[0];)e.push(a.getHigherPitch(e.shift().getKey()).get());return new t(e)}}}(m||(m={})),e.default=m},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=n(3),i=n(5),r=n(6);class o{constructor(t){this.velocity=t,++o.size,o._values.push(this),this.velocity=r.default.clamp(o.MINIMUM_VELOCITY,o.MAXIMUM_VELOCITY,t)}static values(){return o._values.slice()}ordinal(){return o._values.indexOf(this)}static valueOf(t){const e=o[t];if(e instanceof o)return e;throw s.default.forInvalid(o,t)}crescendo(t){return new o(this.velocity+t)}diminuendo(t){return new o(this.velocity-t)}static fromString(t){return i.default.ofNullable(t).map((t=>t.trim())).filter((t=>!t.isEmpty())).flatMap((t=>{let e;switch(t){case"ppp":e=o.PIANISSISSIMO;break;case"pp":e=o.PIANISSIMO;break;case"p":e=o.PIANO;break;case"mp":e=o.MEZZO_PIANO;break;case"mf":e=o.MEZZO_FORTE;break;case"f":e=o.FORTE;break;case"ff":e=o.FORTISSIMO;break;case"fff":e=o.FORTISSISSIMO;break;default:e=null}return i.default.ofNullable(e)}))}toString(){return this.velocity.toString()}getVelocity(){return this.velocity}}o.MINIMUM_VELOCITY=0,o.MAXIMUM_VELOCITY=127,o.size=0,o._values=[],o.PIANISSISSIMO=new o(16),o.PIANISSIMO=new o(32),o.PIANO=new o(48),o.MEZZO_PIANO=new o(64),o.MEZZO_FORTE=new o(80),o.FORTE=new o(96),o.FORTISSIMO=new o(112),o.FORTISSISSIMO=new o(127),e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=n(7),i=n(3),r=n(13);class o{constructor(t){this.stepPattern=t,++o.size,o._values.push(this),this.ascending=t.slice(),this.descending=t.slice().reverse().map((t=>-t))}static values(){return o._values.slice()}ordinal(){return o._values.indexOf(this)}static valueOf(t){const e=o[t];if(e instanceof o)return e;throw i.default.forInvalid(o,t)}toString(){return Object.keys(r.default).find((t=>r.default[t]===this))}getStepPattern(){switch(arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.default.DEFAULT){case r.default.ASCENDING:return this.ascending.slice();case r.default.DESCENDING:return this.descending.slice();default:throw new s.default("Invalid direction")}}}o.size=0,o._values=[],o.IONIAN=new o([2,2,1,2,2,2,1]),o.DORIAN=new o([2,1,2,2,2,1,2]),o.PHRYGIAN=new o([1,2,2,2,1,2,2]),o.LYDIAN=new o([2,2,2,1,2,2,1]),o.MIXOLYDIAN=new o([2,2,1,2,2,1,2]),o.AEOLIAN=new o([2,1,2,2,1,2,2]),o.LOCRIAN=new o([1,2,2,1,2,2,2]),e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=n(3),i=n(8),r=n(15),o=n(22);class a{constructor(t,e){this.pitch=t,this.value=e}apply(t){const e=this.pitch.apply(t);return this.pitch===e?this:new a(e,this.value)}static fromString(t){return i.default.of(t).filter((t=>null!=t),s.default.forNull(a)).map((t=>t.split("["))).filter((t=>t.length>=2),s.default.forInvalid(a,t,"missing information")).filter((t=>t.length<=2),s.default.forInvalid(a,t,"contains extra information")).filter((t=>0!==t[0].trim().length&&0!==t[1].trim().length),s.default.forInvalid(a,t,"missing information")).filter((t=>t[1].includes("]")),s.default.forInvalid(a,t,"missing closing bracket")).filter((t=>t[1].endsWith("]")),s.default.forInvalid(a,t,"contains extra information")).parse((t=>r.default.fromString(t[0]))).parse((t=>o.default.fromString(t[1].substring(0,t[1].length-1)))).get((t=>new a(t[0],t[1])))}toString(){return this.pitch+"["+this.value+"]"}equals(t){if(!(t instanceof a))return!1;if(t===this)return!0;let e=t;return this.pitch.equals(e.getPitch())&&this.value===e.getValue()}getPitch(){return this.pitch}getValue(){return this.value}}e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=n(3),i=n(22);class r{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.default.QUARTER,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"[".concat(e,"] = ").concat(t);if(this.bpm=t,e instanceof i.default)this.beatValue=e,this.tempoMarking=n;else if("string"===typeof e){if(2!==arguments.length)throw s.default.forIllegalArgument(r,e,"Invalid number of arguments");this.beatValue=i.default.QUARTER,this.tempoMarking=e}}getBPM(){return this.bpm}getBeatValue(){return this.beatValue}getTempoMarking(){return this.tempoMarking}}r.LARGHISSIMO=new r(24,"Larghissimo"),r.GRAVE=new r(35,"Grave"),r.LARGO=new r(50,"Largo"),r.LENTO=new r(53,"Lento"),r.LARGHETTO=new r(63,"Larghetto"),r.ADAGIO=new r(71,"Adagio"),r.ADAGIETTO=new r(74,"Adagietto"),r.ANDANTE=new r(92,"Andante"),r.ANDANTINO=new r(94,"Andantino"),r.MARCIA_MODERATO=new r(84,"Marcia Moderato"),r.ANDANTE_MODERATO=new r(102,"Andante Moderato"),r.MODERATO=new r(114,"Moderato"),r.ALLEGRETTO=new r(116,"Allegretto"),r.ALLEGRO_MODERATO=new r(118,"Allegro Moderato"),r.ALLEGRO=new r(144,"Allegro"),r.VIVACE=new r(172,"Vivace"),r.VIVACISSIMO=new r(174,"Vivacissimo"),r.ALLEGRISSIMO=new r(174,"Allegrissimo"),r.ALLEGRO_VIVACE=new r(174,"Allegro Vivace"),r.PRESTO=new r(184,"Presto"),r.PRESTISSIMO=new r(200,"Prestissimo"),e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=n(22);class i{constructor(t,e){this.beatsPerMeasure=t,this.oneBeat="number"===typeof e?new s.default(s.default.Type.fromBaseDuration(1/e)):e}getDurationOfMeasure(){return this.beatsPerMeasure*this.oneBeat.getDuration()}getBeatsPerMeasure(){return this.beatsPerMeasure}getOneBeat(){return this.oneBeat}}i.COMMON_TIME=new i(4,s.default.QUARTER),e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n(12);e.CircularIterator=s.default;var i=n(34);e.CircularStream=i.default;var r=n(8);e.EtudeParser=r.default;var o=n(5);e.Exceptional=o.default;var a=n(20);e.ImmutablePrioritySet=a.default;var l=n(17);e.InfiniteIterator=l.default;var u=n(32);e.InfiniteStream=u.default;var c=n(6);e.MathUtil=c.default;var h=n(18);e.StreamUtil=h.default},function(t,e,n){},,function(t,e,n){"use strict";n(24);var s=n(2),i=60103;if(e.Fragment=60107,"function"===typeof Symbol&&Symbol.for){var r=Symbol.for;i=r("react.element"),e.Fragment=r("react.fragment")}var o=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a=Object.prototype.hasOwnProperty,l={key:!0,ref:!0,__self:!0,__source:!0};function u(t,e,n){var s,r={},u=null,c=null;for(s in void 0!==n&&(u=""+n),void 0!==e.key&&(u=""+e.key),void 0!==e.ref&&(c=e.ref),e)a.call(e,s)&&!l.hasOwnProperty(s)&&(r[s]=e[s]);if(t&&t.defaultProps)for(s in e=t.defaultProps)void 0===r[s]&&(r[s]=e[s]);return{$$typeof:i,type:t,key:u,ref:c,props:r,_owner:o.current}}e.jsx=u,e.jsxs=u}]]);
//# sourceMappingURL=2.2057edb6.chunk.js.map